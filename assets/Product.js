var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/preact/dist/preact.module.js
var preact_module_exports = {};
__export(preact_module_exports, {
  Component: () => _,
  Fragment: () => d,
  cloneElement: () => B,
  createContext: () => D,
  createElement: () => v,
  createRef: () => p,
  h: () => v,
  hydrate: () => q,
  isValidElement: () => i,
  options: () => l,
  render: () => S,
  toChildArray: () => A
});
function a(n2, l3) {
  for (var u3 in l3)
    n2[u3] = l3[u3];
  return n2;
}
function h(n2) {
  var l3 = n2.parentNode;
  l3 && l3.removeChild(n2);
}
function v(l3, u3, i3) {
  var t3, o3, r3, f3 = {};
  for (r3 in u3)
    r3 == "key" ? t3 = u3[r3] : r3 == "ref" ? o3 = u3[r3] : f3[r3] = u3[r3];
  if (arguments.length > 2 && (f3.children = arguments.length > 3 ? n.call(arguments, 2) : i3), typeof l3 == "function" && l3.defaultProps != null)
    for (r3 in l3.defaultProps)
      f3[r3] === void 0 && (f3[r3] = l3.defaultProps[r3]);
  return y(l3, f3, t3, o3, null);
}
function y(n2, i3, t3, o3, r3) {
  var f3 = { type: n2, props: i3, key: t3, ref: o3, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, __h: null, constructor: void 0, __v: r3 == null ? ++u : r3 };
  return r3 == null && l.vnode != null && l.vnode(f3), f3;
}
function p() {
  return { current: null };
}
function d(n2) {
  return n2.children;
}
function _(n2, l3) {
  this.props = n2, this.context = l3;
}
function k(n2, l3) {
  if (l3 == null)
    return n2.__ ? k(n2.__, n2.__.__k.indexOf(n2) + 1) : null;
  for (var u3; l3 < n2.__k.length; l3++)
    if ((u3 = n2.__k[l3]) != null && u3.__e != null)
      return u3.__e;
  return typeof n2.type == "function" ? k(n2) : null;
}
function b(n2) {
  var l3, u3;
  if ((n2 = n2.__) != null && n2.__c != null) {
    for (n2.__e = n2.__c.base = null, l3 = 0; l3 < n2.__k.length; l3++)
      if ((u3 = n2.__k[l3]) != null && u3.__e != null) {
        n2.__e = n2.__c.base = u3.__e;
        break;
      }
    return b(n2);
  }
}
function m(n2) {
  (!n2.__d && (n2.__d = true) && t.push(n2) && !g.__r++ || r !== l.debounceRendering) && ((r = l.debounceRendering) || o)(g);
}
function g() {
  for (var n2; g.__r = t.length; )
    n2 = t.sort(function(n3, l3) {
      return n3.__v.__b - l3.__v.__b;
    }), t = [], n2.some(function(n3) {
      var l3, u3, i3, t3, o3, r3;
      n3.__d && (o3 = (t3 = (l3 = n3).__v).__e, (r3 = l3.__P) && (u3 = [], (i3 = a({}, t3)).__v = t3.__v + 1, j(r3, t3, i3, l3.__n, r3.ownerSVGElement !== void 0, t3.__h != null ? [o3] : null, u3, o3 == null ? k(t3) : o3, t3.__h), z(u3, t3), t3.__e != o3 && b(t3)));
    });
}
function w(n2, l3, u3, i3, t3, o3, r3, f3, s3, a3) {
  var h3, v3, p3, _3, b3, m3, g3, w3 = i3 && i3.__k || c, A3 = w3.length;
  for (u3.__k = [], h3 = 0; h3 < l3.length; h3++)
    if ((_3 = u3.__k[h3] = (_3 = l3[h3]) == null || typeof _3 == "boolean" ? null : typeof _3 == "string" || typeof _3 == "number" || typeof _3 == "bigint" ? y(null, _3, null, null, _3) : Array.isArray(_3) ? y(d, { children: _3 }, null, null, null) : _3.__b > 0 ? y(_3.type, _3.props, _3.key, null, _3.__v) : _3) != null) {
      if (_3.__ = u3, _3.__b = u3.__b + 1, (p3 = w3[h3]) === null || p3 && _3.key == p3.key && _3.type === p3.type)
        w3[h3] = void 0;
      else
        for (v3 = 0; v3 < A3; v3++) {
          if ((p3 = w3[v3]) && _3.key == p3.key && _3.type === p3.type) {
            w3[v3] = void 0;
            break;
          }
          p3 = null;
        }
      j(n2, _3, p3 = p3 || e, t3, o3, r3, f3, s3, a3), b3 = _3.__e, (v3 = _3.ref) && p3.ref != v3 && (g3 || (g3 = []), p3.ref && g3.push(p3.ref, null, _3), g3.push(v3, _3.__c || b3, _3)), b3 != null ? (m3 == null && (m3 = b3), typeof _3.type == "function" && _3.__k === p3.__k ? _3.__d = s3 = x(_3, s3, n2) : s3 = P(n2, _3, p3, w3, b3, s3), typeof u3.type == "function" && (u3.__d = s3)) : s3 && p3.__e == s3 && s3.parentNode != n2 && (s3 = k(p3));
    }
  for (u3.__e = m3, h3 = A3; h3--; )
    w3[h3] != null && (typeof u3.type == "function" && w3[h3].__e != null && w3[h3].__e == u3.__d && (u3.__d = k(i3, h3 + 1)), N(w3[h3], w3[h3]));
  if (g3)
    for (h3 = 0; h3 < g3.length; h3++)
      M(g3[h3], g3[++h3], g3[++h3]);
}
function x(n2, l3, u3) {
  for (var i3, t3 = n2.__k, o3 = 0; t3 && o3 < t3.length; o3++)
    (i3 = t3[o3]) && (i3.__ = n2, l3 = typeof i3.type == "function" ? x(i3, l3, u3) : P(u3, i3, i3, t3, i3.__e, l3));
  return l3;
}
function A(n2, l3) {
  return l3 = l3 || [], n2 == null || typeof n2 == "boolean" || (Array.isArray(n2) ? n2.some(function(n3) {
    A(n3, l3);
  }) : l3.push(n2)), l3;
}
function P(n2, l3, u3, i3, t3, o3) {
  var r3, f3, e3;
  if (l3.__d !== void 0)
    r3 = l3.__d, l3.__d = void 0;
  else if (u3 == null || t3 != o3 || t3.parentNode == null)
    n:
      if (o3 == null || o3.parentNode !== n2)
        n2.appendChild(t3), r3 = null;
      else {
        for (f3 = o3, e3 = 0; (f3 = f3.nextSibling) && e3 < i3.length; e3 += 2)
          if (f3 == t3)
            break n;
        n2.insertBefore(t3, o3), r3 = o3;
      }
  return r3 !== void 0 ? r3 : t3.nextSibling;
}
function C(n2, l3, u3, i3, t3) {
  var o3;
  for (o3 in u3)
    o3 === "children" || o3 === "key" || o3 in l3 || H(n2, o3, null, u3[o3], i3);
  for (o3 in l3)
    t3 && typeof l3[o3] != "function" || o3 === "children" || o3 === "key" || o3 === "value" || o3 === "checked" || u3[o3] === l3[o3] || H(n2, o3, l3[o3], u3[o3], i3);
}
function $(n2, l3, u3) {
  l3[0] === "-" ? n2.setProperty(l3, u3) : n2[l3] = u3 == null ? "" : typeof u3 != "number" || s.test(l3) ? u3 : u3 + "px";
}
function H(n2, l3, u3, i3, t3) {
  var o3;
  n:
    if (l3 === "style")
      if (typeof u3 == "string")
        n2.style.cssText = u3;
      else {
        if (typeof i3 == "string" && (n2.style.cssText = i3 = ""), i3)
          for (l3 in i3)
            u3 && l3 in u3 || $(n2.style, l3, "");
        if (u3)
          for (l3 in u3)
            i3 && u3[l3] === i3[l3] || $(n2.style, l3, u3[l3]);
      }
    else if (l3[0] === "o" && l3[1] === "n")
      o3 = l3 !== (l3 = l3.replace(/Capture$/, "")), l3 = l3.toLowerCase() in n2 ? l3.toLowerCase().slice(2) : l3.slice(2), n2.l || (n2.l = {}), n2.l[l3 + o3] = u3, u3 ? i3 || n2.addEventListener(l3, o3 ? T : I, o3) : n2.removeEventListener(l3, o3 ? T : I, o3);
    else if (l3 !== "dangerouslySetInnerHTML") {
      if (t3)
        l3 = l3.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
      else if (l3 !== "href" && l3 !== "list" && l3 !== "form" && l3 !== "tabIndex" && l3 !== "download" && l3 in n2)
        try {
          n2[l3] = u3 == null ? "" : u3;
          break n;
        } catch (n3) {
        }
      typeof u3 == "function" || (u3 != null && (u3 !== false || l3[0] === "a" && l3[1] === "r") ? n2.setAttribute(l3, u3) : n2.removeAttribute(l3));
    }
}
function I(n2) {
  this.l[n2.type + false](l.event ? l.event(n2) : n2);
}
function T(n2) {
  this.l[n2.type + true](l.event ? l.event(n2) : n2);
}
function j(n2, u3, i3, t3, o3, r3, f3, e3, c3) {
  var s3, h3, v3, y3, p3, k3, b3, m3, g3, x3, A3, P2 = u3.type;
  if (u3.constructor !== void 0)
    return null;
  i3.__h != null && (c3 = i3.__h, e3 = u3.__e = i3.__e, u3.__h = null, r3 = [e3]), (s3 = l.__b) && s3(u3);
  try {
    n:
      if (typeof P2 == "function") {
        if (m3 = u3.props, g3 = (s3 = P2.contextType) && t3[s3.__c], x3 = s3 ? g3 ? g3.props.value : s3.__ : t3, i3.__c ? b3 = (h3 = u3.__c = i3.__c).__ = h3.__E : ("prototype" in P2 && P2.prototype.render ? u3.__c = h3 = new P2(m3, x3) : (u3.__c = h3 = new _(m3, x3), h3.constructor = P2, h3.render = O), g3 && g3.sub(h3), h3.props = m3, h3.state || (h3.state = {}), h3.context = x3, h3.__n = t3, v3 = h3.__d = true, h3.__h = []), h3.__s == null && (h3.__s = h3.state), P2.getDerivedStateFromProps != null && (h3.__s == h3.state && (h3.__s = a({}, h3.__s)), a(h3.__s, P2.getDerivedStateFromProps(m3, h3.__s))), y3 = h3.props, p3 = h3.state, v3)
          P2.getDerivedStateFromProps == null && h3.componentWillMount != null && h3.componentWillMount(), h3.componentDidMount != null && h3.__h.push(h3.componentDidMount);
        else {
          if (P2.getDerivedStateFromProps == null && m3 !== y3 && h3.componentWillReceiveProps != null && h3.componentWillReceiveProps(m3, x3), !h3.__e && h3.shouldComponentUpdate != null && h3.shouldComponentUpdate(m3, h3.__s, x3) === false || u3.__v === i3.__v) {
            h3.props = m3, h3.state = h3.__s, u3.__v !== i3.__v && (h3.__d = false), h3.__v = u3, u3.__e = i3.__e, u3.__k = i3.__k, u3.__k.forEach(function(n3) {
              n3 && (n3.__ = u3);
            }), h3.__h.length && f3.push(h3);
            break n;
          }
          h3.componentWillUpdate != null && h3.componentWillUpdate(m3, h3.__s, x3), h3.componentDidUpdate != null && h3.__h.push(function() {
            h3.componentDidUpdate(y3, p3, k3);
          });
        }
        h3.context = x3, h3.props = m3, h3.state = h3.__s, (s3 = l.__r) && s3(u3), h3.__d = false, h3.__v = u3, h3.__P = n2, s3 = h3.render(h3.props, h3.state, h3.context), h3.state = h3.__s, h3.getChildContext != null && (t3 = a(a({}, t3), h3.getChildContext())), v3 || h3.getSnapshotBeforeUpdate == null || (k3 = h3.getSnapshotBeforeUpdate(y3, p3)), A3 = s3 != null && s3.type === d && s3.key == null ? s3.props.children : s3, w(n2, Array.isArray(A3) ? A3 : [A3], u3, i3, t3, o3, r3, f3, e3, c3), h3.base = u3.__e, u3.__h = null, h3.__h.length && f3.push(h3), b3 && (h3.__E = h3.__ = null), h3.__e = false;
      } else
        r3 == null && u3.__v === i3.__v ? (u3.__k = i3.__k, u3.__e = i3.__e) : u3.__e = L(i3.__e, u3, i3, t3, o3, r3, f3, c3);
    (s3 = l.diffed) && s3(u3);
  } catch (n3) {
    u3.__v = null, (c3 || r3 != null) && (u3.__e = e3, u3.__h = !!c3, r3[r3.indexOf(e3)] = null), l.__e(n3, u3, i3);
  }
}
function z(n2, u3) {
  l.__c && l.__c(u3, n2), n2.some(function(u4) {
    try {
      n2 = u4.__h, u4.__h = [], n2.some(function(n3) {
        n3.call(u4);
      });
    } catch (n3) {
      l.__e(n3, u4.__v);
    }
  });
}
function L(l3, u3, i3, t3, o3, r3, f3, c3) {
  var s3, a3, v3, y3 = i3.props, p3 = u3.props, d3 = u3.type, _3 = 0;
  if (d3 === "svg" && (o3 = true), r3 != null) {
    for (; _3 < r3.length; _3++)
      if ((s3 = r3[_3]) && "setAttribute" in s3 == !!d3 && (d3 ? s3.localName === d3 : s3.nodeType === 3)) {
        l3 = s3, r3[_3] = null;
        break;
      }
  }
  if (l3 == null) {
    if (d3 === null)
      return document.createTextNode(p3);
    l3 = o3 ? document.createElementNS("http://www.w3.org/2000/svg", d3) : document.createElement(d3, p3.is && p3), r3 = null, c3 = false;
  }
  if (d3 === null)
    y3 === p3 || c3 && l3.data === p3 || (l3.data = p3);
  else {
    if (r3 = r3 && n.call(l3.childNodes), a3 = (y3 = i3.props || e).dangerouslySetInnerHTML, v3 = p3.dangerouslySetInnerHTML, !c3) {
      if (r3 != null)
        for (y3 = {}, _3 = 0; _3 < l3.attributes.length; _3++)
          y3[l3.attributes[_3].name] = l3.attributes[_3].value;
      (v3 || a3) && (v3 && (a3 && v3.__html == a3.__html || v3.__html === l3.innerHTML) || (l3.innerHTML = v3 && v3.__html || ""));
    }
    if (C(l3, p3, y3, o3, c3), v3)
      u3.__k = [];
    else if (_3 = u3.props.children, w(l3, Array.isArray(_3) ? _3 : [_3], u3, i3, t3, o3 && d3 !== "foreignObject", r3, f3, r3 ? r3[0] : i3.__k && k(i3, 0), c3), r3 != null)
      for (_3 = r3.length; _3--; )
        r3[_3] != null && h(r3[_3]);
    c3 || ("value" in p3 && (_3 = p3.value) !== void 0 && (_3 !== l3.value || d3 === "progress" && !_3 || d3 === "option" && _3 !== y3.value) && H(l3, "value", _3, y3.value, false), "checked" in p3 && (_3 = p3.checked) !== void 0 && _3 !== l3.checked && H(l3, "checked", _3, y3.checked, false));
  }
  return l3;
}
function M(n2, u3, i3) {
  try {
    typeof n2 == "function" ? n2(u3) : n2.current = u3;
  } catch (n3) {
    l.__e(n3, i3);
  }
}
function N(n2, u3, i3) {
  var t3, o3;
  if (l.unmount && l.unmount(n2), (t3 = n2.ref) && (t3.current && t3.current !== n2.__e || M(t3, null, u3)), (t3 = n2.__c) != null) {
    if (t3.componentWillUnmount)
      try {
        t3.componentWillUnmount();
      } catch (n3) {
        l.__e(n3, u3);
      }
    t3.base = t3.__P = null;
  }
  if (t3 = n2.__k)
    for (o3 = 0; o3 < t3.length; o3++)
      t3[o3] && N(t3[o3], u3, typeof n2.type != "function");
  i3 || n2.__e == null || h(n2.__e), n2.__e = n2.__d = void 0;
}
function O(n2, l3, u3) {
  return this.constructor(n2, u3);
}
function S(u3, i3, t3) {
  var o3, r3, f3;
  l.__ && l.__(u3, i3), r3 = (o3 = typeof t3 == "function") ? null : t3 && t3.__k || i3.__k, f3 = [], j(i3, u3 = (!o3 && t3 || i3).__k = v(d, null, [u3]), r3 || e, e, i3.ownerSVGElement !== void 0, !o3 && t3 ? [t3] : r3 ? null : i3.firstChild ? n.call(i3.childNodes) : null, f3, !o3 && t3 ? t3 : r3 ? r3.__e : i3.firstChild, o3), z(f3, u3);
}
function q(n2, l3) {
  S(n2, l3, q);
}
function B(l3, u3, i3) {
  var t3, o3, r3, f3 = a({}, l3.props);
  for (r3 in u3)
    r3 == "key" ? t3 = u3[r3] : r3 == "ref" ? o3 = u3[r3] : f3[r3] = u3[r3];
  return arguments.length > 2 && (f3.children = arguments.length > 3 ? n.call(arguments, 2) : i3), y(l3.type, f3, t3 || l3.key, o3 || l3.ref, null);
}
function D(n2, l3) {
  var u3 = { __c: l3 = "__cC" + f++, __: n2, Consumer: function(n3, l4) {
    return n3.children(l4);
  }, Provider: function(n3) {
    var u4, i3;
    return this.getChildContext || (u4 = [], (i3 = {})[l3] = this, this.getChildContext = function() {
      return i3;
    }, this.shouldComponentUpdate = function(n4) {
      this.props.value !== n4.value && u4.some(m);
    }, this.sub = function(n4) {
      u4.push(n4);
      var l4 = n4.componentWillUnmount;
      n4.componentWillUnmount = function() {
        u4.splice(u4.indexOf(n4), 1), l4 && l4.call(n4);
      };
    }), n3.children;
  } };
  return u3.Provider.__ = u3.Consumer.contextType = u3;
}
var n, l, u, i, t, o, r, f, e, c, s;
var init_preact_module = __esm({
  "node_modules/preact/dist/preact.module.js"() {
    init_react_shim();
    e = {};
    c = [];
    s = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;
    n = c.slice, l = { __e: function(n2, l3, u3, i3) {
      for (var t3, o3, r3; l3 = l3.__; )
        if ((t3 = l3.__c) && !t3.__)
          try {
            if ((o3 = t3.constructor) && o3.getDerivedStateFromError != null && (t3.setState(o3.getDerivedStateFromError(n2)), r3 = t3.__d), t3.componentDidCatch != null && (t3.componentDidCatch(n2, i3 || {}), r3 = t3.__d), r3)
              return t3.__E = t3;
          } catch (l4) {
            n2 = l4;
          }
      throw n2;
    } }, u = 0, i = function(n2) {
      return n2 != null && n2.constructor === void 0;
    }, _.prototype.setState = function(n2, l3) {
      var u3;
      u3 = this.__s != null && this.__s !== this.state ? this.__s : this.__s = a({}, this.state), typeof n2 == "function" && (n2 = n2(a({}, u3), this.props)), n2 && a(u3, n2), n2 != null && this.__v && (l3 && this.__h.push(l3), m(this));
    }, _.prototype.forceUpdate = function(n2) {
      this.__v && (this.__e = true, n2 && this.__h.push(n2), m(this));
    }, _.prototype.render = d, t = [], o = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, g.__r = 0, f = 0;
  }
});

// react-shim.js
var init_react_shim = __esm({
  "react-shim.js"() {
    init_preact_module();
  }
});

// node_modules/preact/hooks/dist/hooks.module.js
var hooks_module_exports = {};
__export(hooks_module_exports, {
  useCallback: () => A2,
  useContext: () => F,
  useDebugValue: () => T2,
  useEffect: () => y2,
  useErrorBoundary: () => q2,
  useImperativeHandle: () => s2,
  useLayoutEffect: () => d2,
  useMemo: () => _2,
  useReducer: () => p2,
  useRef: () => h2,
  useState: () => m2
});
function l2(t3, r3) {
  l.__h && l.__h(u2, t3, o2 || r3), o2 = 0;
  var i3 = u2.__H || (u2.__H = { __: [], __h: [] });
  return t3 >= i3.__.length && i3.__.push({}), i3.__[t3];
}
function m2(n2) {
  return o2 = 1, p2(w2, n2);
}
function p2(n2, r3, o3) {
  var i3 = l2(t2++, 2);
  return i3.t = n2, i3.__c || (i3.__ = [o3 ? o3(r3) : w2(void 0, r3), function(n3) {
    var t3 = i3.t(i3.__[0], n3);
    i3.__[0] !== t3 && (i3.__ = [t3, i3.__[1]], i3.__c.setState({}));
  }], i3.__c = u2), i3.__;
}
function y2(r3, o3) {
  var i3 = l2(t2++, 3);
  !l.__s && k2(i3.__H, o3) && (i3.__ = r3, i3.__H = o3, u2.__H.__h.push(i3));
}
function d2(r3, o3) {
  var i3 = l2(t2++, 4);
  !l.__s && k2(i3.__H, o3) && (i3.__ = r3, i3.__H = o3, u2.__h.push(i3));
}
function h2(n2) {
  return o2 = 5, _2(function() {
    return { current: n2 };
  }, []);
}
function s2(n2, t3, u3) {
  o2 = 6, d2(function() {
    return typeof n2 == "function" ? (n2(t3()), function() {
      return n2(null);
    }) : n2 ? (n2.current = t3(), function() {
      return n2.current = null;
    }) : void 0;
  }, u3 == null ? u3 : u3.concat(n2));
}
function _2(n2, u3) {
  var r3 = l2(t2++, 7);
  return k2(r3.__H, u3) && (r3.__ = n2(), r3.__H = u3, r3.__h = n2), r3.__;
}
function A2(n2, t3) {
  return o2 = 8, _2(function() {
    return n2;
  }, t3);
}
function F(n2) {
  var r3 = u2.context[n2.__c], o3 = l2(t2++, 9);
  return o3.c = n2, r3 ? (o3.__ == null && (o3.__ = true, r3.sub(u2)), r3.props.value) : n2.__;
}
function T2(t3, u3) {
  l.useDebugValue && l.useDebugValue(u3 ? u3(t3) : t3);
}
function q2(n2) {
  var r3 = l2(t2++, 10), o3 = m2();
  return r3.__ = n2, u2.componentDidCatch || (u2.componentDidCatch = function(n3) {
    r3.__ && r3.__(n3), o3[1](n3);
  }), [o3[0], function() {
    o3[1](void 0);
  }];
}
function x2() {
  for (var t3; t3 = i2.shift(); )
    if (t3.__P)
      try {
        t3.__H.__h.forEach(g2), t3.__H.__h.forEach(j2), t3.__H.__h = [];
      } catch (u3) {
        t3.__H.__h = [], l.__e(u3, t3.__v);
      }
}
function g2(n2) {
  var t3 = u2, r3 = n2.__c;
  typeof r3 == "function" && (n2.__c = void 0, r3()), u2 = t3;
}
function j2(n2) {
  var t3 = u2;
  n2.__c = n2.__(), u2 = t3;
}
function k2(n2, t3) {
  return !n2 || n2.length !== t3.length || t3.some(function(t4, u3) {
    return t4 !== n2[u3];
  });
}
function w2(n2, t3) {
  return typeof t3 == "function" ? t3(n2) : t3;
}
var t2, u2, r2, o2, i2, c2, f2, e2, a2, v2, b2;
var init_hooks_module = __esm({
  "node_modules/preact/hooks/dist/hooks.module.js"() {
    init_react_shim();
    init_preact_module();
    o2 = 0;
    i2 = [];
    c2 = l.__b;
    f2 = l.__r;
    e2 = l.diffed;
    a2 = l.__c;
    v2 = l.unmount;
    l.__b = function(n2) {
      u2 = null, c2 && c2(n2);
    }, l.__r = function(n2) {
      f2 && f2(n2), t2 = 0;
      var r3 = (u2 = n2.__c).__H;
      r3 && (r3.__h.forEach(g2), r3.__h.forEach(j2), r3.__h = []);
    }, l.diffed = function(t3) {
      e2 && e2(t3);
      var o3 = t3.__c;
      o3 && o3.__H && o3.__H.__h.length && (i2.push(o3) !== 1 && r2 === l.requestAnimationFrame || ((r2 = l.requestAnimationFrame) || function(n2) {
        var t4, u3 = function() {
          clearTimeout(r3), b2 && cancelAnimationFrame(t4), setTimeout(n2);
        }, r3 = setTimeout(u3, 100);
        b2 && (t4 = requestAnimationFrame(u3));
      })(x2)), u2 = null;
    }, l.__c = function(t3, u3) {
      u3.some(function(t4) {
        try {
          t4.__h.forEach(g2), t4.__h = t4.__h.filter(function(n2) {
            return !n2.__ || j2(n2);
          });
        } catch (r3) {
          u3.some(function(n2) {
            n2.__h && (n2.__h = []);
          }), u3 = [], l.__e(r3, t4.__v);
        }
      }), a2 && a2(t3, u3);
    }, l.unmount = function(t3) {
      v2 && v2(t3);
      var u3, r3 = t3.__c;
      r3 && r3.__H && (r3.__H.__.forEach(function(n2) {
        try {
          g2(n2);
        } catch (n3) {
          u3 = n3;
        }
      }), u3 && l.__e(u3, r3.__v));
    };
    b2 = typeof requestAnimationFrame == "function";
  }
});

// node_modules/preact/compat/dist/compat.js
var require_compat = __commonJS({
  "node_modules/preact/compat/dist/compat.js"(exports) {
    init_react_shim();
    var n2 = (init_hooks_module(), __toCommonJS(hooks_module_exports));
    var t3 = (init_preact_module(), __toCommonJS(preact_module_exports));
    function e3(n3, t4) {
      for (var e4 in t4)
        n3[e4] = t4[e4];
      return n3;
    }
    function r3(n3, t4) {
      for (var e4 in n3)
        if (e4 !== "__source" && !(e4 in t4))
          return true;
      for (var r4 in t4)
        if (r4 !== "__source" && n3[r4] !== t4[r4])
          return true;
      return false;
    }
    function o3(n3) {
      this.props = n3;
    }
    function u3(n3, e4) {
      function o4(n4) {
        var t4 = this.props.ref, o5 = t4 == n4.ref;
        return !o5 && t4 && (t4.call ? t4(null) : t4.current = null), e4 ? !e4(this.props, n4) || !o5 : r3(this.props, n4);
      }
      function u4(e5) {
        return this.shouldComponentUpdate = o4, t3.createElement(n3, e5);
      }
      return u4.displayName = "Memo(" + (n3.displayName || n3.name) + ")", u4.prototype.isReactComponent = true, u4.__f = true, u4;
    }
    (o3.prototype = new t3.Component()).isPureReactComponent = true, o3.prototype.shouldComponentUpdate = function(n3, t4) {
      return r3(this.props, n3) || r3(this.state, t4);
    };
    var i3 = t3.options.__b;
    t3.options.__b = function(n3) {
      n3.type && n3.type.__f && n3.ref && (n3.props.ref = n3.ref, n3.ref = null), i3 && i3(n3);
    };
    var l3 = typeof Symbol != "undefined" && Symbol.for && Symbol.for("react.forward_ref") || 3911;
    function c3(n3) {
      function t4(t5, r4) {
        var o4 = e3({}, t5);
        return delete o4.ref, n3(o4, !(r4 = t5.ref || r4) || typeof r4 == "object" && Object.keys(r4).length === 0 ? null : r4);
      }
      return t4.$$typeof = l3, t4.render = t4, t4.prototype.isReactComponent = t4.__f = true, t4.displayName = "ForwardRef(" + (n3.displayName || n3.name) + ")", t4;
    }
    var f3 = function(n3, e4) {
      return n3 == null ? null : t3.toChildArray(t3.toChildArray(n3).map(e4));
    };
    var a3 = { map: f3, forEach: f3, count: function(n3) {
      return n3 ? t3.toChildArray(n3).length : 0;
    }, only: function(n3) {
      var e4 = t3.toChildArray(n3);
      if (e4.length !== 1)
        throw "Children.only";
      return e4[0];
    }, toArray: t3.toChildArray };
    var s3 = t3.options.__e;
    t3.options.__e = function(n3, t4, e4, r4) {
      if (n3.then) {
        for (var o4, u4 = t4; u4 = u4.__; )
          if ((o4 = u4.__c) && o4.__c)
            return t4.__e == null && (t4.__e = e4.__e, t4.__k = e4.__k), o4.__c(n3, t4);
      }
      s3(n3, t4, e4, r4);
    };
    var p3 = t3.options.unmount;
    function h3() {
      this.__u = 0, this.t = null, this.__b = null;
    }
    function v3(n3) {
      var t4 = n3.__.__c;
      return t4 && t4.__e && t4.__e(n3);
    }
    function d3(n3) {
      var e4, r4, o4;
      function u4(u5) {
        if (e4 || (e4 = n3()).then(function(n4) {
          r4 = n4.default || n4;
        }, function(n4) {
          o4 = n4;
        }), o4)
          throw o4;
        if (!r4)
          throw e4;
        return t3.createElement(r4, u5);
      }
      return u4.displayName = "Lazy", u4.__f = true, u4;
    }
    function m3() {
      this.o = null, this.u = null;
    }
    t3.options.unmount = function(n3) {
      var t4 = n3.__c;
      t4 && t4.__R && t4.__R(), t4 && n3.__h === true && (n3.type = null), p3 && p3(n3);
    }, (h3.prototype = new t3.Component()).__c = function(n3, t4) {
      var e4 = t4.__c, r4 = this;
      r4.t == null && (r4.t = []), r4.t.push(e4);
      var o4 = v3(r4.__v), u4 = false, i4 = function() {
        u4 || (u4 = true, e4.__R = null, o4 ? o4(l4) : l4());
      };
      e4.__R = i4;
      var l4 = function() {
        if (!--r4.__u) {
          if (r4.state.__e) {
            var n4 = r4.state.__e;
            r4.__v.__k[0] = function n5(t6, e5, r5) {
              return t6 && (t6.__v = null, t6.__k = t6.__k && t6.__k.map(function(t7) {
                return n5(t7, e5, r5);
              }), t6.__c && t6.__c.__P === e5 && (t6.__e && r5.insertBefore(t6.__e, t6.__d), t6.__c.__e = true, t6.__c.__P = r5)), t6;
            }(n4, n4.__c.__P, n4.__c.__O);
          }
          var t5;
          for (r4.setState({ __e: r4.__b = null }); t5 = r4.t.pop(); )
            t5.forceUpdate();
        }
      }, c4 = t4.__h === true;
      r4.__u++ || c4 || r4.setState({ __e: r4.__b = r4.__v.__k[0] }), n3.then(i4, i4);
    }, h3.prototype.componentWillUnmount = function() {
      this.t = [];
    }, h3.prototype.render = function(n3, r4) {
      if (this.__b) {
        if (this.__v.__k) {
          var o4 = document.createElement("div"), u4 = this.__v.__k[0].__c;
          this.__v.__k[0] = function n4(t4, r5, o5) {
            return t4 && (t4.__c && t4.__c.__H && (t4.__c.__H.__.forEach(function(n5) {
              typeof n5.__c == "function" && n5.__c();
            }), t4.__c.__H = null), (t4 = e3({}, t4)).__c != null && (t4.__c.__P === o5 && (t4.__c.__P = r5), t4.__c = null), t4.__k = t4.__k && t4.__k.map(function(t5) {
              return n4(t5, r5, o5);
            })), t4;
          }(this.__b, o4, u4.__O = u4.__P);
        }
        this.__b = null;
      }
      var i4 = r4.__e && t3.createElement(t3.Fragment, null, n3.fallback);
      return i4 && (i4.__h = null), [t3.createElement(t3.Fragment, null, r4.__e ? null : n3.children), i4];
    };
    var x3 = function(n3, t4, e4) {
      if (++e4[1] === e4[0] && n3.u.delete(t4), n3.props.revealOrder && (n3.props.revealOrder[0] !== "t" || !n3.u.size))
        for (e4 = n3.o; e4; ) {
          for (; e4.length > 3; )
            e4.pop()();
          if (e4[1] < e4[0])
            break;
          n3.o = e4 = e4[2];
        }
    };
    function y3(n3) {
      return this.getChildContext = function() {
        return n3.context;
      }, n3.children;
    }
    function b3(n3) {
      var e4 = this, r4 = n3.i;
      e4.componentWillUnmount = function() {
        t3.render(null, e4.l), e4.l = null, e4.i = null;
      }, e4.i && e4.i !== r4 && e4.componentWillUnmount(), n3.__v ? (e4.l || (e4.i = r4, e4.l = { nodeType: 1, parentNode: r4, childNodes: [], appendChild: function(n4) {
        this.childNodes.push(n4), e4.i.appendChild(n4);
      }, insertBefore: function(n4, t4) {
        this.childNodes.push(n4), e4.i.appendChild(n4);
      }, removeChild: function(n4) {
        this.childNodes.splice(this.childNodes.indexOf(n4) >>> 1, 1), e4.i.removeChild(n4);
      } }), t3.render(t3.createElement(y3, { context: e4.context }, n3.__v), e4.l)) : e4.l && e4.componentWillUnmount();
    }
    function _3(n3, e4) {
      return t3.createElement(b3, { __v: n3, i: e4 });
    }
    (m3.prototype = new t3.Component()).__e = function(n3) {
      var t4 = this, e4 = v3(t4.__v), r4 = t4.u.get(n3);
      return r4[0]++, function(o4) {
        var u4 = function() {
          t4.props.revealOrder ? (r4.push(o4), x3(t4, n3, r4)) : o4();
        };
        e4 ? e4(u4) : u4();
      };
    }, m3.prototype.render = function(n3) {
      this.o = null, this.u = /* @__PURE__ */ new Map();
      var e4 = t3.toChildArray(n3.children);
      n3.revealOrder && n3.revealOrder[0] === "b" && e4.reverse();
      for (var r4 = e4.length; r4--; )
        this.u.set(e4[r4], this.o = [1, 0, this.o]);
      return n3.children;
    }, m3.prototype.componentDidUpdate = m3.prototype.componentDidMount = function() {
      var n3 = this;
      this.u.forEach(function(t4, e4) {
        x3(n3, e4, t4);
      });
    };
    var S2 = typeof Symbol != "undefined" && Symbol.for && Symbol.for("react.element") || 60103;
    var C2 = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;
    var w3 = typeof document != "undefined";
    var g3 = function(n3) {
      return (typeof Symbol != "undefined" && typeof Symbol() == "symbol" ? /fil|che|rad/i : /fil|che|ra/i).test(n3);
    };
    function E(n3, e4, r4) {
      return e4.__k == null && (e4.textContent = ""), t3.render(n3, e4), typeof r4 == "function" && r4(), n3 ? n3.__c : null;
    }
    function R(n3, e4, r4) {
      return t3.hydrate(n3, e4), typeof r4 == "function" && r4(), n3 ? n3.__c : null;
    }
    t3.Component.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(n3) {
      Object.defineProperty(t3.Component.prototype, n3, { configurable: true, get: function() {
        return this["UNSAFE_" + n3];
      }, set: function(t4) {
        Object.defineProperty(this, n3, { configurable: true, writable: true, value: t4 });
      } });
    });
    var N2 = t3.options.event;
    function O2() {
    }
    function k3() {
      return this.cancelBubble;
    }
    function A3() {
      return this.defaultPrevented;
    }
    t3.options.event = function(n3) {
      return N2 && (n3 = N2(n3)), n3.persist = O2, n3.isPropagationStopped = k3, n3.isDefaultPrevented = A3, n3.nativeEvent = n3;
    };
    var L2;
    var U = { configurable: true, get: function() {
      return this.class;
    } };
    var j3 = t3.options.vnode;
    t3.options.vnode = function(n3) {
      var e4 = n3.type, r4 = n3.props, o4 = r4;
      if (typeof e4 == "string") {
        var u4 = e4.indexOf("-") === -1;
        for (var i4 in o4 = {}, r4) {
          var l4 = r4[i4];
          w3 && i4 === "children" && e4 === "noscript" || i4 === "value" && "defaultValue" in r4 && l4 == null || (i4 === "defaultValue" && "value" in r4 && r4.value == null ? i4 = "value" : i4 === "download" && l4 === true ? l4 = "" : /ondoubleclick/i.test(i4) ? i4 = "ondblclick" : /^onchange(textarea|input)/i.test(i4 + e4) && !g3(r4.type) ? i4 = "oninput" : /^onfocus$/i.test(i4) ? i4 = "onfocusin" : /^onblur$/i.test(i4) ? i4 = "onfocusout" : /^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i4) ? i4 = i4.toLowerCase() : u4 && C2.test(i4) ? i4 = i4.replace(/[A-Z0-9]/, "-$&").toLowerCase() : l4 === null && (l4 = void 0), o4[i4] = l4);
        }
        e4 == "select" && o4.multiple && Array.isArray(o4.value) && (o4.value = t3.toChildArray(r4.children).forEach(function(n4) {
          n4.props.selected = o4.value.indexOf(n4.props.value) != -1;
        })), e4 == "select" && o4.defaultValue != null && (o4.value = t3.toChildArray(r4.children).forEach(function(n4) {
          n4.props.selected = o4.multiple ? o4.defaultValue.indexOf(n4.props.value) != -1 : o4.defaultValue == n4.props.value;
        })), n3.props = o4, r4.class != r4.className && (U.enumerable = "className" in r4, r4.className != null && (o4.class = r4.className), Object.defineProperty(o4, "className", U));
      }
      n3.$$typeof = S2, j3 && j3(n3);
    };
    var M2 = t3.options.__r;
    t3.options.__r = function(n3) {
      M2 && M2(n3), L2 = n3.__c;
    };
    var T3 = { ReactCurrentDispatcher: { current: { readContext: function(n3) {
      return L2.__n[n3.__c].props.value;
    } } } };
    function D2(n3) {
      return t3.createElement.bind(null, n3);
    }
    function F2(n3) {
      return !!n3 && n3.$$typeof === S2;
    }
    function I2(n3) {
      return F2(n3) ? t3.cloneElement.apply(null, arguments) : n3;
    }
    function W(n3) {
      return !!n3.__k && (t3.render(null, n3), true);
    }
    function P2(n3) {
      return n3 && (n3.base || n3.nodeType === 1 && n3) || null;
    }
    var V = function(n3, t4) {
      return n3(t4);
    };
    var z2 = function(n3, t4) {
      return n3(t4);
    };
    var B2 = t3.Fragment;
    var $3 = { useState: n2.useState, useReducer: n2.useReducer, useEffect: n2.useEffect, useLayoutEffect: n2.useLayoutEffect, useRef: n2.useRef, useImperativeHandle: n2.useImperativeHandle, useMemo: n2.useMemo, useCallback: n2.useCallback, useContext: n2.useContext, useDebugValue: n2.useDebugValue, version: "17.0.2", Children: a3, render: E, hydrate: R, unmountComponentAtNode: W, createPortal: _3, createElement: t3.createElement, createContext: t3.createContext, createFactory: D2, cloneElement: I2, createRef: t3.createRef, Fragment: t3.Fragment, isValidElement: F2, findDOMNode: P2, Component: t3.Component, PureComponent: o3, memo: u3, forwardRef: c3, flushSync: z2, unstable_batchedUpdates: V, StrictMode: B2, Suspense: h3, SuspenseList: m3, lazy: d3, __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: T3 };
    Object.keys(n2).forEach(function(t4) {
      exports[t4] = n2[t4];
    }), exports.createElement = t3.createElement, exports.createContext = t3.createContext, exports.createRef = t3.createRef, exports.Fragment = t3.Fragment, exports.Component = t3.Component, exports.version = "17.0.2", exports.Children = a3, exports.render = E, exports.hydrate = R, exports.unmountComponentAtNode = W, exports.createPortal = _3, exports.createFactory = D2, exports.cloneElement = I2, exports.isValidElement = F2, exports.findDOMNode = P2, exports.PureComponent = o3, exports.memo = u3, exports.forwardRef = c3, exports.flushSync = z2, exports.unstable_batchedUpdates = V, exports.StrictMode = B2, exports.Suspense = h3, exports.SuspenseList = m3, exports.lazy = d3, exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = T3, exports.default = $3;
  }
});

// node_modules/tailwindcss/lib/util/cloneDeep.js
var require_cloneDeep = __commonJS({
  "node_modules/tailwindcss/lib/util/cloneDeep.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.cloneDeep = cloneDeep;
    function cloneDeep(value) {
      if (Array.isArray(value)) {
        return value.map((child) => cloneDeep(child));
      }
      if (typeof value === "object" && value !== null) {
        return Object.fromEntries(Object.entries(value).map(([k3, v3]) => [
          k3,
          cloneDeep(v3)
        ]));
      }
      return value;
    }
  }
});

// node_modules/tailwindcss/stubs/defaultConfig.stub.js
var require_defaultConfig_stub = __commonJS({
  "node_modules/tailwindcss/stubs/defaultConfig.stub.js"(exports, module) {
    init_react_shim();
    module.exports = {
      content: [],
      presets: [],
      darkMode: "media",
      theme: {
        screens: {
          sm: "640px",
          md: "768px",
          lg: "1024px",
          xl: "1280px",
          "2xl": "1536px"
        },
        colors: ({ colors }) => ({
          inherit: colors.inherit,
          current: colors.current,
          transparent: colors.transparent,
          black: colors.black,
          white: colors.white,
          slate: colors.slate,
          gray: colors.gray,
          zinc: colors.zinc,
          neutral: colors.neutral,
          stone: colors.stone,
          red: colors.red,
          orange: colors.orange,
          amber: colors.amber,
          yellow: colors.yellow,
          lime: colors.lime,
          green: colors.green,
          emerald: colors.emerald,
          teal: colors.teal,
          cyan: colors.cyan,
          sky: colors.sky,
          blue: colors.blue,
          indigo: colors.indigo,
          violet: colors.violet,
          purple: colors.purple,
          fuchsia: colors.fuchsia,
          pink: colors.pink,
          rose: colors.rose
        }),
        columns: {
          auto: "auto",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7",
          8: "8",
          9: "9",
          10: "10",
          11: "11",
          12: "12",
          "3xs": "16rem",
          "2xs": "18rem",
          xs: "20rem",
          sm: "24rem",
          md: "28rem",
          lg: "32rem",
          xl: "36rem",
          "2xl": "42rem",
          "3xl": "48rem",
          "4xl": "56rem",
          "5xl": "64rem",
          "6xl": "72rem",
          "7xl": "80rem"
        },
        spacing: {
          px: "1px",
          0: "0px",
          0.5: "0.125rem",
          1: "0.25rem",
          1.5: "0.375rem",
          2: "0.5rem",
          2.5: "0.625rem",
          3: "0.75rem",
          3.5: "0.875rem",
          4: "1rem",
          5: "1.25rem",
          6: "1.5rem",
          7: "1.75rem",
          8: "2rem",
          9: "2.25rem",
          10: "2.5rem",
          11: "2.75rem",
          12: "3rem",
          14: "3.5rem",
          16: "4rem",
          20: "5rem",
          24: "6rem",
          28: "7rem",
          32: "8rem",
          36: "9rem",
          40: "10rem",
          44: "11rem",
          48: "12rem",
          52: "13rem",
          56: "14rem",
          60: "15rem",
          64: "16rem",
          72: "18rem",
          80: "20rem",
          96: "24rem"
        },
        animation: {
          none: "none",
          spin: "spin 1s linear infinite",
          ping: "ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",
          pulse: "pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",
          bounce: "bounce 1s infinite"
        },
        aspectRatio: {
          auto: "auto",
          square: "1 / 1",
          video: "16 / 9"
        },
        backdropBlur: ({ theme: theme2 }) => theme2("blur"),
        backdropBrightness: ({ theme: theme2 }) => theme2("brightness"),
        backdropContrast: ({ theme: theme2 }) => theme2("contrast"),
        backdropGrayscale: ({ theme: theme2 }) => theme2("grayscale"),
        backdropHueRotate: ({ theme: theme2 }) => theme2("hueRotate"),
        backdropInvert: ({ theme: theme2 }) => theme2("invert"),
        backdropOpacity: ({ theme: theme2 }) => theme2("opacity"),
        backdropSaturate: ({ theme: theme2 }) => theme2("saturate"),
        backdropSepia: ({ theme: theme2 }) => theme2("sepia"),
        backgroundColor: ({ theme: theme2 }) => theme2("colors"),
        backgroundImage: {
          none: "none",
          "gradient-to-t": "linear-gradient(to top, var(--tw-gradient-stops))",
          "gradient-to-tr": "linear-gradient(to top right, var(--tw-gradient-stops))",
          "gradient-to-r": "linear-gradient(to right, var(--tw-gradient-stops))",
          "gradient-to-br": "linear-gradient(to bottom right, var(--tw-gradient-stops))",
          "gradient-to-b": "linear-gradient(to bottom, var(--tw-gradient-stops))",
          "gradient-to-bl": "linear-gradient(to bottom left, var(--tw-gradient-stops))",
          "gradient-to-l": "linear-gradient(to left, var(--tw-gradient-stops))",
          "gradient-to-tl": "linear-gradient(to top left, var(--tw-gradient-stops))"
        },
        backgroundOpacity: ({ theme: theme2 }) => theme2("opacity"),
        backgroundPosition: {
          bottom: "bottom",
          center: "center",
          left: "left",
          "left-bottom": "left bottom",
          "left-top": "left top",
          right: "right",
          "right-bottom": "right bottom",
          "right-top": "right top",
          top: "top"
        },
        backgroundSize: {
          auto: "auto",
          cover: "cover",
          contain: "contain"
        },
        blur: {
          0: "0",
          none: "0",
          sm: "4px",
          DEFAULT: "8px",
          md: "12px",
          lg: "16px",
          xl: "24px",
          "2xl": "40px",
          "3xl": "64px"
        },
        brightness: {
          0: "0",
          50: ".5",
          75: ".75",
          90: ".9",
          95: ".95",
          100: "1",
          105: "1.05",
          110: "1.1",
          125: "1.25",
          150: "1.5",
          200: "2"
        },
        borderColor: ({ theme: theme2 }) => ({
          ...theme2("colors"),
          DEFAULT: theme2("colors.gray.200", "currentColor")
        }),
        borderOpacity: ({ theme: theme2 }) => theme2("opacity"),
        borderRadius: {
          none: "0px",
          sm: "0.125rem",
          DEFAULT: "0.25rem",
          md: "0.375rem",
          lg: "0.5rem",
          xl: "0.75rem",
          "2xl": "1rem",
          "3xl": "1.5rem",
          full: "9999px"
        },
        borderSpacing: ({ theme: theme2 }) => ({
          ...theme2("spacing")
        }),
        borderWidth: {
          DEFAULT: "1px",
          0: "0px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        boxShadow: {
          sm: "0 1px 2px 0 rgb(0 0 0 / 0.05)",
          DEFAULT: "0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",
          md: "0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",
          lg: "0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",
          xl: "0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)",
          "2xl": "0 25px 50px -12px rgb(0 0 0 / 0.25)",
          inner: "inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",
          none: "none"
        },
        boxShadowColor: ({ theme: theme2 }) => theme2("colors"),
        caretColor: ({ theme: theme2 }) => theme2("colors"),
        accentColor: ({ theme: theme2 }) => ({
          ...theme2("colors"),
          auto: "auto"
        }),
        contrast: {
          0: "0",
          50: ".5",
          75: ".75",
          100: "1",
          125: "1.25",
          150: "1.5",
          200: "2"
        },
        container: {},
        content: {
          none: "none"
        },
        cursor: {
          auto: "auto",
          default: "default",
          pointer: "pointer",
          wait: "wait",
          text: "text",
          move: "move",
          help: "help",
          "not-allowed": "not-allowed",
          none: "none",
          "context-menu": "context-menu",
          progress: "progress",
          cell: "cell",
          crosshair: "crosshair",
          "vertical-text": "vertical-text",
          alias: "alias",
          copy: "copy",
          "no-drop": "no-drop",
          grab: "grab",
          grabbing: "grabbing",
          "all-scroll": "all-scroll",
          "col-resize": "col-resize",
          "row-resize": "row-resize",
          "n-resize": "n-resize",
          "e-resize": "e-resize",
          "s-resize": "s-resize",
          "w-resize": "w-resize",
          "ne-resize": "ne-resize",
          "nw-resize": "nw-resize",
          "se-resize": "se-resize",
          "sw-resize": "sw-resize",
          "ew-resize": "ew-resize",
          "ns-resize": "ns-resize",
          "nesw-resize": "nesw-resize",
          "nwse-resize": "nwse-resize",
          "zoom-in": "zoom-in",
          "zoom-out": "zoom-out"
        },
        divideColor: ({ theme: theme2 }) => theme2("borderColor"),
        divideOpacity: ({ theme: theme2 }) => theme2("borderOpacity"),
        divideWidth: ({ theme: theme2 }) => theme2("borderWidth"),
        dropShadow: {
          sm: "0 1px 1px rgb(0 0 0 / 0.05)",
          DEFAULT: ["0 1px 2px rgb(0 0 0 / 0.1)", "0 1px 1px rgb(0 0 0 / 0.06)"],
          md: ["0 4px 3px rgb(0 0 0 / 0.07)", "0 2px 2px rgb(0 0 0 / 0.06)"],
          lg: ["0 10px 8px rgb(0 0 0 / 0.04)", "0 4px 3px rgb(0 0 0 / 0.1)"],
          xl: ["0 20px 13px rgb(0 0 0 / 0.03)", "0 8px 5px rgb(0 0 0 / 0.08)"],
          "2xl": "0 25px 25px rgb(0 0 0 / 0.15)",
          none: "0 0 #0000"
        },
        fill: ({ theme: theme2 }) => theme2("colors"),
        grayscale: {
          0: "0",
          DEFAULT: "100%"
        },
        hueRotate: {
          0: "0deg",
          15: "15deg",
          30: "30deg",
          60: "60deg",
          90: "90deg",
          180: "180deg"
        },
        invert: {
          0: "0",
          DEFAULT: "100%"
        },
        flex: {
          1: "1 1 0%",
          auto: "1 1 auto",
          initial: "0 1 auto",
          none: "none"
        },
        flexBasis: ({ theme: theme2 }) => ({
          auto: "auto",
          ...theme2("spacing"),
          "1/2": "50%",
          "1/3": "33.333333%",
          "2/3": "66.666667%",
          "1/4": "25%",
          "2/4": "50%",
          "3/4": "75%",
          "1/5": "20%",
          "2/5": "40%",
          "3/5": "60%",
          "4/5": "80%",
          "1/6": "16.666667%",
          "2/6": "33.333333%",
          "3/6": "50%",
          "4/6": "66.666667%",
          "5/6": "83.333333%",
          "1/12": "8.333333%",
          "2/12": "16.666667%",
          "3/12": "25%",
          "4/12": "33.333333%",
          "5/12": "41.666667%",
          "6/12": "50%",
          "7/12": "58.333333%",
          "8/12": "66.666667%",
          "9/12": "75%",
          "10/12": "83.333333%",
          "11/12": "91.666667%",
          full: "100%"
        }),
        flexGrow: {
          0: "0",
          DEFAULT: "1"
        },
        flexShrink: {
          0: "0",
          DEFAULT: "1"
        },
        fontFamily: {
          sans: [
            "ui-sans-serif",
            "system-ui",
            "-apple-system",
            "BlinkMacSystemFont",
            '"Segoe UI"',
            "Roboto",
            '"Helvetica Neue"',
            "Arial",
            '"Noto Sans"',
            "sans-serif",
            '"Apple Color Emoji"',
            '"Segoe UI Emoji"',
            '"Segoe UI Symbol"',
            '"Noto Color Emoji"'
          ],
          serif: ["ui-serif", "Georgia", "Cambria", '"Times New Roman"', "Times", "serif"],
          mono: [
            "ui-monospace",
            "SFMono-Regular",
            "Menlo",
            "Monaco",
            "Consolas",
            '"Liberation Mono"',
            '"Courier New"',
            "monospace"
          ]
        },
        fontSize: {
          xs: ["0.75rem", { lineHeight: "1rem" }],
          sm: ["0.875rem", { lineHeight: "1.25rem" }],
          base: ["1rem", { lineHeight: "1.5rem" }],
          lg: ["1.125rem", { lineHeight: "1.75rem" }],
          xl: ["1.25rem", { lineHeight: "1.75rem" }],
          "2xl": ["1.5rem", { lineHeight: "2rem" }],
          "3xl": ["1.875rem", { lineHeight: "2.25rem" }],
          "4xl": ["2.25rem", { lineHeight: "2.5rem" }],
          "5xl": ["3rem", { lineHeight: "1" }],
          "6xl": ["3.75rem", { lineHeight: "1" }],
          "7xl": ["4.5rem", { lineHeight: "1" }],
          "8xl": ["6rem", { lineHeight: "1" }],
          "9xl": ["8rem", { lineHeight: "1" }]
        },
        fontWeight: {
          thin: "100",
          extralight: "200",
          light: "300",
          normal: "400",
          medium: "500",
          semibold: "600",
          bold: "700",
          extrabold: "800",
          black: "900"
        },
        gap: ({ theme: theme2 }) => theme2("spacing"),
        gradientColorStops: ({ theme: theme2 }) => theme2("colors"),
        gridAutoColumns: {
          auto: "auto",
          min: "min-content",
          max: "max-content",
          fr: "minmax(0, 1fr)"
        },
        gridAutoRows: {
          auto: "auto",
          min: "min-content",
          max: "max-content",
          fr: "minmax(0, 1fr)"
        },
        gridColumn: {
          auto: "auto",
          "span-1": "span 1 / span 1",
          "span-2": "span 2 / span 2",
          "span-3": "span 3 / span 3",
          "span-4": "span 4 / span 4",
          "span-5": "span 5 / span 5",
          "span-6": "span 6 / span 6",
          "span-7": "span 7 / span 7",
          "span-8": "span 8 / span 8",
          "span-9": "span 9 / span 9",
          "span-10": "span 10 / span 10",
          "span-11": "span 11 / span 11",
          "span-12": "span 12 / span 12",
          "span-full": "1 / -1"
        },
        gridColumnEnd: {
          auto: "auto",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7",
          8: "8",
          9: "9",
          10: "10",
          11: "11",
          12: "12",
          13: "13"
        },
        gridColumnStart: {
          auto: "auto",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7",
          8: "8",
          9: "9",
          10: "10",
          11: "11",
          12: "12",
          13: "13"
        },
        gridRow: {
          auto: "auto",
          "span-1": "span 1 / span 1",
          "span-2": "span 2 / span 2",
          "span-3": "span 3 / span 3",
          "span-4": "span 4 / span 4",
          "span-5": "span 5 / span 5",
          "span-6": "span 6 / span 6",
          "span-full": "1 / -1"
        },
        gridRowStart: {
          auto: "auto",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7"
        },
        gridRowEnd: {
          auto: "auto",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7"
        },
        gridTemplateColumns: {
          none: "none",
          1: "repeat(1, minmax(0, 1fr))",
          2: "repeat(2, minmax(0, 1fr))",
          3: "repeat(3, minmax(0, 1fr))",
          4: "repeat(4, minmax(0, 1fr))",
          5: "repeat(5, minmax(0, 1fr))",
          6: "repeat(6, minmax(0, 1fr))",
          7: "repeat(7, minmax(0, 1fr))",
          8: "repeat(8, minmax(0, 1fr))",
          9: "repeat(9, minmax(0, 1fr))",
          10: "repeat(10, minmax(0, 1fr))",
          11: "repeat(11, minmax(0, 1fr))",
          12: "repeat(12, minmax(0, 1fr))"
        },
        gridTemplateRows: {
          none: "none",
          1: "repeat(1, minmax(0, 1fr))",
          2: "repeat(2, minmax(0, 1fr))",
          3: "repeat(3, minmax(0, 1fr))",
          4: "repeat(4, minmax(0, 1fr))",
          5: "repeat(5, minmax(0, 1fr))",
          6: "repeat(6, minmax(0, 1fr))"
        },
        height: ({ theme: theme2 }) => ({
          auto: "auto",
          ...theme2("spacing"),
          "1/2": "50%",
          "1/3": "33.333333%",
          "2/3": "66.666667%",
          "1/4": "25%",
          "2/4": "50%",
          "3/4": "75%",
          "1/5": "20%",
          "2/5": "40%",
          "3/5": "60%",
          "4/5": "80%",
          "1/6": "16.666667%",
          "2/6": "33.333333%",
          "3/6": "50%",
          "4/6": "66.666667%",
          "5/6": "83.333333%",
          full: "100%",
          screen: "100vh",
          min: "min-content",
          max: "max-content",
          fit: "fit-content"
        }),
        inset: ({ theme: theme2 }) => ({
          auto: "auto",
          ...theme2("spacing"),
          "1/2": "50%",
          "1/3": "33.333333%",
          "2/3": "66.666667%",
          "1/4": "25%",
          "2/4": "50%",
          "3/4": "75%",
          full: "100%"
        }),
        keyframes: {
          spin: {
            to: {
              transform: "rotate(360deg)"
            }
          },
          ping: {
            "75%, 100%": {
              transform: "scale(2)",
              opacity: "0"
            }
          },
          pulse: {
            "50%": {
              opacity: ".5"
            }
          },
          bounce: {
            "0%, 100%": {
              transform: "translateY(-25%)",
              animationTimingFunction: "cubic-bezier(0.8,0,1,1)"
            },
            "50%": {
              transform: "none",
              animationTimingFunction: "cubic-bezier(0,0,0.2,1)"
            }
          }
        },
        letterSpacing: {
          tighter: "-0.05em",
          tight: "-0.025em",
          normal: "0em",
          wide: "0.025em",
          wider: "0.05em",
          widest: "0.1em"
        },
        lineHeight: {
          none: "1",
          tight: "1.25",
          snug: "1.375",
          normal: "1.5",
          relaxed: "1.625",
          loose: "2",
          3: ".75rem",
          4: "1rem",
          5: "1.25rem",
          6: "1.5rem",
          7: "1.75rem",
          8: "2rem",
          9: "2.25rem",
          10: "2.5rem"
        },
        listStyleType: {
          none: "none",
          disc: "disc",
          decimal: "decimal"
        },
        margin: ({ theme: theme2 }) => ({
          auto: "auto",
          ...theme2("spacing")
        }),
        maxHeight: ({ theme: theme2 }) => ({
          ...theme2("spacing"),
          full: "100%",
          screen: "100vh",
          min: "min-content",
          max: "max-content",
          fit: "fit-content"
        }),
        maxWidth: ({ theme: theme2, breakpoints }) => ({
          none: "none",
          0: "0rem",
          xs: "20rem",
          sm: "24rem",
          md: "28rem",
          lg: "32rem",
          xl: "36rem",
          "2xl": "42rem",
          "3xl": "48rem",
          "4xl": "56rem",
          "5xl": "64rem",
          "6xl": "72rem",
          "7xl": "80rem",
          full: "100%",
          min: "min-content",
          max: "max-content",
          fit: "fit-content",
          prose: "65ch",
          ...breakpoints(theme2("screens"))
        }),
        minHeight: {
          0: "0px",
          full: "100%",
          screen: "100vh",
          min: "min-content",
          max: "max-content",
          fit: "fit-content"
        },
        minWidth: {
          0: "0px",
          full: "100%",
          min: "min-content",
          max: "max-content",
          fit: "fit-content"
        },
        objectPosition: {
          bottom: "bottom",
          center: "center",
          left: "left",
          "left-bottom": "left bottom",
          "left-top": "left top",
          right: "right",
          "right-bottom": "right bottom",
          "right-top": "right top",
          top: "top"
        },
        opacity: {
          0: "0",
          5: "0.05",
          10: "0.1",
          20: "0.2",
          25: "0.25",
          30: "0.3",
          40: "0.4",
          50: "0.5",
          60: "0.6",
          70: "0.7",
          75: "0.75",
          80: "0.8",
          90: "0.9",
          95: "0.95",
          100: "1"
        },
        order: {
          first: "-9999",
          last: "9999",
          none: "0",
          1: "1",
          2: "2",
          3: "3",
          4: "4",
          5: "5",
          6: "6",
          7: "7",
          8: "8",
          9: "9",
          10: "10",
          11: "11",
          12: "12"
        },
        padding: ({ theme: theme2 }) => theme2("spacing"),
        placeholderColor: ({ theme: theme2 }) => theme2("colors"),
        placeholderOpacity: ({ theme: theme2 }) => theme2("opacity"),
        outlineColor: ({ theme: theme2 }) => theme2("colors"),
        outlineOffset: {
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        outlineWidth: {
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        ringColor: ({ theme: theme2 }) => ({
          DEFAULT: theme2("colors.blue.500", "#3b82f6"),
          ...theme2("colors")
        }),
        ringOffsetColor: ({ theme: theme2 }) => theme2("colors"),
        ringOffsetWidth: {
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        ringOpacity: ({ theme: theme2 }) => ({
          DEFAULT: "0.5",
          ...theme2("opacity")
        }),
        ringWidth: {
          DEFAULT: "3px",
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        rotate: {
          0: "0deg",
          1: "1deg",
          2: "2deg",
          3: "3deg",
          6: "6deg",
          12: "12deg",
          45: "45deg",
          90: "90deg",
          180: "180deg"
        },
        saturate: {
          0: "0",
          50: ".5",
          100: "1",
          150: "1.5",
          200: "2"
        },
        scale: {
          0: "0",
          50: ".5",
          75: ".75",
          90: ".9",
          95: ".95",
          100: "1",
          105: "1.05",
          110: "1.1",
          125: "1.25",
          150: "1.5"
        },
        scrollMargin: ({ theme: theme2 }) => ({
          ...theme2("spacing")
        }),
        scrollPadding: ({ theme: theme2 }) => theme2("spacing"),
        sepia: {
          0: "0",
          DEFAULT: "100%"
        },
        skew: {
          0: "0deg",
          1: "1deg",
          2: "2deg",
          3: "3deg",
          6: "6deg",
          12: "12deg"
        },
        space: ({ theme: theme2 }) => ({
          ...theme2("spacing")
        }),
        stroke: ({ theme: theme2 }) => theme2("colors"),
        strokeWidth: {
          0: "0",
          1: "1",
          2: "2"
        },
        textColor: ({ theme: theme2 }) => theme2("colors"),
        textDecorationColor: ({ theme: theme2 }) => theme2("colors"),
        textDecorationThickness: {
          auto: "auto",
          "from-font": "from-font",
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        textUnderlineOffset: {
          auto: "auto",
          0: "0px",
          1: "1px",
          2: "2px",
          4: "4px",
          8: "8px"
        },
        textIndent: ({ theme: theme2 }) => ({
          ...theme2("spacing")
        }),
        textOpacity: ({ theme: theme2 }) => theme2("opacity"),
        transformOrigin: {
          center: "center",
          top: "top",
          "top-right": "top right",
          right: "right",
          "bottom-right": "bottom right",
          bottom: "bottom",
          "bottom-left": "bottom left",
          left: "left",
          "top-left": "top left"
        },
        transitionDelay: {
          75: "75ms",
          100: "100ms",
          150: "150ms",
          200: "200ms",
          300: "300ms",
          500: "500ms",
          700: "700ms",
          1e3: "1000ms"
        },
        transitionDuration: {
          DEFAULT: "150ms",
          75: "75ms",
          100: "100ms",
          150: "150ms",
          200: "200ms",
          300: "300ms",
          500: "500ms",
          700: "700ms",
          1e3: "1000ms"
        },
        transitionProperty: {
          none: "none",
          all: "all",
          DEFAULT: "color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",
          colors: "color, background-color, border-color, text-decoration-color, fill, stroke",
          opacity: "opacity",
          shadow: "box-shadow",
          transform: "transform"
        },
        transitionTimingFunction: {
          DEFAULT: "cubic-bezier(0.4, 0, 0.2, 1)",
          linear: "linear",
          in: "cubic-bezier(0.4, 0, 1, 1)",
          out: "cubic-bezier(0, 0, 0.2, 1)",
          "in-out": "cubic-bezier(0.4, 0, 0.2, 1)"
        },
        translate: ({ theme: theme2 }) => ({
          ...theme2("spacing"),
          "1/2": "50%",
          "1/3": "33.333333%",
          "2/3": "66.666667%",
          "1/4": "25%",
          "2/4": "50%",
          "3/4": "75%",
          full: "100%"
        }),
        width: ({ theme: theme2 }) => ({
          auto: "auto",
          ...theme2("spacing"),
          "1/2": "50%",
          "1/3": "33.333333%",
          "2/3": "66.666667%",
          "1/4": "25%",
          "2/4": "50%",
          "3/4": "75%",
          "1/5": "20%",
          "2/5": "40%",
          "3/5": "60%",
          "4/5": "80%",
          "1/6": "16.666667%",
          "2/6": "33.333333%",
          "3/6": "50%",
          "4/6": "66.666667%",
          "5/6": "83.333333%",
          "1/12": "8.333333%",
          "2/12": "16.666667%",
          "3/12": "25%",
          "4/12": "33.333333%",
          "5/12": "41.666667%",
          "6/12": "50%",
          "7/12": "58.333333%",
          "8/12": "66.666667%",
          "9/12": "75%",
          "10/12": "83.333333%",
          "11/12": "91.666667%",
          full: "100%",
          screen: "100vw",
          min: "min-content",
          max: "max-content",
          fit: "fit-content"
        }),
        willChange: {
          auto: "auto",
          scroll: "scroll-position",
          contents: "contents",
          transform: "transform"
        },
        zIndex: {
          auto: "auto",
          0: "0",
          10: "10",
          20: "20",
          30: "30",
          40: "40",
          50: "50"
        }
      },
      variantOrder: [
        "first",
        "last",
        "odd",
        "even",
        "visited",
        "checked",
        "empty",
        "read-only",
        "group-hover",
        "group-focus",
        "focus-within",
        "hover",
        "focus",
        "focus-visible",
        "active",
        "disabled"
      ],
      plugins: []
    };
  }
});

// node_modules/tailwindcss/lib/public/default-theme.js
var require_default_theme = __commonJS({
  "node_modules/tailwindcss/lib/public/default-theme.js"(exports) {
    "use strict";
    init_react_shim();
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = void 0;
    var _cloneDeep = require_cloneDeep();
    var _defaultConfigStub = _interopRequireDefault(require_defaultConfig_stub());
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : {
        default: obj
      };
    }
    var _default = (0, _cloneDeep).cloneDeep(_defaultConfigStub.default.theme);
    exports.default = _default;
  }
});

// node_modules/tailwindcss/defaultTheme.js
var require_defaultTheme = __commonJS({
  "node_modules/tailwindcss/defaultTheme.js"(exports, module) {
    init_react_shim();
    var defaultTheme = require_default_theme();
    module.exports = (defaultTheme.__esModule ? defaultTheme : { default: defaultTheme }).default;
  }
});

// tailwind.config.cjs
var require_tailwind_config = __commonJS({
  "tailwind.config.cjs"(exports, module) {
    init_react_shim();
    var defaultTheme = require_defaultTheme();
    module.exports = {
      content: ["../**/*.liquid", "./src/**/*,{js,jsx,ts,tsx}"],
      theme: {
        extend: {
          colors: {
            "base-bg1": "rgb(var(--color-base-background-1))",
            "base-bg2": "rgb(var(--color-base-background-2))",
            "base-text": "rgb(var(--color-base-text))",
            accent1: "rgb(var(--color-base-accent-1))",
            accent2: "rgb(var(--color-base-accent-2))",
            "button-label": "rgb(var(--color-base-solid-button-labels))",
            "grayish-blue": "#D2D6DE",
            "light-gray": "#D2D2D2",
            "link-gray": "#929292",
            "pale-gray": "#F6F6F6",
            "athens-gray": "#E9EBEF",
            "v-beige": "#E9D7AE",
            "v-black": "#434343",
            "v-blue": "#455FEF",
            "v-brown": "#76571D",
            "v-clear": "#FAFCFF",
            "v-gold": "#E4C862",
            "v-gray": "#B9B9B9",
            "v-green": "#6B8441",
            "v-iceblue": "#D3E7FF",
            "v-indigo": "#26428B",
            "v-khaki": "#B98E3B",
            "v-mint": "#7FC9BD",
            "v-mocha": "#6B5358",
            "v-navy": "#344571",
            "v-orange": "#EA913F",
            "v-pink": "#F18FDC",
            "v-purple": "#B353E0",
            "v-red": "#e04010",
            "v-white": "#F0F0F0",
            "v-wine": "#9B3C4E",
            "v-yellow": "#F4F862"
          },
          brightness: {
            25: ".25"
          },
          spacing: {
            "dt-v": "32px",
            "dt-h": "10px",
            "mb-v": "32px",
            "mb-h": "20px",
            "grid-dt-v": "var(--grid-dt-v-spacing)",
            "grid-dt-h": "var(--grid-dt-h-spacing)",
            "grid-mb-v": "var(--grid-mb-v-spacing)",
            "grid-mb-h": "var(--grid-mb-h-spacing)",
            "section-my": "50px",
            "1%": "1%",
            "1/10": "10%",
            "2/10": "20%",
            "9/10": "90%",
            "2px": "2px",
            "6px": "6px",
            "8px": "8px",
            "12px": "12px",
            "14px": "14px",
            "16px": "16px",
            "20px": "20px",
            "24px": "24px",
            "32px": "32px",
            "36px": "36px",
            "40px": "40px",
            "42px": "42px",
            "48px": "48px",
            "56px": "56px",
            "64px": "64px",
            "72px": "72px",
            "86px": "86px",
            "96px": "96px",
            "112px": "112px",
            "120px": "120px",
            "7.5vw": "7.5vw"
          },
          padding: {
            "1/10": "10%",
            "8px": "8px",
            "24px": "24px",
            "32px": "32px",
            "44px": "44px",
            "64px": "64px"
          },
          width: {
            "page-content": "var(--page-width)",
            "page-mobile": "90%",
            "70%": "70%",
            "7/10": "70%"
          },
          maxWidth: {
            "modal-content": "var(--modal-content-width)"
          },
          height: {
            "20vh": "20vh",
            "35vh": "35vh",
            "40vh": "40vh",
            "60vh": "60vh",
            "70vh": "70vh",
            "80vh": "80vh"
          },
          maxHeight: {
            "40vh": "40vh",
            "80vh": "80vh"
          },
          lineHeight: {
            "extra-loose": "2.5"
          },
          zIndex: {
            1: "1",
            header: "1000",
            overlay: "2000",
            sidepanel: "2100",
            modal: "2100",
            "modal-cover": "2110",
            "modal-cover-20": "2120",
            "modal-cover-30": "2130",
            "modal-close": "2200"
          },
          inset: {
            "1/10": "10%",
            "2/10": "20%"
          }
        },
        screens: {
          ...defaultTheme.screens
        },
        fontFamily: {
          body: "var(--font-body-family)",
          heading: "var(--font-heading-family)"
        },
        fontWeight: {
          body: "var(--font-body-weight)",
          "body-bold": "var(--font-body-weight-bold)",
          heading: "var(--font-heading-weight)"
        },
        fontSize: {
          "v-h0": "calc(var(--font-heading-scale) * 4.6rem)",
          "v-h1": "calc(var(--font-heading-scale) * 4.0rem)",
          "v-h2": "calc(var(--font-heading-scale) * 3.6rem)",
          "v-h3": "calc(var(--font-heading-scale) * 2.7rem)",
          "v-h4": "calc(var(--font-heading-scale) * 2.0rem)",
          "v-h5": "calc(var(--font-heading-scale) * 1.5rem)",
          "v-h6": "calc(var(--font-heading-scale) * 1.4rem)",
          "v-h0-s": "calc(var(--font-heading-scale) * 3.4rem)",
          "v-h1-s": "calc(var(--font-heading-scale) * 3.0rem)",
          "v-h2-s": "calc(var(--font-heading-scale) * 2.6rem)",
          "v-h3-s": "calc(var(--font-heading-scale) * 2.0rem)",
          "v-h4-s": "calc(var(--font-heading-scale) * 1.8rem)",
          "v-h5-s": "calc(var(--font-heading-scale) * 1.6rem)",
          "v-h6-s": "calc(var(--font-heading-scale) * 1.4rem)",
          9: "0.9rem",
          10: "1.0rem",
          11: "1.1rem",
          12: "1.2rem",
          13: "1.3rem",
          14: "1.4rem",
          15: "1.5rem",
          16: "1.6rem",
          18: "1.8rem",
          20: "2.0rem",
          22: "2.2rem",
          24: "2.4rem",
          26: "2.6rem",
          28: "2.8rem",
          32: "3.2rem",
          36: "3.6rem",
          40: "4.0rem",
          48: "4.8rem",
          52: "5.2rem",
          56: "5.6rem",
          60: "6.0rem",
          80: "8.0rem",
          100: "10.0rem",
          110: "11.0rem",
          120: "12.0rem",
          150: "15.0rem"
        }
      },
      plugins: []
    };
  }
});

// src/js/app/Product.tsx
init_react_shim();
init_preact_module();

// src/js/components/products/_Description.tsx
init_react_shim();

// src/js/components/products/_ProductStore.ts
init_react_shim();
var product = JSON.parse(document.getElementById("inline-json-product").text);
var availableVariant = JSON.parse(document.getElementById("inline-json-product-available").text);
var productLang = JSON.parse(document.getElementById("inline-json-product-lang").text);
var productUrl = JSON.parse(document.getElementById("inline-json-product-url").text);

// src/js/components/products/_SectionStore.ts
init_react_shim();
init_preact_module();
var SectionContext = D();
var section = JSON.parse(document.getElementById("inline-json-section").text);
var sectionInitial = { ...section };
var sectionId = section.id;

// src/js/components/products/_VariantFieldsets.tsx
init_react_shim();

// src/js/components/products/_VariantFieldset.tsx
init_react_shim();
init_hooks_module();

// src/js/_Atoms.ts
init_react_shim();

// node_modules/jotai/esm/index.mjs
init_react_shim();
var import_react = __toESM(require_compat(), 1);
var SUSPENSE_PROMISE = Symbol();
var isSuspensePromise = (promise) => !!promise[SUSPENSE_PROMISE];
var isSuspensePromiseAlreadyCancelled = (suspensePromise) => !suspensePromise[SUSPENSE_PROMISE].c;
var cancelSuspensePromise = (suspensePromise) => {
  var _a, _b;
  (_b = (_a = suspensePromise[SUSPENSE_PROMISE]).c) == null ? void 0 : _b.call(_a);
};
var isEqualSuspensePromise = (oldSuspensePromise, newSuspensePromise) => {
  const oldOriginalPromise = oldSuspensePromise[SUSPENSE_PROMISE].o;
  const newOriginalPromise = newSuspensePromise[SUSPENSE_PROMISE].o;
  return oldOriginalPromise === newOriginalPromise || oldSuspensePromise === newOriginalPromise || isSuspensePromise(oldOriginalPromise) && isEqualSuspensePromise(oldOriginalPromise, newSuspensePromise);
};
var createSuspensePromise = (promise) => {
  const objectToAttach = {
    o: promise,
    c: null
  };
  const suspensePromise = new Promise((resolve) => {
    objectToAttach.c = () => {
      objectToAttach.c = null;
      resolve();
    };
    promise.then(objectToAttach.c, objectToAttach.c);
  });
  suspensePromise[SUSPENSE_PROMISE] = objectToAttach;
  return suspensePromise;
};
var __defProp$1 = Object.defineProperty;
var __defProps$1 = Object.defineProperties;
var __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;
var __hasOwnProp$1 = Object.prototype.hasOwnProperty;
var __propIsEnum$1 = Object.prototype.propertyIsEnumerable;
var __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues$1 = (a3, b3) => {
  for (var prop in b3 || (b3 = {}))
    if (__hasOwnProp$1.call(b3, prop))
      __defNormalProp$1(a3, prop, b3[prop]);
  if (__getOwnPropSymbols$1)
    for (var prop of __getOwnPropSymbols$1(b3)) {
      if (__propIsEnum$1.call(b3, prop))
        __defNormalProp$1(a3, prop, b3[prop]);
    }
  return a3;
};
var __spreadProps$1 = (a3, b3) => __defProps$1(a3, __getOwnPropDescs$1(b3));
var hasInitialValue = (atom2) => "init" in atom2;
var READ_ATOM = "r";
var WRITE_ATOM = "w";
var COMMIT_ATOM = "c";
var SUBSCRIBE_ATOM = "s";
var RESTORE_ATOMS = "h";
var DEV_SUBSCRIBE_STATE = "n";
var DEV_GET_MOUNTED_ATOMS = "l";
var DEV_GET_ATOM_STATE = "a";
var DEV_GET_MOUNTED = "m";
var createStore = (initialValues) => {
  const committedAtomStateMap = /* @__PURE__ */ new WeakMap();
  const mountedMap = /* @__PURE__ */ new WeakMap();
  const pendingMap = /* @__PURE__ */ new Map();
  let stateListeners;
  let mountedAtoms;
  if ((import.meta.env && import.meta.env.MODE) !== "production") {
    stateListeners = /* @__PURE__ */ new Set();
    mountedAtoms = /* @__PURE__ */ new Set();
  }
  if (initialValues) {
    for (const [atom2, value] of initialValues) {
      const atomState = { v: value, r: 0, d: /* @__PURE__ */ new Map() };
      if ((import.meta.env && import.meta.env.MODE) !== "production") {
        Object.freeze(atomState);
        if (!hasInitialValue(atom2)) {
          console.warn("Found initial value for derived atom which can cause unexpected behavior", atom2);
        }
      }
      committedAtomStateMap.set(atom2, atomState);
    }
  }
  const suspensePromiseCacheMap = /* @__PURE__ */ new WeakMap();
  const addSuspensePromiseToCache = (version, atom2, suspensePromise) => {
    let cache = suspensePromiseCacheMap.get(atom2);
    if (!cache) {
      cache = /* @__PURE__ */ new Map();
      suspensePromiseCacheMap.set(atom2, cache);
    }
    suspensePromise.then(() => {
      if (cache.get(version) === suspensePromise) {
        cache.delete(version);
        if (!cache.size) {
          suspensePromiseCacheMap.delete(atom2);
        }
      }
    });
    cache.set(version, suspensePromise);
  };
  const cancelAllSuspensePromiseInCache = (atom2) => {
    const versionSet = /* @__PURE__ */ new Set();
    const cache = suspensePromiseCacheMap.get(atom2);
    if (cache) {
      suspensePromiseCacheMap.delete(atom2);
      cache.forEach((suspensePromise, version) => {
        cancelSuspensePromise(suspensePromise);
        versionSet.add(version);
      });
    }
    return versionSet;
  };
  const versionedAtomStateMapMap = /* @__PURE__ */ new WeakMap();
  const getVersionedAtomStateMap = (version) => {
    let versionedAtomStateMap = versionedAtomStateMapMap.get(version);
    if (!versionedAtomStateMap) {
      versionedAtomStateMap = /* @__PURE__ */ new Map();
      versionedAtomStateMapMap.set(version, versionedAtomStateMap);
    }
    return versionedAtomStateMap;
  };
  const getAtomState = (version, atom2) => {
    if (version) {
      const versionedAtomStateMap = getVersionedAtomStateMap(version);
      let atomState = versionedAtomStateMap.get(atom2);
      if (!atomState) {
        atomState = getAtomState(version.p, atom2);
        if (atomState) {
          if ("p" in atomState) {
            atomState.p.then(() => versionedAtomStateMap.delete(atom2));
          }
          versionedAtomStateMap.set(atom2, atomState);
        }
      }
      return atomState;
    }
    return committedAtomStateMap.get(atom2);
  };
  const setAtomState = (version, atom2, atomState) => {
    if ((import.meta.env && import.meta.env.MODE) !== "production") {
      Object.freeze(atomState);
    }
    if (version) {
      const versionedAtomStateMap = getVersionedAtomStateMap(version);
      versionedAtomStateMap.set(atom2, atomState);
    } else {
      const prevAtomState = committedAtomStateMap.get(atom2);
      committedAtomStateMap.set(atom2, atomState);
      if (!pendingMap.has(atom2)) {
        pendingMap.set(atom2, prevAtomState);
      }
    }
  };
  const createReadDependencies = (version, prevReadDependencies = /* @__PURE__ */ new Map(), dependencies) => {
    if (!dependencies) {
      return prevReadDependencies;
    }
    const readDependencies = /* @__PURE__ */ new Map();
    let changed = false;
    dependencies.forEach((atom2) => {
      var _a;
      const revision = ((_a = getAtomState(version, atom2)) == null ? void 0 : _a.r) || 0;
      readDependencies.set(atom2, revision);
      if (prevReadDependencies.get(atom2) !== revision) {
        changed = true;
      }
    });
    if (prevReadDependencies.size === readDependencies.size && !changed) {
      return prevReadDependencies;
    }
    return readDependencies;
  };
  const setAtomValue = (version, atom2, value, dependencies, suspensePromise) => {
    const atomState = getAtomState(version, atom2);
    if (atomState) {
      if (suspensePromise && (!("p" in atomState) || !isEqualSuspensePromise(atomState.p, suspensePromise))) {
        return atomState;
      }
      if ("p" in atomState) {
        cancelSuspensePromise(atomState.p);
      }
    }
    const nextAtomState = {
      v: value,
      r: (atomState == null ? void 0 : atomState.r) || 0,
      d: createReadDependencies(version, atomState == null ? void 0 : atomState.d, dependencies)
    };
    if (!atomState || !("v" in atomState) || !Object.is(atomState.v, value)) {
      ++nextAtomState.r;
      if (nextAtomState.d.has(atom2)) {
        nextAtomState.d = new Map(nextAtomState.d).set(atom2, nextAtomState.r);
      }
    } else if (nextAtomState.d !== atomState.d && (nextAtomState.d.size !== atomState.d.size || !Array.from(nextAtomState.d.keys()).every((a3) => atomState.d.has(a3)))) {
      Promise.resolve().then(() => {
        flushPending(version);
      });
    }
    setAtomState(version, atom2, nextAtomState);
    return nextAtomState;
  };
  const setAtomReadError = (version, atom2, error, dependencies, suspensePromise) => {
    const atomState = getAtomState(version, atom2);
    if (atomState) {
      if (suspensePromise && (!("p" in atomState) || !isEqualSuspensePromise(atomState.p, suspensePromise))) {
        return atomState;
      }
      if ("p" in atomState) {
        cancelSuspensePromise(atomState.p);
      }
    }
    const nextAtomState = {
      e: error,
      r: (atomState == null ? void 0 : atomState.r) || 0,
      d: createReadDependencies(version, atomState == null ? void 0 : atomState.d, dependencies)
    };
    setAtomState(version, atom2, nextAtomState);
    return nextAtomState;
  };
  const setAtomSuspensePromise = (version, atom2, suspensePromise, dependencies) => {
    const atomState = getAtomState(version, atom2);
    if (atomState && "p" in atomState) {
      if (isEqualSuspensePromise(atomState.p, suspensePromise)) {
        return atomState;
      }
      cancelSuspensePromise(atomState.p);
    }
    addSuspensePromiseToCache(version, atom2, suspensePromise);
    const nextAtomState = {
      p: suspensePromise,
      r: (atomState == null ? void 0 : atomState.r) || 0,
      d: createReadDependencies(version, atomState == null ? void 0 : atomState.d, dependencies)
    };
    setAtomState(version, atom2, nextAtomState);
    return nextAtomState;
  };
  const setAtomPromiseOrValue = (version, atom2, promiseOrValue, dependencies) => {
    if (promiseOrValue instanceof Promise) {
      const suspensePromise = createSuspensePromise(promiseOrValue.then((value) => {
        setAtomValue(version, atom2, value, dependencies, suspensePromise);
        flushPending(version);
      }).catch((e3) => {
        if (e3 instanceof Promise) {
          if (isSuspensePromise(e3)) {
            return e3.then(() => {
              readAtomState(version, atom2, true);
            });
          }
          return e3;
        }
        setAtomReadError(version, atom2, e3, dependencies, suspensePromise);
        flushPending(version);
      }));
      return setAtomSuspensePromise(version, atom2, suspensePromise, dependencies);
    }
    return setAtomValue(version, atom2, promiseOrValue, dependencies);
  };
  const setAtomInvalidated = (version, atom2) => {
    const atomState = getAtomState(version, atom2);
    if (atomState) {
      if ("p" in atomState) {
        cancelSuspensePromise(atomState.p);
      }
      const nextAtomState = __spreadProps$1(__spreadValues$1({}, atomState), {
        i: atomState.r
      });
      setAtomState(version, atom2, nextAtomState);
    } else if ((import.meta.env && import.meta.env.MODE) !== "production") {
      console.warn("[Bug] could not invalidate non existing atom", atom2);
    }
  };
  const readAtomState = (version, atom2, force) => {
    if (!force) {
      const atomState = getAtomState(version, atom2);
      if (atomState) {
        if (atomState.r !== atomState.i && "p" in atomState && !isSuspensePromiseAlreadyCancelled(atomState.p)) {
          return atomState;
        }
        atomState.d.forEach((_3, a3) => {
          if (a3 !== atom2) {
            if (!mountedMap.has(a3)) {
              readAtomState(version, a3);
            } else {
              const aState = getAtomState(version, a3);
              if (aState && aState.r === aState.i) {
                readAtomState(version, a3);
              }
            }
          }
        });
        if (Array.from(atomState.d).every(([a3, r3]) => {
          const aState = getAtomState(version, a3);
          return aState && "v" in aState && aState.r === r3;
        })) {
          return atomState;
        }
      }
    }
    const dependencies = /* @__PURE__ */ new Set();
    try {
      const promiseOrValue = atom2.read((a3) => {
        dependencies.add(a3);
        const aState = a3 === atom2 ? getAtomState(version, a3) : readAtomState(version, a3);
        if (aState) {
          if ("e" in aState) {
            throw aState.e;
          }
          if ("p" in aState) {
            throw aState.p;
          }
          return aState.v;
        }
        if (hasInitialValue(a3)) {
          return a3.init;
        }
        throw new Error("no atom init");
      });
      return setAtomPromiseOrValue(version, atom2, promiseOrValue, dependencies);
    } catch (errorOrPromise) {
      if (errorOrPromise instanceof Promise) {
        const suspensePromise = createSuspensePromise(errorOrPromise);
        return setAtomSuspensePromise(version, atom2, suspensePromise, dependencies);
      }
      return setAtomReadError(version, atom2, errorOrPromise, dependencies);
    }
  };
  const readAtom = (readingAtom, version) => {
    const atomState = readAtomState(version, readingAtom);
    return atomState;
  };
  const addAtom = (addingAtom) => {
    let mounted = mountedMap.get(addingAtom);
    if (!mounted) {
      mounted = mountAtom(addingAtom);
    }
    return mounted;
  };
  const canUnmountAtom = (atom2, mounted) => !mounted.l.size && (!mounted.t.size || mounted.t.size === 1 && mounted.t.has(atom2));
  const delAtom = (deletingAtom) => {
    const mounted = mountedMap.get(deletingAtom);
    if (mounted && canUnmountAtom(deletingAtom, mounted)) {
      unmountAtom(deletingAtom);
    }
  };
  const invalidateDependents = (version, atom2) => {
    const mounted = mountedMap.get(atom2);
    mounted == null ? void 0 : mounted.t.forEach((dependent) => {
      if (dependent !== atom2) {
        setAtomInvalidated(version, dependent);
        invalidateDependents(version, dependent);
      }
    });
  };
  const writeAtomState = (version, atom2, update) => {
    let isSync = true;
    const writeGetter = (a3, options) => {
      const aState = readAtomState(version, a3);
      if ("e" in aState) {
        throw aState.e;
      }
      if ("p" in aState) {
        if (options == null ? void 0 : options.unstable_promise) {
          return aState.p.then(() => writeGetter(a3, options));
        }
        if ((import.meta.env && import.meta.env.MODE) !== "production") {
          console.info("Reading pending atom state in write operation. We throw a promise for now.", a3);
        }
        throw aState.p;
      }
      if ("v" in aState) {
        return aState.v;
      }
      if ((import.meta.env && import.meta.env.MODE) !== "production") {
        console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.", a3);
      }
      throw new Error("no value found");
    };
    const setter = (a3, v3) => {
      let promiseOrVoid2;
      if (a3 === atom2) {
        if (!hasInitialValue(a3)) {
          throw new Error("atom not writable");
        }
        const versionSet = cancelAllSuspensePromiseInCache(a3);
        versionSet.forEach((cancelledVersion) => {
          if (cancelledVersion !== version) {
            setAtomPromiseOrValue(cancelledVersion, a3, v3);
          }
        });
        setAtomPromiseOrValue(version, a3, v3);
        invalidateDependents(version, a3);
      } else {
        promiseOrVoid2 = writeAtomState(version, a3, v3);
      }
      if (!isSync) {
        flushPending(version);
      }
      return promiseOrVoid2;
    };
    const promiseOrVoid = atom2.write(writeGetter, setter, update);
    isSync = false;
    version = void 0;
    return promiseOrVoid;
  };
  const writeAtom = (writingAtom, update, version) => {
    const promiseOrVoid = writeAtomState(version, writingAtom, update);
    flushPending(version);
    return promiseOrVoid;
  };
  const isActuallyWritableAtom = (atom2) => !!atom2.write;
  const mountAtom = (atom2, initialDependent) => {
    const mounted = {
      t: new Set(initialDependent && [initialDependent]),
      l: /* @__PURE__ */ new Set()
    };
    mountedMap.set(atom2, mounted);
    if ((import.meta.env && import.meta.env.MODE) !== "production") {
      mountedAtoms.add(atom2);
    }
    const atomState = readAtomState(void 0, atom2);
    atomState.d.forEach((_3, a3) => {
      const aMounted = mountedMap.get(a3);
      if (aMounted) {
        aMounted.t.add(atom2);
      } else {
        if (a3 !== atom2) {
          mountAtom(a3, atom2);
        }
      }
    });
    if (isActuallyWritableAtom(atom2) && atom2.onMount) {
      const setAtom = (update) => writeAtom(atom2, update);
      const onUnmount = atom2.onMount(setAtom);
      if (onUnmount) {
        mounted.u = onUnmount;
      }
    }
    return mounted;
  };
  const unmountAtom = (atom2) => {
    var _a;
    const onUnmount = (_a = mountedMap.get(atom2)) == null ? void 0 : _a.u;
    if (onUnmount) {
      onUnmount();
    }
    mountedMap.delete(atom2);
    if ((import.meta.env && import.meta.env.MODE) !== "production") {
      mountedAtoms.delete(atom2);
    }
    const atomState = getAtomState(void 0, atom2);
    if (atomState) {
      atomState.d.forEach((_3, a3) => {
        if (a3 !== atom2) {
          const mounted = mountedMap.get(a3);
          if (mounted) {
            mounted.t.delete(atom2);
            if (canUnmountAtom(a3, mounted)) {
              unmountAtom(a3);
            }
          }
        }
      });
    } else if ((import.meta.env && import.meta.env.MODE) !== "production") {
      console.warn("[Bug] could not find atom state to unmount", atom2);
    }
  };
  const mountDependencies = (atom2, atomState, prevReadDependencies) => {
    const dependencies = new Set(atomState.d.keys());
    prevReadDependencies == null ? void 0 : prevReadDependencies.forEach((_3, a3) => {
      if (dependencies.has(a3)) {
        dependencies.delete(a3);
        return;
      }
      const mounted = mountedMap.get(a3);
      if (mounted) {
        mounted.t.delete(atom2);
        if (canUnmountAtom(a3, mounted)) {
          unmountAtom(a3);
        }
      }
    });
    dependencies.forEach((a3) => {
      const mounted = mountedMap.get(a3);
      if (mounted) {
        mounted.t.add(atom2);
      } else if (mountedMap.has(atom2)) {
        mountAtom(a3, atom2);
      }
    });
  };
  const flushPending = (version) => {
    if (version) {
      const versionedAtomStateMap = getVersionedAtomStateMap(version);
      versionedAtomStateMap.forEach((atomState, atom2) => {
        if (atomState !== committedAtomStateMap.get(atom2)) {
          const mounted = mountedMap.get(atom2);
          mounted == null ? void 0 : mounted.l.forEach((listener) => listener(version));
        }
      });
      return;
    }
    while (pendingMap.size) {
      const pending = Array.from(pendingMap);
      pendingMap.clear();
      pending.forEach(([atom2, prevAtomState]) => {
        const atomState = getAtomState(void 0, atom2);
        if (atomState && atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {
          mountDependencies(atom2, atomState, prevAtomState == null ? void 0 : prevAtomState.d);
        }
        const mounted = mountedMap.get(atom2);
        mounted == null ? void 0 : mounted.l.forEach((listener) => listener());
      });
    }
    if ((import.meta.env && import.meta.env.MODE) !== "production") {
      stateListeners.forEach((l3) => l3());
    }
  };
  const commitVersionedAtomStateMap = (version) => {
    const versionedAtomStateMap = getVersionedAtomStateMap(version);
    versionedAtomStateMap.forEach((atomState, atom2) => {
      const prevAtomState = committedAtomStateMap.get(atom2);
      if (atomState.r > ((prevAtomState == null ? void 0 : prevAtomState.r) || 0) || "v" in atomState && atomState.r === (prevAtomState == null ? void 0 : prevAtomState.r) && atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {
        committedAtomStateMap.set(atom2, atomState);
        if (atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {
          mountDependencies(atom2, atomState, prevAtomState == null ? void 0 : prevAtomState.d);
        }
      }
    });
  };
  const commitAtom = (_atom, version) => {
    if (version) {
      commitVersionedAtomStateMap(version);
    }
    flushPending(void 0);
  };
  const subscribeAtom = (atom2, callback) => {
    const mounted = addAtom(atom2);
    const listeners = mounted.l;
    listeners.add(callback);
    return () => {
      listeners.delete(callback);
      delAtom(atom2);
    };
  };
  const restoreAtoms = (values, version) => {
    for (const [atom2, value] of values) {
      if (hasInitialValue(atom2)) {
        setAtomPromiseOrValue(version, atom2, value);
        invalidateDependents(version, atom2);
      }
    }
    flushPending(version);
  };
  if ((import.meta.env && import.meta.env.MODE) !== "production") {
    return {
      [READ_ATOM]: readAtom,
      [WRITE_ATOM]: writeAtom,
      [COMMIT_ATOM]: commitAtom,
      [SUBSCRIBE_ATOM]: subscribeAtom,
      [RESTORE_ATOMS]: restoreAtoms,
      [DEV_SUBSCRIBE_STATE]: (l3) => {
        stateListeners.add(l3);
        return () => {
          stateListeners.delete(l3);
        };
      },
      [DEV_GET_MOUNTED_ATOMS]: () => mountedAtoms.values(),
      [DEV_GET_ATOM_STATE]: (a3) => committedAtomStateMap.get(a3),
      [DEV_GET_MOUNTED]: (a3) => mountedMap.get(a3)
    };
  }
  return {
    [READ_ATOM]: readAtom,
    [WRITE_ATOM]: writeAtom,
    [COMMIT_ATOM]: commitAtom,
    [SUBSCRIBE_ATOM]: subscribeAtom,
    [RESTORE_ATOMS]: restoreAtoms
  };
};
var createScopeContainer = (initialValues, unstable_createStore) => {
  const store = unstable_createStore ? unstable_createStore(initialValues).SECRET_INTERNAL_store : createStore(initialValues);
  return { s: store };
};
var ScopeContextMap = /* @__PURE__ */ new Map();
var getScopeContext = (scope) => {
  if (!ScopeContextMap.has(scope)) {
    ScopeContextMap.set(scope, (0, import_react.createContext)(createScopeContainer()));
  }
  return ScopeContextMap.get(scope);
};
var __defProp2 = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp2 = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a3, b3) => {
  for (var prop in b3 || (b3 = {}))
    if (__hasOwnProp2.call(b3, prop))
      __defNormalProp(a3, prop, b3[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b3)) {
      if (__propIsEnum.call(b3, prop))
        __defNormalProp(a3, prop, b3[prop]);
    }
  return a3;
};
var __spreadProps = (a3, b3) => __defProps(a3, __getOwnPropDescs(b3));
var atomToPrintable = (atom2) => atom2.debugLabel || atom2.toString();
var stateToPrintable = ([store, atoms]) => Object.fromEntries(atoms.flatMap((atom2) => {
  var _a, _b;
  const mounted = (_a = store[DEV_GET_MOUNTED]) == null ? void 0 : _a.call(store, atom2);
  if (!mounted) {
    return [];
  }
  const dependents = mounted.t;
  const atomState = ((_b = store[DEV_GET_ATOM_STATE]) == null ? void 0 : _b.call(store, atom2)) || {};
  return [
    [
      atomToPrintable(atom2),
      __spreadProps(__spreadValues(__spreadValues(__spreadValues({}, "e" in atomState && { error: atomState.e }), "p" in atomState && { promise: atomState.p }), "v" in atomState && { value: atomState.v }), {
        dependents: Array.from(dependents).map(atomToPrintable)
      })
    ]
  ];
}));
var useDebugState = (scopeContainer) => {
  const { s: store } = scopeContainer;
  const [atoms, setAtoms] = (0, import_react.useState)([]);
  (0, import_react.useEffect)(() => {
    var _a;
    const callback = () => {
      var _a2;
      setAtoms(Array.from(((_a2 = store[DEV_GET_MOUNTED_ATOMS]) == null ? void 0 : _a2.call(store)) || []));
    };
    const unsubscribe = (_a = store[DEV_SUBSCRIBE_STATE]) == null ? void 0 : _a.call(store, callback);
    callback();
    return unsubscribe;
  }, [store]);
  (0, import_react.useDebugValue)([store, atoms], stateToPrintable);
};
var Provider = ({
  children: children2,
  initialValues,
  scope,
  unstable_createStore,
  unstable_enableVersionedWrite
}) => {
  const [version, setVersion] = (0, import_react.useState)();
  (0, import_react.useEffect)(() => {
    if (version) {
      scopeContainerRef.current.s[COMMIT_ATOM](null, version);
      delete version.p;
    }
  }, [version]);
  const scopeContainerRef = (0, import_react.useRef)();
  if (!scopeContainerRef.current) {
    scopeContainerRef.current = createScopeContainer(initialValues, unstable_createStore);
    if (unstable_enableVersionedWrite) {
      scopeContainerRef.current.w = (write) => {
        setVersion((parentVersion) => {
          const nextVersion = parentVersion ? { p: parentVersion } : {};
          write(nextVersion);
          return nextVersion;
        });
      };
    }
  }
  if ((import.meta.env && import.meta.env.MODE) !== "production" && !unstable_enableVersionedWrite) {
    useDebugState(scopeContainerRef.current);
  }
  const ScopeContainerContext = getScopeContext(scope);
  return (0, import_react.createElement)(ScopeContainerContext.Provider, {
    value: scopeContainerRef.current
  }, children2);
};
var keyCount = 0;
function atom(read, write) {
  const key = `atom${++keyCount}`;
  const config = {
    toString: () => key
  };
  if (typeof read === "function") {
    config.read = read;
  } else {
    config.init = read;
    config.read = (get) => get(config);
    config.write = (get, set, update) => set(config, typeof update === "function" ? update(get(config)) : update);
  }
  if (write) {
    config.write = write;
  }
  return config;
}
function useAtomValue(atom2, scope) {
  const ScopeContext = getScopeContext(scope);
  const { s: store } = (0, import_react.useContext)(ScopeContext);
  const getAtomValue = (0, import_react.useCallback)((version2) => {
    const atomState = store[READ_ATOM](atom2, version2);
    if ("e" in atomState) {
      throw atomState.e;
    }
    if ("p" in atomState) {
      throw atomState.p;
    }
    if ("v" in atomState) {
      return atomState.v;
    }
    throw new Error("no atom value");
  }, [store, atom2]);
  const [[version, value, atomFromUseReducer], rerenderIfChanged] = (0, import_react.useReducer)((0, import_react.useCallback)((prev2, nextVersion) => {
    const nextValue = getAtomValue(nextVersion);
    if (Object.is(prev2[1], nextValue) && prev2[2] === atom2) {
      return prev2;
    }
    return [nextVersion, nextValue, atom2];
  }, [getAtomValue, atom2]), void 0, () => {
    const initialVersion = void 0;
    const initialValue = getAtomValue(initialVersion);
    return [initialVersion, initialValue, atom2];
  });
  if (atomFromUseReducer !== atom2) {
    rerenderIfChanged(void 0);
  }
  (0, import_react.useEffect)(() => {
    const unsubscribe = store[SUBSCRIBE_ATOM](atom2, rerenderIfChanged);
    rerenderIfChanged(void 0);
    return unsubscribe;
  }, [store, atom2]);
  (0, import_react.useEffect)(() => {
    store[COMMIT_ATOM](atom2, version);
  });
  (0, import_react.useDebugValue)(value);
  return value;
}
function useSetAtom(atom2, scope) {
  const ScopeContext = getScopeContext(scope);
  const { s: store, w: versionedWrite } = (0, import_react.useContext)(ScopeContext);
  const setAtom = (0, import_react.useCallback)((update) => {
    if ((import.meta.env && import.meta.env.MODE) !== "production" && !("write" in atom2)) {
      throw new Error("not writable atom");
    }
    const write = (version) => store[WRITE_ATOM](atom2, update, version);
    return versionedWrite ? versionedWrite(write) : write();
  }, [store, versionedWrite, atom2]);
  return setAtom;
}
function useAtom(atom2, scope) {
  if ("scope" in atom2) {
    console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead.");
    scope = atom2.scope;
  }
  return [
    useAtomValue(atom2, scope),
    useSetAtom(atom2, scope)
  ];
}

// src/js/components/products/_PriceStore.tsx
init_react_shim();
var priceJsonId = "inline-json-product-price";
var priceInitial = JSON.parse(document.getElementById(priceJsonId).text);

// src/js/components/products/_VariantStore.ts
init_react_shim();
init_preact_module();
var VariantsContext = D();
var productVariants = JSON.parse(document.getElementById("inline-json-product-variants").text);
var optionsWithValues = JSON.parse(document.getElementById("inline-json-product-options-with-values").text)?.filter((option) => option.name === "Color" || option.name === "Size");
var checkedOptions = optionsWithValues.reduce((prev2, {
  name,
  selected_value
}) => Object.assign(prev2, { [name]: selected_value }), {});
var variantImages = productVariants.filter((v3) => v3?.featured_image).map(({
  id,
  title,
  option1,
  option2,
  featured_image
}) => ({
  variant_id: id,
  title,
  option1,
  option2,
  id: featured_image.id,
  src: featured_image.src.replace(/^https?:/, ""),
  variant_ids: featured_image.variant_ids
}));

// src/js/_Atoms.ts
var priceAtom = atom(priceInitial);
var variantAtom = atom(availableVariant);
var checkedOptionsAtom = atom(checkedOptions);
var checkedOptionsRWAtom = atom((get) => Object.values(get(checkedOptionsAtom)), (get, set, option) => {
  const state = get(checkedOptionsAtom);
  state[option.name] = option.value;
  set(checkedOptionsAtom, state);
});
var processingAtom = atom(false);

// node_modules/jotai/esm/utils.mjs
init_react_shim();
var import_react2 = __toESM(require_compat(), 1);
var RESET = Symbol();
var getWeakCacheItem = (cache, deps) => {
  do {
    const [dep, ...rest] = deps;
    const entry = cache.get(dep);
    if (!entry) {
      return;
    }
    if (!rest.length) {
      return entry[1];
    }
    cache = entry[0];
    deps = rest;
  } while (deps.length);
};
var setWeakCacheItem = (cache, deps, item) => {
  do {
    const [dep, ...rest] = deps;
    let entry = cache.get(dep);
    if (!entry) {
      entry = [/* @__PURE__ */ new WeakMap()];
      cache.set(dep, entry);
    }
    if (!rest.length) {
      entry[1] = item;
      return;
    }
    cache = entry[0];
    deps = rest;
  } while (deps.length);
};
var createMemoizeAtom = () => {
  const cache = /* @__PURE__ */ new WeakMap();
  const memoizeAtom2 = (createAtom, deps) => {
    const cachedAtom = getWeakCacheItem(cache, deps);
    if (cachedAtom) {
      return cachedAtom;
    }
    const createdAtom = createAtom();
    setWeakCacheItem(cache, deps, createdAtom);
    return createdAtom;
  };
  return memoizeAtom2;
};
var memoizeAtom$4 = createMemoizeAtom();
var memoizeAtom$3 = createMemoizeAtom();
var memoizeAtom$2 = createMemoizeAtom();
var memoizeAtom$1 = createMemoizeAtom();
function createJSONStorage(getStringStorage) {
  let lastStr;
  let lastValue;
  return {
    getItem: (key) => {
      const parse = (str2) => {
        str2 = str2 || "";
        if (lastStr !== str2) {
          lastValue = JSON.parse(str2);
          lastStr = str2;
        }
        return lastValue;
      };
      const str = getStringStorage().getItem(key);
      if (str instanceof Promise) {
        return str.then(parse);
      }
      return parse(str);
    },
    setItem: (key, newValue) => getStringStorage().setItem(key, JSON.stringify(newValue)),
    removeItem: (key) => getStringStorage().removeItem(key)
  };
}
var defaultStorage = createJSONStorage(() => localStorage);
defaultStorage.subscribe = (key, callback) => {
  const storageEventCallback = (e3) => {
    if (e3.key === key && e3.newValue) {
      callback(JSON.parse(e3.newValue));
    }
  };
  window.addEventListener("storage", storageEventCallback);
  return () => {
    window.removeEventListener("storage", storageEventCallback);
  };
};
var memoizeAtom = createMemoizeAtom();

// src/js/components/products/_VariantOption.tsx
init_react_shim();
init_hooks_module();
function VariantOption({
  option,
  value,
  index: index2,
  changeColor
}) {
  const input = h2();
  const [variant, setVariant] = useAtom(variantAtom);
  const checked = useAtomValue(checkedOptionsAtom);
  const checkOption = useSetAtom(checkedOptionsRWAtom);
  const setPrice = useSetAtom(priceAtom);
  const setProcessing = useSetAtom(processingAtom);
  function toggleAddButton(disable = true, text3, modifyClass = true) {
    const productForm = document.getElementById(`product-form-${sectionId}`);
    if (!productForm)
      return;
    const addButton = productForm.querySelector('[name="add"]');
    const addButtonText = productForm.querySelector('[name="add"] > span');
    if (!addButton)
      return;
    if (disable) {
      addButton.setAttribute("disabled", "disabled");
      if (text3)
        addButtonText.textContent = text3;
    } else {
      addButton.removeAttribute("disabled");
      addButtonText.textContent = window.variantStrings.addToCart;
    }
    if (!modifyClass)
      return;
  }
  function updatePickupAvailability() {
    const pickUpAvailability = document.querySelector("pickup-availability");
    if (!pickUpAvailability)
      return;
    if (variant && variant.available && pickUpAvailability?.fetchAvailability) {
      pickUpAvailability?.fetchAvailability(variant.id);
    } else {
      pickUpAvailability?.removeAttribute("available");
      pickUpAvailability.innerHTML = "";
    }
  }
  function removeErrorMessage() {
    const section2 = input.current.closest("section");
    if (!section2)
      return;
    const productForm = section2.querySelector("product-form");
    if (productForm)
      productForm.handleErrorMessage();
  }
  function setUnavailable() {
    const button = document.getElementById(`product-form-${sectionId}`);
    const addButton = button?.querySelector('[name="add"]');
    const addButtonText = button?.querySelector('[name="add"] > span');
    const price = document.getElementById(`price-${sectionId}`);
    if (!addButton)
      return;
    addButtonText.textContent = window.variantStrings.unavailable;
    if (price)
      price.classList.add("visibility-hidden");
  }
  function updateURL() {
    if (!variant || input.current.updateUrl === "false")
      return;
    window.history.replaceState({}, "", `${productUrl}?variant=${variant.id}`);
  }
  function updateVariantInput() {
    const productForms = document.querySelectorAll(`#product-form-${sectionId}`);
    productForms.forEach((productForm) => {
      const input2 = productForm.querySelector('input[name="id"]');
      input2.value = variant.id;
      input2.dispatchEvent(new Event("change", { bubbles: true }));
    });
  }
  async function renderProductInfo() {
    setProcessing(true);
    return fetch(`${productUrl}?variant=${variant.id}&section_id=${sectionId}`).then((response) => response.text()).then((responseText) => {
      const html2 = new DOMParser().parseFromString(responseText, "text/html");
      const source = html2.getElementById(priceJsonId);
      const newPrice = JSON.parse(source.text);
      if (newPrice) {
        setPrice(newPrice);
      }
      toggleAddButton(!variant.available, window.variantStrings.soldOut);
    }).finally(() => setProcessing(false));
  }
  function updateShareUrl() {
    const shareButton = document.getElementById(`Share-${sectionId}`);
    if (!shareButton)
      return;
    shareButton.updateUrl(`${window.shopUrl}${productUrl}?variant=${variant.id}`);
  }
  const onChange = (e3) => {
    checkOption(input.current);
    const currentVariant = productVariants.find(({
      options
    }) => !options.map((option2) => Object.values(checked).includes(option2)).includes(false));
    if (!currentVariant) {
      return;
    }
    setVariant(currentVariant);
  };
  y2(() => {
    input.current.checked = option.selected_value == value;
  }, []);
  y2(() => {
    if (input.current.value !== checked[input.current.name]) {
      return;
    }
    toggleAddButton(true, "", false);
    updatePickupAvailability();
    removeErrorMessage();
    if (!variant) {
      toggleAddButton(true, "", true);
      setUnavailable(sectionId);
    } else {
      updateURL();
      updateVariantInput();
      renderProductInfo();
      updateShareUrl();
    }
    changeColor(input.current.value);
  }, [variant]);
  const classNameBase = `relative border-white border-[4px] peer-checked:shadow-[0_0_1px_1px_#333333] hover:shadow-[0_0_2px_0_black] rounded-full`;
  const beforeClassName = `before:content-[attr(data-text)] before:text-[length:1rem] before:absolute before:top-1/2 before:left-1/2 before:-translate-y-1/2 before:-translate-x-1/2`;
  const bgColor = option.name === "Color" ? `bg-v-${value.toLowerCase()}` : "";
  const text2 = option.name === "Color" ? "" : value;
  return /* @__PURE__ */ v(Provider, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "contents group"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "radio",
    id: `${sectionId}-${option.position}-${index2}`,
    name: option.name,
    value,
    form: `product-form-${sectionId}`,
    ref: input,
    onChange,
    className: "peer"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("label", {
    for: `${sectionId}-${option.position}-${index2}`,
    "data-text": text2,
    className: `${classNameBase} ${beforeClassName} ${bgColor}`
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"));
}

// src/js/components/products/_VariantFieldset.tsx
function VariantFieldset({
  option
}) {
  const checked = useAtomValue(checkedOptionsAtom);
  const [color, setColorName] = m2(checked["Color"]);
  const changeColor = function(name) {
    setColorName(name);
  };
  return /* @__PURE__ */ v(d, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("fieldset", {
    className: `js product-form__input flex content-center ${option.name === "Color" && "!m-0"} ${option.name}`
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "w-[4em] shrink-0"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("legend", {
    className: "form__label contents"
  }, option.name, ": "), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "flex flex-col gap-y-1"
  }, option.name === "Color" && /* @__PURE__ */ v("div", null, color), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "flex flex-wrap"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", option.values.map((value, index2) => /* @__PURE__ */ v(VariantOption, {
    ...{ option, value, index: index2, changeColor }
  })), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"));
}

// src/js/components/products/_VariantFieldsets.tsx
function VariantFieldsets() {
  const hasSize = optionsWithValues?.map((option) => option.name).filter((name) => name === "Size").includes("Size");
  return /* @__PURE__ */ v("div", {
    className: "no-js-hidden py-14",
    "data-section": sectionId,
    "data-url": productUrl
  }, (() => {
    if (!hasSize) {
      return /* @__PURE__ */ v("fieldset", {
        className: `js product-form__input flex content-center items-center Size`
      }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
        className: "w-[4em]"
      }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("legend", {
        className: "form__label contents"
      }, "Size: "), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "Free // @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
    }
  })(), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", optionsWithValues?.map((option) => /* @__PURE__ */ v(VariantFieldset, {
    option,
    sectionId
  })), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}

// src/js/components/products/_Form.tsx
init_react_shim();
init_hooks_module();
var Form = () => {
  const formRef = h2(null);
  const spinnerRef = h2(null);
  const [errMsg, setErrorMessage] = m2("");
  const [isLoading, setLoadingState] = m2(false);
  const cartNotification = document.querySelector("cart-notification");
  const [variant] = useAtom(variantAtom);
  const [isProcessing] = useAtom(processingAtom);
  function onSubmitHandler(evt) {
    evt.preventDefault();
    if (isLoading)
      return;
    handleErrorMessage();
    cartNotification.setActiveElement(document.activeElement);
    setLoadingState(true);
    const config = {
      method: "POST",
      headers: { "Content-Type": "application/json", Accept: `application/javascript` }
    };
    config.headers["X-Requested-With"] = "XMLHttpRequest";
    delete config.headers["Content-Type"];
    const formData = new FormData(formRef.current);
    formData.append("sections", cartNotification.getSectionsToRender().map((section2) => section2.id));
    formData.append("sections_url", window.location.pathname);
    config.body = formData;
    fetch(`${routes.cart_add_url}`, config).then((response) => response.json()).then((response) => {
      if (response.status) {
        handleErrorMessage(response.description);
        return;
      }
      cartNotification.renderContents(response);
    }).catch((e3) => {
      console.error(e3);
    }).finally(() => {
      setLoadingState(false);
    });
  }
  function handleErrorMessage(errorMessage = false) {
    if (errorMessage) {
      setErrorMessage(errorMessage);
    }
  }
  return /* @__PURE__ */ v("div", {
    className: `product-form ${isProcessing ? "opacity-20 transition-opacity" : ""}`
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "product-form__error-message-wrapper",
    role: "alert",
    hidden: errMsg === ""
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    "aria-hidden": "true",
    focusable: "false",
    role: "presentation",
    className: "icon icon-error",
    viewBox: "0 0 13 13"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("circle", {
    cx: "6.5",
    cy: "6.50049",
    r: "5.5",
    stroke: "white",
    "stroke-width": "2"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("circle", {
    cx: "6.5",
    cy: "6.5",
    r: "5.5",
    fill: "#EB001B",
    stroke: "#EB001B",
    "stroke-width": "0.7"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z",
    fill: "white"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z",
    fill: "white",
    stroke: "#EB001B",
    "stroke-width": "0.7"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", {
    className: "product-form__error-message"
  }, errMsg), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("form", {
    method: "post",
    action: "/cart/add",
    "accept-charset": "UTF-8",
    className: "form",
    enctype: "multipart/form-data",
    novalidate: "novalidate",
    "data-type": "add-to-cart-form",
    onSubmit: onSubmitHandler,
    ref: formRef
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "form_type",
    value: "product"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "utf8",
    value: "\u2713"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "id",
    value: variant.id
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "product-form__buttons"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("button", {
    type: "submit",
    name: "add",
    className: `${isLoading ? "loading" : ""} bg-accent1 text-white product-form__submit button button--full-width button--primary`,
    "aria-disabled": isLoading,
    disabled: !variant.available
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", null, variant.available ? "ADD TO CART" : "SOLD OUT"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: `loading-overlay__spinner ${isLoading ? "" : "hidden"}`,
    ref: spinnerRef
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    "aria-hidden": "true",
    focusable: "false",
    role: "presentation",
    className: "spinner",
    viewBox: "0 0 66 66",
    xmlns: "http://www.w3.org/2000/svg"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("circle", {
    className: "path",
    fill: "none",
    "stroke-width": "6",
    cx: "33",
    cy: "33",
    r: "30"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    class: `cart__dynamic-checkout-buttons additional-checkout-buttons ${variant.available ? "" : "hidden"}`
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "dynamic-checkout__content",
    id: "dynamic-checkout-cart",
    "data-shopify": "dynamic-checkout-cart"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
};
var Form_default = Form;

// src/js/components/products/_PickupAvailability.tsx
init_react_shim();
function PickupAvailability() {
  return /* @__PURE__ */ v("pickup-availability", {
    class: "product__pickup-availabilities no-js-hidden",
    "data-root-url": "/",
    "data-variant-id": "42582435856642",
    "data-has-only-default-variant": "false"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("template", null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("pickup-availability-preview", {
    class: "pickup-availability-preview"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    "aria-hidden": "true",
    focusable: "false",
    role: "presentation",
    class: "icon icon-unavailable",
    viewBox: "0 0 20 20"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    fill: "#DE3618",
    stroke: "#fff",
    d: "M13.94 3.94L10 7.878l-3.94-3.94A1.499 1.499 0 103.94 6.06L7.88 10l-3.94 3.94a1.499 1.499 0 102.12 2.12L10 12.12l3.94 3.94a1.497 1.497 0 002.12 0 1.499 1.499 0 000-2.12L12.122 10l3.94-3.94a1.499 1.499 0 10-2.121-2.12z"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    class: "pickup-availability-info"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("p", {
    class: "caption-large"
  }, "Couldn't load pickup availability"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("button", {
    class: "pickup-availability-button link link--text underlined-link"
  }, "Refresh"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}

// src/js/components/products/_Tag.tsx
init_react_shim();

// src/js/components/products/_TagStore.ts
init_react_shim();
var newTagClass = "bg-[#CC6D78] text-white";
var restockTagClass = "border border-link-gray";

// src/js/components/products/_Tag.tsx
function Tag({
  type,
  label
}) {
  const className = type === "new" ? newTagClass : restockTagClass;
  return /* @__PURE__ */ v("label", {
    className: `text-10 px-4 py-1 inline-block ${className}`
  }, label ?? type);
}

// src/js/components/products/_Accordion.tsx
init_react_shim();
init_hooks_module();
function Accordion({
  id
}) {
  const jsonElm = document.getElementById(id);
  if (!jsonElm) {
    return /* @__PURE__ */ v(d, null);
  }
  try {
    JSON.parse(jsonElm.text);
  } catch (e3) {
    console.log(id);
    console.error(e3);
    return /* @__PURE__ */ v(d, null);
  }
  const json = JSON.parse(jsonElm.text);
  if (!json || !json?.content?.length || json.content.join("") === "") {
    return /* @__PURE__ */ v(d, null);
  }
  const [isOpen, setIsOpen] = m2(true);
  const onToggle = (e3) => setIsOpen(e3.target.open);
  const detailsId = `Details-${json?.id}-${sectionId}`;
  const contentId = `ProductAccordion-${json?.id}-${sectionId}`;
  return /* @__PURE__ */ v("div", {
    className: "product__accordion accordion"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("details", {
    id: detailsId,
    open: isOpen,
    onToggle,
    "data-id": id
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("summary", {
    role: "button",
    "aria-expanded": "false",
    "aria-controls": contentId
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "summary__title"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("h2", {
    className: "h4 accordion__title"
  }, json.heading), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "text-16  flex place-items-center"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    className: `${isOpen ? "" : "hidden"}`,
    width: "14",
    height: "2",
    viewBox: "0 0 14 2",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M0 1H14",
    stroke: "black"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    className: `${isOpen ? "hidden" : ""}`,
    width: "14",
    height: "14",
    viewBox: "0 0 14 14",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M0 7H14",
    stroke: "black"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M7 14L7 0",
    stroke: "black"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "accordion__content rte",
    id: contentId,
    dangerouslySetInnerHTML: { __html: json?.content.join("") }
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}

// src/js/components/products/_Price.tsx
init_react_shim();
function Price() {
  const [price] = useAtom(priceAtom);
  const [isProcessing] = useAtom(processingAtom);
  return /* @__PURE__ */ v(Provider, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: `no-js-hidden ${isProcessing ? "opacity-20 transition-opacity" : ""}`,
    id: `price-${sectionId}`,
    role: "status"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    class: `price ${price.price_class} ${price.available ? "" : "price--sold-out"} ${price.compare_at_price > price.price ? "price--on-sale" : ""} ${price.price_varies === false && price.compare_at_price_varies ? "price--no-compare" : ""} ${price.show_badges ? "price--show-badge" : ""}`
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "price__container"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "price__regular"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", {
    className: "visually-hidden visually-hidden--inline"
  }, price.regular_price), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", {
    className: "price-item price-item--regular"
  }, (price.price / 100).toLocaleString("ja-JP", { style: "currency", currency: "JPY" })), (price.taxes_included || price.has_shipping_policy_body) && /* @__PURE__ */ v("span", {
    className: "product__tax caption rte pl-1"
  }, price.taxes_included ? "(\u7A0E\u8FBC)" : "", price.has_shipping_policy_body ? price.shipping_policy_html : "", "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"));
}

// src/js/components/products/_FormInstallment.tsx
init_react_shim();
init_hooks_module();
function FormInstallment() {
  const idRef = h2(null);
  const [variant] = useAtom(variantAtom);
  y2(() => {
    idRef.current.value = variant?.id;
  }, [variant]);
  return /* @__PURE__ */ v("form", {
    method: "post",
    action: "/cart/add",
    id: "product-form-installment",
    "accept-charset": "UTF-8",
    class: "installment caption-large",
    enctype: "multipart/form-data"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "form_type",
    value: "product"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "utf8",
    value: "\u2713"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("input", {
    type: "hidden",
    name: "id",
    value: variant?.id,
    ref: idRef
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}

// src/js/components/products/_Description.tsx
function Description() {
  return /* @__PURE__ */ v("div", {
    className: "col-span-5 col-span-1 p-8"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    id: `ProductInfo-${sectionId}`,
    className: "product__info-container--sticky"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("p", {
    className: ""
  }, product.vendor), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "flex"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("h1", {
    className: "product__title"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", {
    className: "mr-[1rem]  text-[27px] text-[20px]"
  }, product.title), product.tags.includes("new") && /* @__PURE__ */ v("span", {
    className: "h-[1em] uppercase align-text-bottom"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Tag, {
    type: "new"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("p", {
    className: "product__text subtitle"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Price, null), product.tags.includes("restock") && /* @__PURE__ */ v("span", {
    className: "inline-block h-[1em] mt-6"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Tag, {
    type: "restock",
    label: "\u518D\u5165\u8377"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(FormInstallment, null), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(VariantFieldsets, null), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", null, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Form_default, null), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("link", {
    href: "/assets/component-pickup-availability.css?v=2302742736192769326",
    rel: "stylesheet",
    type: "text/css",
    media: "all"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(PickupAvailability, null), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("script", {
    src: "/assets/pickup-availability.js?v=9534521698898523963",
    defer: "defer"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Accordion, {
    id: "inline-json-block-product-detail"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Accordion, {
    id: "inline-json-block-product-dimensions"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Accordion, {
    id: "inline-json-block-product-quality"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "block empty:block h-4"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", null, "\u203B\u8FD4\u54C1\u30FB\u4EA4\u63DB\u30FB\u30AD\u30E3\u30F3\u30BB\u30EB\u306B\u3064\u3044\u3066"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("p", null, "\u3054\u6CE8\u6587\u78BA\u5B9A\u5F8C\u3001\u304A\u5BA2\u69D8\u90FD\u5408\u3067\u306E\u8FD4\u54C1\u30FB\u4EA4\u63DB\u30FB\u30AD\u30E3\u30F3\u30BB\u30EB\u306F\u627F\u3063\u3066\u304A\u308A\u307E\u305B\u3093\u3002\u5FC5\u305A\u5546\u54C1\u540D\u30FB\u30AB\u30E9\u30FC\u30FB\u30B5\u30A4\u30BA\u30FB\u6570\u91CF\u3092\u3054\u78BA\u8A8D\u306E\u4E0A\u3001\u3054\u6CE8\u6587\u3092\u304A\u9858\u3044\u3044\u305F\u3057\u307E\u3059\u3002"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}

// src/js/components/products/_Gallery.tsx
init_react_shim();
init_hooks_module();

// src/js/components/products/_MediaStore.ts
init_react_shim();
var medias = JSON.parse(document.getElementById("inline-json-product-medias").text);
var getMediaWithVariants = function() {
  const images = [];
  if (availableVariant && availableVariant?.featured_media) {
    images.push({
      ...availableVariant.featured_media,
      variant_id: availableVariant.id,
      variant: availableVariant
    });
  }
  medias.forEach((media) => {
    if (images.filter(({ id }) => id === media.id)?.length !== 0) {
      return;
    }
    const variantImage = variantImages.find(({
      src
    }) => {
      return src === media.preview_image.src;
    });
    images.push({
      ...media,
      variant_id: variantImage?.variant_id,
      variant_ids: variantImage?.variant_ids,
      variant: variantImage
    });
  });
  return images;
};

// src/js/components/products/_Gallery.tsx
var import_tailwind_config = __toESM(require_tailwind_config());

// src/js/components/products/_Thums.tsx
init_react_shim();
init_hooks_module();

// node_modules/swiper/swiper.esm.js
init_react_shim();

// node_modules/swiper/core/core.js
init_react_shim();

// node_modules/ssr-window/ssr-window.esm.js
init_react_shim();
function isObject(obj) {
  return obj !== null && typeof obj === "object" && "constructor" in obj && obj.constructor === Object;
}
function extend(target = {}, src = {}) {
  Object.keys(src).forEach((key) => {
    if (typeof target[key] === "undefined")
      target[key] = src[key];
    else if (isObject(src[key]) && isObject(target[key]) && Object.keys(src[key]).length > 0) {
      extend(target[key], src[key]);
    }
  });
}
var ssrDocument = {
  body: {},
  addEventListener() {
  },
  removeEventListener() {
  },
  activeElement: {
    blur() {
    },
    nodeName: ""
  },
  querySelector() {
    return null;
  },
  querySelectorAll() {
    return [];
  },
  getElementById() {
    return null;
  },
  createEvent() {
    return {
      initEvent() {
      }
    };
  },
  createElement() {
    return {
      children: [],
      childNodes: [],
      style: {},
      setAttribute() {
      },
      getElementsByTagName() {
        return [];
      }
    };
  },
  createElementNS() {
    return {};
  },
  importNode() {
    return null;
  },
  location: {
    hash: "",
    host: "",
    hostname: "",
    href: "",
    origin: "",
    pathname: "",
    protocol: "",
    search: ""
  }
};
function getDocument() {
  const doc = typeof document !== "undefined" ? document : {};
  extend(doc, ssrDocument);
  return doc;
}
var ssrWindow = {
  document: ssrDocument,
  navigator: {
    userAgent: ""
  },
  location: {
    hash: "",
    host: "",
    hostname: "",
    href: "",
    origin: "",
    pathname: "",
    protocol: "",
    search: ""
  },
  history: {
    replaceState() {
    },
    pushState() {
    },
    go() {
    },
    back() {
    }
  },
  CustomEvent: function CustomEvent() {
    return this;
  },
  addEventListener() {
  },
  removeEventListener() {
  },
  getComputedStyle() {
    return {
      getPropertyValue() {
        return "";
      }
    };
  },
  Image() {
  },
  Date() {
  },
  screen: {},
  setTimeout() {
  },
  clearTimeout() {
  },
  matchMedia() {
    return {};
  },
  requestAnimationFrame(callback) {
    if (typeof setTimeout === "undefined") {
      callback();
      return null;
    }
    return setTimeout(callback, 0);
  },
  cancelAnimationFrame(id) {
    if (typeof setTimeout === "undefined") {
      return;
    }
    clearTimeout(id);
  }
};
function getWindow() {
  const win = typeof window !== "undefined" ? window : {};
  extend(win, ssrWindow);
  return win;
}

// node_modules/swiper/shared/dom.js
init_react_shim();

// node_modules/dom7/dom7.esm.js
init_react_shim();
function makeReactive(obj) {
  const proto = obj.__proto__;
  Object.defineProperty(obj, "__proto__", {
    get() {
      return proto;
    },
    set(value) {
      proto.__proto__ = value;
    }
  });
}
var Dom7 = class extends Array {
  constructor(items) {
    if (typeof items === "number") {
      super(items);
    } else {
      super(...items || []);
      makeReactive(this);
    }
  }
};
function arrayFlat(arr = []) {
  const res = [];
  arr.forEach((el) => {
    if (Array.isArray(el)) {
      res.push(...arrayFlat(el));
    } else {
      res.push(el);
    }
  });
  return res;
}
function arrayFilter(arr, callback) {
  return Array.prototype.filter.call(arr, callback);
}
function arrayUnique(arr) {
  const uniqueArray = [];
  for (let i3 = 0; i3 < arr.length; i3 += 1) {
    if (uniqueArray.indexOf(arr[i3]) === -1)
      uniqueArray.push(arr[i3]);
  }
  return uniqueArray;
}
function qsa(selector, context) {
  if (typeof selector !== "string") {
    return [selector];
  }
  const a3 = [];
  const res = context.querySelectorAll(selector);
  for (let i3 = 0; i3 < res.length; i3 += 1) {
    a3.push(res[i3]);
  }
  return a3;
}
function $2(selector, context) {
  const window2 = getWindow();
  const document2 = getDocument();
  let arr = [];
  if (!context && selector instanceof Dom7) {
    return selector;
  }
  if (!selector) {
    return new Dom7(arr);
  }
  if (typeof selector === "string") {
    const html2 = selector.trim();
    if (html2.indexOf("<") >= 0 && html2.indexOf(">") >= 0) {
      let toCreate = "div";
      if (html2.indexOf("<li") === 0)
        toCreate = "ul";
      if (html2.indexOf("<tr") === 0)
        toCreate = "tbody";
      if (html2.indexOf("<td") === 0 || html2.indexOf("<th") === 0)
        toCreate = "tr";
      if (html2.indexOf("<tbody") === 0)
        toCreate = "table";
      if (html2.indexOf("<option") === 0)
        toCreate = "select";
      const tempParent = document2.createElement(toCreate);
      tempParent.innerHTML = html2;
      for (let i3 = 0; i3 < tempParent.childNodes.length; i3 += 1) {
        arr.push(tempParent.childNodes[i3]);
      }
    } else {
      arr = qsa(selector.trim(), context || document2);
    }
  } else if (selector.nodeType || selector === window2 || selector === document2) {
    arr.push(selector);
  } else if (Array.isArray(selector)) {
    if (selector instanceof Dom7)
      return selector;
    arr = selector;
  }
  return new Dom7(arrayUnique(arr));
}
$2.fn = Dom7.prototype;
function addClass(...classes) {
  const classNames = arrayFlat(classes.map((c3) => c3.split(" ")));
  this.forEach((el) => {
    el.classList.add(...classNames);
  });
  return this;
}
function removeClass(...classes) {
  const classNames = arrayFlat(classes.map((c3) => c3.split(" ")));
  this.forEach((el) => {
    el.classList.remove(...classNames);
  });
  return this;
}
function toggleClass(...classes) {
  const classNames = arrayFlat(classes.map((c3) => c3.split(" ")));
  this.forEach((el) => {
    classNames.forEach((className) => {
      el.classList.toggle(className);
    });
  });
}
function hasClass(...classes) {
  const classNames = arrayFlat(classes.map((c3) => c3.split(" ")));
  return arrayFilter(this, (el) => {
    return classNames.filter((className) => el.classList.contains(className)).length > 0;
  }).length > 0;
}
function attr(attrs, value) {
  if (arguments.length === 1 && typeof attrs === "string") {
    if (this[0])
      return this[0].getAttribute(attrs);
    return void 0;
  }
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    if (arguments.length === 2) {
      this[i3].setAttribute(attrs, value);
    } else {
      for (const attrName in attrs) {
        this[i3][attrName] = attrs[attrName];
        this[i3].setAttribute(attrName, attrs[attrName]);
      }
    }
  }
  return this;
}
function removeAttr(attr2) {
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    this[i3].removeAttribute(attr2);
  }
  return this;
}
function transform(transform2) {
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    this[i3].style.transform = transform2;
  }
  return this;
}
function transition(duration) {
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    this[i3].style.transitionDuration = typeof duration !== "string" ? `${duration}ms` : duration;
  }
  return this;
}
function on(...args) {
  let [eventType, targetSelector, listener, capture] = args;
  if (typeof args[1] === "function") {
    [eventType, listener, capture] = args;
    targetSelector = void 0;
  }
  if (!capture)
    capture = false;
  function handleLiveEvent(e3) {
    const target = e3.target;
    if (!target)
      return;
    const eventData = e3.target.dom7EventData || [];
    if (eventData.indexOf(e3) < 0) {
      eventData.unshift(e3);
    }
    if ($2(target).is(targetSelector))
      listener.apply(target, eventData);
    else {
      const parents2 = $2(target).parents();
      for (let k3 = 0; k3 < parents2.length; k3 += 1) {
        if ($2(parents2[k3]).is(targetSelector))
          listener.apply(parents2[k3], eventData);
      }
    }
  }
  function handleEvent(e3) {
    const eventData = e3 && e3.target ? e3.target.dom7EventData || [] : [];
    if (eventData.indexOf(e3) < 0) {
      eventData.unshift(e3);
    }
    listener.apply(this, eventData);
  }
  const events2 = eventType.split(" ");
  let j3;
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    const el = this[i3];
    if (!targetSelector) {
      for (j3 = 0; j3 < events2.length; j3 += 1) {
        const event2 = events2[j3];
        if (!el.dom7Listeners)
          el.dom7Listeners = {};
        if (!el.dom7Listeners[event2])
          el.dom7Listeners[event2] = [];
        el.dom7Listeners[event2].push({
          listener,
          proxyListener: handleEvent
        });
        el.addEventListener(event2, handleEvent, capture);
      }
    } else {
      for (j3 = 0; j3 < events2.length; j3 += 1) {
        const event2 = events2[j3];
        if (!el.dom7LiveListeners)
          el.dom7LiveListeners = {};
        if (!el.dom7LiveListeners[event2])
          el.dom7LiveListeners[event2] = [];
        el.dom7LiveListeners[event2].push({
          listener,
          proxyListener: handleLiveEvent
        });
        el.addEventListener(event2, handleLiveEvent, capture);
      }
    }
  }
  return this;
}
function off(...args) {
  let [eventType, targetSelector, listener, capture] = args;
  if (typeof args[1] === "function") {
    [eventType, listener, capture] = args;
    targetSelector = void 0;
  }
  if (!capture)
    capture = false;
  const events2 = eventType.split(" ");
  for (let i3 = 0; i3 < events2.length; i3 += 1) {
    const event2 = events2[i3];
    for (let j3 = 0; j3 < this.length; j3 += 1) {
      const el = this[j3];
      let handlers;
      if (!targetSelector && el.dom7Listeners) {
        handlers = el.dom7Listeners[event2];
      } else if (targetSelector && el.dom7LiveListeners) {
        handlers = el.dom7LiveListeners[event2];
      }
      if (handlers && handlers.length) {
        for (let k3 = handlers.length - 1; k3 >= 0; k3 -= 1) {
          const handler = handlers[k3];
          if (listener && handler.listener === listener) {
            el.removeEventListener(event2, handler.proxyListener, capture);
            handlers.splice(k3, 1);
          } else if (listener && handler.listener && handler.listener.dom7proxy && handler.listener.dom7proxy === listener) {
            el.removeEventListener(event2, handler.proxyListener, capture);
            handlers.splice(k3, 1);
          } else if (!listener) {
            el.removeEventListener(event2, handler.proxyListener, capture);
            handlers.splice(k3, 1);
          }
        }
      }
    }
  }
  return this;
}
function trigger(...args) {
  const window2 = getWindow();
  const events2 = args[0].split(" ");
  const eventData = args[1];
  for (let i3 = 0; i3 < events2.length; i3 += 1) {
    const event2 = events2[i3];
    for (let j3 = 0; j3 < this.length; j3 += 1) {
      const el = this[j3];
      if (window2.CustomEvent) {
        const evt = new window2.CustomEvent(event2, {
          detail: eventData,
          bubbles: true,
          cancelable: true
        });
        el.dom7EventData = args.filter((data, dataIndex) => dataIndex > 0);
        el.dispatchEvent(evt);
        el.dom7EventData = [];
        delete el.dom7EventData;
      }
    }
  }
  return this;
}
function transitionEnd(callback) {
  const dom = this;
  function fireCallBack(e3) {
    if (e3.target !== this)
      return;
    callback.call(this, e3);
    dom.off("transitionend", fireCallBack);
  }
  if (callback) {
    dom.on("transitionend", fireCallBack);
  }
  return this;
}
function outerWidth(includeMargins) {
  if (this.length > 0) {
    if (includeMargins) {
      const styles2 = this.styles();
      return this[0].offsetWidth + parseFloat(styles2.getPropertyValue("margin-right")) + parseFloat(styles2.getPropertyValue("margin-left"));
    }
    return this[0].offsetWidth;
  }
  return null;
}
function outerHeight(includeMargins) {
  if (this.length > 0) {
    if (includeMargins) {
      const styles2 = this.styles();
      return this[0].offsetHeight + parseFloat(styles2.getPropertyValue("margin-top")) + parseFloat(styles2.getPropertyValue("margin-bottom"));
    }
    return this[0].offsetHeight;
  }
  return null;
}
function offset() {
  if (this.length > 0) {
    const window2 = getWindow();
    const document2 = getDocument();
    const el = this[0];
    const box = el.getBoundingClientRect();
    const body = document2.body;
    const clientTop = el.clientTop || body.clientTop || 0;
    const clientLeft = el.clientLeft || body.clientLeft || 0;
    const scrollTop = el === window2 ? window2.scrollY : el.scrollTop;
    const scrollLeft = el === window2 ? window2.scrollX : el.scrollLeft;
    return {
      top: box.top + scrollTop - clientTop,
      left: box.left + scrollLeft - clientLeft
    };
  }
  return null;
}
function styles() {
  const window2 = getWindow();
  if (this[0])
    return window2.getComputedStyle(this[0], null);
  return {};
}
function css(props, value) {
  const window2 = getWindow();
  let i3;
  if (arguments.length === 1) {
    if (typeof props === "string") {
      if (this[0])
        return window2.getComputedStyle(this[0], null).getPropertyValue(props);
    } else {
      for (i3 = 0; i3 < this.length; i3 += 1) {
        for (const prop in props) {
          this[i3].style[prop] = props[prop];
        }
      }
      return this;
    }
  }
  if (arguments.length === 2 && typeof props === "string") {
    for (i3 = 0; i3 < this.length; i3 += 1) {
      this[i3].style[props] = value;
    }
    return this;
  }
  return this;
}
function each(callback) {
  if (!callback)
    return this;
  this.forEach((el, index2) => {
    callback.apply(el, [el, index2]);
  });
  return this;
}
function filter(callback) {
  const result = arrayFilter(this, callback);
  return $2(result);
}
function html(html2) {
  if (typeof html2 === "undefined") {
    return this[0] ? this[0].innerHTML : null;
  }
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    this[i3].innerHTML = html2;
  }
  return this;
}
function text(text2) {
  if (typeof text2 === "undefined") {
    return this[0] ? this[0].textContent.trim() : null;
  }
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    this[i3].textContent = text2;
  }
  return this;
}
function is(selector) {
  const window2 = getWindow();
  const document2 = getDocument();
  const el = this[0];
  let compareWith;
  let i3;
  if (!el || typeof selector === "undefined")
    return false;
  if (typeof selector === "string") {
    if (el.matches)
      return el.matches(selector);
    if (el.webkitMatchesSelector)
      return el.webkitMatchesSelector(selector);
    if (el.msMatchesSelector)
      return el.msMatchesSelector(selector);
    compareWith = $2(selector);
    for (i3 = 0; i3 < compareWith.length; i3 += 1) {
      if (compareWith[i3] === el)
        return true;
    }
    return false;
  }
  if (selector === document2) {
    return el === document2;
  }
  if (selector === window2) {
    return el === window2;
  }
  if (selector.nodeType || selector instanceof Dom7) {
    compareWith = selector.nodeType ? [selector] : selector;
    for (i3 = 0; i3 < compareWith.length; i3 += 1) {
      if (compareWith[i3] === el)
        return true;
    }
    return false;
  }
  return false;
}
function index() {
  let child = this[0];
  let i3;
  if (child) {
    i3 = 0;
    while ((child = child.previousSibling) !== null) {
      if (child.nodeType === 1)
        i3 += 1;
    }
    return i3;
  }
  return void 0;
}
function eq(index2) {
  if (typeof index2 === "undefined")
    return this;
  const length = this.length;
  if (index2 > length - 1) {
    return $2([]);
  }
  if (index2 < 0) {
    const returnIndex = length + index2;
    if (returnIndex < 0)
      return $2([]);
    return $2([this[returnIndex]]);
  }
  return $2([this[index2]]);
}
function append(...els) {
  let newChild;
  const document2 = getDocument();
  for (let k3 = 0; k3 < els.length; k3 += 1) {
    newChild = els[k3];
    for (let i3 = 0; i3 < this.length; i3 += 1) {
      if (typeof newChild === "string") {
        const tempDiv = document2.createElement("div");
        tempDiv.innerHTML = newChild;
        while (tempDiv.firstChild) {
          this[i3].appendChild(tempDiv.firstChild);
        }
      } else if (newChild instanceof Dom7) {
        for (let j3 = 0; j3 < newChild.length; j3 += 1) {
          this[i3].appendChild(newChild[j3]);
        }
      } else {
        this[i3].appendChild(newChild);
      }
    }
  }
  return this;
}
function prepend(newChild) {
  const document2 = getDocument();
  let i3;
  let j3;
  for (i3 = 0; i3 < this.length; i3 += 1) {
    if (typeof newChild === "string") {
      const tempDiv = document2.createElement("div");
      tempDiv.innerHTML = newChild;
      for (j3 = tempDiv.childNodes.length - 1; j3 >= 0; j3 -= 1) {
        this[i3].insertBefore(tempDiv.childNodes[j3], this[i3].childNodes[0]);
      }
    } else if (newChild instanceof Dom7) {
      for (j3 = 0; j3 < newChild.length; j3 += 1) {
        this[i3].insertBefore(newChild[j3], this[i3].childNodes[0]);
      }
    } else {
      this[i3].insertBefore(newChild, this[i3].childNodes[0]);
    }
  }
  return this;
}
function next(selector) {
  if (this.length > 0) {
    if (selector) {
      if (this[0].nextElementSibling && $2(this[0].nextElementSibling).is(selector)) {
        return $2([this[0].nextElementSibling]);
      }
      return $2([]);
    }
    if (this[0].nextElementSibling)
      return $2([this[0].nextElementSibling]);
    return $2([]);
  }
  return $2([]);
}
function nextAll(selector) {
  const nextEls = [];
  let el = this[0];
  if (!el)
    return $2([]);
  while (el.nextElementSibling) {
    const next2 = el.nextElementSibling;
    if (selector) {
      if ($2(next2).is(selector))
        nextEls.push(next2);
    } else
      nextEls.push(next2);
    el = next2;
  }
  return $2(nextEls);
}
function prev(selector) {
  if (this.length > 0) {
    const el = this[0];
    if (selector) {
      if (el.previousElementSibling && $2(el.previousElementSibling).is(selector)) {
        return $2([el.previousElementSibling]);
      }
      return $2([]);
    }
    if (el.previousElementSibling)
      return $2([el.previousElementSibling]);
    return $2([]);
  }
  return $2([]);
}
function prevAll(selector) {
  const prevEls = [];
  let el = this[0];
  if (!el)
    return $2([]);
  while (el.previousElementSibling) {
    const prev2 = el.previousElementSibling;
    if (selector) {
      if ($2(prev2).is(selector))
        prevEls.push(prev2);
    } else
      prevEls.push(prev2);
    el = prev2;
  }
  return $2(prevEls);
}
function parent(selector) {
  const parents2 = [];
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    if (this[i3].parentNode !== null) {
      if (selector) {
        if ($2(this[i3].parentNode).is(selector))
          parents2.push(this[i3].parentNode);
      } else {
        parents2.push(this[i3].parentNode);
      }
    }
  }
  return $2(parents2);
}
function parents(selector) {
  const parents2 = [];
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    let parent2 = this[i3].parentNode;
    while (parent2) {
      if (selector) {
        if ($2(parent2).is(selector))
          parents2.push(parent2);
      } else {
        parents2.push(parent2);
      }
      parent2 = parent2.parentNode;
    }
  }
  return $2(parents2);
}
function closest(selector) {
  let closest2 = this;
  if (typeof selector === "undefined") {
    return $2([]);
  }
  if (!closest2.is(selector)) {
    closest2 = closest2.parents(selector).eq(0);
  }
  return closest2;
}
function find(selector) {
  const foundElements = [];
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    const found = this[i3].querySelectorAll(selector);
    for (let j3 = 0; j3 < found.length; j3 += 1) {
      foundElements.push(found[j3]);
    }
  }
  return $2(foundElements);
}
function children(selector) {
  const children2 = [];
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    const childNodes = this[i3].children;
    for (let j3 = 0; j3 < childNodes.length; j3 += 1) {
      if (!selector || $2(childNodes[j3]).is(selector)) {
        children2.push(childNodes[j3]);
      }
    }
  }
  return $2(children2);
}
function remove() {
  for (let i3 = 0; i3 < this.length; i3 += 1) {
    if (this[i3].parentNode)
      this[i3].parentNode.removeChild(this[i3]);
  }
  return this;
}
var noTrigger = "resize scroll".split(" ");
function shortcut(name) {
  function eventHandler(...args) {
    if (typeof args[0] === "undefined") {
      for (let i3 = 0; i3 < this.length; i3 += 1) {
        if (noTrigger.indexOf(name) < 0) {
          if (name in this[i3])
            this[i3][name]();
          else {
            $2(this[i3]).trigger(name);
          }
        }
      }
      return this;
    }
    return this.on(name, ...args);
  }
  return eventHandler;
}
var click = shortcut("click");
var blur = shortcut("blur");
var focus = shortcut("focus");
var focusin = shortcut("focusin");
var focusout = shortcut("focusout");
var keyup = shortcut("keyup");
var keydown = shortcut("keydown");
var keypress = shortcut("keypress");
var submit = shortcut("submit");
var change = shortcut("change");
var mousedown = shortcut("mousedown");
var mousemove = shortcut("mousemove");
var mouseup = shortcut("mouseup");
var mouseenter = shortcut("mouseenter");
var mouseleave = shortcut("mouseleave");
var mouseout = shortcut("mouseout");
var mouseover = shortcut("mouseover");
var touchstart = shortcut("touchstart");
var touchend = shortcut("touchend");
var touchmove = shortcut("touchmove");
var resize = shortcut("resize");
var scroll = shortcut("scroll");

// node_modules/swiper/shared/dom.js
var Methods = {
  addClass,
  removeClass,
  hasClass,
  toggleClass,
  attr,
  removeAttr,
  transform,
  transition,
  on,
  off,
  trigger,
  transitionEnd,
  outerWidth,
  outerHeight,
  styles,
  offset,
  css,
  each,
  html,
  text,
  is,
  index,
  eq,
  append,
  prepend,
  next,
  nextAll,
  prev,
  prevAll,
  parent,
  parents,
  closest,
  find,
  children,
  filter,
  remove
};
Object.keys(Methods).forEach((methodName) => {
  Object.defineProperty($2.fn, methodName, {
    value: Methods[methodName],
    writable: true
  });
});
var dom_default = $2;

// node_modules/swiper/shared/utils.js
init_react_shim();
function deleteProps(obj) {
  const object = obj;
  Object.keys(object).forEach((key) => {
    try {
      object[key] = null;
    } catch (e3) {
    }
    try {
      delete object[key];
    } catch (e3) {
    }
  });
}
function nextTick(callback, delay) {
  if (delay === void 0) {
    delay = 0;
  }
  return setTimeout(callback, delay);
}
function now() {
  return Date.now();
}
function getComputedStyle2(el) {
  const window2 = getWindow();
  let style;
  if (window2.getComputedStyle) {
    style = window2.getComputedStyle(el, null);
  }
  if (!style && el.currentStyle) {
    style = el.currentStyle;
  }
  if (!style) {
    style = el.style;
  }
  return style;
}
function getTranslate(el, axis) {
  if (axis === void 0) {
    axis = "x";
  }
  const window2 = getWindow();
  let matrix;
  let curTransform;
  let transformMatrix;
  const curStyle = getComputedStyle2(el, null);
  if (window2.WebKitCSSMatrix) {
    curTransform = curStyle.transform || curStyle.webkitTransform;
    if (curTransform.split(",").length > 6) {
      curTransform = curTransform.split(", ").map((a3) => a3.replace(",", ".")).join(", ");
    }
    transformMatrix = new window2.WebKitCSSMatrix(curTransform === "none" ? "" : curTransform);
  } else {
    transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,");
    matrix = transformMatrix.toString().split(",");
  }
  if (axis === "x") {
    if (window2.WebKitCSSMatrix)
      curTransform = transformMatrix.m41;
    else if (matrix.length === 16)
      curTransform = parseFloat(matrix[12]);
    else
      curTransform = parseFloat(matrix[4]);
  }
  if (axis === "y") {
    if (window2.WebKitCSSMatrix)
      curTransform = transformMatrix.m42;
    else if (matrix.length === 16)
      curTransform = parseFloat(matrix[13]);
    else
      curTransform = parseFloat(matrix[5]);
  }
  return curTransform || 0;
}
function isObject2(o3) {
  return typeof o3 === "object" && o3 !== null && o3.constructor && Object.prototype.toString.call(o3).slice(8, -1) === "Object";
}
function isNode(node) {
  if (typeof window !== "undefined" && typeof window.HTMLElement !== "undefined") {
    return node instanceof HTMLElement;
  }
  return node && (node.nodeType === 1 || node.nodeType === 11);
}
function extend2() {
  const to = Object(arguments.length <= 0 ? void 0 : arguments[0]);
  const noExtend = ["__proto__", "constructor", "prototype"];
  for (let i3 = 1; i3 < arguments.length; i3 += 1) {
    const nextSource = i3 < 0 || arguments.length <= i3 ? void 0 : arguments[i3];
    if (nextSource !== void 0 && nextSource !== null && !isNode(nextSource)) {
      const keysArray = Object.keys(Object(nextSource)).filter((key) => noExtend.indexOf(key) < 0);
      for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {
        const nextKey = keysArray[nextIndex];
        const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
        if (desc !== void 0 && desc.enumerable) {
          if (isObject2(to[nextKey]) && isObject2(nextSource[nextKey])) {
            if (nextSource[nextKey].__swiper__) {
              to[nextKey] = nextSource[nextKey];
            } else {
              extend2(to[nextKey], nextSource[nextKey]);
            }
          } else if (!isObject2(to[nextKey]) && isObject2(nextSource[nextKey])) {
            to[nextKey] = {};
            if (nextSource[nextKey].__swiper__) {
              to[nextKey] = nextSource[nextKey];
            } else {
              extend2(to[nextKey], nextSource[nextKey]);
            }
          } else {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
    }
  }
  return to;
}
function setCSSProperty(el, varName, varValue) {
  el.style.setProperty(varName, varValue);
}
function animateCSSModeScroll(_ref) {
  let {
    swiper,
    targetPosition,
    side
  } = _ref;
  const window2 = getWindow();
  const startPosition = -swiper.translate;
  let startTime = null;
  let time;
  const duration = swiper.params.speed;
  swiper.wrapperEl.style.scrollSnapType = "none";
  window2.cancelAnimationFrame(swiper.cssModeFrameID);
  const dir = targetPosition > startPosition ? "next" : "prev";
  const isOutOfBound = (current, target) => {
    return dir === "next" && current >= target || dir === "prev" && current <= target;
  };
  const animate = () => {
    time = new Date().getTime();
    if (startTime === null) {
      startTime = time;
    }
    const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);
    const easeProgress = 0.5 - Math.cos(progress * Math.PI) / 2;
    let currentPosition = startPosition + easeProgress * (targetPosition - startPosition);
    if (isOutOfBound(currentPosition, targetPosition)) {
      currentPosition = targetPosition;
    }
    swiper.wrapperEl.scrollTo({
      [side]: currentPosition
    });
    if (isOutOfBound(currentPosition, targetPosition)) {
      swiper.wrapperEl.style.overflow = "hidden";
      swiper.wrapperEl.style.scrollSnapType = "";
      setTimeout(() => {
        swiper.wrapperEl.style.overflow = "";
        swiper.wrapperEl.scrollTo({
          [side]: currentPosition
        });
      });
      window2.cancelAnimationFrame(swiper.cssModeFrameID);
      return;
    }
    swiper.cssModeFrameID = window2.requestAnimationFrame(animate);
  };
  animate();
}

// node_modules/swiper/shared/get-support.js
init_react_shim();
var support;
function calcSupport() {
  const window2 = getWindow();
  const document2 = getDocument();
  return {
    smoothScroll: document2.documentElement && "scrollBehavior" in document2.documentElement.style,
    touch: !!("ontouchstart" in window2 || window2.DocumentTouch && document2 instanceof window2.DocumentTouch),
    passiveListener: function checkPassiveListener() {
      let supportsPassive = false;
      try {
        const opts = Object.defineProperty({}, "passive", {
          get() {
            supportsPassive = true;
          }
        });
        window2.addEventListener("testPassiveListener", null, opts);
      } catch (e3) {
      }
      return supportsPassive;
    }(),
    gestures: function checkGestures() {
      return "ongesturestart" in window2;
    }()
  };
}
function getSupport() {
  if (!support) {
    support = calcSupport();
  }
  return support;
}

// node_modules/swiper/shared/get-device.js
init_react_shim();
var deviceCached;
function calcDevice(_temp) {
  let {
    userAgent
  } = _temp === void 0 ? {} : _temp;
  const support2 = getSupport();
  const window2 = getWindow();
  const platform = window2.navigator.platform;
  const ua = userAgent || window2.navigator.userAgent;
  const device = {
    ios: false,
    android: false
  };
  const screenWidth = window2.screen.width;
  const screenHeight = window2.screen.height;
  const android = ua.match(/(Android);?[\s\/]+([\d.]+)?/);
  let ipad = ua.match(/(iPad).*OS\s([\d_]+)/);
  const ipod = ua.match(/(iPod)(.*OS\s([\d_]+))?/);
  const iphone = !ipad && ua.match(/(iPhone\sOS|iOS)\s([\d_]+)/);
  const windows = platform === "Win32";
  let macos = platform === "MacIntel";
  const iPadScreens = ["1024x1366", "1366x1024", "834x1194", "1194x834", "834x1112", "1112x834", "768x1024", "1024x768", "820x1180", "1180x820", "810x1080", "1080x810"];
  if (!ipad && macos && support2.touch && iPadScreens.indexOf(`${screenWidth}x${screenHeight}`) >= 0) {
    ipad = ua.match(/(Version)\/([\d.]+)/);
    if (!ipad)
      ipad = [0, 1, "13_0_0"];
    macos = false;
  }
  if (android && !windows) {
    device.os = "android";
    device.android = true;
  }
  if (ipad || iphone || ipod) {
    device.os = "ios";
    device.ios = true;
  }
  return device;
}
function getDevice(overrides) {
  if (overrides === void 0) {
    overrides = {};
  }
  if (!deviceCached) {
    deviceCached = calcDevice(overrides);
  }
  return deviceCached;
}

// node_modules/swiper/shared/get-browser.js
init_react_shim();
var browser;
function calcBrowser() {
  const window2 = getWindow();
  function isSafari() {
    const ua = window2.navigator.userAgent.toLowerCase();
    return ua.indexOf("safari") >= 0 && ua.indexOf("chrome") < 0 && ua.indexOf("android") < 0;
  }
  return {
    isSafari: isSafari(),
    isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window2.navigator.userAgent)
  };
}
function getBrowser() {
  if (!browser) {
    browser = calcBrowser();
  }
  return browser;
}

// node_modules/swiper/core/modules/resize/resize.js
init_react_shim();
function Resize(_ref) {
  let {
    swiper,
    on: on2,
    emit
  } = _ref;
  const window2 = getWindow();
  let observer = null;
  let animationFrame = null;
  const resizeHandler = () => {
    if (!swiper || swiper.destroyed || !swiper.initialized)
      return;
    emit("beforeResize");
    emit("resize");
  };
  const createObserver = () => {
    if (!swiper || swiper.destroyed || !swiper.initialized)
      return;
    observer = new ResizeObserver((entries) => {
      animationFrame = window2.requestAnimationFrame(() => {
        const {
          width,
          height
        } = swiper;
        let newWidth = width;
        let newHeight = height;
        entries.forEach((_ref2) => {
          let {
            contentBoxSize,
            contentRect,
            target
          } = _ref2;
          if (target && target !== swiper.el)
            return;
          newWidth = contentRect ? contentRect.width : (contentBoxSize[0] || contentBoxSize).inlineSize;
          newHeight = contentRect ? contentRect.height : (contentBoxSize[0] || contentBoxSize).blockSize;
        });
        if (newWidth !== width || newHeight !== height) {
          resizeHandler();
        }
      });
    });
    observer.observe(swiper.el);
  };
  const removeObserver = () => {
    if (animationFrame) {
      window2.cancelAnimationFrame(animationFrame);
    }
    if (observer && observer.unobserve && swiper.el) {
      observer.unobserve(swiper.el);
      observer = null;
    }
  };
  const orientationChangeHandler = () => {
    if (!swiper || swiper.destroyed || !swiper.initialized)
      return;
    emit("orientationchange");
  };
  on2("init", () => {
    if (swiper.params.resizeObserver && typeof window2.ResizeObserver !== "undefined") {
      createObserver();
      return;
    }
    window2.addEventListener("resize", resizeHandler);
    window2.addEventListener("orientationchange", orientationChangeHandler);
  });
  on2("destroy", () => {
    removeObserver();
    window2.removeEventListener("resize", resizeHandler);
    window2.removeEventListener("orientationchange", orientationChangeHandler);
  });
}

// node_modules/swiper/core/modules/observer/observer.js
init_react_shim();
function Observer(_ref) {
  let {
    swiper,
    extendParams,
    on: on2,
    emit
  } = _ref;
  const observers = [];
  const window2 = getWindow();
  const attach = function(target, options) {
    if (options === void 0) {
      options = {};
    }
    const ObserverFunc = window2.MutationObserver || window2.WebkitMutationObserver;
    const observer = new ObserverFunc((mutations) => {
      if (mutations.length === 1) {
        emit("observerUpdate", mutations[0]);
        return;
      }
      const observerUpdate = function observerUpdate2() {
        emit("observerUpdate", mutations[0]);
      };
      if (window2.requestAnimationFrame) {
        window2.requestAnimationFrame(observerUpdate);
      } else {
        window2.setTimeout(observerUpdate, 0);
      }
    });
    observer.observe(target, {
      attributes: typeof options.attributes === "undefined" ? true : options.attributes,
      childList: typeof options.childList === "undefined" ? true : options.childList,
      characterData: typeof options.characterData === "undefined" ? true : options.characterData
    });
    observers.push(observer);
  };
  const init = () => {
    if (!swiper.params.observer)
      return;
    if (swiper.params.observeParents) {
      const containerParents = swiper.$el.parents();
      for (let i3 = 0; i3 < containerParents.length; i3 += 1) {
        attach(containerParents[i3]);
      }
    }
    attach(swiper.$el[0], {
      childList: swiper.params.observeSlideChildren
    });
    attach(swiper.$wrapperEl[0], {
      attributes: false
    });
  };
  const destroy = () => {
    observers.forEach((observer) => {
      observer.disconnect();
    });
    observers.splice(0, observers.length);
  };
  extendParams({
    observer: false,
    observeParents: false,
    observeSlideChildren: false
  });
  on2("init", init);
  on2("destroy", destroy);
}

// node_modules/swiper/core/events-emitter.js
init_react_shim();
var events_emitter_default = {
  on(events2, handler, priority) {
    const self = this;
    if (typeof handler !== "function")
      return self;
    const method = priority ? "unshift" : "push";
    events2.split(" ").forEach((event2) => {
      if (!self.eventsListeners[event2])
        self.eventsListeners[event2] = [];
      self.eventsListeners[event2][method](handler);
    });
    return self;
  },
  once(events2, handler, priority) {
    const self = this;
    if (typeof handler !== "function")
      return self;
    function onceHandler() {
      self.off(events2, onceHandler);
      if (onceHandler.__emitterProxy) {
        delete onceHandler.__emitterProxy;
      }
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      handler.apply(self, args);
    }
    onceHandler.__emitterProxy = handler;
    return self.on(events2, onceHandler, priority);
  },
  onAny(handler, priority) {
    const self = this;
    if (typeof handler !== "function")
      return self;
    const method = priority ? "unshift" : "push";
    if (self.eventsAnyListeners.indexOf(handler) < 0) {
      self.eventsAnyListeners[method](handler);
    }
    return self;
  },
  offAny(handler) {
    const self = this;
    if (!self.eventsAnyListeners)
      return self;
    const index2 = self.eventsAnyListeners.indexOf(handler);
    if (index2 >= 0) {
      self.eventsAnyListeners.splice(index2, 1);
    }
    return self;
  },
  off(events2, handler) {
    const self = this;
    if (!self.eventsListeners)
      return self;
    events2.split(" ").forEach((event2) => {
      if (typeof handler === "undefined") {
        self.eventsListeners[event2] = [];
      } else if (self.eventsListeners[event2]) {
        self.eventsListeners[event2].forEach((eventHandler, index2) => {
          if (eventHandler === handler || eventHandler.__emitterProxy && eventHandler.__emitterProxy === handler) {
            self.eventsListeners[event2].splice(index2, 1);
          }
        });
      }
    });
    return self;
  },
  emit() {
    const self = this;
    if (!self.eventsListeners)
      return self;
    let events2;
    let data;
    let context;
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    if (typeof args[0] === "string" || Array.isArray(args[0])) {
      events2 = args[0];
      data = args.slice(1, args.length);
      context = self;
    } else {
      events2 = args[0].events;
      data = args[0].data;
      context = args[0].context || self;
    }
    data.unshift(context);
    const eventsArray = Array.isArray(events2) ? events2 : events2.split(" ");
    eventsArray.forEach((event2) => {
      if (self.eventsAnyListeners && self.eventsAnyListeners.length) {
        self.eventsAnyListeners.forEach((eventHandler) => {
          eventHandler.apply(context, [event2, ...data]);
        });
      }
      if (self.eventsListeners && self.eventsListeners[event2]) {
        self.eventsListeners[event2].forEach((eventHandler) => {
          eventHandler.apply(context, data);
        });
      }
    });
    return self;
  }
};

// node_modules/swiper/core/update/index.js
init_react_shim();

// node_modules/swiper/core/update/updateSize.js
init_react_shim();
function updateSize() {
  const swiper = this;
  let width;
  let height;
  const $el = swiper.$el;
  if (typeof swiper.params.width !== "undefined" && swiper.params.width !== null) {
    width = swiper.params.width;
  } else {
    width = $el[0].clientWidth;
  }
  if (typeof swiper.params.height !== "undefined" && swiper.params.height !== null) {
    height = swiper.params.height;
  } else {
    height = $el[0].clientHeight;
  }
  if (width === 0 && swiper.isHorizontal() || height === 0 && swiper.isVertical()) {
    return;
  }
  width = width - parseInt($el.css("padding-left") || 0, 10) - parseInt($el.css("padding-right") || 0, 10);
  height = height - parseInt($el.css("padding-top") || 0, 10) - parseInt($el.css("padding-bottom") || 0, 10);
  if (Number.isNaN(width))
    width = 0;
  if (Number.isNaN(height))
    height = 0;
  Object.assign(swiper, {
    width,
    height,
    size: swiper.isHorizontal() ? width : height
  });
}

// node_modules/swiper/core/update/updateSlides.js
init_react_shim();
function updateSlides() {
  const swiper = this;
  function getDirectionLabel(property) {
    if (swiper.isHorizontal()) {
      return property;
    }
    return {
      "width": "height",
      "margin-top": "margin-left",
      "margin-bottom ": "margin-right",
      "margin-left": "margin-top",
      "margin-right": "margin-bottom",
      "padding-left": "padding-top",
      "padding-right": "padding-bottom",
      "marginRight": "marginBottom"
    }[property];
  }
  function getDirectionPropertyValue(node, label) {
    return parseFloat(node.getPropertyValue(getDirectionLabel(label)) || 0);
  }
  const params = swiper.params;
  const {
    $wrapperEl,
    size: swiperSize,
    rtlTranslate: rtl,
    wrongRTL
  } = swiper;
  const isVirtual = swiper.virtual && params.virtual.enabled;
  const previousSlidesLength = isVirtual ? swiper.virtual.slides.length : swiper.slides.length;
  const slides = $wrapperEl.children(`.${swiper.params.slideClass}`);
  const slidesLength = isVirtual ? swiper.virtual.slides.length : slides.length;
  let snapGrid = [];
  const slidesGrid = [];
  const slidesSizesGrid = [];
  let offsetBefore = params.slidesOffsetBefore;
  if (typeof offsetBefore === "function") {
    offsetBefore = params.slidesOffsetBefore.call(swiper);
  }
  let offsetAfter = params.slidesOffsetAfter;
  if (typeof offsetAfter === "function") {
    offsetAfter = params.slidesOffsetAfter.call(swiper);
  }
  const previousSnapGridLength = swiper.snapGrid.length;
  const previousSlidesGridLength = swiper.slidesGrid.length;
  let spaceBetween = params.spaceBetween;
  let slidePosition = -offsetBefore;
  let prevSlideSize = 0;
  let index2 = 0;
  if (typeof swiperSize === "undefined") {
    return;
  }
  if (typeof spaceBetween === "string" && spaceBetween.indexOf("%") >= 0) {
    spaceBetween = parseFloat(spaceBetween.replace("%", "")) / 100 * swiperSize;
  }
  swiper.virtualSize = -spaceBetween;
  if (rtl)
    slides.css({
      marginLeft: "",
      marginBottom: "",
      marginTop: ""
    });
  else
    slides.css({
      marginRight: "",
      marginBottom: "",
      marginTop: ""
    });
  if (params.centeredSlides && params.cssMode) {
    setCSSProperty(swiper.wrapperEl, "--swiper-centered-offset-before", "");
    setCSSProperty(swiper.wrapperEl, "--swiper-centered-offset-after", "");
  }
  const gridEnabled = params.grid && params.grid.rows > 1 && swiper.grid;
  if (gridEnabled) {
    swiper.grid.initSlides(slidesLength);
  }
  let slideSize;
  const shouldResetSlideSize = params.slidesPerView === "auto" && params.breakpoints && Object.keys(params.breakpoints).filter((key) => {
    return typeof params.breakpoints[key].slidesPerView !== "undefined";
  }).length > 0;
  for (let i3 = 0; i3 < slidesLength; i3 += 1) {
    slideSize = 0;
    const slide = slides.eq(i3);
    if (gridEnabled) {
      swiper.grid.updateSlide(i3, slide, slidesLength, getDirectionLabel);
    }
    if (slide.css("display") === "none")
      continue;
    if (params.slidesPerView === "auto") {
      if (shouldResetSlideSize) {
        slides[i3].style[getDirectionLabel("width")] = ``;
      }
      const slideStyles = getComputedStyle(slide[0]);
      const currentTransform = slide[0].style.transform;
      const currentWebKitTransform = slide[0].style.webkitTransform;
      if (currentTransform) {
        slide[0].style.transform = "none";
      }
      if (currentWebKitTransform) {
        slide[0].style.webkitTransform = "none";
      }
      if (params.roundLengths) {
        slideSize = swiper.isHorizontal() ? slide.outerWidth(true) : slide.outerHeight(true);
      } else {
        const width = getDirectionPropertyValue(slideStyles, "width");
        const paddingLeft = getDirectionPropertyValue(slideStyles, "padding-left");
        const paddingRight = getDirectionPropertyValue(slideStyles, "padding-right");
        const marginLeft = getDirectionPropertyValue(slideStyles, "margin-left");
        const marginRight = getDirectionPropertyValue(slideStyles, "margin-right");
        const boxSizing = slideStyles.getPropertyValue("box-sizing");
        if (boxSizing && boxSizing === "border-box") {
          slideSize = width + marginLeft + marginRight;
        } else {
          const {
            clientWidth,
            offsetWidth
          } = slide[0];
          slideSize = width + paddingLeft + paddingRight + marginLeft + marginRight + (offsetWidth - clientWidth);
        }
      }
      if (currentTransform) {
        slide[0].style.transform = currentTransform;
      }
      if (currentWebKitTransform) {
        slide[0].style.webkitTransform = currentWebKitTransform;
      }
      if (params.roundLengths)
        slideSize = Math.floor(slideSize);
    } else {
      slideSize = (swiperSize - (params.slidesPerView - 1) * spaceBetween) / params.slidesPerView;
      if (params.roundLengths)
        slideSize = Math.floor(slideSize);
      if (slides[i3]) {
        slides[i3].style[getDirectionLabel("width")] = `${slideSize}px`;
      }
    }
    if (slides[i3]) {
      slides[i3].swiperSlideSize = slideSize;
    }
    slidesSizesGrid.push(slideSize);
    if (params.centeredSlides) {
      slidePosition = slidePosition + slideSize / 2 + prevSlideSize / 2 + spaceBetween;
      if (prevSlideSize === 0 && i3 !== 0)
        slidePosition = slidePosition - swiperSize / 2 - spaceBetween;
      if (i3 === 0)
        slidePosition = slidePosition - swiperSize / 2 - spaceBetween;
      if (Math.abs(slidePosition) < 1 / 1e3)
        slidePosition = 0;
      if (params.roundLengths)
        slidePosition = Math.floor(slidePosition);
      if (index2 % params.slidesPerGroup === 0)
        snapGrid.push(slidePosition);
      slidesGrid.push(slidePosition);
    } else {
      if (params.roundLengths)
        slidePosition = Math.floor(slidePosition);
      if ((index2 - Math.min(swiper.params.slidesPerGroupSkip, index2)) % swiper.params.slidesPerGroup === 0)
        snapGrid.push(slidePosition);
      slidesGrid.push(slidePosition);
      slidePosition = slidePosition + slideSize + spaceBetween;
    }
    swiper.virtualSize += slideSize + spaceBetween;
    prevSlideSize = slideSize;
    index2 += 1;
  }
  swiper.virtualSize = Math.max(swiper.virtualSize, swiperSize) + offsetAfter;
  if (rtl && wrongRTL && (params.effect === "slide" || params.effect === "coverflow")) {
    $wrapperEl.css({
      width: `${swiper.virtualSize + params.spaceBetween}px`
    });
  }
  if (params.setWrapperSize) {
    $wrapperEl.css({
      [getDirectionLabel("width")]: `${swiper.virtualSize + params.spaceBetween}px`
    });
  }
  if (gridEnabled) {
    swiper.grid.updateWrapperSize(slideSize, snapGrid, getDirectionLabel);
  }
  if (!params.centeredSlides) {
    const newSlidesGrid = [];
    for (let i3 = 0; i3 < snapGrid.length; i3 += 1) {
      let slidesGridItem = snapGrid[i3];
      if (params.roundLengths)
        slidesGridItem = Math.floor(slidesGridItem);
      if (snapGrid[i3] <= swiper.virtualSize - swiperSize) {
        newSlidesGrid.push(slidesGridItem);
      }
    }
    snapGrid = newSlidesGrid;
    if (Math.floor(swiper.virtualSize - swiperSize) - Math.floor(snapGrid[snapGrid.length - 1]) > 1) {
      snapGrid.push(swiper.virtualSize - swiperSize);
    }
  }
  if (snapGrid.length === 0)
    snapGrid = [0];
  if (params.spaceBetween !== 0) {
    const key = swiper.isHorizontal() && rtl ? "marginLeft" : getDirectionLabel("marginRight");
    slides.filter((_3, slideIndex) => {
      if (!params.cssMode)
        return true;
      if (slideIndex === slides.length - 1) {
        return false;
      }
      return true;
    }).css({
      [key]: `${spaceBetween}px`
    });
  }
  if (params.centeredSlides && params.centeredSlidesBounds) {
    let allSlidesSize = 0;
    slidesSizesGrid.forEach((slideSizeValue) => {
      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);
    });
    allSlidesSize -= params.spaceBetween;
    const maxSnap = allSlidesSize - swiperSize;
    snapGrid = snapGrid.map((snap) => {
      if (snap < 0)
        return -offsetBefore;
      if (snap > maxSnap)
        return maxSnap + offsetAfter;
      return snap;
    });
  }
  if (params.centerInsufficientSlides) {
    let allSlidesSize = 0;
    slidesSizesGrid.forEach((slideSizeValue) => {
      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);
    });
    allSlidesSize -= params.spaceBetween;
    if (allSlidesSize < swiperSize) {
      const allSlidesOffset = (swiperSize - allSlidesSize) / 2;
      snapGrid.forEach((snap, snapIndex) => {
        snapGrid[snapIndex] = snap - allSlidesOffset;
      });
      slidesGrid.forEach((snap, snapIndex) => {
        slidesGrid[snapIndex] = snap + allSlidesOffset;
      });
    }
  }
  Object.assign(swiper, {
    slides,
    snapGrid,
    slidesGrid,
    slidesSizesGrid
  });
  if (params.centeredSlides && params.cssMode && !params.centeredSlidesBounds) {
    setCSSProperty(swiper.wrapperEl, "--swiper-centered-offset-before", `${-snapGrid[0]}px`);
    setCSSProperty(swiper.wrapperEl, "--swiper-centered-offset-after", `${swiper.size / 2 - slidesSizesGrid[slidesSizesGrid.length - 1] / 2}px`);
    const addToSnapGrid = -swiper.snapGrid[0];
    const addToSlidesGrid = -swiper.slidesGrid[0];
    swiper.snapGrid = swiper.snapGrid.map((v3) => v3 + addToSnapGrid);
    swiper.slidesGrid = swiper.slidesGrid.map((v3) => v3 + addToSlidesGrid);
  }
  if (slidesLength !== previousSlidesLength) {
    swiper.emit("slidesLengthChange");
  }
  if (snapGrid.length !== previousSnapGridLength) {
    if (swiper.params.watchOverflow)
      swiper.checkOverflow();
    swiper.emit("snapGridLengthChange");
  }
  if (slidesGrid.length !== previousSlidesGridLength) {
    swiper.emit("slidesGridLengthChange");
  }
  if (params.watchSlidesProgress) {
    swiper.updateSlidesOffset();
  }
  if (!isVirtual && !params.cssMode && (params.effect === "slide" || params.effect === "fade")) {
    const backFaceHiddenClass = `${params.containerModifierClass}backface-hidden`;
    const hasClassBackfaceClassAdded = swiper.$el.hasClass(backFaceHiddenClass);
    if (slidesLength <= params.maxBackfaceHiddenSlides) {
      if (!hasClassBackfaceClassAdded)
        swiper.$el.addClass(backFaceHiddenClass);
    } else if (hasClassBackfaceClassAdded) {
      swiper.$el.removeClass(backFaceHiddenClass);
    }
  }
}

// node_modules/swiper/core/update/updateAutoHeight.js
init_react_shim();
function updateAutoHeight(speed) {
  const swiper = this;
  const activeSlides = [];
  const isVirtual = swiper.virtual && swiper.params.virtual.enabled;
  let newHeight = 0;
  let i3;
  if (typeof speed === "number") {
    swiper.setTransition(speed);
  } else if (speed === true) {
    swiper.setTransition(swiper.params.speed);
  }
  const getSlideByIndex = (index2) => {
    if (isVirtual) {
      return swiper.slides.filter((el) => parseInt(el.getAttribute("data-swiper-slide-index"), 10) === index2)[0];
    }
    return swiper.slides.eq(index2)[0];
  };
  if (swiper.params.slidesPerView !== "auto" && swiper.params.slidesPerView > 1) {
    if (swiper.params.centeredSlides) {
      swiper.visibleSlides.each((slide) => {
        activeSlides.push(slide);
      });
    } else {
      for (i3 = 0; i3 < Math.ceil(swiper.params.slidesPerView); i3 += 1) {
        const index2 = swiper.activeIndex + i3;
        if (index2 > swiper.slides.length && !isVirtual)
          break;
        activeSlides.push(getSlideByIndex(index2));
      }
    }
  } else {
    activeSlides.push(getSlideByIndex(swiper.activeIndex));
  }
  for (i3 = 0; i3 < activeSlides.length; i3 += 1) {
    if (typeof activeSlides[i3] !== "undefined") {
      const height = activeSlides[i3].offsetHeight;
      newHeight = height > newHeight ? height : newHeight;
    }
  }
  if (newHeight || newHeight === 0)
    swiper.$wrapperEl.css("height", `${newHeight}px`);
}

// node_modules/swiper/core/update/updateSlidesOffset.js
init_react_shim();
function updateSlidesOffset() {
  const swiper = this;
  const slides = swiper.slides;
  for (let i3 = 0; i3 < slides.length; i3 += 1) {
    slides[i3].swiperSlideOffset = swiper.isHorizontal() ? slides[i3].offsetLeft : slides[i3].offsetTop;
  }
}

// node_modules/swiper/core/update/updateSlidesProgress.js
init_react_shim();
function updateSlidesProgress(translate) {
  if (translate === void 0) {
    translate = this && this.translate || 0;
  }
  const swiper = this;
  const params = swiper.params;
  const {
    slides,
    rtlTranslate: rtl,
    snapGrid
  } = swiper;
  if (slides.length === 0)
    return;
  if (typeof slides[0].swiperSlideOffset === "undefined")
    swiper.updateSlidesOffset();
  let offsetCenter = -translate;
  if (rtl)
    offsetCenter = translate;
  slides.removeClass(params.slideVisibleClass);
  swiper.visibleSlidesIndexes = [];
  swiper.visibleSlides = [];
  for (let i3 = 0; i3 < slides.length; i3 += 1) {
    const slide = slides[i3];
    let slideOffset = slide.swiperSlideOffset;
    if (params.cssMode && params.centeredSlides) {
      slideOffset -= slides[0].swiperSlideOffset;
    }
    const slideProgress = (offsetCenter + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);
    const originalSlideProgress = (offsetCenter - snapGrid[0] + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);
    const slideBefore = -(offsetCenter - slideOffset);
    const slideAfter = slideBefore + swiper.slidesSizesGrid[i3];
    const isVisible = slideBefore >= 0 && slideBefore < swiper.size - 1 || slideAfter > 1 && slideAfter <= swiper.size || slideBefore <= 0 && slideAfter >= swiper.size;
    if (isVisible) {
      swiper.visibleSlides.push(slide);
      swiper.visibleSlidesIndexes.push(i3);
      slides.eq(i3).addClass(params.slideVisibleClass);
    }
    slide.progress = rtl ? -slideProgress : slideProgress;
    slide.originalProgress = rtl ? -originalSlideProgress : originalSlideProgress;
  }
  swiper.visibleSlides = dom_default(swiper.visibleSlides);
}

// node_modules/swiper/core/update/updateProgress.js
init_react_shim();
function updateProgress(translate) {
  const swiper = this;
  if (typeof translate === "undefined") {
    const multiplier = swiper.rtlTranslate ? -1 : 1;
    translate = swiper && swiper.translate && swiper.translate * multiplier || 0;
  }
  const params = swiper.params;
  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();
  let {
    progress,
    isBeginning,
    isEnd
  } = swiper;
  const wasBeginning = isBeginning;
  const wasEnd = isEnd;
  if (translatesDiff === 0) {
    progress = 0;
    isBeginning = true;
    isEnd = true;
  } else {
    progress = (translate - swiper.minTranslate()) / translatesDiff;
    isBeginning = progress <= 0;
    isEnd = progress >= 1;
  }
  Object.assign(swiper, {
    progress,
    isBeginning,
    isEnd
  });
  if (params.watchSlidesProgress || params.centeredSlides && params.autoHeight)
    swiper.updateSlidesProgress(translate);
  if (isBeginning && !wasBeginning) {
    swiper.emit("reachBeginning toEdge");
  }
  if (isEnd && !wasEnd) {
    swiper.emit("reachEnd toEdge");
  }
  if (wasBeginning && !isBeginning || wasEnd && !isEnd) {
    swiper.emit("fromEdge");
  }
  swiper.emit("progress", progress);
}

// node_modules/swiper/core/update/updateSlidesClasses.js
init_react_shim();
function updateSlidesClasses() {
  const swiper = this;
  const {
    slides,
    params,
    $wrapperEl,
    activeIndex,
    realIndex
  } = swiper;
  const isVirtual = swiper.virtual && params.virtual.enabled;
  slides.removeClass(`${params.slideActiveClass} ${params.slideNextClass} ${params.slidePrevClass} ${params.slideDuplicateActiveClass} ${params.slideDuplicateNextClass} ${params.slideDuplicatePrevClass}`);
  let activeSlide;
  if (isVirtual) {
    activeSlide = swiper.$wrapperEl.find(`.${params.slideClass}[data-swiper-slide-index="${activeIndex}"]`);
  } else {
    activeSlide = slides.eq(activeIndex);
  }
  activeSlide.addClass(params.slideActiveClass);
  if (params.loop) {
    if (activeSlide.hasClass(params.slideDuplicateClass)) {
      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index="${realIndex}"]`).addClass(params.slideDuplicateActiveClass);
    } else {
      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index="${realIndex}"]`).addClass(params.slideDuplicateActiveClass);
    }
  }
  let nextSlide = activeSlide.nextAll(`.${params.slideClass}`).eq(0).addClass(params.slideNextClass);
  if (params.loop && nextSlide.length === 0) {
    nextSlide = slides.eq(0);
    nextSlide.addClass(params.slideNextClass);
  }
  let prevSlide = activeSlide.prevAll(`.${params.slideClass}`).eq(0).addClass(params.slidePrevClass);
  if (params.loop && prevSlide.length === 0) {
    prevSlide = slides.eq(-1);
    prevSlide.addClass(params.slidePrevClass);
  }
  if (params.loop) {
    if (nextSlide.hasClass(params.slideDuplicateClass)) {
      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index="${nextSlide.attr("data-swiper-slide-index")}"]`).addClass(params.slideDuplicateNextClass);
    } else {
      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index="${nextSlide.attr("data-swiper-slide-index")}"]`).addClass(params.slideDuplicateNextClass);
    }
    if (prevSlide.hasClass(params.slideDuplicateClass)) {
      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index="${prevSlide.attr("data-swiper-slide-index")}"]`).addClass(params.slideDuplicatePrevClass);
    } else {
      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index="${prevSlide.attr("data-swiper-slide-index")}"]`).addClass(params.slideDuplicatePrevClass);
    }
  }
  swiper.emitSlidesClasses();
}

// node_modules/swiper/core/update/updateActiveIndex.js
init_react_shim();
function updateActiveIndex(newActiveIndex) {
  const swiper = this;
  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;
  const {
    slidesGrid,
    snapGrid,
    params,
    activeIndex: previousIndex,
    realIndex: previousRealIndex,
    snapIndex: previousSnapIndex
  } = swiper;
  let activeIndex = newActiveIndex;
  let snapIndex;
  if (typeof activeIndex === "undefined") {
    for (let i3 = 0; i3 < slidesGrid.length; i3 += 1) {
      if (typeof slidesGrid[i3 + 1] !== "undefined") {
        if (translate >= slidesGrid[i3] && translate < slidesGrid[i3 + 1] - (slidesGrid[i3 + 1] - slidesGrid[i3]) / 2) {
          activeIndex = i3;
        } else if (translate >= slidesGrid[i3] && translate < slidesGrid[i3 + 1]) {
          activeIndex = i3 + 1;
        }
      } else if (translate >= slidesGrid[i3]) {
        activeIndex = i3;
      }
    }
    if (params.normalizeSlideIndex) {
      if (activeIndex < 0 || typeof activeIndex === "undefined")
        activeIndex = 0;
    }
  }
  if (snapGrid.indexOf(translate) >= 0) {
    snapIndex = snapGrid.indexOf(translate);
  } else {
    const skip = Math.min(params.slidesPerGroupSkip, activeIndex);
    snapIndex = skip + Math.floor((activeIndex - skip) / params.slidesPerGroup);
  }
  if (snapIndex >= snapGrid.length)
    snapIndex = snapGrid.length - 1;
  if (activeIndex === previousIndex) {
    if (snapIndex !== previousSnapIndex) {
      swiper.snapIndex = snapIndex;
      swiper.emit("snapIndexChange");
    }
    return;
  }
  const realIndex = parseInt(swiper.slides.eq(activeIndex).attr("data-swiper-slide-index") || activeIndex, 10);
  Object.assign(swiper, {
    snapIndex,
    realIndex,
    previousIndex,
    activeIndex
  });
  swiper.emit("activeIndexChange");
  swiper.emit("snapIndexChange");
  if (previousRealIndex !== realIndex) {
    swiper.emit("realIndexChange");
  }
  if (swiper.initialized || swiper.params.runCallbacksOnInit) {
    swiper.emit("slideChange");
  }
}

// node_modules/swiper/core/update/updateClickedSlide.js
init_react_shim();
function updateClickedSlide(e3) {
  const swiper = this;
  const params = swiper.params;
  const slide = dom_default(e3).closest(`.${params.slideClass}`)[0];
  let slideFound = false;
  let slideIndex;
  if (slide) {
    for (let i3 = 0; i3 < swiper.slides.length; i3 += 1) {
      if (swiper.slides[i3] === slide) {
        slideFound = true;
        slideIndex = i3;
        break;
      }
    }
  }
  if (slide && slideFound) {
    swiper.clickedSlide = slide;
    if (swiper.virtual && swiper.params.virtual.enabled) {
      swiper.clickedIndex = parseInt(dom_default(slide).attr("data-swiper-slide-index"), 10);
    } else {
      swiper.clickedIndex = slideIndex;
    }
  } else {
    swiper.clickedSlide = void 0;
    swiper.clickedIndex = void 0;
    return;
  }
  if (params.slideToClickedSlide && swiper.clickedIndex !== void 0 && swiper.clickedIndex !== swiper.activeIndex) {
    swiper.slideToClickedSlide();
  }
}

// node_modules/swiper/core/update/index.js
var update_default = {
  updateSize,
  updateSlides,
  updateAutoHeight,
  updateSlidesOffset,
  updateSlidesProgress,
  updateProgress,
  updateSlidesClasses,
  updateActiveIndex,
  updateClickedSlide
};

// node_modules/swiper/core/translate/index.js
init_react_shim();

// node_modules/swiper/core/translate/getTranslate.js
init_react_shim();
function getSwiperTranslate(axis) {
  if (axis === void 0) {
    axis = this.isHorizontal() ? "x" : "y";
  }
  const swiper = this;
  const {
    params,
    rtlTranslate: rtl,
    translate,
    $wrapperEl
  } = swiper;
  if (params.virtualTranslate) {
    return rtl ? -translate : translate;
  }
  if (params.cssMode) {
    return translate;
  }
  let currentTranslate = getTranslate($wrapperEl[0], axis);
  if (rtl)
    currentTranslate = -currentTranslate;
  return currentTranslate || 0;
}

// node_modules/swiper/core/translate/setTranslate.js
init_react_shim();
function setTranslate(translate, byController) {
  const swiper = this;
  const {
    rtlTranslate: rtl,
    params,
    $wrapperEl,
    wrapperEl,
    progress
  } = swiper;
  let x3 = 0;
  let y3 = 0;
  const z2 = 0;
  if (swiper.isHorizontal()) {
    x3 = rtl ? -translate : translate;
  } else {
    y3 = translate;
  }
  if (params.roundLengths) {
    x3 = Math.floor(x3);
    y3 = Math.floor(y3);
  }
  if (params.cssMode) {
    wrapperEl[swiper.isHorizontal() ? "scrollLeft" : "scrollTop"] = swiper.isHorizontal() ? -x3 : -y3;
  } else if (!params.virtualTranslate) {
    $wrapperEl.transform(`translate3d(${x3}px, ${y3}px, ${z2}px)`);
  }
  swiper.previousTranslate = swiper.translate;
  swiper.translate = swiper.isHorizontal() ? x3 : y3;
  let newProgress;
  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();
  if (translatesDiff === 0) {
    newProgress = 0;
  } else {
    newProgress = (translate - swiper.minTranslate()) / translatesDiff;
  }
  if (newProgress !== progress) {
    swiper.updateProgress(translate);
  }
  swiper.emit("setTranslate", swiper.translate, byController);
}

// node_modules/swiper/core/translate/minTranslate.js
init_react_shim();
function minTranslate() {
  return -this.snapGrid[0];
}

// node_modules/swiper/core/translate/maxTranslate.js
init_react_shim();
function maxTranslate() {
  return -this.snapGrid[this.snapGrid.length - 1];
}

// node_modules/swiper/core/translate/translateTo.js
init_react_shim();
function translateTo(translate, speed, runCallbacks, translateBounds, internal) {
  if (translate === void 0) {
    translate = 0;
  }
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  if (translateBounds === void 0) {
    translateBounds = true;
  }
  const swiper = this;
  const {
    params,
    wrapperEl
  } = swiper;
  if (swiper.animating && params.preventInteractionOnTransition) {
    return false;
  }
  const minTranslate2 = swiper.minTranslate();
  const maxTranslate2 = swiper.maxTranslate();
  let newTranslate;
  if (translateBounds && translate > minTranslate2)
    newTranslate = minTranslate2;
  else if (translateBounds && translate < maxTranslate2)
    newTranslate = maxTranslate2;
  else
    newTranslate = translate;
  swiper.updateProgress(newTranslate);
  if (params.cssMode) {
    const isH = swiper.isHorizontal();
    if (speed === 0) {
      wrapperEl[isH ? "scrollLeft" : "scrollTop"] = -newTranslate;
    } else {
      if (!swiper.support.smoothScroll) {
        animateCSSModeScroll({
          swiper,
          targetPosition: -newTranslate,
          side: isH ? "left" : "top"
        });
        return true;
      }
      wrapperEl.scrollTo({
        [isH ? "left" : "top"]: -newTranslate,
        behavior: "smooth"
      });
    }
    return true;
  }
  if (speed === 0) {
    swiper.setTransition(0);
    swiper.setTranslate(newTranslate);
    if (runCallbacks) {
      swiper.emit("beforeTransitionStart", speed, internal);
      swiper.emit("transitionEnd");
    }
  } else {
    swiper.setTransition(speed);
    swiper.setTranslate(newTranslate);
    if (runCallbacks) {
      swiper.emit("beforeTransitionStart", speed, internal);
      swiper.emit("transitionStart");
    }
    if (!swiper.animating) {
      swiper.animating = true;
      if (!swiper.onTranslateToWrapperTransitionEnd) {
        swiper.onTranslateToWrapperTransitionEnd = function transitionEnd3(e3) {
          if (!swiper || swiper.destroyed)
            return;
          if (e3.target !== this)
            return;
          swiper.$wrapperEl[0].removeEventListener("transitionend", swiper.onTranslateToWrapperTransitionEnd);
          swiper.$wrapperEl[0].removeEventListener("webkitTransitionEnd", swiper.onTranslateToWrapperTransitionEnd);
          swiper.onTranslateToWrapperTransitionEnd = null;
          delete swiper.onTranslateToWrapperTransitionEnd;
          if (runCallbacks) {
            swiper.emit("transitionEnd");
          }
        };
      }
      swiper.$wrapperEl[0].addEventListener("transitionend", swiper.onTranslateToWrapperTransitionEnd);
      swiper.$wrapperEl[0].addEventListener("webkitTransitionEnd", swiper.onTranslateToWrapperTransitionEnd);
    }
  }
  return true;
}

// node_modules/swiper/core/translate/index.js
var translate_default = {
  getTranslate: getSwiperTranslate,
  setTranslate,
  minTranslate,
  maxTranslate,
  translateTo
};

// node_modules/swiper/core/transition/index.js
init_react_shim();

// node_modules/swiper/core/transition/setTransition.js
init_react_shim();
function setTransition(duration, byController) {
  const swiper = this;
  if (!swiper.params.cssMode) {
    swiper.$wrapperEl.transition(duration);
  }
  swiper.emit("setTransition", duration, byController);
}

// node_modules/swiper/core/transition/transitionStart.js
init_react_shim();

// node_modules/swiper/core/transition/transitionEmit.js
init_react_shim();
function transitionEmit(_ref) {
  let {
    swiper,
    runCallbacks,
    direction,
    step
  } = _ref;
  const {
    activeIndex,
    previousIndex
  } = swiper;
  let dir = direction;
  if (!dir) {
    if (activeIndex > previousIndex)
      dir = "next";
    else if (activeIndex < previousIndex)
      dir = "prev";
    else
      dir = "reset";
  }
  swiper.emit(`transition${step}`);
  if (runCallbacks && activeIndex !== previousIndex) {
    if (dir === "reset") {
      swiper.emit(`slideResetTransition${step}`);
      return;
    }
    swiper.emit(`slideChangeTransition${step}`);
    if (dir === "next") {
      swiper.emit(`slideNextTransition${step}`);
    } else {
      swiper.emit(`slidePrevTransition${step}`);
    }
  }
}

// node_modules/swiper/core/transition/transitionStart.js
function transitionStart(runCallbacks, direction) {
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  const {
    params
  } = swiper;
  if (params.cssMode)
    return;
  if (params.autoHeight) {
    swiper.updateAutoHeight();
  }
  transitionEmit({
    swiper,
    runCallbacks,
    direction,
    step: "Start"
  });
}

// node_modules/swiper/core/transition/transitionEnd.js
init_react_shim();
function transitionEnd2(runCallbacks, direction) {
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  const {
    params
  } = swiper;
  swiper.animating = false;
  if (params.cssMode)
    return;
  swiper.setTransition(0);
  transitionEmit({
    swiper,
    runCallbacks,
    direction,
    step: "End"
  });
}

// node_modules/swiper/core/transition/index.js
var transition_default = {
  setTransition,
  transitionStart,
  transitionEnd: transitionEnd2
};

// node_modules/swiper/core/slide/index.js
init_react_shim();

// node_modules/swiper/core/slide/slideTo.js
init_react_shim();
function slideTo(index2, speed, runCallbacks, internal, initial) {
  if (index2 === void 0) {
    index2 = 0;
  }
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  if (typeof index2 !== "number" && typeof index2 !== "string") {
    throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof index2}] given.`);
  }
  if (typeof index2 === "string") {
    const indexAsNumber = parseInt(index2, 10);
    const isValidNumber = isFinite(indexAsNumber);
    if (!isValidNumber) {
      throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${index2}] given.`);
    }
    index2 = indexAsNumber;
  }
  const swiper = this;
  let slideIndex = index2;
  if (slideIndex < 0)
    slideIndex = 0;
  const {
    params,
    snapGrid,
    slidesGrid,
    previousIndex,
    activeIndex,
    rtlTranslate: rtl,
    wrapperEl,
    enabled
  } = swiper;
  if (swiper.animating && params.preventInteractionOnTransition || !enabled && !internal && !initial) {
    return false;
  }
  const skip = Math.min(swiper.params.slidesPerGroupSkip, slideIndex);
  let snapIndex = skip + Math.floor((slideIndex - skip) / swiper.params.slidesPerGroup);
  if (snapIndex >= snapGrid.length)
    snapIndex = snapGrid.length - 1;
  if ((activeIndex || params.initialSlide || 0) === (previousIndex || 0) && runCallbacks) {
    swiper.emit("beforeSlideChangeStart");
  }
  const translate = -snapGrid[snapIndex];
  swiper.updateProgress(translate);
  if (params.normalizeSlideIndex) {
    for (let i3 = 0; i3 < slidesGrid.length; i3 += 1) {
      const normalizedTranslate = -Math.floor(translate * 100);
      const normalizedGrid = Math.floor(slidesGrid[i3] * 100);
      const normalizedGridNext = Math.floor(slidesGrid[i3 + 1] * 100);
      if (typeof slidesGrid[i3 + 1] !== "undefined") {
        if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext - (normalizedGridNext - normalizedGrid) / 2) {
          slideIndex = i3;
        } else if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext) {
          slideIndex = i3 + 1;
        }
      } else if (normalizedTranslate >= normalizedGrid) {
        slideIndex = i3;
      }
    }
  }
  if (swiper.initialized && slideIndex !== activeIndex) {
    if (!swiper.allowSlideNext && translate < swiper.translate && translate < swiper.minTranslate()) {
      return false;
    }
    if (!swiper.allowSlidePrev && translate > swiper.translate && translate > swiper.maxTranslate()) {
      if ((activeIndex || 0) !== slideIndex)
        return false;
    }
  }
  let direction;
  if (slideIndex > activeIndex)
    direction = "next";
  else if (slideIndex < activeIndex)
    direction = "prev";
  else
    direction = "reset";
  if (rtl && -translate === swiper.translate || !rtl && translate === swiper.translate) {
    swiper.updateActiveIndex(slideIndex);
    if (params.autoHeight) {
      swiper.updateAutoHeight();
    }
    swiper.updateSlidesClasses();
    if (params.effect !== "slide") {
      swiper.setTranslate(translate);
    }
    if (direction !== "reset") {
      swiper.transitionStart(runCallbacks, direction);
      swiper.transitionEnd(runCallbacks, direction);
    }
    return false;
  }
  if (params.cssMode) {
    const isH = swiper.isHorizontal();
    const t3 = rtl ? translate : -translate;
    if (speed === 0) {
      const isVirtual = swiper.virtual && swiper.params.virtual.enabled;
      if (isVirtual) {
        swiper.wrapperEl.style.scrollSnapType = "none";
        swiper._immediateVirtual = true;
      }
      wrapperEl[isH ? "scrollLeft" : "scrollTop"] = t3;
      if (isVirtual) {
        requestAnimationFrame(() => {
          swiper.wrapperEl.style.scrollSnapType = "";
          swiper._swiperImmediateVirtual = false;
        });
      }
    } else {
      if (!swiper.support.smoothScroll) {
        animateCSSModeScroll({
          swiper,
          targetPosition: t3,
          side: isH ? "left" : "top"
        });
        return true;
      }
      wrapperEl.scrollTo({
        [isH ? "left" : "top"]: t3,
        behavior: "smooth"
      });
    }
    return true;
  }
  swiper.setTransition(speed);
  swiper.setTranslate(translate);
  swiper.updateActiveIndex(slideIndex);
  swiper.updateSlidesClasses();
  swiper.emit("beforeTransitionStart", speed, internal);
  swiper.transitionStart(runCallbacks, direction);
  if (speed === 0) {
    swiper.transitionEnd(runCallbacks, direction);
  } else if (!swiper.animating) {
    swiper.animating = true;
    if (!swiper.onSlideToWrapperTransitionEnd) {
      swiper.onSlideToWrapperTransitionEnd = function transitionEnd3(e3) {
        if (!swiper || swiper.destroyed)
          return;
        if (e3.target !== this)
          return;
        swiper.$wrapperEl[0].removeEventListener("transitionend", swiper.onSlideToWrapperTransitionEnd);
        swiper.$wrapperEl[0].removeEventListener("webkitTransitionEnd", swiper.onSlideToWrapperTransitionEnd);
        swiper.onSlideToWrapperTransitionEnd = null;
        delete swiper.onSlideToWrapperTransitionEnd;
        swiper.transitionEnd(runCallbacks, direction);
      };
    }
    swiper.$wrapperEl[0].addEventListener("transitionend", swiper.onSlideToWrapperTransitionEnd);
    swiper.$wrapperEl[0].addEventListener("webkitTransitionEnd", swiper.onSlideToWrapperTransitionEnd);
  }
  return true;
}

// node_modules/swiper/core/slide/slideToLoop.js
init_react_shim();
function slideToLoop(index2, speed, runCallbacks, internal) {
  if (index2 === void 0) {
    index2 = 0;
  }
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  let newIndex = index2;
  if (swiper.params.loop) {
    newIndex += swiper.loopedSlides;
  }
  return swiper.slideTo(newIndex, speed, runCallbacks, internal);
}

// node_modules/swiper/core/slide/slideNext.js
init_react_shim();
function slideNext(speed, runCallbacks, internal) {
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  const {
    animating,
    enabled,
    params
  } = swiper;
  if (!enabled)
    return swiper;
  let perGroup = params.slidesPerGroup;
  if (params.slidesPerView === "auto" && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {
    perGroup = Math.max(swiper.slidesPerViewDynamic("current", true), 1);
  }
  const increment = swiper.activeIndex < params.slidesPerGroupSkip ? 1 : perGroup;
  if (params.loop) {
    if (animating && params.loopPreventsSlide)
      return false;
    swiper.loopFix();
    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;
  }
  if (params.rewind && swiper.isEnd) {
    return swiper.slideTo(0, speed, runCallbacks, internal);
  }
  return swiper.slideTo(swiper.activeIndex + increment, speed, runCallbacks, internal);
}

// node_modules/swiper/core/slide/slidePrev.js
init_react_shim();
function slidePrev(speed, runCallbacks, internal) {
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  const {
    params,
    animating,
    snapGrid,
    slidesGrid,
    rtlTranslate,
    enabled
  } = swiper;
  if (!enabled)
    return swiper;
  if (params.loop) {
    if (animating && params.loopPreventsSlide)
      return false;
    swiper.loopFix();
    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;
  }
  const translate = rtlTranslate ? swiper.translate : -swiper.translate;
  function normalize(val) {
    if (val < 0)
      return -Math.floor(Math.abs(val));
    return Math.floor(val);
  }
  const normalizedTranslate = normalize(translate);
  const normalizedSnapGrid = snapGrid.map((val) => normalize(val));
  let prevSnap = snapGrid[normalizedSnapGrid.indexOf(normalizedTranslate) - 1];
  if (typeof prevSnap === "undefined" && params.cssMode) {
    let prevSnapIndex;
    snapGrid.forEach((snap, snapIndex) => {
      if (normalizedTranslate >= snap) {
        prevSnapIndex = snapIndex;
      }
    });
    if (typeof prevSnapIndex !== "undefined") {
      prevSnap = snapGrid[prevSnapIndex > 0 ? prevSnapIndex - 1 : prevSnapIndex];
    }
  }
  let prevIndex = 0;
  if (typeof prevSnap !== "undefined") {
    prevIndex = slidesGrid.indexOf(prevSnap);
    if (prevIndex < 0)
      prevIndex = swiper.activeIndex - 1;
    if (params.slidesPerView === "auto" && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {
      prevIndex = prevIndex - swiper.slidesPerViewDynamic("previous", true) + 1;
      prevIndex = Math.max(prevIndex, 0);
    }
  }
  if (params.rewind && swiper.isBeginning) {
    const lastIndex = swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual ? swiper.virtual.slides.length - 1 : swiper.slides.length - 1;
    return swiper.slideTo(lastIndex, speed, runCallbacks, internal);
  }
  return swiper.slideTo(prevIndex, speed, runCallbacks, internal);
}

// node_modules/swiper/core/slide/slideReset.js
init_react_shim();
function slideReset(speed, runCallbacks, internal) {
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  const swiper = this;
  return swiper.slideTo(swiper.activeIndex, speed, runCallbacks, internal);
}

// node_modules/swiper/core/slide/slideToClosest.js
init_react_shim();
function slideToClosest(speed, runCallbacks, internal, threshold) {
  if (speed === void 0) {
    speed = this.params.speed;
  }
  if (runCallbacks === void 0) {
    runCallbacks = true;
  }
  if (threshold === void 0) {
    threshold = 0.5;
  }
  const swiper = this;
  let index2 = swiper.activeIndex;
  const skip = Math.min(swiper.params.slidesPerGroupSkip, index2);
  const snapIndex = skip + Math.floor((index2 - skip) / swiper.params.slidesPerGroup);
  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;
  if (translate >= swiper.snapGrid[snapIndex]) {
    const currentSnap = swiper.snapGrid[snapIndex];
    const nextSnap = swiper.snapGrid[snapIndex + 1];
    if (translate - currentSnap > (nextSnap - currentSnap) * threshold) {
      index2 += swiper.params.slidesPerGroup;
    }
  } else {
    const prevSnap = swiper.snapGrid[snapIndex - 1];
    const currentSnap = swiper.snapGrid[snapIndex];
    if (translate - prevSnap <= (currentSnap - prevSnap) * threshold) {
      index2 -= swiper.params.slidesPerGroup;
    }
  }
  index2 = Math.max(index2, 0);
  index2 = Math.min(index2, swiper.slidesGrid.length - 1);
  return swiper.slideTo(index2, speed, runCallbacks, internal);
}

// node_modules/swiper/core/slide/slideToClickedSlide.js
init_react_shim();
function slideToClickedSlide() {
  const swiper = this;
  const {
    params,
    $wrapperEl
  } = swiper;
  const slidesPerView = params.slidesPerView === "auto" ? swiper.slidesPerViewDynamic() : params.slidesPerView;
  let slideToIndex = swiper.clickedIndex;
  let realIndex;
  if (params.loop) {
    if (swiper.animating)
      return;
    realIndex = parseInt(dom_default(swiper.clickedSlide).attr("data-swiper-slide-index"), 10);
    if (params.centeredSlides) {
      if (slideToIndex < swiper.loopedSlides - slidesPerView / 2 || slideToIndex > swiper.slides.length - swiper.loopedSlides + slidesPerView / 2) {
        swiper.loopFix();
        slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index="${realIndex}"]:not(.${params.slideDuplicateClass})`).eq(0).index();
        nextTick(() => {
          swiper.slideTo(slideToIndex);
        });
      } else {
        swiper.slideTo(slideToIndex);
      }
    } else if (slideToIndex > swiper.slides.length - slidesPerView) {
      swiper.loopFix();
      slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index="${realIndex}"]:not(.${params.slideDuplicateClass})`).eq(0).index();
      nextTick(() => {
        swiper.slideTo(slideToIndex);
      });
    } else {
      swiper.slideTo(slideToIndex);
    }
  } else {
    swiper.slideTo(slideToIndex);
  }
}

// node_modules/swiper/core/slide/index.js
var slide_default = {
  slideTo,
  slideToLoop,
  slideNext,
  slidePrev,
  slideReset,
  slideToClosest,
  slideToClickedSlide
};

// node_modules/swiper/core/loop/index.js
init_react_shim();

// node_modules/swiper/core/loop/loopCreate.js
init_react_shim();
function loopCreate() {
  const swiper = this;
  const document2 = getDocument();
  const {
    params,
    $wrapperEl
  } = swiper;
  const $selector = $wrapperEl.children().length > 0 ? dom_default($wrapperEl.children()[0].parentNode) : $wrapperEl;
  $selector.children(`.${params.slideClass}.${params.slideDuplicateClass}`).remove();
  let slides = $selector.children(`.${params.slideClass}`);
  if (params.loopFillGroupWithBlank) {
    const blankSlidesNum = params.slidesPerGroup - slides.length % params.slidesPerGroup;
    if (blankSlidesNum !== params.slidesPerGroup) {
      for (let i3 = 0; i3 < blankSlidesNum; i3 += 1) {
        const blankNode = dom_default(document2.createElement("div")).addClass(`${params.slideClass} ${params.slideBlankClass}`);
        $selector.append(blankNode);
      }
      slides = $selector.children(`.${params.slideClass}`);
    }
  }
  if (params.slidesPerView === "auto" && !params.loopedSlides)
    params.loopedSlides = slides.length;
  swiper.loopedSlides = Math.ceil(parseFloat(params.loopedSlides || params.slidesPerView, 10));
  swiper.loopedSlides += params.loopAdditionalSlides;
  if (swiper.loopedSlides > slides.length) {
    swiper.loopedSlides = slides.length;
  }
  const prependSlides = [];
  const appendSlides = [];
  slides.each((el, index2) => {
    const slide = dom_default(el);
    if (index2 < swiper.loopedSlides) {
      appendSlides.push(el);
    }
    if (index2 < slides.length && index2 >= slides.length - swiper.loopedSlides) {
      prependSlides.push(el);
    }
    slide.attr("data-swiper-slide-index", index2);
  });
  for (let i3 = 0; i3 < appendSlides.length; i3 += 1) {
    $selector.append(dom_default(appendSlides[i3].cloneNode(true)).addClass(params.slideDuplicateClass));
  }
  for (let i3 = prependSlides.length - 1; i3 >= 0; i3 -= 1) {
    $selector.prepend(dom_default(prependSlides[i3].cloneNode(true)).addClass(params.slideDuplicateClass));
  }
}

// node_modules/swiper/core/loop/loopFix.js
init_react_shim();
function loopFix() {
  const swiper = this;
  swiper.emit("beforeLoopFix");
  const {
    activeIndex,
    slides,
    loopedSlides,
    allowSlidePrev,
    allowSlideNext,
    snapGrid,
    rtlTranslate: rtl
  } = swiper;
  let newIndex;
  swiper.allowSlidePrev = true;
  swiper.allowSlideNext = true;
  const snapTranslate = -snapGrid[activeIndex];
  const diff = snapTranslate - swiper.getTranslate();
  if (activeIndex < loopedSlides) {
    newIndex = slides.length - loopedSlides * 3 + activeIndex;
    newIndex += loopedSlides;
    const slideChanged = swiper.slideTo(newIndex, 0, false, true);
    if (slideChanged && diff !== 0) {
      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);
    }
  } else if (activeIndex >= slides.length - loopedSlides) {
    newIndex = -slides.length + activeIndex + loopedSlides;
    newIndex += loopedSlides;
    const slideChanged = swiper.slideTo(newIndex, 0, false, true);
    if (slideChanged && diff !== 0) {
      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);
    }
  }
  swiper.allowSlidePrev = allowSlidePrev;
  swiper.allowSlideNext = allowSlideNext;
  swiper.emit("loopFix");
}

// node_modules/swiper/core/loop/loopDestroy.js
init_react_shim();
function loopDestroy() {
  const swiper = this;
  const {
    $wrapperEl,
    params,
    slides
  } = swiper;
  $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass},.${params.slideClass}.${params.slideBlankClass}`).remove();
  slides.removeAttr("data-swiper-slide-index");
}

// node_modules/swiper/core/loop/index.js
var loop_default = {
  loopCreate,
  loopFix,
  loopDestroy
};

// node_modules/swiper/core/grab-cursor/index.js
init_react_shim();

// node_modules/swiper/core/grab-cursor/setGrabCursor.js
init_react_shim();
function setGrabCursor(moving) {
  const swiper = this;
  if (swiper.support.touch || !swiper.params.simulateTouch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode)
    return;
  const el = swiper.params.touchEventsTarget === "container" ? swiper.el : swiper.wrapperEl;
  el.style.cursor = "move";
  el.style.cursor = moving ? "-webkit-grabbing" : "-webkit-grab";
  el.style.cursor = moving ? "-moz-grabbin" : "-moz-grab";
  el.style.cursor = moving ? "grabbing" : "grab";
}

// node_modules/swiper/core/grab-cursor/unsetGrabCursor.js
init_react_shim();
function unsetGrabCursor() {
  const swiper = this;
  if (swiper.support.touch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode) {
    return;
  }
  swiper[swiper.params.touchEventsTarget === "container" ? "el" : "wrapperEl"].style.cursor = "";
}

// node_modules/swiper/core/grab-cursor/index.js
var grab_cursor_default = {
  setGrabCursor,
  unsetGrabCursor
};

// node_modules/swiper/core/events/index.js
init_react_shim();

// node_modules/swiper/core/events/onTouchStart.js
init_react_shim();
function closestElement(selector, base) {
  if (base === void 0) {
    base = this;
  }
  function __closestFrom(el) {
    if (!el || el === getDocument() || el === getWindow())
      return null;
    if (el.assignedSlot)
      el = el.assignedSlot;
    const found = el.closest(selector);
    return found || __closestFrom(el.getRootNode().host);
  }
  return __closestFrom(base);
}
function onTouchStart(event2) {
  const swiper = this;
  const document2 = getDocument();
  const window2 = getWindow();
  const data = swiper.touchEventsData;
  const {
    params,
    touches,
    enabled
  } = swiper;
  if (!enabled)
    return;
  if (swiper.animating && params.preventInteractionOnTransition) {
    return;
  }
  if (!swiper.animating && params.cssMode && params.loop) {
    swiper.loopFix();
  }
  let e3 = event2;
  if (e3.originalEvent)
    e3 = e3.originalEvent;
  let $targetEl = dom_default(e3.target);
  if (params.touchEventsTarget === "wrapper") {
    if (!$targetEl.closest(swiper.wrapperEl).length)
      return;
  }
  data.isTouchEvent = e3.type === "touchstart";
  if (!data.isTouchEvent && "which" in e3 && e3.which === 3)
    return;
  if (!data.isTouchEvent && "button" in e3 && e3.button > 0)
    return;
  if (data.isTouched && data.isMoved)
    return;
  const swipingClassHasValue = !!params.noSwipingClass && params.noSwipingClass !== "";
  if (swipingClassHasValue && e3.target && e3.target.shadowRoot && event2.path && event2.path[0]) {
    $targetEl = dom_default(event2.path[0]);
  }
  const noSwipingSelector = params.noSwipingSelector ? params.noSwipingSelector : `.${params.noSwipingClass}`;
  const isTargetShadow = !!(e3.target && e3.target.shadowRoot);
  if (params.noSwiping && (isTargetShadow ? closestElement(noSwipingSelector, e3.target) : $targetEl.closest(noSwipingSelector)[0])) {
    swiper.allowClick = true;
    return;
  }
  if (params.swipeHandler) {
    if (!$targetEl.closest(params.swipeHandler)[0])
      return;
  }
  touches.currentX = e3.type === "touchstart" ? e3.targetTouches[0].pageX : e3.pageX;
  touches.currentY = e3.type === "touchstart" ? e3.targetTouches[0].pageY : e3.pageY;
  const startX = touches.currentX;
  const startY = touches.currentY;
  const edgeSwipeDetection = params.edgeSwipeDetection || params.iOSEdgeSwipeDetection;
  const edgeSwipeThreshold = params.edgeSwipeThreshold || params.iOSEdgeSwipeThreshold;
  if (edgeSwipeDetection && (startX <= edgeSwipeThreshold || startX >= window2.innerWidth - edgeSwipeThreshold)) {
    if (edgeSwipeDetection === "prevent") {
      event2.preventDefault();
    } else {
      return;
    }
  }
  Object.assign(data, {
    isTouched: true,
    isMoved: false,
    allowTouchCallbacks: true,
    isScrolling: void 0,
    startMoving: void 0
  });
  touches.startX = startX;
  touches.startY = startY;
  data.touchStartTime = now();
  swiper.allowClick = true;
  swiper.updateSize();
  swiper.swipeDirection = void 0;
  if (params.threshold > 0)
    data.allowThresholdMove = false;
  if (e3.type !== "touchstart") {
    let preventDefault = true;
    if ($targetEl.is(data.focusableElements)) {
      preventDefault = false;
      if ($targetEl[0].nodeName === "SELECT") {
        data.isTouched = false;
      }
    }
    if (document2.activeElement && dom_default(document2.activeElement).is(data.focusableElements) && document2.activeElement !== $targetEl[0]) {
      document2.activeElement.blur();
    }
    const shouldPreventDefault = preventDefault && swiper.allowTouchMove && params.touchStartPreventDefault;
    if ((params.touchStartForcePreventDefault || shouldPreventDefault) && !$targetEl[0].isContentEditable) {
      e3.preventDefault();
    }
  }
  if (swiper.params.freeMode && swiper.params.freeMode.enabled && swiper.freeMode && swiper.animating && !params.cssMode) {
    swiper.freeMode.onTouchStart();
  }
  swiper.emit("touchStart", e3);
}

// node_modules/swiper/core/events/onTouchMove.js
init_react_shim();
function onTouchMove(event2) {
  const document2 = getDocument();
  const swiper = this;
  const data = swiper.touchEventsData;
  const {
    params,
    touches,
    rtlTranslate: rtl,
    enabled
  } = swiper;
  if (!enabled)
    return;
  let e3 = event2;
  if (e3.originalEvent)
    e3 = e3.originalEvent;
  if (!data.isTouched) {
    if (data.startMoving && data.isScrolling) {
      swiper.emit("touchMoveOpposite", e3);
    }
    return;
  }
  if (data.isTouchEvent && e3.type !== "touchmove")
    return;
  const targetTouch = e3.type === "touchmove" && e3.targetTouches && (e3.targetTouches[0] || e3.changedTouches[0]);
  const pageX = e3.type === "touchmove" ? targetTouch.pageX : e3.pageX;
  const pageY = e3.type === "touchmove" ? targetTouch.pageY : e3.pageY;
  if (e3.preventedByNestedSwiper) {
    touches.startX = pageX;
    touches.startY = pageY;
    return;
  }
  if (!swiper.allowTouchMove) {
    if (!dom_default(e3.target).is(data.focusableElements)) {
      swiper.allowClick = false;
    }
    if (data.isTouched) {
      Object.assign(touches, {
        startX: pageX,
        startY: pageY,
        currentX: pageX,
        currentY: pageY
      });
      data.touchStartTime = now();
    }
    return;
  }
  if (data.isTouchEvent && params.touchReleaseOnEdges && !params.loop) {
    if (swiper.isVertical()) {
      if (pageY < touches.startY && swiper.translate <= swiper.maxTranslate() || pageY > touches.startY && swiper.translate >= swiper.minTranslate()) {
        data.isTouched = false;
        data.isMoved = false;
        return;
      }
    } else if (pageX < touches.startX && swiper.translate <= swiper.maxTranslate() || pageX > touches.startX && swiper.translate >= swiper.minTranslate()) {
      return;
    }
  }
  if (data.isTouchEvent && document2.activeElement) {
    if (e3.target === document2.activeElement && dom_default(e3.target).is(data.focusableElements)) {
      data.isMoved = true;
      swiper.allowClick = false;
      return;
    }
  }
  if (data.allowTouchCallbacks) {
    swiper.emit("touchMove", e3);
  }
  if (e3.targetTouches && e3.targetTouches.length > 1)
    return;
  touches.currentX = pageX;
  touches.currentY = pageY;
  const diffX = touches.currentX - touches.startX;
  const diffY = touches.currentY - touches.startY;
  if (swiper.params.threshold && Math.sqrt(diffX ** 2 + diffY ** 2) < swiper.params.threshold)
    return;
  if (typeof data.isScrolling === "undefined") {
    let touchAngle;
    if (swiper.isHorizontal() && touches.currentY === touches.startY || swiper.isVertical() && touches.currentX === touches.startX) {
      data.isScrolling = false;
    } else {
      if (diffX * diffX + diffY * diffY >= 25) {
        touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;
        data.isScrolling = swiper.isHorizontal() ? touchAngle > params.touchAngle : 90 - touchAngle > params.touchAngle;
      }
    }
  }
  if (data.isScrolling) {
    swiper.emit("touchMoveOpposite", e3);
  }
  if (typeof data.startMoving === "undefined") {
    if (touches.currentX !== touches.startX || touches.currentY !== touches.startY) {
      data.startMoving = true;
    }
  }
  if (data.isScrolling) {
    data.isTouched = false;
    return;
  }
  if (!data.startMoving) {
    return;
  }
  swiper.allowClick = false;
  if (!params.cssMode && e3.cancelable) {
    e3.preventDefault();
  }
  if (params.touchMoveStopPropagation && !params.nested) {
    e3.stopPropagation();
  }
  if (!data.isMoved) {
    if (params.loop && !params.cssMode) {
      swiper.loopFix();
    }
    data.startTranslate = swiper.getTranslate();
    swiper.setTransition(0);
    if (swiper.animating) {
      swiper.$wrapperEl.trigger("webkitTransitionEnd transitionend");
    }
    data.allowMomentumBounce = false;
    if (params.grabCursor && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {
      swiper.setGrabCursor(true);
    }
    swiper.emit("sliderFirstMove", e3);
  }
  swiper.emit("sliderMove", e3);
  data.isMoved = true;
  let diff = swiper.isHorizontal() ? diffX : diffY;
  touches.diff = diff;
  diff *= params.touchRatio;
  if (rtl)
    diff = -diff;
  swiper.swipeDirection = diff > 0 ? "prev" : "next";
  data.currentTranslate = diff + data.startTranslate;
  let disableParentSwiper = true;
  let resistanceRatio = params.resistanceRatio;
  if (params.touchReleaseOnEdges) {
    resistanceRatio = 0;
  }
  if (diff > 0 && data.currentTranslate > swiper.minTranslate()) {
    disableParentSwiper = false;
    if (params.resistance)
      data.currentTranslate = swiper.minTranslate() - 1 + (-swiper.minTranslate() + data.startTranslate + diff) ** resistanceRatio;
  } else if (diff < 0 && data.currentTranslate < swiper.maxTranslate()) {
    disableParentSwiper = false;
    if (params.resistance)
      data.currentTranslate = swiper.maxTranslate() + 1 - (swiper.maxTranslate() - data.startTranslate - diff) ** resistanceRatio;
  }
  if (disableParentSwiper) {
    e3.preventedByNestedSwiper = true;
  }
  if (!swiper.allowSlideNext && swiper.swipeDirection === "next" && data.currentTranslate < data.startTranslate) {
    data.currentTranslate = data.startTranslate;
  }
  if (!swiper.allowSlidePrev && swiper.swipeDirection === "prev" && data.currentTranslate > data.startTranslate) {
    data.currentTranslate = data.startTranslate;
  }
  if (!swiper.allowSlidePrev && !swiper.allowSlideNext) {
    data.currentTranslate = data.startTranslate;
  }
  if (params.threshold > 0) {
    if (Math.abs(diff) > params.threshold || data.allowThresholdMove) {
      if (!data.allowThresholdMove) {
        data.allowThresholdMove = true;
        touches.startX = touches.currentX;
        touches.startY = touches.currentY;
        data.currentTranslate = data.startTranslate;
        touches.diff = swiper.isHorizontal() ? touches.currentX - touches.startX : touches.currentY - touches.startY;
        return;
      }
    } else {
      data.currentTranslate = data.startTranslate;
      return;
    }
  }
  if (!params.followFinger || params.cssMode)
    return;
  if (params.freeMode && params.freeMode.enabled && swiper.freeMode || params.watchSlidesProgress) {
    swiper.updateActiveIndex();
    swiper.updateSlidesClasses();
  }
  if (swiper.params.freeMode && params.freeMode.enabled && swiper.freeMode) {
    swiper.freeMode.onTouchMove();
  }
  swiper.updateProgress(data.currentTranslate);
  swiper.setTranslate(data.currentTranslate);
}

// node_modules/swiper/core/events/onTouchEnd.js
init_react_shim();
function onTouchEnd(event2) {
  const swiper = this;
  const data = swiper.touchEventsData;
  const {
    params,
    touches,
    rtlTranslate: rtl,
    slidesGrid,
    enabled
  } = swiper;
  if (!enabled)
    return;
  let e3 = event2;
  if (e3.originalEvent)
    e3 = e3.originalEvent;
  if (data.allowTouchCallbacks) {
    swiper.emit("touchEnd", e3);
  }
  data.allowTouchCallbacks = false;
  if (!data.isTouched) {
    if (data.isMoved && params.grabCursor) {
      swiper.setGrabCursor(false);
    }
    data.isMoved = false;
    data.startMoving = false;
    return;
  }
  if (params.grabCursor && data.isMoved && data.isTouched && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {
    swiper.setGrabCursor(false);
  }
  const touchEndTime = now();
  const timeDiff = touchEndTime - data.touchStartTime;
  if (swiper.allowClick) {
    const pathTree = e3.path || e3.composedPath && e3.composedPath();
    swiper.updateClickedSlide(pathTree && pathTree[0] || e3.target);
    swiper.emit("tap click", e3);
    if (timeDiff < 300 && touchEndTime - data.lastClickTime < 300) {
      swiper.emit("doubleTap doubleClick", e3);
    }
  }
  data.lastClickTime = now();
  nextTick(() => {
    if (!swiper.destroyed)
      swiper.allowClick = true;
  });
  if (!data.isTouched || !data.isMoved || !swiper.swipeDirection || touches.diff === 0 || data.currentTranslate === data.startTranslate) {
    data.isTouched = false;
    data.isMoved = false;
    data.startMoving = false;
    return;
  }
  data.isTouched = false;
  data.isMoved = false;
  data.startMoving = false;
  let currentPos;
  if (params.followFinger) {
    currentPos = rtl ? swiper.translate : -swiper.translate;
  } else {
    currentPos = -data.currentTranslate;
  }
  if (params.cssMode) {
    return;
  }
  if (swiper.params.freeMode && params.freeMode.enabled) {
    swiper.freeMode.onTouchEnd({
      currentPos
    });
    return;
  }
  let stopIndex = 0;
  let groupSize = swiper.slidesSizesGrid[0];
  for (let i3 = 0; i3 < slidesGrid.length; i3 += i3 < params.slidesPerGroupSkip ? 1 : params.slidesPerGroup) {
    const increment2 = i3 < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;
    if (typeof slidesGrid[i3 + increment2] !== "undefined") {
      if (currentPos >= slidesGrid[i3] && currentPos < slidesGrid[i3 + increment2]) {
        stopIndex = i3;
        groupSize = slidesGrid[i3 + increment2] - slidesGrid[i3];
      }
    } else if (currentPos >= slidesGrid[i3]) {
      stopIndex = i3;
      groupSize = slidesGrid[slidesGrid.length - 1] - slidesGrid[slidesGrid.length - 2];
    }
  }
  let rewindFirstIndex = null;
  let rewindLastIndex = null;
  if (params.rewind) {
    if (swiper.isBeginning) {
      rewindLastIndex = swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual ? swiper.virtual.slides.length - 1 : swiper.slides.length - 1;
    } else if (swiper.isEnd) {
      rewindFirstIndex = 0;
    }
  }
  const ratio = (currentPos - slidesGrid[stopIndex]) / groupSize;
  const increment = stopIndex < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;
  if (timeDiff > params.longSwipesMs) {
    if (!params.longSwipes) {
      swiper.slideTo(swiper.activeIndex);
      return;
    }
    if (swiper.swipeDirection === "next") {
      if (ratio >= params.longSwipesRatio)
        swiper.slideTo(params.rewind && swiper.isEnd ? rewindFirstIndex : stopIndex + increment);
      else
        swiper.slideTo(stopIndex);
    }
    if (swiper.swipeDirection === "prev") {
      if (ratio > 1 - params.longSwipesRatio) {
        swiper.slideTo(stopIndex + increment);
      } else if (rewindLastIndex !== null && ratio < 0 && Math.abs(ratio) > params.longSwipesRatio) {
        swiper.slideTo(rewindLastIndex);
      } else {
        swiper.slideTo(stopIndex);
      }
    }
  } else {
    if (!params.shortSwipes) {
      swiper.slideTo(swiper.activeIndex);
      return;
    }
    const isNavButtonTarget = swiper.navigation && (e3.target === swiper.navigation.nextEl || e3.target === swiper.navigation.prevEl);
    if (!isNavButtonTarget) {
      if (swiper.swipeDirection === "next") {
        swiper.slideTo(rewindFirstIndex !== null ? rewindFirstIndex : stopIndex + increment);
      }
      if (swiper.swipeDirection === "prev") {
        swiper.slideTo(rewindLastIndex !== null ? rewindLastIndex : stopIndex);
      }
    } else if (e3.target === swiper.navigation.nextEl) {
      swiper.slideTo(stopIndex + increment);
    } else {
      swiper.slideTo(stopIndex);
    }
  }
}

// node_modules/swiper/core/events/onResize.js
init_react_shim();
function onResize() {
  const swiper = this;
  const {
    params,
    el
  } = swiper;
  if (el && el.offsetWidth === 0)
    return;
  if (params.breakpoints) {
    swiper.setBreakpoint();
  }
  const {
    allowSlideNext,
    allowSlidePrev,
    snapGrid
  } = swiper;
  swiper.allowSlideNext = true;
  swiper.allowSlidePrev = true;
  swiper.updateSize();
  swiper.updateSlides();
  swiper.updateSlidesClasses();
  if ((params.slidesPerView === "auto" || params.slidesPerView > 1) && swiper.isEnd && !swiper.isBeginning && !swiper.params.centeredSlides) {
    swiper.slideTo(swiper.slides.length - 1, 0, false, true);
  } else {
    swiper.slideTo(swiper.activeIndex, 0, false, true);
  }
  if (swiper.autoplay && swiper.autoplay.running && swiper.autoplay.paused) {
    swiper.autoplay.run();
  }
  swiper.allowSlidePrev = allowSlidePrev;
  swiper.allowSlideNext = allowSlideNext;
  if (swiper.params.watchOverflow && snapGrid !== swiper.snapGrid) {
    swiper.checkOverflow();
  }
}

// node_modules/swiper/core/events/onClick.js
init_react_shim();
function onClick(e3) {
  const swiper = this;
  if (!swiper.enabled)
    return;
  if (!swiper.allowClick) {
    if (swiper.params.preventClicks)
      e3.preventDefault();
    if (swiper.params.preventClicksPropagation && swiper.animating) {
      e3.stopPropagation();
      e3.stopImmediatePropagation();
    }
  }
}

// node_modules/swiper/core/events/onScroll.js
init_react_shim();
function onScroll() {
  const swiper = this;
  const {
    wrapperEl,
    rtlTranslate,
    enabled
  } = swiper;
  if (!enabled)
    return;
  swiper.previousTranslate = swiper.translate;
  if (swiper.isHorizontal()) {
    swiper.translate = -wrapperEl.scrollLeft;
  } else {
    swiper.translate = -wrapperEl.scrollTop;
  }
  if (swiper.translate === -0)
    swiper.translate = 0;
  swiper.updateActiveIndex();
  swiper.updateSlidesClasses();
  let newProgress;
  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();
  if (translatesDiff === 0) {
    newProgress = 0;
  } else {
    newProgress = (swiper.translate - swiper.minTranslate()) / translatesDiff;
  }
  if (newProgress !== swiper.progress) {
    swiper.updateProgress(rtlTranslate ? -swiper.translate : swiper.translate);
  }
  swiper.emit("setTranslate", swiper.translate, false);
}

// node_modules/swiper/core/events/index.js
var dummyEventAttached = false;
function dummyEventListener() {
}
var events = (swiper, method) => {
  const document2 = getDocument();
  const {
    params,
    touchEvents,
    el,
    wrapperEl,
    device,
    support: support2
  } = swiper;
  const capture = !!params.nested;
  const domMethod = method === "on" ? "addEventListener" : "removeEventListener";
  const swiperMethod = method;
  if (!support2.touch) {
    el[domMethod](touchEvents.start, swiper.onTouchStart, false);
    document2[domMethod](touchEvents.move, swiper.onTouchMove, capture);
    document2[domMethod](touchEvents.end, swiper.onTouchEnd, false);
  } else {
    const passiveListener = touchEvents.start === "touchstart" && support2.passiveListener && params.passiveListeners ? {
      passive: true,
      capture: false
    } : false;
    el[domMethod](touchEvents.start, swiper.onTouchStart, passiveListener);
    el[domMethod](touchEvents.move, swiper.onTouchMove, support2.passiveListener ? {
      passive: false,
      capture
    } : capture);
    el[domMethod](touchEvents.end, swiper.onTouchEnd, passiveListener);
    if (touchEvents.cancel) {
      el[domMethod](touchEvents.cancel, swiper.onTouchEnd, passiveListener);
    }
  }
  if (params.preventClicks || params.preventClicksPropagation) {
    el[domMethod]("click", swiper.onClick, true);
  }
  if (params.cssMode) {
    wrapperEl[domMethod]("scroll", swiper.onScroll);
  }
  if (params.updateOnWindowResize) {
    swiper[swiperMethod](device.ios || device.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", onResize, true);
  } else {
    swiper[swiperMethod]("observerUpdate", onResize, true);
  }
};
function attachEvents() {
  const swiper = this;
  const document2 = getDocument();
  const {
    params,
    support: support2
  } = swiper;
  swiper.onTouchStart = onTouchStart.bind(swiper);
  swiper.onTouchMove = onTouchMove.bind(swiper);
  swiper.onTouchEnd = onTouchEnd.bind(swiper);
  if (params.cssMode) {
    swiper.onScroll = onScroll.bind(swiper);
  }
  swiper.onClick = onClick.bind(swiper);
  if (support2.touch && !dummyEventAttached) {
    document2.addEventListener("touchstart", dummyEventListener);
    dummyEventAttached = true;
  }
  events(swiper, "on");
}
function detachEvents() {
  const swiper = this;
  events(swiper, "off");
}
var events_default = {
  attachEvents,
  detachEvents
};

// node_modules/swiper/core/breakpoints/index.js
init_react_shim();

// node_modules/swiper/core/breakpoints/setBreakpoint.js
init_react_shim();
var isGridEnabled = (swiper, params) => {
  return swiper.grid && params.grid && params.grid.rows > 1;
};
function setBreakpoint() {
  const swiper = this;
  const {
    activeIndex,
    initialized,
    loopedSlides = 0,
    params,
    $el
  } = swiper;
  const breakpoints = params.breakpoints;
  if (!breakpoints || breakpoints && Object.keys(breakpoints).length === 0)
    return;
  const breakpoint = swiper.getBreakpoint(breakpoints, swiper.params.breakpointsBase, swiper.el);
  if (!breakpoint || swiper.currentBreakpoint === breakpoint)
    return;
  const breakpointOnlyParams = breakpoint in breakpoints ? breakpoints[breakpoint] : void 0;
  const breakpointParams = breakpointOnlyParams || swiper.originalParams;
  const wasMultiRow = isGridEnabled(swiper, params);
  const isMultiRow = isGridEnabled(swiper, breakpointParams);
  const wasEnabled = params.enabled;
  if (wasMultiRow && !isMultiRow) {
    $el.removeClass(`${params.containerModifierClass}grid ${params.containerModifierClass}grid-column`);
    swiper.emitContainerClasses();
  } else if (!wasMultiRow && isMultiRow) {
    $el.addClass(`${params.containerModifierClass}grid`);
    if (breakpointParams.grid.fill && breakpointParams.grid.fill === "column" || !breakpointParams.grid.fill && params.grid.fill === "column") {
      $el.addClass(`${params.containerModifierClass}grid-column`);
    }
    swiper.emitContainerClasses();
  }
  const directionChanged = breakpointParams.direction && breakpointParams.direction !== params.direction;
  const needsReLoop = params.loop && (breakpointParams.slidesPerView !== params.slidesPerView || directionChanged);
  if (directionChanged && initialized) {
    swiper.changeDirection();
  }
  extend2(swiper.params, breakpointParams);
  const isEnabled = swiper.params.enabled;
  Object.assign(swiper, {
    allowTouchMove: swiper.params.allowTouchMove,
    allowSlideNext: swiper.params.allowSlideNext,
    allowSlidePrev: swiper.params.allowSlidePrev
  });
  if (wasEnabled && !isEnabled) {
    swiper.disable();
  } else if (!wasEnabled && isEnabled) {
    swiper.enable();
  }
  swiper.currentBreakpoint = breakpoint;
  swiper.emit("_beforeBreakpoint", breakpointParams);
  if (needsReLoop && initialized) {
    swiper.loopDestroy();
    swiper.loopCreate();
    swiper.updateSlides();
    swiper.slideTo(activeIndex - loopedSlides + swiper.loopedSlides, 0, false);
  }
  swiper.emit("breakpoint", breakpointParams);
}

// node_modules/swiper/core/breakpoints/getBreakpoint.js
init_react_shim();
function getBreakpoint(breakpoints, base, containerEl) {
  if (base === void 0) {
    base = "window";
  }
  if (!breakpoints || base === "container" && !containerEl)
    return void 0;
  let breakpoint = false;
  const window2 = getWindow();
  const currentHeight = base === "window" ? window2.innerHeight : containerEl.clientHeight;
  const points = Object.keys(breakpoints).map((point) => {
    if (typeof point === "string" && point.indexOf("@") === 0) {
      const minRatio = parseFloat(point.substr(1));
      const value = currentHeight * minRatio;
      return {
        value,
        point
      };
    }
    return {
      value: point,
      point
    };
  });
  points.sort((a3, b3) => parseInt(a3.value, 10) - parseInt(b3.value, 10));
  for (let i3 = 0; i3 < points.length; i3 += 1) {
    const {
      point,
      value
    } = points[i3];
    if (base === "window") {
      if (window2.matchMedia(`(min-width: ${value}px)`).matches) {
        breakpoint = point;
      }
    } else if (value <= containerEl.clientWidth) {
      breakpoint = point;
    }
  }
  return breakpoint || "max";
}

// node_modules/swiper/core/breakpoints/index.js
var breakpoints_default = {
  setBreakpoint,
  getBreakpoint
};

// node_modules/swiper/core/classes/index.js
init_react_shim();

// node_modules/swiper/core/classes/addClasses.js
init_react_shim();
function prepareClasses(entries, prefix) {
  const resultClasses = [];
  entries.forEach((item) => {
    if (typeof item === "object") {
      Object.keys(item).forEach((classNames) => {
        if (item[classNames]) {
          resultClasses.push(prefix + classNames);
        }
      });
    } else if (typeof item === "string") {
      resultClasses.push(prefix + item);
    }
  });
  return resultClasses;
}
function addClasses() {
  const swiper = this;
  const {
    classNames,
    params,
    rtl,
    $el,
    device,
    support: support2
  } = swiper;
  const suffixes = prepareClasses(["initialized", params.direction, {
    "pointer-events": !support2.touch
  }, {
    "free-mode": swiper.params.freeMode && params.freeMode.enabled
  }, {
    "autoheight": params.autoHeight
  }, {
    "rtl": rtl
  }, {
    "grid": params.grid && params.grid.rows > 1
  }, {
    "grid-column": params.grid && params.grid.rows > 1 && params.grid.fill === "column"
  }, {
    "android": device.android
  }, {
    "ios": device.ios
  }, {
    "css-mode": params.cssMode
  }, {
    "centered": params.cssMode && params.centeredSlides
  }], params.containerModifierClass);
  classNames.push(...suffixes);
  $el.addClass([...classNames].join(" "));
  swiper.emitContainerClasses();
}

// node_modules/swiper/core/classes/removeClasses.js
init_react_shim();
function removeClasses() {
  const swiper = this;
  const {
    $el,
    classNames
  } = swiper;
  $el.removeClass(classNames.join(" "));
  swiper.emitContainerClasses();
}

// node_modules/swiper/core/classes/index.js
var classes_default = {
  addClasses,
  removeClasses
};

// node_modules/swiper/core/images/index.js
init_react_shim();

// node_modules/swiper/core/images/loadImage.js
init_react_shim();
function loadImage(imageEl, src, srcset, sizes, checkForComplete, callback) {
  const window2 = getWindow();
  let image;
  function onReady() {
    if (callback)
      callback();
  }
  const isPicture = dom_default(imageEl).parent("picture")[0];
  if (!isPicture && (!imageEl.complete || !checkForComplete)) {
    if (src) {
      image = new window2.Image();
      image.onload = onReady;
      image.onerror = onReady;
      if (sizes) {
        image.sizes = sizes;
      }
      if (srcset) {
        image.srcset = srcset;
      }
      if (src) {
        image.src = src;
      }
    } else {
      onReady();
    }
  } else {
    onReady();
  }
}

// node_modules/swiper/core/images/preloadImages.js
init_react_shim();
function preloadImages() {
  const swiper = this;
  swiper.imagesToLoad = swiper.$el.find("img");
  function onReady() {
    if (typeof swiper === "undefined" || swiper === null || !swiper || swiper.destroyed)
      return;
    if (swiper.imagesLoaded !== void 0)
      swiper.imagesLoaded += 1;
    if (swiper.imagesLoaded === swiper.imagesToLoad.length) {
      if (swiper.params.updateOnImagesReady)
        swiper.update();
      swiper.emit("imagesReady");
    }
  }
  for (let i3 = 0; i3 < swiper.imagesToLoad.length; i3 += 1) {
    const imageEl = swiper.imagesToLoad[i3];
    swiper.loadImage(imageEl, imageEl.currentSrc || imageEl.getAttribute("src"), imageEl.srcset || imageEl.getAttribute("srcset"), imageEl.sizes || imageEl.getAttribute("sizes"), true, onReady);
  }
}

// node_modules/swiper/core/images/index.js
var images_default = {
  loadImage,
  preloadImages
};

// node_modules/swiper/core/check-overflow/index.js
init_react_shim();
function checkOverflow() {
  const swiper = this;
  const {
    isLocked: wasLocked,
    params
  } = swiper;
  const {
    slidesOffsetBefore
  } = params;
  if (slidesOffsetBefore) {
    const lastSlideIndex = swiper.slides.length - 1;
    const lastSlideRightEdge = swiper.slidesGrid[lastSlideIndex] + swiper.slidesSizesGrid[lastSlideIndex] + slidesOffsetBefore * 2;
    swiper.isLocked = swiper.size > lastSlideRightEdge;
  } else {
    swiper.isLocked = swiper.snapGrid.length === 1;
  }
  if (params.allowSlideNext === true) {
    swiper.allowSlideNext = !swiper.isLocked;
  }
  if (params.allowSlidePrev === true) {
    swiper.allowSlidePrev = !swiper.isLocked;
  }
  if (wasLocked && wasLocked !== swiper.isLocked) {
    swiper.isEnd = false;
  }
  if (wasLocked !== swiper.isLocked) {
    swiper.emit(swiper.isLocked ? "lock" : "unlock");
  }
}
var check_overflow_default = {
  checkOverflow
};

// node_modules/swiper/core/defaults.js
init_react_shim();
var defaults_default = {
  init: true,
  direction: "horizontal",
  touchEventsTarget: "wrapper",
  initialSlide: 0,
  speed: 300,
  cssMode: false,
  updateOnWindowResize: true,
  resizeObserver: true,
  nested: false,
  createElements: false,
  enabled: true,
  focusableElements: "input, select, option, textarea, button, video, label",
  width: null,
  height: null,
  preventInteractionOnTransition: false,
  userAgent: null,
  url: null,
  edgeSwipeDetection: false,
  edgeSwipeThreshold: 20,
  autoHeight: false,
  setWrapperSize: false,
  virtualTranslate: false,
  effect: "slide",
  breakpoints: void 0,
  breakpointsBase: "window",
  spaceBetween: 0,
  slidesPerView: 1,
  slidesPerGroup: 1,
  slidesPerGroupSkip: 0,
  slidesPerGroupAuto: false,
  centeredSlides: false,
  centeredSlidesBounds: false,
  slidesOffsetBefore: 0,
  slidesOffsetAfter: 0,
  normalizeSlideIndex: true,
  centerInsufficientSlides: false,
  watchOverflow: true,
  roundLengths: false,
  touchRatio: 1,
  touchAngle: 45,
  simulateTouch: true,
  shortSwipes: true,
  longSwipes: true,
  longSwipesRatio: 0.5,
  longSwipesMs: 300,
  followFinger: true,
  allowTouchMove: true,
  threshold: 0,
  touchMoveStopPropagation: false,
  touchStartPreventDefault: true,
  touchStartForcePreventDefault: false,
  touchReleaseOnEdges: false,
  uniqueNavElements: true,
  resistance: true,
  resistanceRatio: 0.85,
  watchSlidesProgress: false,
  grabCursor: false,
  preventClicks: true,
  preventClicksPropagation: true,
  slideToClickedSlide: false,
  preloadImages: true,
  updateOnImagesReady: true,
  loop: false,
  loopAdditionalSlides: 0,
  loopedSlides: null,
  loopFillGroupWithBlank: false,
  loopPreventsSlide: true,
  rewind: false,
  allowSlidePrev: true,
  allowSlideNext: true,
  swipeHandler: null,
  noSwiping: true,
  noSwipingClass: "swiper-no-swiping",
  noSwipingSelector: null,
  passiveListeners: true,
  maxBackfaceHiddenSlides: 10,
  containerModifierClass: "swiper-",
  slideClass: "swiper-slide",
  slideBlankClass: "swiper-slide-invisible-blank",
  slideActiveClass: "swiper-slide-active",
  slideDuplicateActiveClass: "swiper-slide-duplicate-active",
  slideVisibleClass: "swiper-slide-visible",
  slideDuplicateClass: "swiper-slide-duplicate",
  slideNextClass: "swiper-slide-next",
  slideDuplicateNextClass: "swiper-slide-duplicate-next",
  slidePrevClass: "swiper-slide-prev",
  slideDuplicatePrevClass: "swiper-slide-duplicate-prev",
  wrapperClass: "swiper-wrapper",
  runCallbacksOnInit: true,
  _emitClasses: false
};

// node_modules/swiper/core/moduleExtendParams.js
init_react_shim();
function moduleExtendParams(params, allModulesParams) {
  return function extendParams(obj) {
    if (obj === void 0) {
      obj = {};
    }
    const moduleParamName = Object.keys(obj)[0];
    const moduleParams = obj[moduleParamName];
    if (typeof moduleParams !== "object" || moduleParams === null) {
      extend2(allModulesParams, obj);
      return;
    }
    if (["navigation", "pagination", "scrollbar"].indexOf(moduleParamName) >= 0 && params[moduleParamName] === true) {
      params[moduleParamName] = {
        auto: true
      };
    }
    if (!(moduleParamName in params && "enabled" in moduleParams)) {
      extend2(allModulesParams, obj);
      return;
    }
    if (params[moduleParamName] === true) {
      params[moduleParamName] = {
        enabled: true
      };
    }
    if (typeof params[moduleParamName] === "object" && !("enabled" in params[moduleParamName])) {
      params[moduleParamName].enabled = true;
    }
    if (!params[moduleParamName])
      params[moduleParamName] = {
        enabled: false
      };
    extend2(allModulesParams, obj);
  };
}

// node_modules/swiper/core/core.js
var prototypes = {
  eventsEmitter: events_emitter_default,
  update: update_default,
  translate: translate_default,
  transition: transition_default,
  slide: slide_default,
  loop: loop_default,
  grabCursor: grab_cursor_default,
  events: events_default,
  breakpoints: breakpoints_default,
  checkOverflow: check_overflow_default,
  classes: classes_default,
  images: images_default
};
var extendedDefaults = {};
var Swiper = class {
  constructor() {
    let el;
    let params;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (args.length === 1 && args[0].constructor && Object.prototype.toString.call(args[0]).slice(8, -1) === "Object") {
      params = args[0];
    } else {
      [el, params] = args;
    }
    if (!params)
      params = {};
    params = extend2({}, params);
    if (el && !params.el)
      params.el = el;
    if (params.el && dom_default(params.el).length > 1) {
      const swipers = [];
      dom_default(params.el).each((containerEl) => {
        const newParams = extend2({}, params, {
          el: containerEl
        });
        swipers.push(new Swiper(newParams));
      });
      return swipers;
    }
    const swiper = this;
    swiper.__swiper__ = true;
    swiper.support = getSupport();
    swiper.device = getDevice({
      userAgent: params.userAgent
    });
    swiper.browser = getBrowser();
    swiper.eventsListeners = {};
    swiper.eventsAnyListeners = [];
    swiper.modules = [...swiper.__modules__];
    if (params.modules && Array.isArray(params.modules)) {
      swiper.modules.push(...params.modules);
    }
    const allModulesParams = {};
    swiper.modules.forEach((mod) => {
      mod({
        swiper,
        extendParams: moduleExtendParams(params, allModulesParams),
        on: swiper.on.bind(swiper),
        once: swiper.once.bind(swiper),
        off: swiper.off.bind(swiper),
        emit: swiper.emit.bind(swiper)
      });
    });
    const swiperParams = extend2({}, defaults_default, allModulesParams);
    swiper.params = extend2({}, swiperParams, extendedDefaults, params);
    swiper.originalParams = extend2({}, swiper.params);
    swiper.passedParams = extend2({}, params);
    if (swiper.params && swiper.params.on) {
      Object.keys(swiper.params.on).forEach((eventName) => {
        swiper.on(eventName, swiper.params.on[eventName]);
      });
    }
    if (swiper.params && swiper.params.onAny) {
      swiper.onAny(swiper.params.onAny);
    }
    swiper.$ = dom_default;
    Object.assign(swiper, {
      enabled: swiper.params.enabled,
      el,
      classNames: [],
      slides: dom_default(),
      slidesGrid: [],
      snapGrid: [],
      slidesSizesGrid: [],
      isHorizontal() {
        return swiper.params.direction === "horizontal";
      },
      isVertical() {
        return swiper.params.direction === "vertical";
      },
      activeIndex: 0,
      realIndex: 0,
      isBeginning: true,
      isEnd: false,
      translate: 0,
      previousTranslate: 0,
      progress: 0,
      velocity: 0,
      animating: false,
      allowSlideNext: swiper.params.allowSlideNext,
      allowSlidePrev: swiper.params.allowSlidePrev,
      touchEvents: function touchEvents() {
        const touch = ["touchstart", "touchmove", "touchend", "touchcancel"];
        const desktop = ["pointerdown", "pointermove", "pointerup"];
        swiper.touchEventsTouch = {
          start: touch[0],
          move: touch[1],
          end: touch[2],
          cancel: touch[3]
        };
        swiper.touchEventsDesktop = {
          start: desktop[0],
          move: desktop[1],
          end: desktop[2]
        };
        return swiper.support.touch || !swiper.params.simulateTouch ? swiper.touchEventsTouch : swiper.touchEventsDesktop;
      }(),
      touchEventsData: {
        isTouched: void 0,
        isMoved: void 0,
        allowTouchCallbacks: void 0,
        touchStartTime: void 0,
        isScrolling: void 0,
        currentTranslate: void 0,
        startTranslate: void 0,
        allowThresholdMove: void 0,
        focusableElements: swiper.params.focusableElements,
        lastClickTime: now(),
        clickTimeout: void 0,
        velocities: [],
        allowMomentumBounce: void 0,
        isTouchEvent: void 0,
        startMoving: void 0
      },
      allowClick: true,
      allowTouchMove: swiper.params.allowTouchMove,
      touches: {
        startX: 0,
        startY: 0,
        currentX: 0,
        currentY: 0,
        diff: 0
      },
      imagesToLoad: [],
      imagesLoaded: 0
    });
    swiper.emit("_swiper");
    if (swiper.params.init) {
      swiper.init();
    }
    return swiper;
  }
  enable() {
    const swiper = this;
    if (swiper.enabled)
      return;
    swiper.enabled = true;
    if (swiper.params.grabCursor) {
      swiper.setGrabCursor();
    }
    swiper.emit("enable");
  }
  disable() {
    const swiper = this;
    if (!swiper.enabled)
      return;
    swiper.enabled = false;
    if (swiper.params.grabCursor) {
      swiper.unsetGrabCursor();
    }
    swiper.emit("disable");
  }
  setProgress(progress, speed) {
    const swiper = this;
    progress = Math.min(Math.max(progress, 0), 1);
    const min = swiper.minTranslate();
    const max = swiper.maxTranslate();
    const current = (max - min) * progress + min;
    swiper.translateTo(current, typeof speed === "undefined" ? 0 : speed);
    swiper.updateActiveIndex();
    swiper.updateSlidesClasses();
  }
  emitContainerClasses() {
    const swiper = this;
    if (!swiper.params._emitClasses || !swiper.el)
      return;
    const cls = swiper.el.className.split(" ").filter((className) => {
      return className.indexOf("swiper") === 0 || className.indexOf(swiper.params.containerModifierClass) === 0;
    });
    swiper.emit("_containerClasses", cls.join(" "));
  }
  getSlideClasses(slideEl) {
    const swiper = this;
    return slideEl.className.split(" ").filter((className) => {
      return className.indexOf("swiper-slide") === 0 || className.indexOf(swiper.params.slideClass) === 0;
    }).join(" ");
  }
  emitSlidesClasses() {
    const swiper = this;
    if (!swiper.params._emitClasses || !swiper.el)
      return;
    const updates = [];
    swiper.slides.each((slideEl) => {
      const classNames = swiper.getSlideClasses(slideEl);
      updates.push({
        slideEl,
        classNames
      });
      swiper.emit("_slideClass", slideEl, classNames);
    });
    swiper.emit("_slideClasses", updates);
  }
  slidesPerViewDynamic(view, exact) {
    if (view === void 0) {
      view = "current";
    }
    if (exact === void 0) {
      exact = false;
    }
    const swiper = this;
    const {
      params,
      slides,
      slidesGrid,
      slidesSizesGrid,
      size: swiperSize,
      activeIndex
    } = swiper;
    let spv = 1;
    if (params.centeredSlides) {
      let slideSize = slides[activeIndex].swiperSlideSize;
      let breakLoop;
      for (let i3 = activeIndex + 1; i3 < slides.length; i3 += 1) {
        if (slides[i3] && !breakLoop) {
          slideSize += slides[i3].swiperSlideSize;
          spv += 1;
          if (slideSize > swiperSize)
            breakLoop = true;
        }
      }
      for (let i3 = activeIndex - 1; i3 >= 0; i3 -= 1) {
        if (slides[i3] && !breakLoop) {
          slideSize += slides[i3].swiperSlideSize;
          spv += 1;
          if (slideSize > swiperSize)
            breakLoop = true;
        }
      }
    } else {
      if (view === "current") {
        for (let i3 = activeIndex + 1; i3 < slides.length; i3 += 1) {
          const slideInView = exact ? slidesGrid[i3] + slidesSizesGrid[i3] - slidesGrid[activeIndex] < swiperSize : slidesGrid[i3] - slidesGrid[activeIndex] < swiperSize;
          if (slideInView) {
            spv += 1;
          }
        }
      } else {
        for (let i3 = activeIndex - 1; i3 >= 0; i3 -= 1) {
          const slideInView = slidesGrid[activeIndex] - slidesGrid[i3] < swiperSize;
          if (slideInView) {
            spv += 1;
          }
        }
      }
    }
    return spv;
  }
  update() {
    const swiper = this;
    if (!swiper || swiper.destroyed)
      return;
    const {
      snapGrid,
      params
    } = swiper;
    if (params.breakpoints) {
      swiper.setBreakpoint();
    }
    swiper.updateSize();
    swiper.updateSlides();
    swiper.updateProgress();
    swiper.updateSlidesClasses();
    function setTranslate2() {
      const translateValue = swiper.rtlTranslate ? swiper.translate * -1 : swiper.translate;
      const newTranslate = Math.min(Math.max(translateValue, swiper.maxTranslate()), swiper.minTranslate());
      swiper.setTranslate(newTranslate);
      swiper.updateActiveIndex();
      swiper.updateSlidesClasses();
    }
    let translated;
    if (swiper.params.freeMode && swiper.params.freeMode.enabled) {
      setTranslate2();
      if (swiper.params.autoHeight) {
        swiper.updateAutoHeight();
      }
    } else {
      if ((swiper.params.slidesPerView === "auto" || swiper.params.slidesPerView > 1) && swiper.isEnd && !swiper.params.centeredSlides) {
        translated = swiper.slideTo(swiper.slides.length - 1, 0, false, true);
      } else {
        translated = swiper.slideTo(swiper.activeIndex, 0, false, true);
      }
      if (!translated) {
        setTranslate2();
      }
    }
    if (params.watchOverflow && snapGrid !== swiper.snapGrid) {
      swiper.checkOverflow();
    }
    swiper.emit("update");
  }
  changeDirection(newDirection, needUpdate) {
    if (needUpdate === void 0) {
      needUpdate = true;
    }
    const swiper = this;
    const currentDirection = swiper.params.direction;
    if (!newDirection) {
      newDirection = currentDirection === "horizontal" ? "vertical" : "horizontal";
    }
    if (newDirection === currentDirection || newDirection !== "horizontal" && newDirection !== "vertical") {
      return swiper;
    }
    swiper.$el.removeClass(`${swiper.params.containerModifierClass}${currentDirection}`).addClass(`${swiper.params.containerModifierClass}${newDirection}`);
    swiper.emitContainerClasses();
    swiper.params.direction = newDirection;
    swiper.slides.each((slideEl) => {
      if (newDirection === "vertical") {
        slideEl.style.width = "";
      } else {
        slideEl.style.height = "";
      }
    });
    swiper.emit("changeDirection");
    if (needUpdate)
      swiper.update();
    return swiper;
  }
  mount(el) {
    const swiper = this;
    if (swiper.mounted)
      return true;
    const $el = dom_default(el || swiper.params.el);
    el = $el[0];
    if (!el) {
      return false;
    }
    el.swiper = swiper;
    const getWrapperSelector = () => {
      return `.${(swiper.params.wrapperClass || "").trim().split(" ").join(".")}`;
    };
    const getWrapper = () => {
      if (el && el.shadowRoot && el.shadowRoot.querySelector) {
        const res = dom_default(el.shadowRoot.querySelector(getWrapperSelector()));
        res.children = (options) => $el.children(options);
        return res;
      }
      return $el.children(getWrapperSelector());
    };
    let $wrapperEl = getWrapper();
    if ($wrapperEl.length === 0 && swiper.params.createElements) {
      const document2 = getDocument();
      const wrapper = document2.createElement("div");
      $wrapperEl = dom_default(wrapper);
      wrapper.className = swiper.params.wrapperClass;
      $el.append(wrapper);
      $el.children(`.${swiper.params.slideClass}`).each((slideEl) => {
        $wrapperEl.append(slideEl);
      });
    }
    Object.assign(swiper, {
      $el,
      el,
      $wrapperEl,
      wrapperEl: $wrapperEl[0],
      mounted: true,
      rtl: el.dir.toLowerCase() === "rtl" || $el.css("direction") === "rtl",
      rtlTranslate: swiper.params.direction === "horizontal" && (el.dir.toLowerCase() === "rtl" || $el.css("direction") === "rtl"),
      wrongRTL: $wrapperEl.css("display") === "-webkit-box"
    });
    return true;
  }
  init(el) {
    const swiper = this;
    if (swiper.initialized)
      return swiper;
    const mounted = swiper.mount(el);
    if (mounted === false)
      return swiper;
    swiper.emit("beforeInit");
    if (swiper.params.breakpoints) {
      swiper.setBreakpoint();
    }
    swiper.addClasses();
    if (swiper.params.loop) {
      swiper.loopCreate();
    }
    swiper.updateSize();
    swiper.updateSlides();
    if (swiper.params.watchOverflow) {
      swiper.checkOverflow();
    }
    if (swiper.params.grabCursor && swiper.enabled) {
      swiper.setGrabCursor();
    }
    if (swiper.params.preloadImages) {
      swiper.preloadImages();
    }
    if (swiper.params.loop) {
      swiper.slideTo(swiper.params.initialSlide + swiper.loopedSlides, 0, swiper.params.runCallbacksOnInit, false, true);
    } else {
      swiper.slideTo(swiper.params.initialSlide, 0, swiper.params.runCallbacksOnInit, false, true);
    }
    swiper.attachEvents();
    swiper.initialized = true;
    swiper.emit("init");
    swiper.emit("afterInit");
    return swiper;
  }
  destroy(deleteInstance, cleanStyles) {
    if (deleteInstance === void 0) {
      deleteInstance = true;
    }
    if (cleanStyles === void 0) {
      cleanStyles = true;
    }
    const swiper = this;
    const {
      params,
      $el,
      $wrapperEl,
      slides
    } = swiper;
    if (typeof swiper.params === "undefined" || swiper.destroyed) {
      return null;
    }
    swiper.emit("beforeDestroy");
    swiper.initialized = false;
    swiper.detachEvents();
    if (params.loop) {
      swiper.loopDestroy();
    }
    if (cleanStyles) {
      swiper.removeClasses();
      $el.removeAttr("style");
      $wrapperEl.removeAttr("style");
      if (slides && slides.length) {
        slides.removeClass([params.slideVisibleClass, params.slideActiveClass, params.slideNextClass, params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index");
      }
    }
    swiper.emit("destroy");
    Object.keys(swiper.eventsListeners).forEach((eventName) => {
      swiper.off(eventName);
    });
    if (deleteInstance !== false) {
      swiper.$el[0].swiper = null;
      deleteProps(swiper);
    }
    swiper.destroyed = true;
    return null;
  }
  static extendDefaults(newDefaults) {
    extend2(extendedDefaults, newDefaults);
  }
  static get extendedDefaults() {
    return extendedDefaults;
  }
  static get defaults() {
    return defaults_default;
  }
  static installModule(mod) {
    if (!Swiper.prototype.__modules__)
      Swiper.prototype.__modules__ = [];
    const modules = Swiper.prototype.__modules__;
    if (typeof mod === "function" && modules.indexOf(mod) < 0) {
      modules.push(mod);
    }
  }
  static use(module) {
    if (Array.isArray(module)) {
      module.forEach((m3) => Swiper.installModule(m3));
      return Swiper;
    }
    Swiper.installModule(module);
    return Swiper;
  }
};
Object.keys(prototypes).forEach((prototypeGroup) => {
  Object.keys(prototypes[prototypeGroup]).forEach((protoMethod) => {
    Swiper.prototype[protoMethod] = prototypes[prototypeGroup][protoMethod];
  });
});
Swiper.use([Resize, Observer]);
var core_default = Swiper;

// node_modules/swiper/modules/virtual/virtual.js
init_react_shim();

// node_modules/swiper/modules/keyboard/keyboard.js
init_react_shim();

// node_modules/swiper/modules/mousewheel/mousewheel.js
init_react_shim();

// node_modules/swiper/modules/navigation/navigation.js
init_react_shim();

// node_modules/swiper/shared/create-element-if-not-defined.js
init_react_shim();
function createElementIfNotDefined(swiper, originalParams, params, checkProps) {
  const document2 = getDocument();
  if (swiper.params.createElements) {
    Object.keys(checkProps).forEach((key) => {
      if (!params[key] && params.auto === true) {
        let element = swiper.$el.children(`.${checkProps[key]}`)[0];
        if (!element) {
          element = document2.createElement("div");
          element.className = checkProps[key];
          swiper.$el.append(element);
        }
        params[key] = element;
        originalParams[key] = element;
      }
    });
  }
  return params;
}

// node_modules/swiper/modules/navigation/navigation.js
function Navigation(_ref) {
  let {
    swiper,
    extendParams,
    on: on2,
    emit
  } = _ref;
  extendParams({
    navigation: {
      nextEl: null,
      prevEl: null,
      hideOnClick: false,
      disabledClass: "swiper-button-disabled",
      hiddenClass: "swiper-button-hidden",
      lockClass: "swiper-button-lock"
    }
  });
  swiper.navigation = {
    nextEl: null,
    $nextEl: null,
    prevEl: null,
    $prevEl: null
  };
  function getEl(el) {
    let $el;
    if (el) {
      $el = dom_default(el);
      if (swiper.params.uniqueNavElements && typeof el === "string" && $el.length > 1 && swiper.$el.find(el).length === 1) {
        $el = swiper.$el.find(el);
      }
    }
    return $el;
  }
  function toggleEl($el, disabled) {
    const params = swiper.params.navigation;
    if ($el && $el.length > 0) {
      $el[disabled ? "addClass" : "removeClass"](params.disabledClass);
      if ($el[0] && $el[0].tagName === "BUTTON")
        $el[0].disabled = disabled;
      if (swiper.params.watchOverflow && swiper.enabled) {
        $el[swiper.isLocked ? "addClass" : "removeClass"](params.lockClass);
      }
    }
  }
  function update() {
    if (swiper.params.loop)
      return;
    const {
      $nextEl,
      $prevEl
    } = swiper.navigation;
    toggleEl($prevEl, swiper.isBeginning && !swiper.params.rewind);
    toggleEl($nextEl, swiper.isEnd && !swiper.params.rewind);
  }
  function onPrevClick(e3) {
    e3.preventDefault();
    if (swiper.isBeginning && !swiper.params.loop && !swiper.params.rewind)
      return;
    swiper.slidePrev();
  }
  function onNextClick(e3) {
    e3.preventDefault();
    if (swiper.isEnd && !swiper.params.loop && !swiper.params.rewind)
      return;
    swiper.slideNext();
  }
  function init() {
    const params = swiper.params.navigation;
    swiper.params.navigation = createElementIfNotDefined(swiper, swiper.originalParams.navigation, swiper.params.navigation, {
      nextEl: "swiper-button-next",
      prevEl: "swiper-button-prev"
    });
    if (!(params.nextEl || params.prevEl))
      return;
    const $nextEl = getEl(params.nextEl);
    const $prevEl = getEl(params.prevEl);
    if ($nextEl && $nextEl.length > 0) {
      $nextEl.on("click", onNextClick);
    }
    if ($prevEl && $prevEl.length > 0) {
      $prevEl.on("click", onPrevClick);
    }
    Object.assign(swiper.navigation, {
      $nextEl,
      nextEl: $nextEl && $nextEl[0],
      $prevEl,
      prevEl: $prevEl && $prevEl[0]
    });
    if (!swiper.enabled) {
      if ($nextEl)
        $nextEl.addClass(params.lockClass);
      if ($prevEl)
        $prevEl.addClass(params.lockClass);
    }
  }
  function destroy() {
    const {
      $nextEl,
      $prevEl
    } = swiper.navigation;
    if ($nextEl && $nextEl.length) {
      $nextEl.off("click", onNextClick);
      $nextEl.removeClass(swiper.params.navigation.disabledClass);
    }
    if ($prevEl && $prevEl.length) {
      $prevEl.off("click", onPrevClick);
      $prevEl.removeClass(swiper.params.navigation.disabledClass);
    }
  }
  on2("init", () => {
    init();
    update();
  });
  on2("toEdge fromEdge lock unlock", () => {
    update();
  });
  on2("destroy", () => {
    destroy();
  });
  on2("enable disable", () => {
    const {
      $nextEl,
      $prevEl
    } = swiper.navigation;
    if ($nextEl) {
      $nextEl[swiper.enabled ? "removeClass" : "addClass"](swiper.params.navigation.lockClass);
    }
    if ($prevEl) {
      $prevEl[swiper.enabled ? "removeClass" : "addClass"](swiper.params.navigation.lockClass);
    }
  });
  on2("click", (_s, e3) => {
    const {
      $nextEl,
      $prevEl
    } = swiper.navigation;
    const targetEl = e3.target;
    if (swiper.params.navigation.hideOnClick && !dom_default(targetEl).is($prevEl) && !dom_default(targetEl).is($nextEl)) {
      if (swiper.pagination && swiper.params.pagination && swiper.params.pagination.clickable && (swiper.pagination.el === targetEl || swiper.pagination.el.contains(targetEl)))
        return;
      let isHidden;
      if ($nextEl) {
        isHidden = $nextEl.hasClass(swiper.params.navigation.hiddenClass);
      } else if ($prevEl) {
        isHidden = $prevEl.hasClass(swiper.params.navigation.hiddenClass);
      }
      if (isHidden === true) {
        emit("navigationShow");
      } else {
        emit("navigationHide");
      }
      if ($nextEl) {
        $nextEl.toggleClass(swiper.params.navigation.hiddenClass);
      }
      if ($prevEl) {
        $prevEl.toggleClass(swiper.params.navigation.hiddenClass);
      }
    }
  });
  Object.assign(swiper.navigation, {
    update,
    init,
    destroy
  });
}

// node_modules/swiper/modules/pagination/pagination.js
init_react_shim();

// node_modules/swiper/shared/classes-to-selector.js
init_react_shim();

// node_modules/swiper/modules/scrollbar/scrollbar.js
init_react_shim();

// node_modules/swiper/modules/parallax/parallax.js
init_react_shim();

// node_modules/swiper/modules/zoom/zoom.js
init_react_shim();

// node_modules/swiper/modules/lazy/lazy.js
init_react_shim();

// node_modules/swiper/modules/controller/controller.js
init_react_shim();

// node_modules/swiper/modules/a11y/a11y.js
init_react_shim();

// node_modules/swiper/modules/history/history.js
init_react_shim();

// node_modules/swiper/modules/hash-navigation/hash-navigation.js
init_react_shim();

// node_modules/swiper/modules/autoplay/autoplay.js
init_react_shim();

// node_modules/swiper/modules/thumbs/thumbs.js
init_react_shim();
function Thumb(_ref) {
  let {
    swiper,
    extendParams,
    on: on2
  } = _ref;
  extendParams({
    thumbs: {
      swiper: null,
      multipleActiveThumbs: true,
      autoScrollOffset: 0,
      slideThumbActiveClass: "swiper-slide-thumb-active",
      thumbsContainerClass: "swiper-thumbs"
    }
  });
  let initialized = false;
  let swiperCreated = false;
  swiper.thumbs = {
    swiper: null
  };
  function onThumbClick() {
    const thumbsSwiper = swiper.thumbs.swiper;
    if (!thumbsSwiper)
      return;
    const clickedIndex = thumbsSwiper.clickedIndex;
    const clickedSlide = thumbsSwiper.clickedSlide;
    if (clickedSlide && dom_default(clickedSlide).hasClass(swiper.params.thumbs.slideThumbActiveClass))
      return;
    if (typeof clickedIndex === "undefined" || clickedIndex === null)
      return;
    let slideToIndex;
    if (thumbsSwiper.params.loop) {
      slideToIndex = parseInt(dom_default(thumbsSwiper.clickedSlide).attr("data-swiper-slide-index"), 10);
    } else {
      slideToIndex = clickedIndex;
    }
    if (swiper.params.loop) {
      let currentIndex = swiper.activeIndex;
      if (swiper.slides.eq(currentIndex).hasClass(swiper.params.slideDuplicateClass)) {
        swiper.loopFix();
        swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;
        currentIndex = swiper.activeIndex;
      }
      const prevIndex = swiper.slides.eq(currentIndex).prevAll(`[data-swiper-slide-index="${slideToIndex}"]`).eq(0).index();
      const nextIndex = swiper.slides.eq(currentIndex).nextAll(`[data-swiper-slide-index="${slideToIndex}"]`).eq(0).index();
      if (typeof prevIndex === "undefined")
        slideToIndex = nextIndex;
      else if (typeof nextIndex === "undefined")
        slideToIndex = prevIndex;
      else if (nextIndex - currentIndex < currentIndex - prevIndex)
        slideToIndex = nextIndex;
      else
        slideToIndex = prevIndex;
    }
    swiper.slideTo(slideToIndex);
  }
  function init() {
    const {
      thumbs: thumbsParams
    } = swiper.params;
    if (initialized)
      return false;
    initialized = true;
    const SwiperClass = swiper.constructor;
    if (thumbsParams.swiper instanceof SwiperClass) {
      swiper.thumbs.swiper = thumbsParams.swiper;
      Object.assign(swiper.thumbs.swiper.originalParams, {
        watchSlidesProgress: true,
        slideToClickedSlide: false
      });
      Object.assign(swiper.thumbs.swiper.params, {
        watchSlidesProgress: true,
        slideToClickedSlide: false
      });
    } else if (isObject2(thumbsParams.swiper)) {
      const thumbsSwiperParams = Object.assign({}, thumbsParams.swiper);
      Object.assign(thumbsSwiperParams, {
        watchSlidesProgress: true,
        slideToClickedSlide: false
      });
      swiper.thumbs.swiper = new SwiperClass(thumbsSwiperParams);
      swiperCreated = true;
    }
    swiper.thumbs.swiper.$el.addClass(swiper.params.thumbs.thumbsContainerClass);
    swiper.thumbs.swiper.on("tap", onThumbClick);
    return true;
  }
  function update(initial) {
    const thumbsSwiper = swiper.thumbs.swiper;
    if (!thumbsSwiper)
      return;
    const slidesPerView = thumbsSwiper.params.slidesPerView === "auto" ? thumbsSwiper.slidesPerViewDynamic() : thumbsSwiper.params.slidesPerView;
    const autoScrollOffset = swiper.params.thumbs.autoScrollOffset;
    const useOffset = autoScrollOffset && !thumbsSwiper.params.loop;
    if (swiper.realIndex !== thumbsSwiper.realIndex || useOffset) {
      let currentThumbsIndex = thumbsSwiper.activeIndex;
      let newThumbsIndex;
      let direction;
      if (thumbsSwiper.params.loop) {
        if (thumbsSwiper.slides.eq(currentThumbsIndex).hasClass(thumbsSwiper.params.slideDuplicateClass)) {
          thumbsSwiper.loopFix();
          thumbsSwiper._clientLeft = thumbsSwiper.$wrapperEl[0].clientLeft;
          currentThumbsIndex = thumbsSwiper.activeIndex;
        }
        const prevThumbsIndex = thumbsSwiper.slides.eq(currentThumbsIndex).prevAll(`[data-swiper-slide-index="${swiper.realIndex}"]`).eq(0).index();
        const nextThumbsIndex = thumbsSwiper.slides.eq(currentThumbsIndex).nextAll(`[data-swiper-slide-index="${swiper.realIndex}"]`).eq(0).index();
        if (typeof prevThumbsIndex === "undefined") {
          newThumbsIndex = nextThumbsIndex;
        } else if (typeof nextThumbsIndex === "undefined") {
          newThumbsIndex = prevThumbsIndex;
        } else if (nextThumbsIndex - currentThumbsIndex === currentThumbsIndex - prevThumbsIndex) {
          newThumbsIndex = thumbsSwiper.params.slidesPerGroup > 1 ? nextThumbsIndex : currentThumbsIndex;
        } else if (nextThumbsIndex - currentThumbsIndex < currentThumbsIndex - prevThumbsIndex) {
          newThumbsIndex = nextThumbsIndex;
        } else {
          newThumbsIndex = prevThumbsIndex;
        }
        direction = swiper.activeIndex > swiper.previousIndex ? "next" : "prev";
      } else {
        newThumbsIndex = swiper.realIndex;
        direction = newThumbsIndex > swiper.previousIndex ? "next" : "prev";
      }
      if (useOffset) {
        newThumbsIndex += direction === "next" ? autoScrollOffset : -1 * autoScrollOffset;
      }
      if (thumbsSwiper.visibleSlidesIndexes && thumbsSwiper.visibleSlidesIndexes.indexOf(newThumbsIndex) < 0) {
        if (thumbsSwiper.params.centeredSlides) {
          if (newThumbsIndex > currentThumbsIndex) {
            newThumbsIndex = newThumbsIndex - Math.floor(slidesPerView / 2) + 1;
          } else {
            newThumbsIndex = newThumbsIndex + Math.floor(slidesPerView / 2) - 1;
          }
        } else if (newThumbsIndex > currentThumbsIndex && thumbsSwiper.params.slidesPerGroup === 1) {
        }
        thumbsSwiper.slideTo(newThumbsIndex, initial ? 0 : void 0);
      }
    }
    let thumbsToActivate = 1;
    const thumbActiveClass = swiper.params.thumbs.slideThumbActiveClass;
    if (swiper.params.slidesPerView > 1 && !swiper.params.centeredSlides) {
      thumbsToActivate = swiper.params.slidesPerView;
    }
    if (!swiper.params.thumbs.multipleActiveThumbs) {
      thumbsToActivate = 1;
    }
    thumbsToActivate = Math.floor(thumbsToActivate);
    thumbsSwiper.slides.removeClass(thumbActiveClass);
    if (thumbsSwiper.params.loop || thumbsSwiper.params.virtual && thumbsSwiper.params.virtual.enabled) {
      for (let i3 = 0; i3 < thumbsToActivate; i3 += 1) {
        thumbsSwiper.$wrapperEl.children(`[data-swiper-slide-index="${swiper.realIndex + i3}"]`).addClass(thumbActiveClass);
      }
    } else {
      for (let i3 = 0; i3 < thumbsToActivate; i3 += 1) {
        thumbsSwiper.slides.eq(swiper.realIndex + i3).addClass(thumbActiveClass);
      }
    }
  }
  on2("beforeInit", () => {
    const {
      thumbs
    } = swiper.params;
    if (!thumbs || !thumbs.swiper)
      return;
    init();
    update(true);
  });
  on2("slideChange update resize observerUpdate", () => {
    if (!swiper.thumbs.swiper)
      return;
    update();
  });
  on2("setTransition", (_s, duration) => {
    const thumbsSwiper = swiper.thumbs.swiper;
    if (!thumbsSwiper)
      return;
    thumbsSwiper.setTransition(duration);
  });
  on2("beforeDestroy", () => {
    const thumbsSwiper = swiper.thumbs.swiper;
    if (!thumbsSwiper)
      return;
    if (swiperCreated && thumbsSwiper) {
      thumbsSwiper.destroy();
    }
  });
  Object.assign(swiper.thumbs, {
    init,
    update
  });
}

// node_modules/swiper/modules/free-mode/free-mode.js
init_react_shim();
function freeMode(_ref) {
  let {
    swiper,
    extendParams,
    emit,
    once
  } = _ref;
  extendParams({
    freeMode: {
      enabled: false,
      momentum: true,
      momentumRatio: 1,
      momentumBounce: true,
      momentumBounceRatio: 1,
      momentumVelocityRatio: 1,
      sticky: false,
      minimumVelocity: 0.02
    }
  });
  function onTouchStart2() {
    const translate = swiper.getTranslate();
    swiper.setTranslate(translate);
    swiper.setTransition(0);
    swiper.touchEventsData.velocities.length = 0;
    swiper.freeMode.onTouchEnd({
      currentPos: swiper.rtl ? swiper.translate : -swiper.translate
    });
  }
  function onTouchMove2() {
    const {
      touchEventsData: data,
      touches
    } = swiper;
    if (data.velocities.length === 0) {
      data.velocities.push({
        position: touches[swiper.isHorizontal() ? "startX" : "startY"],
        time: data.touchStartTime
      });
    }
    data.velocities.push({
      position: touches[swiper.isHorizontal() ? "currentX" : "currentY"],
      time: now()
    });
  }
  function onTouchEnd2(_ref2) {
    let {
      currentPos
    } = _ref2;
    const {
      params,
      $wrapperEl,
      rtlTranslate: rtl,
      snapGrid,
      touchEventsData: data
    } = swiper;
    const touchEndTime = now();
    const timeDiff = touchEndTime - data.touchStartTime;
    if (currentPos < -swiper.minTranslate()) {
      swiper.slideTo(swiper.activeIndex);
      return;
    }
    if (currentPos > -swiper.maxTranslate()) {
      if (swiper.slides.length < snapGrid.length) {
        swiper.slideTo(snapGrid.length - 1);
      } else {
        swiper.slideTo(swiper.slides.length - 1);
      }
      return;
    }
    if (params.freeMode.momentum) {
      if (data.velocities.length > 1) {
        const lastMoveEvent = data.velocities.pop();
        const velocityEvent = data.velocities.pop();
        const distance = lastMoveEvent.position - velocityEvent.position;
        const time = lastMoveEvent.time - velocityEvent.time;
        swiper.velocity = distance / time;
        swiper.velocity /= 2;
        if (Math.abs(swiper.velocity) < params.freeMode.minimumVelocity) {
          swiper.velocity = 0;
        }
        if (time > 150 || now() - lastMoveEvent.time > 300) {
          swiper.velocity = 0;
        }
      } else {
        swiper.velocity = 0;
      }
      swiper.velocity *= params.freeMode.momentumVelocityRatio;
      data.velocities.length = 0;
      let momentumDuration = 1e3 * params.freeMode.momentumRatio;
      const momentumDistance = swiper.velocity * momentumDuration;
      let newPosition = swiper.translate + momentumDistance;
      if (rtl)
        newPosition = -newPosition;
      let doBounce = false;
      let afterBouncePosition;
      const bounceAmount = Math.abs(swiper.velocity) * 20 * params.freeMode.momentumBounceRatio;
      let needsLoopFix;
      if (newPosition < swiper.maxTranslate()) {
        if (params.freeMode.momentumBounce) {
          if (newPosition + swiper.maxTranslate() < -bounceAmount) {
            newPosition = swiper.maxTranslate() - bounceAmount;
          }
          afterBouncePosition = swiper.maxTranslate();
          doBounce = true;
          data.allowMomentumBounce = true;
        } else {
          newPosition = swiper.maxTranslate();
        }
        if (params.loop && params.centeredSlides)
          needsLoopFix = true;
      } else if (newPosition > swiper.minTranslate()) {
        if (params.freeMode.momentumBounce) {
          if (newPosition - swiper.minTranslate() > bounceAmount) {
            newPosition = swiper.minTranslate() + bounceAmount;
          }
          afterBouncePosition = swiper.minTranslate();
          doBounce = true;
          data.allowMomentumBounce = true;
        } else {
          newPosition = swiper.minTranslate();
        }
        if (params.loop && params.centeredSlides)
          needsLoopFix = true;
      } else if (params.freeMode.sticky) {
        let nextSlide;
        for (let j3 = 0; j3 < snapGrid.length; j3 += 1) {
          if (snapGrid[j3] > -newPosition) {
            nextSlide = j3;
            break;
          }
        }
        if (Math.abs(snapGrid[nextSlide] - newPosition) < Math.abs(snapGrid[nextSlide - 1] - newPosition) || swiper.swipeDirection === "next") {
          newPosition = snapGrid[nextSlide];
        } else {
          newPosition = snapGrid[nextSlide - 1];
        }
        newPosition = -newPosition;
      }
      if (needsLoopFix) {
        once("transitionEnd", () => {
          swiper.loopFix();
        });
      }
      if (swiper.velocity !== 0) {
        if (rtl) {
          momentumDuration = Math.abs((-newPosition - swiper.translate) / swiper.velocity);
        } else {
          momentumDuration = Math.abs((newPosition - swiper.translate) / swiper.velocity);
        }
        if (params.freeMode.sticky) {
          const moveDistance = Math.abs((rtl ? -newPosition : newPosition) - swiper.translate);
          const currentSlideSize = swiper.slidesSizesGrid[swiper.activeIndex];
          if (moveDistance < currentSlideSize) {
            momentumDuration = params.speed;
          } else if (moveDistance < 2 * currentSlideSize) {
            momentumDuration = params.speed * 1.5;
          } else {
            momentumDuration = params.speed * 2.5;
          }
        }
      } else if (params.freeMode.sticky) {
        swiper.slideToClosest();
        return;
      }
      if (params.freeMode.momentumBounce && doBounce) {
        swiper.updateProgress(afterBouncePosition);
        swiper.setTransition(momentumDuration);
        swiper.setTranslate(newPosition);
        swiper.transitionStart(true, swiper.swipeDirection);
        swiper.animating = true;
        $wrapperEl.transitionEnd(() => {
          if (!swiper || swiper.destroyed || !data.allowMomentumBounce)
            return;
          emit("momentumBounce");
          swiper.setTransition(params.speed);
          setTimeout(() => {
            swiper.setTranslate(afterBouncePosition);
            $wrapperEl.transitionEnd(() => {
              if (!swiper || swiper.destroyed)
                return;
              swiper.transitionEnd();
            });
          }, 0);
        });
      } else if (swiper.velocity) {
        emit("_freeModeNoMomentumRelease");
        swiper.updateProgress(newPosition);
        swiper.setTransition(momentumDuration);
        swiper.setTranslate(newPosition);
        swiper.transitionStart(true, swiper.swipeDirection);
        if (!swiper.animating) {
          swiper.animating = true;
          $wrapperEl.transitionEnd(() => {
            if (!swiper || swiper.destroyed)
              return;
            swiper.transitionEnd();
          });
        }
      } else {
        swiper.updateProgress(newPosition);
      }
      swiper.updateActiveIndex();
      swiper.updateSlidesClasses();
    } else if (params.freeMode.sticky) {
      swiper.slideToClosest();
      return;
    } else if (params.freeMode) {
      emit("_freeModeNoMomentumRelease");
    }
    if (!params.freeMode.momentum || timeDiff >= params.longSwipesMs) {
      swiper.updateProgress();
      swiper.updateActiveIndex();
      swiper.updateSlidesClasses();
    }
  }
  Object.assign(swiper, {
    freeMode: {
      onTouchStart: onTouchStart2,
      onTouchMove: onTouchMove2,
      onTouchEnd: onTouchEnd2
    }
  });
}

// node_modules/swiper/modules/grid/grid.js
init_react_shim();

// node_modules/swiper/modules/manipulation/manipulation.js
init_react_shim();

// node_modules/swiper/modules/manipulation/methods/appendSlide.js
init_react_shim();

// node_modules/swiper/modules/manipulation/methods/prependSlide.js
init_react_shim();

// node_modules/swiper/modules/manipulation/methods/addSlide.js
init_react_shim();

// node_modules/swiper/modules/manipulation/methods/removeSlide.js
init_react_shim();

// node_modules/swiper/modules/manipulation/methods/removeAllSlides.js
init_react_shim();

// node_modules/swiper/modules/effect-fade/effect-fade.js
init_react_shim();

// node_modules/swiper/shared/effect-init.js
init_react_shim();
function effectInit(params) {
  const {
    effect,
    swiper,
    on: on2,
    setTranslate: setTranslate2,
    setTransition: setTransition2,
    overwriteParams,
    perspective
  } = params;
  on2("beforeInit", () => {
    if (swiper.params.effect !== effect)
      return;
    swiper.classNames.push(`${swiper.params.containerModifierClass}${effect}`);
    if (perspective && perspective()) {
      swiper.classNames.push(`${swiper.params.containerModifierClass}3d`);
    }
    const overwriteParamsResult = overwriteParams ? overwriteParams() : {};
    Object.assign(swiper.params, overwriteParamsResult);
    Object.assign(swiper.originalParams, overwriteParamsResult);
  });
  on2("setTranslate", () => {
    if (swiper.params.effect !== effect)
      return;
    setTranslate2();
  });
  on2("setTransition", (_s, duration) => {
    if (swiper.params.effect !== effect)
      return;
    setTransition2(duration);
  });
  let requireUpdateOnVirtual;
  on2("virtualUpdate", () => {
    if (!swiper.slides.length) {
      requireUpdateOnVirtual = true;
    }
    requestAnimationFrame(() => {
      if (requireUpdateOnVirtual && swiper.slides.length) {
        setTranslate2();
        requireUpdateOnVirtual = false;
      }
    });
  });
}

// node_modules/swiper/shared/effect-target.js
init_react_shim();
function effectTarget(effectParams, $slideEl) {
  if (effectParams.transformEl) {
    return $slideEl.find(effectParams.transformEl).css({
      "backface-visibility": "hidden",
      "-webkit-backface-visibility": "hidden"
    });
  }
  return $slideEl;
}

// node_modules/swiper/shared/effect-virtual-transition-end.js
init_react_shim();
function effectVirtualTransitionEnd(_ref) {
  let {
    swiper,
    duration,
    transformEl,
    allSlides
  } = _ref;
  const {
    slides,
    activeIndex,
    $wrapperEl
  } = swiper;
  if (swiper.params.virtualTranslate && duration !== 0) {
    let eventTriggered = false;
    let $transitionEndTarget;
    if (allSlides) {
      $transitionEndTarget = transformEl ? slides.find(transformEl) : slides;
    } else {
      $transitionEndTarget = transformEl ? slides.eq(activeIndex).find(transformEl) : slides.eq(activeIndex);
    }
    $transitionEndTarget.transitionEnd(() => {
      if (eventTriggered)
        return;
      if (!swiper || swiper.destroyed)
        return;
      eventTriggered = true;
      swiper.animating = false;
      const triggerEvents = ["webkitTransitionEnd", "transitionend"];
      for (let i3 = 0; i3 < triggerEvents.length; i3 += 1) {
        $wrapperEl.trigger(triggerEvents[i3]);
      }
    });
  }
}

// node_modules/swiper/modules/effect-fade/effect-fade.js
function EffectFade(_ref) {
  let {
    swiper,
    extendParams,
    on: on2
  } = _ref;
  extendParams({
    fadeEffect: {
      crossFade: false,
      transformEl: null
    }
  });
  const setTranslate2 = () => {
    const {
      slides
    } = swiper;
    const params = swiper.params.fadeEffect;
    for (let i3 = 0; i3 < slides.length; i3 += 1) {
      const $slideEl = swiper.slides.eq(i3);
      const offset2 = $slideEl[0].swiperSlideOffset;
      let tx = -offset2;
      if (!swiper.params.virtualTranslate)
        tx -= swiper.translate;
      let ty = 0;
      if (!swiper.isHorizontal()) {
        ty = tx;
        tx = 0;
      }
      const slideOpacity = swiper.params.fadeEffect.crossFade ? Math.max(1 - Math.abs($slideEl[0].progress), 0) : 1 + Math.min(Math.max($slideEl[0].progress, -1), 0);
      const $targetEl = effectTarget(params, $slideEl);
      $targetEl.css({
        opacity: slideOpacity
      }).transform(`translate3d(${tx}px, ${ty}px, 0px)`);
    }
  };
  const setTransition2 = (duration) => {
    const {
      transformEl
    } = swiper.params.fadeEffect;
    const $transitionElements = transformEl ? swiper.slides.find(transformEl) : swiper.slides;
    $transitionElements.transition(duration);
    effectVirtualTransitionEnd({
      swiper,
      duration,
      transformEl,
      allSlides: true
    });
  };
  effectInit({
    effect: "fade",
    swiper,
    on: on2,
    setTranslate: setTranslate2,
    setTransition: setTransition2,
    overwriteParams: () => ({
      slidesPerView: 1,
      slidesPerGroup: 1,
      watchSlidesProgress: true,
      spaceBetween: 0,
      virtualTranslate: !swiper.params.cssMode
    })
  });
}

// node_modules/swiper/modules/effect-cube/effect-cube.js
init_react_shim();

// node_modules/swiper/modules/effect-flip/effect-flip.js
init_react_shim();

// node_modules/swiper/shared/create-shadow.js
init_react_shim();

// node_modules/swiper/modules/effect-coverflow/effect-coverflow.js
init_react_shim();

// node_modules/swiper/modules/effect-creative/effect-creative.js
init_react_shim();

// node_modules/swiper/modules/effect-cards/effect-cards.js
init_react_shim();

// node_modules/swiper/react/swiper-react.js
init_react_shim();

// node_modules/swiper/react/swiper.js
init_react_shim();
var import_react8 = __toESM(require_compat(), 1);

// node_modules/swiper/react/get-params.js
init_react_shim();

// node_modules/swiper/react/utils.js
init_react_shim();
function isObject3(o3) {
  return typeof o3 === "object" && o3 !== null && o3.constructor && Object.prototype.toString.call(o3).slice(8, -1) === "Object";
}
function extend3(target, src) {
  const noExtend = ["__proto__", "constructor", "prototype"];
  Object.keys(src).filter((key) => noExtend.indexOf(key) < 0).forEach((key) => {
    if (typeof target[key] === "undefined")
      target[key] = src[key];
    else if (isObject3(src[key]) && isObject3(target[key]) && Object.keys(src[key]).length > 0) {
      if (src[key].__swiper__)
        target[key] = src[key];
      else
        extend3(target[key], src[key]);
    } else {
      target[key] = src[key];
    }
  });
}
function needsNavigation(params) {
  if (params === void 0) {
    params = {};
  }
  return params.navigation && typeof params.navigation.nextEl === "undefined" && typeof params.navigation.prevEl === "undefined";
}
function needsPagination(params) {
  if (params === void 0) {
    params = {};
  }
  return params.pagination && typeof params.pagination.el === "undefined";
}
function needsScrollbar(params) {
  if (params === void 0) {
    params = {};
  }
  return params.scrollbar && typeof params.scrollbar.el === "undefined";
}
function uniqueClasses(classNames) {
  if (classNames === void 0) {
    classNames = "";
  }
  const classes = classNames.split(" ").map((c3) => c3.trim()).filter((c3) => !!c3);
  const unique = [];
  classes.forEach((c3) => {
    if (unique.indexOf(c3) < 0)
      unique.push(c3);
  });
  return unique.join(" ");
}

// node_modules/swiper/react/params-list.js
init_react_shim();
var paramsList = [
  "modules",
  "init",
  "_direction",
  "touchEventsTarget",
  "initialSlide",
  "_speed",
  "cssMode",
  "updateOnWindowResize",
  "resizeObserver",
  "nested",
  "focusableElements",
  "_enabled",
  "_width",
  "_height",
  "preventInteractionOnTransition",
  "userAgent",
  "url",
  "_edgeSwipeDetection",
  "_edgeSwipeThreshold",
  "_freeMode",
  "_autoHeight",
  "setWrapperSize",
  "virtualTranslate",
  "_effect",
  "breakpoints",
  "_spaceBetween",
  "_slidesPerView",
  "maxBackfaceHiddenSlides",
  "_grid",
  "_slidesPerGroup",
  "_slidesPerGroupSkip",
  "_slidesPerGroupAuto",
  "_centeredSlides",
  "_centeredSlidesBounds",
  "_slidesOffsetBefore",
  "_slidesOffsetAfter",
  "normalizeSlideIndex",
  "_centerInsufficientSlides",
  "_watchOverflow",
  "roundLengths",
  "touchRatio",
  "touchAngle",
  "simulateTouch",
  "_shortSwipes",
  "_longSwipes",
  "longSwipesRatio",
  "longSwipesMs",
  "_followFinger",
  "allowTouchMove",
  "_threshold",
  "touchMoveStopPropagation",
  "touchStartPreventDefault",
  "touchStartForcePreventDefault",
  "touchReleaseOnEdges",
  "uniqueNavElements",
  "_resistance",
  "_resistanceRatio",
  "_watchSlidesProgress",
  "_grabCursor",
  "preventClicks",
  "preventClicksPropagation",
  "_slideToClickedSlide",
  "_preloadImages",
  "updateOnImagesReady",
  "_loop",
  "_loopAdditionalSlides",
  "_loopedSlides",
  "_loopFillGroupWithBlank",
  "loopPreventsSlide",
  "_rewind",
  "_allowSlidePrev",
  "_allowSlideNext",
  "_swipeHandler",
  "_noSwiping",
  "noSwipingClass",
  "noSwipingSelector",
  "passiveListeners",
  "containerModifierClass",
  "slideClass",
  "slideBlankClass",
  "slideActiveClass",
  "slideDuplicateActiveClass",
  "slideVisibleClass",
  "slideDuplicateClass",
  "slideNextClass",
  "slideDuplicateNextClass",
  "slidePrevClass",
  "slideDuplicatePrevClass",
  "wrapperClass",
  "runCallbacksOnInit",
  "observer",
  "observeParents",
  "observeSlideChildren",
  "a11y",
  "_autoplay",
  "_controller",
  "coverflowEffect",
  "cubeEffect",
  "fadeEffect",
  "flipEffect",
  "creativeEffect",
  "cardsEffect",
  "hashNavigation",
  "history",
  "keyboard",
  "lazy",
  "mousewheel",
  "_navigation",
  "_pagination",
  "parallax",
  "_scrollbar",
  "_thumbs",
  "virtual",
  "zoom"
];

// node_modules/swiper/react/get-params.js
function getParams(obj) {
  if (obj === void 0) {
    obj = {};
  }
  const params = {
    on: {}
  };
  const events2 = {};
  const passedParams = {};
  extend3(params, core_default.defaults);
  extend3(params, core_default.extendedDefaults);
  params._emitClasses = true;
  params.init = false;
  const rest = {};
  const allowedParams = paramsList.map((key) => key.replace(/_/, ""));
  Object.keys(obj).forEach((key) => {
    if (allowedParams.indexOf(key) >= 0) {
      if (isObject3(obj[key])) {
        params[key] = {};
        passedParams[key] = {};
        extend3(params[key], obj[key]);
        extend3(passedParams[key], obj[key]);
      } else {
        params[key] = obj[key];
        passedParams[key] = obj[key];
      }
    } else if (key.search(/on[A-Z]/) === 0 && typeof obj[key] === "function") {
      events2[`${key[2].toLowerCase()}${key.substr(3)}`] = obj[key];
    } else {
      rest[key] = obj[key];
    }
  });
  ["navigation", "pagination", "scrollbar"].forEach((key) => {
    if (params[key] === true)
      params[key] = {};
    if (params[key] === false)
      delete params[key];
  });
  return {
    params,
    passedParams,
    rest,
    events: events2
  };
}

// node_modules/swiper/react/mount-swiper.js
init_react_shim();
function mountSwiper(_ref, swiperParams) {
  let {
    el,
    nextEl,
    prevEl,
    paginationEl,
    scrollbarEl,
    swiper
  } = _ref;
  if (needsNavigation(swiperParams) && nextEl && prevEl) {
    swiper.params.navigation.nextEl = nextEl;
    swiper.originalParams.navigation.nextEl = nextEl;
    swiper.params.navigation.prevEl = prevEl;
    swiper.originalParams.navigation.prevEl = prevEl;
  }
  if (needsPagination(swiperParams) && paginationEl) {
    swiper.params.pagination.el = paginationEl;
    swiper.originalParams.pagination.el = paginationEl;
  }
  if (needsScrollbar(swiperParams) && scrollbarEl) {
    swiper.params.scrollbar.el = scrollbarEl;
    swiper.originalParams.scrollbar.el = scrollbarEl;
  }
  swiper.init(el);
}

// node_modules/swiper/react/loop.js
init_react_shim();
var import_react3 = __toESM(require_compat(), 1);
function calcLoopedSlides(slides, swiperParams) {
  let slidesPerViewParams = swiperParams.slidesPerView;
  if (swiperParams.breakpoints) {
    const breakpoint = core_default.prototype.getBreakpoint(swiperParams.breakpoints);
    const breakpointOnlyParams = breakpoint in swiperParams.breakpoints ? swiperParams.breakpoints[breakpoint] : void 0;
    if (breakpointOnlyParams && breakpointOnlyParams.slidesPerView) {
      slidesPerViewParams = breakpointOnlyParams.slidesPerView;
    }
  }
  let loopedSlides = Math.ceil(parseFloat(swiperParams.loopedSlides || slidesPerViewParams, 10));
  loopedSlides += swiperParams.loopAdditionalSlides;
  if (loopedSlides > slides.length) {
    loopedSlides = slides.length;
  }
  return loopedSlides;
}
function renderLoop(swiper, slides, swiperParams) {
  const modifiedSlides = slides.map((child, index2) => {
    return /* @__PURE__ */ import_react3.default.cloneElement(child, {
      swiper,
      "data-swiper-slide-index": index2
    });
  });
  function duplicateSlide(child, index2, position) {
    return /* @__PURE__ */ import_react3.default.cloneElement(child, {
      key: `${child.key}-duplicate-${index2}-${position}`,
      className: `${child.props.className || ""} ${swiperParams.slideDuplicateClass}`
    });
  }
  if (swiperParams.loopFillGroupWithBlank) {
    const blankSlidesNum = swiperParams.slidesPerGroup - modifiedSlides.length % swiperParams.slidesPerGroup;
    if (blankSlidesNum !== swiperParams.slidesPerGroup) {
      for (let i3 = 0; i3 < blankSlidesNum; i3 += 1) {
        const blankSlide = /* @__PURE__ */ import_react3.default.createElement("div", {
          className: `${swiperParams.slideClass} ${swiperParams.slideBlankClass}`
        });
        modifiedSlides.push(blankSlide);
      }
    }
  }
  if (swiperParams.slidesPerView === "auto" && !swiperParams.loopedSlides) {
    swiperParams.loopedSlides = modifiedSlides.length;
  }
  const loopedSlides = calcLoopedSlides(modifiedSlides, swiperParams);
  const prependSlides = [];
  const appendSlides = [];
  modifiedSlides.forEach((child, index2) => {
    if (index2 < loopedSlides) {
      appendSlides.push(duplicateSlide(child, index2, "prepend"));
    }
    if (index2 < modifiedSlides.length && index2 >= modifiedSlides.length - loopedSlides) {
      prependSlides.push(duplicateSlide(child, index2, "append"));
    }
  });
  if (swiper) {
    swiper.loopedSlides = loopedSlides;
  }
  return [...prependSlides, ...modifiedSlides, ...appendSlides];
}

// node_modules/swiper/react/get-changed-params.js
init_react_shim();
function getChangedParams(swiperParams, oldParams, children2, oldChildren) {
  const keys = [];
  if (!oldParams)
    return keys;
  const addKey = (key) => {
    if (keys.indexOf(key) < 0)
      keys.push(key);
  };
  const oldChildrenKeys = oldChildren.map((child) => child.key);
  const childrenKeys = children2.map((child) => child.key);
  if (oldChildrenKeys.join("") !== childrenKeys.join(""))
    addKey("children");
  if (oldChildren.length !== children2.length)
    addKey("children");
  const watchParams = paramsList.filter((key) => key[0] === "_").map((key) => key.replace(/_/, ""));
  watchParams.forEach((key) => {
    if (key in swiperParams && key in oldParams) {
      if (isObject3(swiperParams[key]) && isObject3(oldParams[key])) {
        const newKeys = Object.keys(swiperParams[key]);
        const oldKeys = Object.keys(oldParams[key]);
        if (newKeys.length !== oldKeys.length) {
          addKey(key);
        } else {
          newKeys.forEach((newKey) => {
            if (swiperParams[key][newKey] !== oldParams[key][newKey]) {
              addKey(key);
            }
          });
          oldKeys.forEach((oldKey) => {
            if (swiperParams[key][oldKey] !== oldParams[key][oldKey])
              addKey(key);
          });
        }
      } else if (swiperParams[key] !== oldParams[key]) {
        addKey(key);
      }
    }
  });
  return keys;
}

// node_modules/swiper/react/get-children.js
init_react_shim();
var import_react4 = __toESM(require_compat(), 1);
function processChildren(c3) {
  const slides = [];
  import_react4.default.Children.toArray(c3).forEach((child) => {
    if (child.type && child.type.displayName === "SwiperSlide") {
      slides.push(child);
    } else if (child.props && child.props.children) {
      processChildren(child.props.children).forEach((slide) => slides.push(slide));
    }
  });
  return slides;
}
function getChildren(c3) {
  const slides = [];
  const slots = {
    "container-start": [],
    "container-end": [],
    "wrapper-start": [],
    "wrapper-end": []
  };
  import_react4.default.Children.toArray(c3).forEach((child) => {
    if (child.type && child.type.displayName === "SwiperSlide") {
      slides.push(child);
    } else if (child.props && child.props.slot && slots[child.props.slot]) {
      slots[child.props.slot].push(child);
    } else if (child.props && child.props.children) {
      const foundSlides = processChildren(child.props.children);
      if (foundSlides.length > 0) {
        foundSlides.forEach((slide) => slides.push(slide));
      } else {
        slots["container-end"].push(child);
      }
    } else {
      slots["container-end"].push(child);
    }
  });
  return {
    slides,
    slots
  };
}

// node_modules/swiper/react/update-swiper.js
init_react_shim();
function updateSwiper(_ref) {
  let {
    swiper,
    slides,
    passedParams,
    changedParams,
    nextEl,
    prevEl,
    scrollbarEl,
    paginationEl
  } = _ref;
  const updateParams = changedParams.filter((key) => key !== "children" && key !== "direction");
  const {
    params: currentParams,
    pagination,
    navigation,
    scrollbar,
    virtual,
    thumbs
  } = swiper;
  let needThumbsInit;
  let needControllerInit;
  let needPaginationInit;
  let needScrollbarInit;
  let needNavigationInit;
  if (changedParams.includes("thumbs") && passedParams.thumbs && passedParams.thumbs.swiper && currentParams.thumbs && !currentParams.thumbs.swiper) {
    needThumbsInit = true;
  }
  if (changedParams.includes("controller") && passedParams.controller && passedParams.controller.control && currentParams.controller && !currentParams.controller.control) {
    needControllerInit = true;
  }
  if (changedParams.includes("pagination") && passedParams.pagination && (passedParams.pagination.el || paginationEl) && (currentParams.pagination || currentParams.pagination === false) && pagination && !pagination.el) {
    needPaginationInit = true;
  }
  if (changedParams.includes("scrollbar") && passedParams.scrollbar && (passedParams.scrollbar.el || scrollbarEl) && (currentParams.scrollbar || currentParams.scrollbar === false) && scrollbar && !scrollbar.el) {
    needScrollbarInit = true;
  }
  if (changedParams.includes("navigation") && passedParams.navigation && (passedParams.navigation.prevEl || prevEl) && (passedParams.navigation.nextEl || nextEl) && (currentParams.navigation || currentParams.navigation === false) && navigation && !navigation.prevEl && !navigation.nextEl) {
    needNavigationInit = true;
  }
  const destroyModule = (mod) => {
    if (!swiper[mod])
      return;
    swiper[mod].destroy();
    if (mod === "navigation") {
      currentParams[mod].prevEl = void 0;
      currentParams[mod].nextEl = void 0;
      swiper[mod].prevEl = void 0;
      swiper[mod].nextEl = void 0;
    } else {
      currentParams[mod].el = void 0;
      swiper[mod].el = void 0;
    }
  };
  updateParams.forEach((key) => {
    if (isObject3(currentParams[key]) && isObject3(passedParams[key])) {
      extend3(currentParams[key], passedParams[key]);
    } else {
      const newValue = passedParams[key];
      if ((newValue === true || newValue === false) && (key === "navigation" || key === "pagination" || key === "scrollbar")) {
        if (newValue === false) {
          destroyModule(key);
        }
      } else {
        currentParams[key] = passedParams[key];
      }
    }
  });
  if (updateParams.includes("controller") && !needControllerInit && swiper.controller && swiper.controller.control && currentParams.controller && currentParams.controller.control) {
    swiper.controller.control = currentParams.controller.control;
  }
  if (changedParams.includes("children") && virtual && currentParams.virtual.enabled) {
    virtual.slides = slides;
    virtual.update(true);
  } else if (changedParams.includes("children") && swiper.lazy && swiper.params.lazy.enabled) {
    swiper.lazy.load();
  }
  if (needThumbsInit) {
    const initialized = thumbs.init();
    if (initialized)
      thumbs.update(true);
  }
  if (needControllerInit) {
    swiper.controller.control = currentParams.controller.control;
  }
  if (needPaginationInit) {
    if (paginationEl)
      currentParams.pagination.el = paginationEl;
    pagination.init();
    pagination.render();
    pagination.update();
  }
  if (needScrollbarInit) {
    if (scrollbarEl)
      currentParams.scrollbar.el = scrollbarEl;
    scrollbar.init();
    scrollbar.updateSize();
    scrollbar.setTranslate();
  }
  if (needNavigationInit) {
    if (nextEl)
      currentParams.navigation.nextEl = nextEl;
    if (prevEl)
      currentParams.navigation.prevEl = prevEl;
    navigation.init();
    navigation.update();
  }
  if (changedParams.includes("allowSlideNext")) {
    swiper.allowSlideNext = passedParams.allowSlideNext;
  }
  if (changedParams.includes("allowSlidePrev")) {
    swiper.allowSlidePrev = passedParams.allowSlidePrev;
  }
  if (changedParams.includes("direction")) {
    swiper.changeDirection(passedParams.direction, false);
  }
  swiper.update();
}

// node_modules/swiper/react/virtual.js
init_react_shim();
var import_react5 = __toESM(require_compat(), 1);
function updateOnVirtualData(swiper) {
  if (!swiper || swiper.destroyed || !swiper.params.virtual || swiper.params.virtual && !swiper.params.virtual.enabled)
    return;
  swiper.updateSlides();
  swiper.updateProgress();
  swiper.updateSlidesClasses();
  if (swiper.lazy && swiper.params.lazy.enabled) {
    swiper.lazy.load();
  }
  if (swiper.parallax && swiper.params.parallax && swiper.params.parallax.enabled) {
    swiper.parallax.setTranslate();
  }
}
function renderVirtual(swiper, slides, virtualData) {
  if (!virtualData)
    return null;
  const style = swiper.isHorizontal() ? {
    [swiper.rtlTranslate ? "right" : "left"]: `${virtualData.offset}px`
  } : {
    top: `${virtualData.offset}px`
  };
  return slides.filter((child, index2) => index2 >= virtualData.from && index2 <= virtualData.to).map((child) => {
    return /* @__PURE__ */ import_react5.default.cloneElement(child, {
      swiper,
      style
    });
  });
}

// node_modules/swiper/react/use-isomorphic-layout-effect.js
init_react_shim();
var import_react6 = __toESM(require_compat(), 1);
function useIsomorphicLayoutEffect(callback, deps) {
  if (typeof window === "undefined")
    return (0, import_react6.useEffect)(callback, deps);
  return (0, import_react6.useLayoutEffect)(callback, deps);
}

// node_modules/swiper/react/context.js
init_react_shim();
var import_react7 = __toESM(require_compat(), 1);
var SwiperSlideContext = /* @__PURE__ */ (0, import_react7.createContext)(null);
var SwiperContext = /* @__PURE__ */ (0, import_react7.createContext)(null);

// node_modules/swiper/react/swiper.js
function _extends() {
  _extends = Object.assign || function(target) {
    for (var i3 = 1; i3 < arguments.length; i3++) {
      var source = arguments[i3];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
var Swiper2 = /* @__PURE__ */ (0, import_react8.forwardRef)(function(_temp, externalElRef) {
  let {
    className,
    tag: Tag2 = "div",
    wrapperTag: WrapperTag = "div",
    children: children2,
    onSwiper,
    ...rest
  } = _temp === void 0 ? {} : _temp;
  let eventsAssigned = false;
  const [containerClasses, setContainerClasses] = (0, import_react8.useState)("swiper");
  const [virtualData, setVirtualData] = (0, import_react8.useState)(null);
  const [breakpointChanged, setBreakpointChanged] = (0, import_react8.useState)(false);
  const initializedRef = (0, import_react8.useRef)(false);
  const swiperElRef = (0, import_react8.useRef)(null);
  const swiperRef = (0, import_react8.useRef)(null);
  const oldPassedParamsRef = (0, import_react8.useRef)(null);
  const oldSlides = (0, import_react8.useRef)(null);
  const nextElRef = (0, import_react8.useRef)(null);
  const prevElRef = (0, import_react8.useRef)(null);
  const paginationElRef = (0, import_react8.useRef)(null);
  const scrollbarElRef = (0, import_react8.useRef)(null);
  const {
    params: swiperParams,
    passedParams,
    rest: restProps,
    events: events2
  } = getParams(rest);
  const {
    slides,
    slots
  } = getChildren(children2);
  const onBeforeBreakpoint = () => {
    setBreakpointChanged(!breakpointChanged);
  };
  Object.assign(swiperParams.on, {
    _containerClasses(swiper, classes) {
      setContainerClasses(classes);
    }
  });
  const initSwiper = () => {
    Object.assign(swiperParams.on, events2);
    eventsAssigned = true;
    swiperRef.current = new core_default(swiperParams);
    swiperRef.current.loopCreate = () => {
    };
    swiperRef.current.loopDestroy = () => {
    };
    if (swiperParams.loop) {
      swiperRef.current.loopedSlides = calcLoopedSlides(slides, swiperParams);
    }
    if (swiperRef.current.virtual && swiperRef.current.params.virtual.enabled) {
      swiperRef.current.virtual.slides = slides;
      const extendWith = {
        cache: false,
        slides,
        renderExternal: setVirtualData,
        renderExternalUpdate: false
      };
      extend3(swiperRef.current.params.virtual, extendWith);
      extend3(swiperRef.current.originalParams.virtual, extendWith);
    }
  };
  if (!swiperElRef.current) {
    initSwiper();
  }
  if (swiperRef.current) {
    swiperRef.current.on("_beforeBreakpoint", onBeforeBreakpoint);
  }
  const attachEvents2 = () => {
    if (eventsAssigned || !events2 || !swiperRef.current)
      return;
    Object.keys(events2).forEach((eventName) => {
      swiperRef.current.on(eventName, events2[eventName]);
    });
  };
  const detachEvents2 = () => {
    if (!events2 || !swiperRef.current)
      return;
    Object.keys(events2).forEach((eventName) => {
      swiperRef.current.off(eventName, events2[eventName]);
    });
  };
  (0, import_react8.useEffect)(() => {
    return () => {
      if (swiperRef.current)
        swiperRef.current.off("_beforeBreakpoint", onBeforeBreakpoint);
    };
  });
  (0, import_react8.useEffect)(() => {
    if (!initializedRef.current && swiperRef.current) {
      swiperRef.current.emitSlidesClasses();
      initializedRef.current = true;
    }
  });
  useIsomorphicLayoutEffect(() => {
    if (externalElRef) {
      externalElRef.current = swiperElRef.current;
    }
    if (!swiperElRef.current)
      return;
    if (swiperRef.current.destroyed) {
      initSwiper();
    }
    mountSwiper({
      el: swiperElRef.current,
      nextEl: nextElRef.current,
      prevEl: prevElRef.current,
      paginationEl: paginationElRef.current,
      scrollbarEl: scrollbarElRef.current,
      swiper: swiperRef.current
    }, swiperParams);
    if (onSwiper)
      onSwiper(swiperRef.current);
    return () => {
      if (swiperRef.current && !swiperRef.current.destroyed) {
        swiperRef.current.destroy(true, false);
      }
    };
  }, []);
  useIsomorphicLayoutEffect(() => {
    attachEvents2();
    const changedParams = getChangedParams(passedParams, oldPassedParamsRef.current, slides, oldSlides.current);
    oldPassedParamsRef.current = passedParams;
    oldSlides.current = slides;
    if (changedParams.length && swiperRef.current && !swiperRef.current.destroyed) {
      updateSwiper({
        swiper: swiperRef.current,
        slides,
        passedParams,
        changedParams,
        nextEl: nextElRef.current,
        prevEl: prevElRef.current,
        scrollbarEl: scrollbarElRef.current,
        paginationEl: paginationElRef.current
      });
    }
    return () => {
      detachEvents2();
    };
  });
  useIsomorphicLayoutEffect(() => {
    updateOnVirtualData(swiperRef.current);
  }, [virtualData]);
  function renderSlides() {
    if (swiperParams.virtual) {
      return renderVirtual(swiperRef.current, slides, virtualData);
    }
    if (!swiperParams.loop || swiperRef.current && swiperRef.current.destroyed) {
      return slides.map((child) => {
        return /* @__PURE__ */ import_react8.default.cloneElement(child, {
          swiper: swiperRef.current
        });
      });
    }
    return renderLoop(swiperRef.current, slides, swiperParams);
  }
  return /* @__PURE__ */ import_react8.default.createElement(Tag2, _extends({
    ref: swiperElRef,
    className: uniqueClasses(`${containerClasses}${className ? ` ${className}` : ""}`)
  }, restProps), /* @__PURE__ */ import_react8.default.createElement(SwiperContext.Provider, {
    value: swiperRef.current
  }, slots["container-start"], needsNavigation(swiperParams) && /* @__PURE__ */ import_react8.default.createElement(import_react8.default.Fragment, null, /* @__PURE__ */ import_react8.default.createElement("div", {
    ref: prevElRef,
    className: "swiper-button-prev"
  }), /* @__PURE__ */ import_react8.default.createElement("div", {
    ref: nextElRef,
    className: "swiper-button-next"
  })), needsScrollbar(swiperParams) && /* @__PURE__ */ import_react8.default.createElement("div", {
    ref: scrollbarElRef,
    className: "swiper-scrollbar"
  }), needsPagination(swiperParams) && /* @__PURE__ */ import_react8.default.createElement("div", {
    ref: paginationElRef,
    className: "swiper-pagination"
  }), /* @__PURE__ */ import_react8.default.createElement(WrapperTag, {
    className: "swiper-wrapper"
  }, slots["wrapper-start"], renderSlides(), slots["wrapper-end"]), slots["container-end"]));
});
Swiper2.displayName = "Swiper";

// node_modules/swiper/react/swiper-slide.js
init_react_shim();
var import_react9 = __toESM(require_compat(), 1);
function _extends2() {
  _extends2 = Object.assign || function(target) {
    for (var i3 = 1; i3 < arguments.length; i3++) {
      var source = arguments[i3];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends2.apply(this, arguments);
}
var SwiperSlide = /* @__PURE__ */ (0, import_react9.forwardRef)(function(_temp, externalRef) {
  let {
    tag: Tag2 = "div",
    children: children2,
    className = "",
    swiper,
    zoom,
    virtualIndex,
    ...rest
  } = _temp === void 0 ? {} : _temp;
  const slideElRef = (0, import_react9.useRef)(null);
  const [slideClasses, setSlideClasses] = (0, import_react9.useState)("swiper-slide");
  function updateClasses(_s, el, classNames) {
    if (el === slideElRef.current) {
      setSlideClasses(classNames);
    }
  }
  useIsomorphicLayoutEffect(() => {
    if (externalRef) {
      externalRef.current = slideElRef.current;
    }
    if (!slideElRef.current || !swiper) {
      return;
    }
    if (swiper.destroyed) {
      if (slideClasses !== "swiper-slide") {
        setSlideClasses("swiper-slide");
      }
      return;
    }
    swiper.on("_slideClass", updateClasses);
    return () => {
      if (!swiper)
        return;
      swiper.off("_slideClass", updateClasses);
    };
  });
  useIsomorphicLayoutEffect(() => {
    if (swiper && slideElRef.current) {
      setSlideClasses(swiper.getSlideClasses(slideElRef.current));
    }
  }, [swiper]);
  const slideData = {
    isActive: slideClasses.indexOf("swiper-slide-active") >= 0 || slideClasses.indexOf("swiper-slide-duplicate-active") >= 0,
    isVisible: slideClasses.indexOf("swiper-slide-visible") >= 0,
    isDuplicate: slideClasses.indexOf("swiper-slide-duplicate") >= 0,
    isPrev: slideClasses.indexOf("swiper-slide-prev") >= 0 || slideClasses.indexOf("swiper-slide-duplicate-prev") >= 0,
    isNext: slideClasses.indexOf("swiper-slide-next") >= 0 || slideClasses.indexOf("swiper-slide-duplicate-next") >= 0
  };
  const renderChildren = () => {
    return typeof children2 === "function" ? children2(slideData) : children2;
  };
  return /* @__PURE__ */ import_react9.default.createElement(Tag2, _extends2({
    ref: slideElRef,
    className: uniqueClasses(`${slideClasses}${className ? ` ${className}` : ""}`),
    "data-swiper-slide-index": virtualIndex
  }, rest), /* @__PURE__ */ import_react9.default.createElement(SwiperSlideContext.Provider, {
    value: slideData
  }, zoom ? /* @__PURE__ */ import_react9.default.createElement("div", {
    className: "swiper-zoom-container",
    "data-swiper-zoom": typeof zoom === "number" ? zoom : void 0
  }, renderChildren()) : renderChildren()));
});
SwiperSlide.displayName = "SwiperSlide";

// src/js/components/products/_Thums.tsx
var arrowClassName = `empty:flex relative top-auto bottom-auto left-auto z-[10] cursor-pointer flex items-center justify-center after:content-none relative before:content-[''] before:absolute before:w-[300%] before:h-[300%]`;
function PrevArrow({
  onClick: onClick2
}) {
  return /* @__PURE__ */ v("button", {
    className: arrowClassName,
    onClick: onClick2
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    width: "20",
    height: "12",
    viewBox: "0 0 20 12",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M1 11L10 2L19 11",
    stroke: "black",
    "stroke-width": "2"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}
function NextArrow({
  onClick: onClick2
}) {
  return /* @__PURE__ */ v("button", {
    className: arrowClassName,
    onClick: onClick2
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("svg", {
    width: "20",
    height: "12",
    viewBox: "0 0 20 12",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("path", {
    d: "M19 1L10 10L0.999999 1",
    stroke: "black",
    "stroke-width": "2"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}
function Thums({
  images,
  onSwiper,
  prev: prev2,
  next: next2,
  isMobile
}) {
  const prevArrow = h2(null);
  const nextArrow = h2(null);
  const slidesPerView = isMobile ? 7 : 6;
  const navigation = isMobile ? false : {
    prevEl: prevArrow.current,
    nextEl: nextArrow.current
  };
  const modules = isMobile ? [Thumb] : [Navigation, Thumb];
  return images.length > 1 ? /* @__PURE__ */ v(d, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "space w-[8%] shrink-0 block empty:block hidden empty:hidden"
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "flex flex-row md:flex-col items-center shrink-0 gap-y-[16px] w-full md:w-[20%] h-max max-h-[80vh] md:h-[calc(35vw*1.425)] pt-4 relative md:sticky top-auto md:top-12"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", !isMobile && /* @__PURE__ */ v(PrevArrow, {
    ref: prevArrow,
    onClick: () => prev2()
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Swiper2, {
    onSwiper,
    direction: isMobile ? "horizontal" : "vertical",
    slidesPerView,
    modules,
    watchSlidesProgress: true,
    spaceBetween: 10,
    className: "mySwiper h-full w-full",
    navigation
  }, images.map((image, index2) => /* @__PURE__ */ v(SwiperSlide, {
    key: index2,
    className: "!h-max cursor-pointer"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("img", {
    src: image?.preview_image.src,
    alt: image?.alt ?? index2,
    className: "object-contain w-full h-full h-auto",
    loading: "lazy",
    decoding: "async",
    "data-hash": image.preview_image.id
  })))), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", !isMobile && /* @__PURE__ */ v(NextArrow, {
    ref: nextArrow,
    onClick: () => next2()
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message")) : null;
}

// src/js/components/products/_Preview.tsx
init_react_shim();

// src/js/components/products/_Image.tsx
init_react_shim();
function Image({
  media,
  className = "object-contain w-full max-h-[calc(90vh-5.4rem-49.875vw)]"
}) {
  return /* @__PURE__ */ v(d, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("img", {
    src: media.preview_image.src,
    alt: media?.alt ?? media?.variant?.title,
    className,
    loading: "lazy",
    decoding: "async"
  }), media?.variant?.option2 && /* @__PURE__ */ v("div", {
    className: "flex items-center justify-end w-full gap-x-2"
  }, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("span", {
    className: `block leading-none p-2 rounded-full bg-v-${media.variant.option2.toLowerCase()}`
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "py-4 leading-none "
  }, media.variant.option2), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"));
}

// src/js/components/products/_Video.tsx
init_react_shim();
function Video({
  media
}) {
  const html2 = media.media_type === "external_video" ? media.external_video : media.normal_video;
  return /* @__PURE__ */ v("div", {
    className: "h-full w-full flex place-content-center place-items-center",
    dangerouslySetInnerHTML: { __html: html2 }
  });
}

// src/js/components/products/_Preview.tsx
function Preview({
  images,
  thumbs,
  onSwiper,
  isMobile
}) {
  return images.length > 1 ? /* @__PURE__ */ v(Swiper2, {
    effect: "fade",
    direction: isMobile ? "horizontal" : "vertical",
    thumbs,
    modules: [freeMode, Thumb, EffectFade],
    className: "mySwiper2 items-start items-center w-[90%] h-[49.875vw] w-full !sticky relative top-12 top-auto bg-white h-max",
    onSwiper
  }, images.map((media, index2) => {
    return /* @__PURE__ */ v(SwiperSlide, {
      key: index2,
      className: "bg-white !pointer-events-auto flex-col !h-full"
    }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", media?.media_type === void 0 || media.media_type === "image" ? /* @__PURE__ */ v(Image, {
      media
    }) : /* @__PURE__ */ v(Video, {
      media
    }));
  })) : /* @__PURE__ */ v("img", {
    src: images[0]?.preview_image.src,
    alt: images[0]?.preview_image.alt,
    className: "object-contain max-w-[90%] sticky top-0",
    loading: "lazy",
    decoding: "async"
  });
}

// src/js/components/products/_Gallery.tsx
function resolution() {
  return document.documentElement.clientWidth;
}
function Gallery() {
  const [variant] = useAtom(variantAtom);
  const isMobile = resolution() <= parseInt(import_tailwind_config.theme.screens.sm.slice(0, -2));
  if (!product?.media?.length) {
    return /* @__PURE__ */ v(d, null);
  }
  const [previewSwiper, setPreviewSwiper] = m2(null);
  const [thumbsSwiper, setThumbsSwiper] = m2(null);
  const images = getMediaWithVariants();
  y2(() => {
    const index2 = images.indexOf(images.find((image) => image.variant_ids?.includes(variant.id)));
    if (index2 < 0) {
      return;
    }
    previewSwiper.slideTo(index2);
    thumbsSwiper.slideTo(index2);
  }, [variant]);
  return /* @__PURE__ */ v(Provider, null, "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "col-span-1 md:col-span-7 flex justify-end items-center md:items-start relative top-[3rem] top-auto z-[2] w-full max-h-[calc(90vh-4.4rem)] flex-col-reverse"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Thums, {
    isMobile,
    images,
    onSwiper: setThumbsSwiper,
    prev: () => previewSwiper.slidePrev(),
    next: () => previewSwiper.slideNext()
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message", /* @__PURE__ */ v("div", {
    className: "space w-[2%] shrink-0 block empty:block hidden empty:hidden"
  }), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Preview, {
    isMobile,
    images,
    thumbs: { swiper: thumbsSwiper },
    onSwiper: setPreviewSwiper
  }), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message"));
}

// src/js/app/Product.tsx
function Product() {
  return /* @__PURE__ */ v("div", {
    className: "grid grid-cols-1 sm:grid-cols-12 pt-[4vw] sm:pt-32 px-[4vw] sm:px-[8vw] sm:gap-x-[4vw]"
  }, "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Gallery, null), "// @ts-expect-error TS(17004): Cannot use JSX unless the '--jsx' flag is provided... Remove this comment to see the full error message", /* @__PURE__ */ v(Description, null), "// @ts-expect-error TS(7026): JSX element implicitly has type 'any' because no i... Remove this comment to see the full error message");
}
S(/* @__PURE__ */ v(Product, null), document.getElementById("app-product"));
export {
  Product as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvY29uc3RhbnRzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3Qvc3JjL3V0aWwuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvb3B0aW9ucy5qcyIsICIuLi9ub2RlX21vZHVsZXMvcHJlYWN0L3NyYy9jcmVhdGUtZWxlbWVudC5qcyIsICIuLi9ub2RlX21vZHVsZXMvcHJlYWN0L3NyYy9jb21wb25lbnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvY3JlYXRlLWNvbnRleHQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvZGlmZi9jaGlsZHJlbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvcHJlYWN0L3NyYy9kaWZmL3Byb3BzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3Qvc3JjL2RpZmYvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvcmVuZGVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3Qvc3JjL2Nsb25lLWVsZW1lbnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9zcmMvZGlmZi9jYXRjaC1lcnJvci5qcyIsICIuLi9yZWFjdC1zaGltLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvaG9va3Mvc3JjL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvY29tcGF0L3NyYy91dGlsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvY29tcGF0L3NyYy9QdXJlQ29tcG9uZW50LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvY29tcGF0L3NyYy9tZW1vLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvY29tcGF0L3NyYy9mb3J3YXJkUmVmLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvY29tcGF0L3NyYy9DaGlsZHJlbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvcHJlYWN0L2NvbXBhdC9zcmMvc3VzcGVuc2UuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9jb21wYXQvc3JjL3N1c3BlbnNlLWxpc3QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9jb21wYXQvc3JjL3BvcnRhbHMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3ByZWFjdC9jb21wYXQvc3JjL3JlbmRlci5qcyIsICIuLi9ub2RlX21vZHVsZXMvcHJlYWN0L2NvbXBhdC9zcmMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3RhaWx3aW5kY3NzL2xpYi91dGlsL2Nsb25lRGVlcC5qcyIsICIuLi9ub2RlX21vZHVsZXMvdGFpbHdpbmRjc3Mvc3R1YnMvZGVmYXVsdENvbmZpZy5zdHViLmpzIiwgIi4uL25vZGVfbW9kdWxlcy90YWlsd2luZGNzcy9saWIvcHVibGljL2RlZmF1bHQtdGhlbWUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3RhaWx3aW5kY3NzL2RlZmF1bHRUaGVtZS5qcyIsICIuLi90YWlsd2luZC5jb25maWcuY2pzIiwgIi4uL3NyYy9qcy9hcHAvUHJvZHVjdC50c3giLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX0Rlc2NyaXB0aW9uLnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fUHJvZHVjdFN0b3JlLnRzIiwgIi4uL3NyYy9qcy9jb21wb25lbnRzL3Byb2R1Y3RzL19TZWN0aW9uU3RvcmUudHMiLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX1ZhcmlhbnRGaWVsZHNldHMudHN4IiwgIi4uL3NyYy9qcy9jb21wb25lbnRzL3Byb2R1Y3RzL19WYXJpYW50RmllbGRzZXQudHN4IiwgIi4uL3NyYy9qcy9fQXRvbXMudHMiLCAiLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS9pbmRleC5tanMiLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX1ByaWNlU3RvcmUudHN4IiwgIi4uL3NyYy9qcy9jb21wb25lbnRzL3Byb2R1Y3RzL19WYXJpYW50U3RvcmUudHMiLCAiLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS91dGlscy5tanMiLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX1ZhcmlhbnRPcHRpb24udHN4IiwgIi4uL3NyYy9qcy9jb21wb25lbnRzL3Byb2R1Y3RzL19Gb3JtLnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fUGlja3VwQXZhaWxhYmlsaXR5LnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fVGFnLnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fVGFnU3RvcmUudHMiLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX0FjY29yZGlvbi50c3giLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX1ByaWNlLnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fRm9ybUluc3RhbGxtZW50LnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fR2FsbGVyeS50c3giLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX01lZGlhU3RvcmUudHMiLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX1RodW1zLnRzeCIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3N3aXBlci5lc20uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2NvcmUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3Nzci13aW5kb3cvc3NyLXdpbmRvdy5lc20uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvZG9tLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9kb203L2RvbTcuZXNtLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL3V0aWxzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL2dldC1zdXBwb3J0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL2dldC1kZXZpY2UuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvZ2V0LWJyb3dzZXIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL21vZHVsZXMvcmVzaXplL3Jlc2l6ZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvbW9kdWxlcy9vYnNlcnZlci9vYnNlcnZlci5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZXZlbnRzLWVtaXR0ZXIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3VwZGF0ZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvdXBkYXRlL3VwZGF0ZVNpemUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3VwZGF0ZS91cGRhdGVTbGlkZXMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3VwZGF0ZS91cGRhdGVBdXRvSGVpZ2h0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS91cGRhdGUvdXBkYXRlU2xpZGVzT2Zmc2V0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS91cGRhdGUvdXBkYXRlU2xpZGVzUHJvZ3Jlc3MuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3VwZGF0ZS91cGRhdGVQcm9ncmVzcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvdXBkYXRlL3VwZGF0ZVNsaWRlc0NsYXNzZXMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3VwZGF0ZS91cGRhdGVBY3RpdmVJbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvdXBkYXRlL3VwZGF0ZUNsaWNrZWRTbGlkZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvdHJhbnNsYXRlL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS90cmFuc2xhdGUvZ2V0VHJhbnNsYXRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS90cmFuc2xhdGUvc2V0VHJhbnNsYXRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS90cmFuc2xhdGUvbWluVHJhbnNsYXRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS90cmFuc2xhdGUvbWF4VHJhbnNsYXRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS90cmFuc2xhdGUvdHJhbnNsYXRlVG8uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3RyYW5zaXRpb24vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3RyYW5zaXRpb24vc2V0VHJhbnNpdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvdHJhbnNpdGlvbi90cmFuc2l0aW9uU3RhcnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkVtaXQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkVuZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvc2xpZGUvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3NsaWRlL3NsaWRlVG8uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3NsaWRlL3NsaWRlVG9Mb29wLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9zbGlkZS9zbGlkZU5leHQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3NsaWRlL3NsaWRlUHJldi5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvc2xpZGUvc2xpZGVSZXNldC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvc2xpZGUvc2xpZGVUb0Nsb3Nlc3QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL3NsaWRlL3NsaWRlVG9DbGlja2VkU2xpZGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2xvb3AvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2xvb3AvbG9vcENyZWF0ZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvbG9vcC9sb29wRml4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9sb29wL2xvb3BEZXN0cm95LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9ncmFiLWN1cnNvci9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZ3JhYi1jdXJzb3Ivc2V0R3JhYkN1cnNvci5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZ3JhYi1jdXJzb3IvdW5zZXRHcmFiQ3Vyc29yLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9ldmVudHMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2V2ZW50cy9vblRvdWNoU3RhcnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2V2ZW50cy9vblRvdWNoTW92ZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZXZlbnRzL29uVG91Y2hFbmQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2V2ZW50cy9vblJlc2l6ZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZXZlbnRzL29uQ2xpY2suanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2V2ZW50cy9vblNjcm9sbC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvYnJlYWtwb2ludHMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2JyZWFrcG9pbnRzL3NldEJyZWFrcG9pbnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2JyZWFrcG9pbnRzL2dldEJyZWFrcG9pbnQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2NsYXNzZXMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2NsYXNzZXMvYWRkQ2xhc3Nlcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvY2xhc3Nlcy9yZW1vdmVDbGFzc2VzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9pbWFnZXMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2ltYWdlcy9sb2FkSW1hZ2UuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL2ltYWdlcy9wcmVsb2FkSW1hZ2VzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvY29yZS9jaGVjay1vdmVyZmxvdy9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL2NvcmUvZGVmYXVsdHMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9jb3JlL21vZHVsZUV4dGVuZFBhcmFtcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvdmlydHVhbC92aXJ0dWFsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9rZXlib2FyZC9rZXlib2FyZC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvbW91c2V3aGVlbC9tb3VzZXdoZWVsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvY3JlYXRlLWVsZW1lbnQtaWYtbm90LWRlZmluZWQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9jbGFzc2VzLXRvLXNlbGVjdG9yLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9zY3JvbGxiYXIvc2Nyb2xsYmFyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9wYXJhbGxheC9wYXJhbGxheC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvem9vbS96b29tLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9sYXp5L2xhenkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL2NvbnRyb2xsZXIvY29udHJvbGxlci5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvYTExeS9hMTF5LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9oaXN0b3J5L2hpc3RvcnkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL2hhc2gtbmF2aWdhdGlvbi9oYXNoLW5hdmlnYXRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL2F1dG9wbGF5L2F1dG9wbGF5LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy90aHVtYnMvdGh1bWJzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9mcmVlLW1vZGUvZnJlZS1tb2RlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9ncmlkL2dyaWQuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL21hbmlwdWxhdGlvbi9tYW5pcHVsYXRpb24uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL21hbmlwdWxhdGlvbi9tZXRob2RzL2FwcGVuZFNsaWRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9tYW5pcHVsYXRpb24vbWV0aG9kcy9wcmVwZW5kU2xpZGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9tb2R1bGVzL21hbmlwdWxhdGlvbi9tZXRob2RzL2FkZFNsaWRlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9tYW5pcHVsYXRpb24vbWV0aG9kcy9yZW1vdmVTbGlkZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvbWFuaXB1bGF0aW9uL21ldGhvZHMvcmVtb3ZlQWxsU2xpZGVzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9lZmZlY3QtZmFkZS9lZmZlY3QtZmFkZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9lZmZlY3QtaW5pdC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9lZmZlY3QtdGFyZ2V0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL2VmZmVjdC12aXJ0dWFsLXRyYW5zaXRpb24tZW5kLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9lZmZlY3QtY3ViZS9lZmZlY3QtY3ViZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvZWZmZWN0LWZsaXAvZWZmZWN0LWZsaXAuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvY3JlYXRlLXNoYWRvdy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvZWZmZWN0LWNvdmVyZmxvdy9lZmZlY3QtY292ZXJmbG93LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9lZmZlY3QtY3JlYXRpdmUvZWZmZWN0LWNyZWF0aXZlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9lZmZlY3QtY2FyZHMvZWZmZWN0LWNhcmRzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3Qvc3dpcGVyLXJlYWN0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3Qvc3dpcGVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvZ2V0LXBhcmFtcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3JlYWN0L3V0aWxzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvcGFyYW1zLWxpc3QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9yZWFjdC9tb3VudC1zd2lwZXIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9yZWFjdC9sb29wLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvZ2V0LWNoYW5nZWQtcGFyYW1zLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvZ2V0LWNoaWxkcmVuLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvdXBkYXRlLXN3aXBlci5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3JlYWN0L3ZpcnR1YWwuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9yZWFjdC91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvcmVhY3QvY29udGV4dC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3JlYWN0L3N3aXBlci1zbGlkZS5qcyIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fUHJldmlldy50c3giLCAiLi4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdHMvX0ltYWdlLnRzeCIsICIuLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0cy9fVmlkZW8udHN4Il0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgY29uc3QgRU1QVFlfT0JKID0ge307XG5leHBvcnQgY29uc3QgRU1QVFlfQVJSID0gW107XG5leHBvcnQgY29uc3QgSVNfTk9OX0RJTUVOU0lPTkFMID0gL2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxncmlkfG93c3xtbmN8bnR3fGluZVtjaF18em9vfF5vcmR8aXRlcmEvaTtcbiIsICJpbXBvcnQgeyBFTVBUWV9BUlIgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBBc3NpZ24gcHJvcGVydGllcyBmcm9tIGBwcm9wc2AgdG8gYG9iamBcbiAqIEB0ZW1wbGF0ZSBPLCBQIFRoZSBvYmogYW5kIHByb3BzIHR5cGVzXG4gKiBAcGFyYW0ge099IG9iaiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0b1xuICogQHBhcmFtIHtQfSBwcm9wcyBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcmV0dXJucyB7TyAmIFB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ24ob2JqLCBwcm9wcykge1xuXHQvLyBAdHMtaWdub3JlIFdlIGNoYW5nZSB0aGUgdHlwZSBvZiBgb2JqYCB0byBiZSBgTyAmIFBgXG5cdGZvciAobGV0IGkgaW4gcHJvcHMpIG9ialtpXSA9IHByb3BzW2ldO1xuXHRyZXR1cm4gLyoqIEB0eXBlIHtPICYgUH0gKi8gKG9iaik7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgY2hpbGQgbm9kZSBmcm9tIGl0cyBwYXJlbnQgaWYgYXR0YWNoZWQuIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvclxuICogSUUxMSB3aGljaCBkb2Vzbid0IHN1cHBvcnQgYEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSgpYC4gVXNpbmcgdGhpcyBmdW5jdGlvblxuICogaXMgc21hbGxlciB0aGFuIGluY2x1ZGluZyBhIGRlZGljYXRlZCBwb2x5ZmlsbC5cbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHRsZXQgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0aWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cbmV4cG9ydCBjb25zdCBzbGljZSA9IEVNUFRZX0FSUi5zbGljZTtcbiIsICJpbXBvcnQgeyBfY2F0Y2hFcnJvciB9IGZyb20gJy4vZGlmZi9jYXRjaC1lcnJvcic7XG5cbi8qKlxuICogVGhlIGBvcHRpb25gIG9iamVjdCBjYW4gcG90ZW50aWFsbHkgY29udGFpbiBjYWxsYmFjayBmdW5jdGlvbnNcbiAqIHRoYXQgYXJlIGNhbGxlZCBkdXJpbmcgdmFyaW91cyBzdGFnZXMgb2Ygb3VyIHJlbmRlcmVyLiBUaGlzIGlzIHRoZVxuICogZm91bmRhdGlvbiBvbiB3aGljaCBhbGwgb3VyIGFkZG9ucyBsaWtlIGBwcmVhY3QvZGVidWdgLCBgcHJlYWN0L2NvbXBhdGAsXG4gKiBhbmQgYHByZWFjdC9ob29rc2AgYXJlIGJhc2VkIG9uLiBTZWUgdGhlIGBPcHRpb25zYCB0eXBlIGluIGBpbnRlcm5hbC5kLnRzYFxuICogZm9yIGEgZnVsbCBsaXN0IG9mIGF2YWlsYWJsZSBvcHRpb24gaG9va3MgKG1vc3QgZWRpdG9ycy9JREVzIGFsbG93IHlvdSB0b1xuICogY3RybCtjbGljayBvciBjbWQrY2xpY2sgb24gbWFjIHRoZSB0eXBlIGRlZmluaXRpb24gYmVsb3cpLlxuICogQHR5cGUge2ltcG9ydCgnLi9pbnRlcm5hbCcpLk9wdGlvbnN9XG4gKi9cbmNvbnN0IG9wdGlvbnMgPSB7XG5cdF9jYXRjaEVycm9yXG59O1xuXG5leHBvcnQgZGVmYXVsdCBvcHRpb25zO1xuIiwgImltcG9ydCB7IHNsaWNlIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBvcHRpb25zIGZyb20gJy4vb3B0aW9ucyc7XG5cbmxldCB2bm9kZUlkID0gMDtcblxuLyoqXG4gKiBDcmVhdGUgYW4gdmlydHVhbCBub2RlICh1c2VkIGZvciBKU1gpXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlW1widHlwZVwiXX0gdHlwZSBUaGUgbm9kZSBuYW1lIG9yIENvbXBvbmVudFxuICogY29uc3RydWN0b3IgZm9yIHRoaXMgdmlydHVhbCBub2RlXG4gKiBAcGFyYW0ge29iamVjdCB8IG51bGwgfCB1bmRlZmluZWR9IFtwcm9wc10gVGhlIHByb3BlcnRpZXMgb2YgdGhlIHZpcnR1YWwgbm9kZVxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoJy4nKS5Db21wb25lbnRDaGlsZHJlbj59IFtjaGlsZHJlbl0gVGhlIGNoaWxkcmVuIG9mIHRoZSB2aXJ0dWFsIG5vZGVcbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodHlwZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG5cdGxldCBub3JtYWxpemVkUHJvcHMgPSB7fSxcblx0XHRrZXksXG5cdFx0cmVmLFxuXHRcdGk7XG5cdGZvciAoaSBpbiBwcm9wcykge1xuXHRcdGlmIChpID09ICdrZXknKSBrZXkgPSBwcm9wc1tpXTtcblx0XHRlbHNlIGlmIChpID09ICdyZWYnKSByZWYgPSBwcm9wc1tpXTtcblx0XHRlbHNlIG5vcm1hbGl6ZWRQcm9wc1tpXSA9IHByb3BzW2ldO1xuXHR9XG5cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG5cdFx0bm9ybWFsaXplZFByb3BzLmNoaWxkcmVuID1cblx0XHRcdGFyZ3VtZW50cy5sZW5ndGggPiAzID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogY2hpbGRyZW47XG5cdH1cblxuXHQvLyBJZiBhIENvbXBvbmVudCBWTm9kZSwgY2hlY2sgZm9yIGFuZCBhcHBseSBkZWZhdWx0UHJvcHNcblx0Ly8gTm90ZTogdHlwZSBtYXkgYmUgdW5kZWZpbmVkIGluIGRldmVsb3BtZW50LCBtdXN0IG5ldmVyIGVycm9yIGhlcmUuXG5cdGlmICh0eXBlb2YgdHlwZSA9PSAnZnVuY3Rpb24nICYmIHR5cGUuZGVmYXVsdFByb3BzICE9IG51bGwpIHtcblx0XHRmb3IgKGkgaW4gdHlwZS5kZWZhdWx0UHJvcHMpIHtcblx0XHRcdGlmIChub3JtYWxpemVkUHJvcHNbaV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRub3JtYWxpemVkUHJvcHNbaV0gPSB0eXBlLmRlZmF1bHRQcm9wc1tpXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgbm9ybWFsaXplZFByb3BzLCBrZXksIHJlZiwgbnVsbCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgVk5vZGUgKHVzZWQgaW50ZXJuYWxseSBieSBQcmVhY3QpXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlW1widHlwZVwiXX0gdHlwZSBUaGUgbm9kZSBuYW1lIG9yIENvbXBvbmVudFxuICogQ29uc3RydWN0b3IgZm9yIHRoaXMgdmlydHVhbCBub2RlXG4gKiBAcGFyYW0ge29iamVjdCB8IHN0cmluZyB8IG51bWJlciB8IG51bGx9IHByb3BzIFRoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgdmlydHVhbCBub2RlLlxuICogSWYgdGhpcyB2aXJ0dWFsIG5vZGUgcmVwcmVzZW50cyBhIHRleHQgbm9kZSwgdGhpcyBpcyB0aGUgdGV4dCBvZiB0aGUgbm9kZSAoc3RyaW5nIG9yIG51bWJlcikuXG4gKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IG51bGx9IGtleSBUaGUga2V5IGZvciB0aGlzIHZpcnR1YWwgbm9kZSwgdXNlZCB3aGVuXG4gKiBkaWZmaW5nIGl0IGFnYWluc3QgaXRzIGNoaWxkcmVuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlW1wicmVmXCJdfSByZWYgVGhlIHJlZiBwcm9wZXJ0eSB0aGF0IHdpbGxcbiAqIHJlY2VpdmUgYSByZWZlcmVuY2UgdG8gaXRzIGNyZWF0ZWQgY2hpbGRcbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzLCBrZXksIHJlZiwgb3JpZ2luYWwpIHtcblx0Ly8gVjggc2VlbXMgdG8gYmUgYmV0dGVyIGF0IGRldGVjdGluZyB0eXBlIHNoYXBlcyBpZiB0aGUgb2JqZWN0IGlzIGFsbG9jYXRlZCBmcm9tIHRoZSBzYW1lIGNhbGwgc2l0ZVxuXHQvLyBEbyBub3QgaW5saW5lIGludG8gY3JlYXRlRWxlbWVudCBhbmQgY29lcmNlVG9WTm9kZSFcblx0Y29uc3Qgdm5vZGUgPSB7XG5cdFx0dHlwZSxcblx0XHRwcm9wcyxcblx0XHRrZXksXG5cdFx0cmVmLFxuXHRcdF9jaGlsZHJlbjogbnVsbCxcblx0XHRfcGFyZW50OiBudWxsLFxuXHRcdF9kZXB0aDogMCxcblx0XHRfZG9tOiBudWxsLFxuXHRcdC8vIF9uZXh0RG9tIG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gdW5kZWZpbmVkIGIvYyBpdCB3aWxsIGV2ZW50dWFsbHlcblx0XHQvLyBiZSBzZXQgdG8gZG9tLm5leHRTaWJsaW5nIHdoaWNoIGNhbiByZXR1cm4gYG51bGxgIGFuZCBpdCBpcyBpbXBvcnRhbnRcblx0XHQvLyB0byBiZSBhYmxlIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gYW4gdW5pbml0aWFsaXplZCBfbmV4dERvbSBhbmRcblx0XHQvLyBhIF9uZXh0RG9tIHRoYXQgaGFzIGJlZW4gc2V0IHRvIGBudWxsYFxuXHRcdF9uZXh0RG9tOiB1bmRlZmluZWQsXG5cdFx0X2NvbXBvbmVudDogbnVsbCxcblx0XHRfaHlkcmF0aW5nOiBudWxsLFxuXHRcdGNvbnN0cnVjdG9yOiB1bmRlZmluZWQsXG5cdFx0X29yaWdpbmFsOiBvcmlnaW5hbCA9PSBudWxsID8gKyt2bm9kZUlkIDogb3JpZ2luYWxcblx0fTtcblxuXHQvLyBPbmx5IGludm9rZSB0aGUgdm5vZGUgaG9vayBpZiB0aGlzIHdhcyAqbm90KiBhIGRpcmVjdCBjb3B5OlxuXHRpZiAob3JpZ2luYWwgPT0gbnVsbCAmJiBvcHRpb25zLnZub2RlICE9IG51bGwpIG9wdGlvbnMudm5vZGUodm5vZGUpO1xuXG5cdHJldHVybiB2bm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlZigpIHtcblx0cmV0dXJuIHsgY3VycmVudDogbnVsbCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRnJhZ21lbnQocHJvcHMpIHtcblx0cmV0dXJuIHByb3BzLmNoaWxkcmVuO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdGhlIGFyZ3VtZW50IGlzIGEgdmFsaWQgUHJlYWN0IFZOb2RlLlxuICogQHBhcmFtIHsqfSB2bm9kZVxuICogQHJldHVybnMge3Zub2RlIGlzIGltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlfVxuICovXG5leHBvcnQgY29uc3QgaXNWYWxpZEVsZW1lbnQgPSB2bm9kZSA9PlxuXHR2bm9kZSAhPSBudWxsICYmIHZub2RlLmNvbnN0cnVjdG9yID09PSB1bmRlZmluZWQ7XG4iLCAiaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7IGRpZmYsIGNvbW1pdFJvb3QgfSBmcm9tICcuL2RpZmYvaW5kZXgnO1xuaW1wb3J0IG9wdGlvbnMgZnJvbSAnLi9vcHRpb25zJztcbmltcG9ydCB7IEZyYWdtZW50IH0gZnJvbSAnLi9jcmVhdGUtZWxlbWVudCc7XG5cbi8qKlxuICogQmFzZSBDb21wb25lbnQgY2xhc3MuIFByb3ZpZGVzIGBzZXRTdGF0ZSgpYCBhbmQgYGZvcmNlVXBkYXRlKClgLCB3aGljaFxuICogdHJpZ2dlciByZW5kZXJpbmdcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcyBUaGUgaW5pdGlhbCBjb21wb25lbnQgcHJvcHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0IFRoZSBpbml0aWFsIGNvbnRleHQgZnJvbSBwYXJlbnQgY29tcG9uZW50cydcbiAqIGdldENoaWxkQ29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7XG5cdHRoaXMucHJvcHMgPSBwcm9wcztcblx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcbn1cblxuLyoqXG4gKiBVcGRhdGUgY29tcG9uZW50IHN0YXRlIGFuZCBzY2hlZHVsZSBhIHJlLXJlbmRlci5cbiAqIEB0aGlzIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnR9XG4gKiBAcGFyYW0ge29iamVjdCB8ICgoczogb2JqZWN0LCBwOiBvYmplY3QpID0+IG9iamVjdCl9IHVwZGF0ZSBBIGhhc2ggb2Ygc3RhdGVcbiAqIHByb3BlcnRpZXMgdG8gdXBkYXRlIHdpdGggbmV3IHZhbHVlcyBvciBhIGZ1bmN0aW9uIHRoYXQgZ2l2ZW4gdGhlIGN1cnJlbnRcbiAqIHN0YXRlIGFuZCBwcm9wcyByZXR1cm5zIGEgbmV3IHBhcnRpYWwgc3RhdGVcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NhbGxiYWNrXSBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbmNlIGNvbXBvbmVudCBzdGF0ZSBpc1xuICogdXBkYXRlZFxuICovXG5Db21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24odXBkYXRlLCBjYWxsYmFjaykge1xuXHQvLyBvbmx5IGNsb25lIHN0YXRlIHdoZW4gY29weWluZyB0byBuZXh0U3RhdGUgdGhlIGZpcnN0IHRpbWUuXG5cdGxldCBzO1xuXHRpZiAodGhpcy5fbmV4dFN0YXRlICE9IG51bGwgJiYgdGhpcy5fbmV4dFN0YXRlICE9PSB0aGlzLnN0YXRlKSB7XG5cdFx0cyA9IHRoaXMuX25leHRTdGF0ZTtcblx0fSBlbHNlIHtcblx0XHRzID0gdGhpcy5fbmV4dFN0YXRlID0gYXNzaWduKHt9LCB0aGlzLnN0YXRlKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgdXBkYXRlID09ICdmdW5jdGlvbicpIHtcblx0XHQvLyBTb21lIGxpYnJhcmllcyBsaWtlIGBpbW1lcmAgbWFyayB0aGUgY3VycmVudCBzdGF0ZSBhcyByZWFkb25seSxcblx0XHQvLyBwcmV2ZW50aW5nIHVzIGZyb20gbXV0YXRpbmcgaXQsIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQuIFNlZSAjMjcxNlxuXHRcdHVwZGF0ZSA9IHVwZGF0ZShhc3NpZ24oe30sIHMpLCB0aGlzLnByb3BzKTtcblx0fVxuXG5cdGlmICh1cGRhdGUpIHtcblx0XHRhc3NpZ24ocywgdXBkYXRlKTtcblx0fVxuXG5cdC8vIFNraXAgdXBkYXRlIGlmIHVwZGF0ZXIgZnVuY3Rpb24gcmV0dXJuZWQgbnVsbFxuXHRpZiAodXBkYXRlID09IG51bGwpIHJldHVybjtcblxuXHRpZiAodGhpcy5fdm5vZGUpIHtcblx0XHRpZiAoY2FsbGJhY2spIHRoaXMuX3JlbmRlckNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcblx0XHRlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuXHR9XG59O1xuXG4vKipcbiAqIEltbWVkaWF0ZWx5IHBlcmZvcm0gYSBzeW5jaHJvbm91cyByZS1yZW5kZXIgb2YgdGhlIGNvbXBvbmVudFxuICogQHRoaXMge2ltcG9ydCgnLi9pbnRlcm5hbCcpLkNvbXBvbmVudH1cbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NhbGxiYWNrXSBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhZnRlciBjb21wb25lbnQgaXNcbiAqIHJlLXJlbmRlcmVkXG4gKi9cbkNvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRpZiAodGhpcy5fdm5vZGUpIHtcblx0XHQvLyBTZXQgcmVuZGVyIG1vZGUgc28gdGhhdCB3ZSBjYW4gZGlmZmVyZW50aWF0ZSB3aGVyZSB0aGUgcmVuZGVyIHJlcXVlc3Rcblx0XHQvLyBpcyBjb21pbmcgZnJvbS4gV2UgbmVlZCB0aGlzIGJlY2F1c2UgZm9yY2VVcGRhdGUgc2hvdWxkIG5ldmVyIGNhbGxcblx0XHQvLyBzaG91bGRDb21wb25lbnRVcGRhdGVcblx0XHR0aGlzLl9mb3JjZSA9IHRydWU7XG5cdFx0aWYgKGNhbGxiYWNrKSB0aGlzLl9yZW5kZXJDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG5cdFx0ZW5xdWV1ZVJlbmRlcih0aGlzKTtcblx0fVxufTtcblxuLyoqXG4gKiBBY2NlcHRzIGBwcm9wc2AgYW5kIGBzdGF0ZWAsIGFuZCByZXR1cm5zIGEgbmV3IFZpcnR1YWwgRE9NIHRyZWUgdG8gYnVpbGQuXG4gKiBWaXJ0dWFsIERPTSBpcyBnZW5lcmFsbHkgY29uc3RydWN0ZWQgdmlhIFtKU1hdKGh0dHA6Ly9qYXNvbmZvcm1hdC5jb20vd3RmLWlzLWpzeCkuXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgUHJvcHMgKGVnOiBKU1ggYXR0cmlidXRlcykgcmVjZWl2ZWQgZnJvbSBwYXJlbnRcbiAqIGVsZW1lbnQvY29tcG9uZW50XG4gKiBAcGFyYW0ge29iamVjdH0gc3RhdGUgVGhlIGNvbXBvbmVudCdzIGN1cnJlbnQgc3RhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0IENvbnRleHQgb2JqZWN0LCBhcyByZXR1cm5lZCBieSB0aGUgbmVhcmVzdFxuICogYW5jZXN0b3IncyBgZ2V0Q2hpbGRDb250ZXh0KClgXG4gKiBAcmV0dXJucyB7aW1wb3J0KCcuL2luZGV4JykuQ29tcG9uZW50Q2hpbGRyZW4gfCB2b2lkfVxuICovXG5Db21wb25lbnQucHJvdG90eXBlLnJlbmRlciA9IEZyYWdtZW50O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuVk5vZGV9IHZub2RlXG4gKiBAcGFyYW0ge251bWJlciB8IG51bGx9IFtjaGlsZEluZGV4XVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9tU2libGluZyh2bm9kZSwgY2hpbGRJbmRleCkge1xuXHRpZiAoY2hpbGRJbmRleCA9PSBudWxsKSB7XG5cdFx0Ly8gVXNlIGNoaWxkSW5kZXg9PW51bGwgYXMgYSBzaWduYWwgdG8gcmVzdW1lIHRoZSBzZWFyY2ggZnJvbSB0aGUgdm5vZGUncyBzaWJsaW5nXG5cdFx0cmV0dXJuIHZub2RlLl9wYXJlbnRcblx0XHRcdD8gZ2V0RG9tU2libGluZyh2bm9kZS5fcGFyZW50LCB2bm9kZS5fcGFyZW50Ll9jaGlsZHJlbi5pbmRleE9mKHZub2RlKSArIDEpXG5cdFx0XHQ6IG51bGw7XG5cdH1cblxuXHRsZXQgc2libGluZztcblx0Zm9yICg7IGNoaWxkSW5kZXggPCB2bm9kZS5fY2hpbGRyZW4ubGVuZ3RoOyBjaGlsZEluZGV4KyspIHtcblx0XHRzaWJsaW5nID0gdm5vZGUuX2NoaWxkcmVuW2NoaWxkSW5kZXhdO1xuXG5cdFx0aWYgKHNpYmxpbmcgIT0gbnVsbCAmJiBzaWJsaW5nLl9kb20gIT0gbnVsbCkge1xuXHRcdFx0Ly8gU2luY2UgdXBkYXRlUGFyZW50RG9tUG9pbnRlcnMga2VlcHMgX2RvbSBwb2ludGVyIGNvcnJlY3QsXG5cdFx0XHQvLyB3ZSBjYW4gcmVseSBvbiBfZG9tIHRvIHRlbGwgdXMgaWYgdGhpcyBzdWJ0cmVlIGNvbnRhaW5zIGFcblx0XHRcdC8vIHJlbmRlcmVkIERPTSBub2RlLCBhbmQgd2hhdCB0aGUgZmlyc3QgcmVuZGVyZWQgRE9NIG5vZGUgaXNcblx0XHRcdHJldHVybiBzaWJsaW5nLl9kb207XG5cdFx0fVxuXHR9XG5cblx0Ly8gSWYgd2UgZ2V0IGhlcmUsIHdlIGhhdmUgbm90IGZvdW5kIGEgRE9NIG5vZGUgaW4gdGhpcyB2bm9kZSdzIGNoaWxkcmVuLlxuXHQvLyBXZSBtdXN0IHJlc3VtZSBmcm9tIHRoaXMgdm5vZGUncyBzaWJsaW5nIChpbiBpdCdzIHBhcmVudCBfY2hpbGRyZW4gYXJyYXkpXG5cdC8vIE9ubHkgY2xpbWIgdXAgYW5kIHNlYXJjaCB0aGUgcGFyZW50IGlmIHdlIGFyZW4ndCBzZWFyY2hpbmcgdGhyb3VnaCBhIERPTVxuXHQvLyBWTm9kZSAobWVhbmluZyB3ZSByZWFjaGVkIHRoZSBET00gcGFyZW50IG9mIHRoZSBvcmlnaW5hbCB2bm9kZSB0aGF0IGJlZ2FuXG5cdC8vIHRoZSBzZWFyY2gpXG5cdHJldHVybiB0eXBlb2Ygdm5vZGUudHlwZSA9PSAnZnVuY3Rpb24nID8gZ2V0RG9tU2libGluZyh2bm9kZSkgOiBudWxsO1xufVxuXG4vKipcbiAqIFRyaWdnZXIgaW4tcGxhY2UgcmUtcmVuZGVyaW5nIG9mIGEgY29tcG9uZW50LlxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnR9IGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHJlcmVuZGVyXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQpIHtcblx0bGV0IHZub2RlID0gY29tcG9uZW50Ll92bm9kZSxcblx0XHRvbGREb20gPSB2bm9kZS5fZG9tLFxuXHRcdHBhcmVudERvbSA9IGNvbXBvbmVudC5fcGFyZW50RG9tO1xuXG5cdGlmIChwYXJlbnREb20pIHtcblx0XHRsZXQgY29tbWl0UXVldWUgPSBbXTtcblx0XHRjb25zdCBvbGRWTm9kZSA9IGFzc2lnbih7fSwgdm5vZGUpO1xuXHRcdG9sZFZOb2RlLl9vcmlnaW5hbCA9IHZub2RlLl9vcmlnaW5hbCArIDE7XG5cblx0XHRkaWZmKFxuXHRcdFx0cGFyZW50RG9tLFxuXHRcdFx0dm5vZGUsXG5cdFx0XHRvbGRWTm9kZSxcblx0XHRcdGNvbXBvbmVudC5fZ2xvYmFsQ29udGV4dCxcblx0XHRcdHBhcmVudERvbS5vd25lclNWR0VsZW1lbnQgIT09IHVuZGVmaW5lZCxcblx0XHRcdHZub2RlLl9oeWRyYXRpbmcgIT0gbnVsbCA/IFtvbGREb21dIDogbnVsbCxcblx0XHRcdGNvbW1pdFF1ZXVlLFxuXHRcdFx0b2xkRG9tID09IG51bGwgPyBnZXREb21TaWJsaW5nKHZub2RlKSA6IG9sZERvbSxcblx0XHRcdHZub2RlLl9oeWRyYXRpbmdcblx0XHQpO1xuXHRcdGNvbW1pdFJvb3QoY29tbWl0UXVldWUsIHZub2RlKTtcblxuXHRcdGlmICh2bm9kZS5fZG9tICE9IG9sZERvbSkge1xuXHRcdFx0dXBkYXRlUGFyZW50RG9tUG9pbnRlcnModm5vZGUpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuVk5vZGV9IHZub2RlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVBhcmVudERvbVBvaW50ZXJzKHZub2RlKSB7XG5cdGlmICgodm5vZGUgPSB2bm9kZS5fcGFyZW50KSAhPSBudWxsICYmIHZub2RlLl9jb21wb25lbnQgIT0gbnVsbCkge1xuXHRcdHZub2RlLl9kb20gPSB2bm9kZS5fY29tcG9uZW50LmJhc2UgPSBudWxsO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgY2hpbGQgPSB2bm9kZS5fY2hpbGRyZW5baV07XG5cdFx0XHRpZiAoY2hpbGQgIT0gbnVsbCAmJiBjaGlsZC5fZG9tICE9IG51bGwpIHtcblx0XHRcdFx0dm5vZGUuX2RvbSA9IHZub2RlLl9jb21wb25lbnQuYmFzZSA9IGNoaWxkLl9kb207XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB1cGRhdGVQYXJlbnREb21Qb2ludGVycyh2bm9kZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBUaGUgcmVuZGVyIHF1ZXVlXG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50Pn1cbiAqL1xubGV0IHJlcmVuZGVyUXVldWUgPSBbXTtcblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBzY2hlZHVsZSBhIGNhbGxiYWNrXG4gKiBAdHlwZSB7KGNiOiAoKSA9PiB2b2lkKSA9PiB2b2lkfVxuICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuLy8gTm90ZSB0aGUgZm9sbG93aW5nIGxpbmUgaXNuJ3QgdHJlZS1zaGFrZW4gYnkgcm9sbHVwIGN1eiBvZiByb2xsdXAvcm9sbHVwIzI1NjZcbmNvbnN0IGRlZmVyID1cblx0dHlwZW9mIFByb21pc2UgPT0gJ2Z1bmN0aW9uJ1xuXHRcdD8gUHJvbWlzZS5wcm90b3R5cGUudGhlbi5iaW5kKFByb21pc2UucmVzb2x2ZSgpKVxuXHRcdDogc2V0VGltZW91dDtcblxuLypcbiAqIFRoZSB2YWx1ZSBvZiBgQ29tcG9uZW50LmRlYm91bmNlYCBtdXN0IGFzeW5jaHJvbm91c2x5IGludm9rZSB0aGUgcGFzc2VkIGluIGNhbGxiYWNrLiBJdCBpc1xuICogaW1wb3J0YW50IHRoYXQgY29udHJpYnV0b3JzIHRvIFByZWFjdCBjYW4gY29uc2lzdGVudGx5IHJlYXNvbiBhYm91dCB3aGF0IGNhbGxzIHRvIGBzZXRTdGF0ZWAsIGV0Yy5cbiAqIGRvLCBhbmQgd2hlbiB0aGVpciBlZmZlY3RzIHdpbGwgYmUgYXBwbGllZC4gU2VlIHRoZSBsaW5rcyBiZWxvdyBmb3Igc29tZSBmdXJ0aGVyIHJlYWRpbmcgb24gZGVzaWduaW5nXG4gKiBhc3luY2hyb25vdXMgQVBJcy5cbiAqICogW0Rlc2lnbmluZyBBUElzIGZvciBBc3luY2hyb255XShodHRwczovL2Jsb2cuaXpzLm1lLzIwMTMvMDgvZGVzaWduaW5nLWFwaXMtZm9yLWFzeW5jaHJvbnkpXG4gKiAqIFtDYWxsYmFja3Mgc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91c10oaHR0cHM6Ly9ibG9nLm9tZXRlci5jb20vMjAxMS8wNy8yNC9jYWxsYmFja3Mtc3luY2hyb25vdXMtYW5kLWFzeW5jaHJvbm91cy8pXG4gKi9cblxubGV0IHByZXZEZWJvdW5jZTtcblxuLyoqXG4gKiBFbnF1ZXVlIGEgcmVyZW5kZXIgb2YgYSBjb21wb25lbnRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50fSBjIFRoZSBjb21wb25lbnQgdG8gcmVyZW5kZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVucXVldWVSZW5kZXIoYykge1xuXHRpZiAoXG5cdFx0KCFjLl9kaXJ0eSAmJlxuXHRcdFx0KGMuX2RpcnR5ID0gdHJ1ZSkgJiZcblx0XHRcdHJlcmVuZGVyUXVldWUucHVzaChjKSAmJlxuXHRcdFx0IXByb2Nlc3MuX3JlcmVuZGVyQ291bnQrKykgfHxcblx0XHRwcmV2RGVib3VuY2UgIT09IG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmdcblx0KSB7XG5cdFx0cHJldkRlYm91bmNlID0gb3B0aW9ucy5kZWJvdW5jZVJlbmRlcmluZztcblx0XHQocHJldkRlYm91bmNlIHx8IGRlZmVyKShwcm9jZXNzKTtcblx0fVxufVxuXG4vKiogRmx1c2ggdGhlIHJlbmRlciBxdWV1ZSBieSByZXJlbmRlcmluZyBhbGwgcXVldWVkIGNvbXBvbmVudHMgKi9cbmZ1bmN0aW9uIHByb2Nlc3MoKSB7XG5cdGxldCBxdWV1ZTtcblx0d2hpbGUgKChwcm9jZXNzLl9yZXJlbmRlckNvdW50ID0gcmVyZW5kZXJRdWV1ZS5sZW5ndGgpKSB7XG5cdFx0cXVldWUgPSByZXJlbmRlclF1ZXVlLnNvcnQoKGEsIGIpID0+IGEuX3Zub2RlLl9kZXB0aCAtIGIuX3Zub2RlLl9kZXB0aCk7XG5cdFx0cmVyZW5kZXJRdWV1ZSA9IFtdO1xuXHRcdC8vIERvbid0IHVwZGF0ZSBgcmVuZGVyQ291bnRgIHlldC4gS2VlcCBpdHMgdmFsdWUgbm9uLXplcm8gdG8gcHJldmVudCB1bm5lY2Vzc2FyeVxuXHRcdC8vIHByb2Nlc3MoKSBjYWxscyBmcm9tIGdldHRpbmcgc2NoZWR1bGVkIHdoaWxlIGBxdWV1ZWAgaXMgc3RpbGwgYmVpbmcgY29uc3VtZWQuXG5cdFx0cXVldWUuc29tZShjID0+IHtcblx0XHRcdGlmIChjLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KGMpO1xuXHRcdH0pO1xuXHR9XG59XG5wcm9jZXNzLl9yZXJlbmRlckNvdW50ID0gMDtcbiIsICJpbXBvcnQgeyBlbnF1ZXVlUmVuZGVyIH0gZnJvbSAnLi9jb21wb25lbnQnO1xuXG5leHBvcnQgbGV0IGkgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udGV4dChkZWZhdWx0VmFsdWUsIGNvbnRleHRJZCkge1xuXHRjb250ZXh0SWQgPSAnX19jQycgKyBpKys7XG5cblx0Y29uc3QgY29udGV4dCA9IHtcblx0XHRfaWQ6IGNvbnRleHRJZCxcblx0XHRfZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUsXG5cdFx0LyoqIEB0eXBlIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5GdW5jdGlvbkNvbXBvbmVudH0gKi9cblx0XHRDb25zdW1lcihwcm9wcywgY29udGV4dFZhbHVlKSB7XG5cdFx0XHQvLyByZXR1cm4gcHJvcHMuY2hpbGRyZW4oXG5cdFx0XHQvLyBcdGNvbnRleHRbY29udGV4dElkXSA/IGNvbnRleHRbY29udGV4dElkXS5wcm9wcy52YWx1ZSA6IGRlZmF1bHRWYWx1ZVxuXHRcdFx0Ly8gKTtcblx0XHRcdHJldHVybiBwcm9wcy5jaGlsZHJlbihjb250ZXh0VmFsdWUpO1xuXHRcdH0sXG5cdFx0LyoqIEB0eXBlIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5GdW5jdGlvbkNvbXBvbmVudH0gKi9cblx0XHRQcm92aWRlcihwcm9wcykge1xuXHRcdFx0aWYgKCF0aGlzLmdldENoaWxkQ29udGV4dCkge1xuXHRcdFx0XHRsZXQgc3VicyA9IFtdO1xuXHRcdFx0XHRsZXQgY3R4ID0ge307XG5cdFx0XHRcdGN0eFtjb250ZXh0SWRdID0gdGhpcztcblxuXHRcdFx0XHR0aGlzLmdldENoaWxkQ29udGV4dCA9ICgpID0+IGN0eDtcblxuXHRcdFx0XHR0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uKF9wcm9wcykge1xuXHRcdFx0XHRcdGlmICh0aGlzLnByb3BzLnZhbHVlICE9PSBfcHJvcHMudmFsdWUpIHtcblx0XHRcdFx0XHRcdC8vIEkgdGhpbmsgdGhlIGZvcmNlZCB2YWx1ZSBwcm9wYWdhdGlvbiBoZXJlIHdhcyBvbmx5IG5lZWRlZCB3aGVuIGBvcHRpb25zLmRlYm91bmNlUmVuZGVyaW5nYCB3YXMgYmVpbmcgYnlwYXNzZWQ6XG5cdFx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vcHJlYWN0anMvcHJlYWN0L2NvbW1pdC80ZDMzOWZiODAzYmVhMDllOWYxOThhYmYzOGNhMWJmOGVhNGI3NzcxI2RpZmYtNTQ2ODJjZTM4MDkzNWE3MTdlNDFiOGJmYzU0NzM3ZjZSMzU4XG5cdFx0XHRcdFx0XHQvLyBJbiB0aG9zZSBjYXNlcyB0aG91Z2gsIGV2ZW4gd2l0aCB0aGUgdmFsdWUgY29ycmVjdGVkLCB3ZSdyZSBkb3VibGUtcmVuZGVyaW5nIGFsbCBub2Rlcy5cblx0XHRcdFx0XHRcdC8vIEl0IG1pZ2h0IGJlIGJldHRlciB0byBqdXN0IHRlbGwgZm9sa3Mgbm90IHRvIHVzZSBmb3JjZS1zeW5jIG1vZGUuXG5cdFx0XHRcdFx0XHQvLyBDdXJyZW50bHksIHVzaW5nIGB1c2VDb250ZXh0KClgIGluIGEgY2xhc3MgY29tcG9uZW50IHdpbGwgb3ZlcndyaXRlIGl0cyBgdGhpcy5jb250ZXh0YCB2YWx1ZS5cblx0XHRcdFx0XHRcdC8vIHN1YnMuc29tZShjID0+IHtcblx0XHRcdFx0XHRcdC8vIFx0Yy5jb250ZXh0ID0gX3Byb3BzLnZhbHVlO1xuXHRcdFx0XHRcdFx0Ly8gXHRlbnF1ZXVlUmVuZGVyKGMpO1xuXHRcdFx0XHRcdFx0Ly8gfSk7XG5cblx0XHRcdFx0XHRcdC8vIHN1YnMuc29tZShjID0+IHtcblx0XHRcdFx0XHRcdC8vIFx0Yy5jb250ZXh0W2NvbnRleHRJZF0gPSBfcHJvcHMudmFsdWU7XG5cdFx0XHRcdFx0XHQvLyBcdGVucXVldWVSZW5kZXIoYyk7XG5cdFx0XHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0XHRcdHN1YnMuc29tZShlbnF1ZXVlUmVuZGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dGhpcy5zdWIgPSBjID0+IHtcblx0XHRcdFx0XHRzdWJzLnB1c2goYyk7XG5cdFx0XHRcdFx0bGV0IG9sZCA9IGMuY29tcG9uZW50V2lsbFVubW91bnQ7XG5cdFx0XHRcdFx0Yy5jb21wb25lbnRXaWxsVW5tb3VudCA9ICgpID0+IHtcblx0XHRcdFx0XHRcdHN1YnMuc3BsaWNlKHN1YnMuaW5kZXhPZihjKSwgMSk7XG5cdFx0XHRcdFx0XHRpZiAob2xkKSBvbGQuY2FsbChjKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcHJvcHMuY2hpbGRyZW47XG5cdFx0fVxuXHR9O1xuXG5cdC8vIERldnRvb2xzIG5lZWRzIGFjY2VzcyB0byB0aGUgY29udGV4dCBvYmplY3Qgd2hlbiBpdFxuXHQvLyBlbmNvdW50ZXJzIGEgUHJvdmlkZXIuIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHN1cHBvcnRcblx0Ly8gc2V0dGluZyBgZGlzcGxheU5hbWVgIG9uIHRoZSBjb250ZXh0IG9iamVjdCBpbnN0ZWFkXG5cdC8vIG9mIG9uIHRoZSBjb21wb25lbnQgaXRzZWxmLiBTZWU6XG5cdC8vIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9jb250ZXh0Lmh0bWwjY29udGV4dGRpc3BsYXluYW1lXG5cblx0cmV0dXJuIChjb250ZXh0LlByb3ZpZGVyLl9jb250ZXh0UmVmID0gY29udGV4dC5Db25zdW1lci5jb250ZXh0VHlwZSA9IGNvbnRleHQpO1xufVxuIiwgImltcG9ydCB7IGRpZmYsIHVubW91bnQsIGFwcGx5UmVmIH0gZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBjcmVhdGVWTm9kZSwgRnJhZ21lbnQgfSBmcm9tICcuLi9jcmVhdGUtZWxlbWVudCc7XG5pbXBvcnQgeyBFTVBUWV9PQkosIEVNUFRZX0FSUiB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBnZXREb21TaWJsaW5nIH0gZnJvbSAnLi4vY29tcG9uZW50JztcblxuLyoqXG4gKiBEaWZmIHRoZSBjaGlsZHJlbiBvZiBhIHZpcnR1YWwgbm9kZVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH0gcGFyZW50RG9tIFRoZSBET00gZWxlbWVudCB3aG9zZVxuICogY2hpbGRyZW4gYXJlIGJlaW5nIGRpZmZlZFxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuQ29tcG9uZW50Q2hpbGRyZW5bXX0gcmVuZGVyUmVzdWx0XG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5WTm9kZX0gbmV3UGFyZW50Vk5vZGUgVGhlIG5ldyB2aXJ0dWFsXG4gKiBub2RlIHdob3NlIGNoaWxkcmVuIHNob3VsZCBiZSBkaWZmJ2VkIGFnYWluc3Qgb2xkUGFyZW50Vk5vZGVcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlZOb2RlfSBvbGRQYXJlbnRWTm9kZSBUaGUgb2xkIHZpcnR1YWxcbiAqIG5vZGUgd2hvc2UgY2hpbGRyZW4gc2hvdWxkIGJlIGRpZmYnZWQgYWdhaW5zdCBuZXdQYXJlbnRWTm9kZVxuICogQHBhcmFtIHtvYmplY3R9IGdsb2JhbENvbnRleHQgVGhlIGN1cnJlbnQgY29udGV4dCBvYmplY3QgLSBtb2RpZmllZCBieSBnZXRDaGlsZENvbnRleHRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNTdmcgV2hldGhlciBvciBub3QgdGhpcyBET00gbm9kZSBpcyBhbiBTVkcgbm9kZVxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudD59IGV4Y2Vzc0RvbUNoaWxkcmVuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydCgnLi4vaW50ZXJuYWwnKS5Db21wb25lbnQ+fSBjb21taXRRdWV1ZSBMaXN0IG9mIGNvbXBvbmVudHNcbiAqIHdoaWNoIGhhdmUgY2FsbGJhY2tzIHRvIGludm9rZSBpbiBjb21taXRSb290XG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5QcmVhY3RFbGVtZW50fSBvbGREb20gVGhlIGN1cnJlbnQgYXR0YWNoZWQgRE9NXG4gKiBlbGVtZW50IGFueSBuZXcgZG9tIGVsZW1lbnRzIHNob3VsZCBiZSBwbGFjZWQgYXJvdW5kLiBMaWtlbHkgYG51bGxgIG9uIGZpcnN0XG4gKiByZW5kZXIgKGV4Y2VwdCB3aGVuIGh5ZHJhdGluZykuIENhbiBiZSBhIHNpYmxpbmcgRE9NIGVsZW1lbnQgd2hlbiBkaWZmaW5nXG4gKiBGcmFnbWVudHMgdGhhdCBoYXZlIHNpYmxpbmdzLiBJbiBtb3N0IGNhc2VzLCBpdCBzdGFydHMgb3V0IGFzIGBvbGRDaGlsZHJlblswXS5fZG9tYC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNIeWRyYXRpbmcgV2hldGhlciBvciBub3Qgd2UgYXJlIGluIGh5ZHJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZkNoaWxkcmVuKFxuXHRwYXJlbnREb20sXG5cdHJlbmRlclJlc3VsdCxcblx0bmV3UGFyZW50Vk5vZGUsXG5cdG9sZFBhcmVudFZOb2RlLFxuXHRnbG9iYWxDb250ZXh0LFxuXHRpc1N2Zyxcblx0ZXhjZXNzRG9tQ2hpbGRyZW4sXG5cdGNvbW1pdFF1ZXVlLFxuXHRvbGREb20sXG5cdGlzSHlkcmF0aW5nXG4pIHtcblx0bGV0IGksIGosIG9sZFZOb2RlLCBjaGlsZFZOb2RlLCBuZXdEb20sIGZpcnN0Q2hpbGREb20sIHJlZnM7XG5cblx0Ly8gVGhpcyBpcyBhIGNvbXByZXNzaW9uIG9mIG9sZFBhcmVudFZOb2RlIT1udWxsICYmIG9sZFBhcmVudFZOb2RlICE9IEVNUFRZX09CSiAmJiBvbGRQYXJlbnRWTm9kZS5fY2hpbGRyZW4gfHwgRU1QVFlfQVJSXG5cdC8vIGFzIEVNUFRZX09CSi5fY2hpbGRyZW4gc2hvdWxkIGJlIGB1bmRlZmluZWRgLlxuXHRsZXQgb2xkQ2hpbGRyZW4gPSAob2xkUGFyZW50Vk5vZGUgJiYgb2xkUGFyZW50Vk5vZGUuX2NoaWxkcmVuKSB8fCBFTVBUWV9BUlI7XG5cblx0bGV0IG9sZENoaWxkcmVuTGVuZ3RoID0gb2xkQ2hpbGRyZW4ubGVuZ3RoO1xuXG5cdG5ld1BhcmVudFZOb2RlLl9jaGlsZHJlbiA9IFtdO1xuXHRmb3IgKGkgPSAwOyBpIDwgcmVuZGVyUmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2hpbGRWTm9kZSA9IHJlbmRlclJlc3VsdFtpXTtcblxuXHRcdGlmIChjaGlsZFZOb2RlID09IG51bGwgfHwgdHlwZW9mIGNoaWxkVk5vZGUgPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRjaGlsZFZOb2RlID0gbmV3UGFyZW50Vk5vZGUuX2NoaWxkcmVuW2ldID0gbnVsbDtcblx0XHR9XG5cdFx0Ly8gSWYgdGhpcyBuZXdWTm9kZSBpcyBiZWluZyByZXVzZWQgKGUuZy4gPGRpdj57cmV1c2V9e3JldXNlfTwvZGl2PikgaW4gdGhlIHNhbWUgZGlmZixcblx0XHQvLyBvciB3ZSBhcmUgcmVuZGVyaW5nIGEgY29tcG9uZW50IChlLmcuIHNldFN0YXRlKSBjb3B5IHRoZSBvbGRWTm9kZXMgc28gaXQgY2FuIGhhdmVcblx0XHQvLyBpdCdzIG93biBET00gJiBldGMuIHBvaW50ZXJzXG5cdFx0ZWxzZSBpZiAoXG5cdFx0XHR0eXBlb2YgY2hpbGRWTm9kZSA9PSAnc3RyaW5nJyB8fFxuXHRcdFx0dHlwZW9mIGNoaWxkVk5vZGUgPT0gJ251bWJlcicgfHxcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2YWxpZC10eXBlb2Zcblx0XHRcdHR5cGVvZiBjaGlsZFZOb2RlID09ICdiaWdpbnQnXG5cdFx0KSB7XG5cdFx0XHRjaGlsZFZOb2RlID0gbmV3UGFyZW50Vk5vZGUuX2NoaWxkcmVuW2ldID0gY3JlYXRlVk5vZGUoXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdGNoaWxkVk5vZGUsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdGNoaWxkVk5vZGVcblx0XHRcdCk7XG5cdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNoaWxkVk5vZGUpKSB7XG5cdFx0XHRjaGlsZFZOb2RlID0gbmV3UGFyZW50Vk5vZGUuX2NoaWxkcmVuW2ldID0gY3JlYXRlVk5vZGUoXG5cdFx0XHRcdEZyYWdtZW50LFxuXHRcdFx0XHR7IGNoaWxkcmVuOiBjaGlsZFZOb2RlIH0sXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdG51bGxcblx0XHRcdCk7XG5cdFx0fSBlbHNlIGlmIChjaGlsZFZOb2RlLl9kZXB0aCA+IDApIHtcblx0XHRcdC8vIFZOb2RlIGlzIGFscmVhZHkgaW4gdXNlLCBjbG9uZSBpdC4gVGhpcyBjYW4gaGFwcGVuIGluIHRoZSBmb2xsb3dpbmdcblx0XHRcdC8vIHNjZW5hcmlvOlxuXHRcdFx0Ly8gICBjb25zdCByZXVzZSA9IDxkaXYgLz5cblx0XHRcdC8vICAgPGRpdj57cmV1c2V9PHNwYW4gLz57cmV1c2V9PC9kaXY+XG5cdFx0XHRjaGlsZFZOb2RlID0gbmV3UGFyZW50Vk5vZGUuX2NoaWxkcmVuW2ldID0gY3JlYXRlVk5vZGUoXG5cdFx0XHRcdGNoaWxkVk5vZGUudHlwZSxcblx0XHRcdFx0Y2hpbGRWTm9kZS5wcm9wcyxcblx0XHRcdFx0Y2hpbGRWTm9kZS5rZXksXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdGNoaWxkVk5vZGUuX29yaWdpbmFsXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjaGlsZFZOb2RlID0gbmV3UGFyZW50Vk5vZGUuX2NoaWxkcmVuW2ldID0gY2hpbGRWTm9kZTtcblx0XHR9XG5cblx0XHQvLyBUZXJzZXIgcmVtb3ZlcyB0aGUgYGNvbnRpbnVlYCBoZXJlIGFuZCB3cmFwcyB0aGUgbG9vcCBib2R5XG5cdFx0Ly8gaW4gYSBgaWYgKGNoaWxkVk5vZGUpIHsgLi4uIH0gY29uZGl0aW9uXG5cdFx0aWYgKGNoaWxkVk5vZGUgPT0gbnVsbCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y2hpbGRWTm9kZS5fcGFyZW50ID0gbmV3UGFyZW50Vk5vZGU7XG5cdFx0Y2hpbGRWTm9kZS5fZGVwdGggPSBuZXdQYXJlbnRWTm9kZS5fZGVwdGggKyAxO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgZmluZCBhIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBpbiBvbGRDaGlsZHJlbi5cblx0XHQvLyBJZiBmb3VuZCwgZGVsZXRlIHRoZSBhcnJheSBpdGVtIGJ5IHNldHRpbmcgdG8gYHVuZGVmaW5lZGAuXG5cdFx0Ly8gV2UgdXNlIGB1bmRlZmluZWRgLCBhcyBgbnVsbGAgaXMgcmVzZXJ2ZWQgZm9yIGVtcHR5IHBsYWNlaG9sZGVyc1xuXHRcdC8vIChob2xlcykuXG5cdFx0b2xkVk5vZGUgPSBvbGRDaGlsZHJlbltpXTtcblxuXHRcdGlmIChcblx0XHRcdG9sZFZOb2RlID09PSBudWxsIHx8XG5cdFx0XHQob2xkVk5vZGUgJiZcblx0XHRcdFx0Y2hpbGRWTm9kZS5rZXkgPT0gb2xkVk5vZGUua2V5ICYmXG5cdFx0XHRcdGNoaWxkVk5vZGUudHlwZSA9PT0gb2xkVk5vZGUudHlwZSlcblx0XHQpIHtcblx0XHRcdG9sZENoaWxkcmVuW2ldID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBFaXRoZXIgb2xkVk5vZGUgPT09IHVuZGVmaW5lZCBvciBvbGRDaGlsZHJlbkxlbmd0aCA+IDAsXG5cdFx0XHQvLyBzbyBhZnRlciB0aGlzIGxvb3Agb2xkVk5vZGUgPT0gbnVsbCBvciBvbGRWTm9kZSBpcyBhIHZhbGlkIHZhbHVlLlxuXHRcdFx0Zm9yIChqID0gMDsgaiA8IG9sZENoaWxkcmVuTGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0b2xkVk5vZGUgPSBvbGRDaGlsZHJlbltqXTtcblx0XHRcdFx0Ly8gSWYgY2hpbGRWTm9kZSBpcyB1bmtleWVkLCB3ZSBvbmx5IG1hdGNoIHNpbWlsYXJseSB1bmtleWVkIG5vZGVzLCBvdGhlcndpc2Ugd2UgbWF0Y2ggYnkga2V5LlxuXHRcdFx0XHQvLyBXZSBhbHdheXMgbWF0Y2ggYnkgdHlwZSAoaW4gZWl0aGVyIGNhc2UpLlxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0b2xkVk5vZGUgJiZcblx0XHRcdFx0XHRjaGlsZFZOb2RlLmtleSA9PSBvbGRWTm9kZS5rZXkgJiZcblx0XHRcdFx0XHRjaGlsZFZOb2RlLnR5cGUgPT09IG9sZFZOb2RlLnR5cGVcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0b2xkQ2hpbGRyZW5bal0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0b2xkVk5vZGUgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG9sZFZOb2RlID0gb2xkVk5vZGUgfHwgRU1QVFlfT0JKO1xuXG5cdFx0Ly8gTW9ycGggdGhlIG9sZCBlbGVtZW50IGludG8gdGhlIG5ldyBvbmUsIGJ1dCBkb24ndCBhcHBlbmQgaXQgdG8gdGhlIGRvbSB5ZXRcblx0XHRkaWZmKFxuXHRcdFx0cGFyZW50RG9tLFxuXHRcdFx0Y2hpbGRWTm9kZSxcblx0XHRcdG9sZFZOb2RlLFxuXHRcdFx0Z2xvYmFsQ29udGV4dCxcblx0XHRcdGlzU3ZnLFxuXHRcdFx0ZXhjZXNzRG9tQ2hpbGRyZW4sXG5cdFx0XHRjb21taXRRdWV1ZSxcblx0XHRcdG9sZERvbSxcblx0XHRcdGlzSHlkcmF0aW5nXG5cdFx0KTtcblxuXHRcdG5ld0RvbSA9IGNoaWxkVk5vZGUuX2RvbTtcblxuXHRcdGlmICgoaiA9IGNoaWxkVk5vZGUucmVmKSAmJiBvbGRWTm9kZS5yZWYgIT0gaikge1xuXHRcdFx0aWYgKCFyZWZzKSByZWZzID0gW107XG5cdFx0XHRpZiAob2xkVk5vZGUucmVmKSByZWZzLnB1c2gob2xkVk5vZGUucmVmLCBudWxsLCBjaGlsZFZOb2RlKTtcblx0XHRcdHJlZnMucHVzaChqLCBjaGlsZFZOb2RlLl9jb21wb25lbnQgfHwgbmV3RG9tLCBjaGlsZFZOb2RlKTtcblx0XHR9XG5cblx0XHRpZiAobmV3RG9tICE9IG51bGwpIHtcblx0XHRcdGlmIChmaXJzdENoaWxkRG9tID09IG51bGwpIHtcblx0XHRcdFx0Zmlyc3RDaGlsZERvbSA9IG5ld0RvbTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKFxuXHRcdFx0XHR0eXBlb2YgY2hpbGRWTm9kZS50eXBlID09ICdmdW5jdGlvbicgJiZcblx0XHRcdFx0Y2hpbGRWTm9kZS5fY2hpbGRyZW4gPT09IG9sZFZOb2RlLl9jaGlsZHJlblxuXHRcdFx0KSB7XG5cdFx0XHRcdGNoaWxkVk5vZGUuX25leHREb20gPSBvbGREb20gPSByZW9yZGVyQ2hpbGRyZW4oXG5cdFx0XHRcdFx0Y2hpbGRWTm9kZSxcblx0XHRcdFx0XHRvbGREb20sXG5cdFx0XHRcdFx0cGFyZW50RG9tXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvbGREb20gPSBwbGFjZUNoaWxkKFxuXHRcdFx0XHRcdHBhcmVudERvbSxcblx0XHRcdFx0XHRjaGlsZFZOb2RlLFxuXHRcdFx0XHRcdG9sZFZOb2RlLFxuXHRcdFx0XHRcdG9sZENoaWxkcmVuLFxuXHRcdFx0XHRcdG5ld0RvbSxcblx0XHRcdFx0XHRvbGREb21cblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZiBuZXdQYXJlbnRWTm9kZS50eXBlID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Ly8gQmVjYXVzZSB0aGUgbmV3UGFyZW50Vk5vZGUgaXMgRnJhZ21lbnQtbGlrZSwgd2UgbmVlZCB0byBzZXQgaXQnc1xuXHRcdFx0XHQvLyBfbmV4dERvbSBwcm9wZXJ0eSB0byB0aGUgbmV4dFNpYmxpbmcgb2YgaXRzIGxhc3QgY2hpbGQgRE9NIG5vZGUuXG5cdFx0XHRcdC8vXG5cdFx0XHRcdC8vIGBvbGREb21gIGNvbnRhaW5zIHRoZSBjb3JyZWN0IHZhbHVlIGhlcmUgYmVjYXVzZSBpZiB0aGUgbGFzdCBjaGlsZFxuXHRcdFx0XHQvLyBpcyBhIEZyYWdtZW50LWxpa2UsIHRoZW4gb2xkRG9tIGhhcyBhbHJlYWR5IGJlZW4gc2V0IHRvIHRoYXQgY2hpbGQncyBfbmV4dERvbS5cblx0XHRcdFx0Ly8gSWYgdGhlIGxhc3QgY2hpbGQgaXMgYSBET00gVk5vZGUsIHRoZW4gb2xkRG9tIHdpbGwgYmUgc2V0IHRvIHRoYXQgRE9NXG5cdFx0XHRcdC8vIG5vZGUncyBuZXh0U2libGluZy5cblx0XHRcdFx0bmV3UGFyZW50Vk5vZGUuX25leHREb20gPSBvbGREb207XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdG9sZERvbSAmJlxuXHRcdFx0b2xkVk5vZGUuX2RvbSA9PSBvbGREb20gJiZcblx0XHRcdG9sZERvbS5wYXJlbnROb2RlICE9IHBhcmVudERvbVxuXHRcdCkge1xuXHRcdFx0Ly8gVGhlIGFib3ZlIGNvbmRpdGlvbiBpcyB0byBoYW5kbGUgbnVsbCBwbGFjZWhvbGRlcnMuIFNlZSB0ZXN0IGluIHBsYWNlaG9sZGVyLnRlc3QuanM6XG5cdFx0XHQvLyBgZWZmaWNpZW50bHkgcmVwbGFjZSBudWxsIHBsYWNlaG9sZGVycyBpbiBwYXJlbnQgcmVyZW5kZXJzYFxuXHRcdFx0b2xkRG9tID0gZ2V0RG9tU2libGluZyhvbGRWTm9kZSk7XG5cdFx0fVxuXHR9XG5cblx0bmV3UGFyZW50Vk5vZGUuX2RvbSA9IGZpcnN0Q2hpbGREb207XG5cblx0Ly8gUmVtb3ZlIHJlbWFpbmluZyBvbGRDaGlsZHJlbiBpZiB0aGVyZSBhcmUgYW55LlxuXHRmb3IgKGkgPSBvbGRDaGlsZHJlbkxlbmd0aDsgaS0tOyApIHtcblx0XHRpZiAob2xkQ2hpbGRyZW5baV0gIT0gbnVsbCkge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0eXBlb2YgbmV3UGFyZW50Vk5vZGUudHlwZSA9PSAnZnVuY3Rpb24nICYmXG5cdFx0XHRcdG9sZENoaWxkcmVuW2ldLl9kb20gIT0gbnVsbCAmJlxuXHRcdFx0XHRvbGRDaGlsZHJlbltpXS5fZG9tID09IG5ld1BhcmVudFZOb2RlLl9uZXh0RG9tXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gSWYgdGhlIG5ld1BhcmVudFZOb2RlLl9fbmV4dERvbSBwb2ludHMgdG8gYSBkb20gbm9kZSB0aGF0IGlzIGFib3V0IHRvXG5cdFx0XHRcdC8vIGJlIHVubW91bnRlZCwgdGhlbiBnZXQgdGhlIG5leHQgc2libGluZyBvZiB0aGF0IHZub2RlIGFuZCBzZXRcblx0XHRcdFx0Ly8gX25leHREb20gdG8gaXRcblx0XHRcdFx0bmV3UGFyZW50Vk5vZGUuX25leHREb20gPSBnZXREb21TaWJsaW5nKG9sZFBhcmVudFZOb2RlLCBpICsgMSk7XG5cdFx0XHR9XG5cblx0XHRcdHVubW91bnQob2xkQ2hpbGRyZW5baV0sIG9sZENoaWxkcmVuW2ldKTtcblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgcmVmcyBvbmx5IGFmdGVyIHVubW91bnRcblx0aWYgKHJlZnMpIHtcblx0XHRmb3IgKGkgPSAwOyBpIDwgcmVmcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0YXBwbHlSZWYocmVmc1tpXSwgcmVmc1srK2ldLCByZWZzWysraV0pO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiByZW9yZGVyQ2hpbGRyZW4oY2hpbGRWTm9kZSwgb2xkRG9tLCBwYXJlbnREb20pIHtcblx0Ly8gTm90ZTogVk5vZGVzIGluIG5lc3RlZCBzdXNwZW5kZWQgdHJlZXMgbWF5IGJlIG1pc3NpbmcgX2NoaWxkcmVuLlxuXHRsZXQgYyA9IGNoaWxkVk5vZGUuX2NoaWxkcmVuO1xuXHRsZXQgdG1wID0gMDtcblx0Zm9yICg7IGMgJiYgdG1wIDwgYy5sZW5ndGg7IHRtcCsrKSB7XG5cdFx0bGV0IHZub2RlID0gY1t0bXBdO1xuXHRcdGlmICh2bm9kZSkge1xuXHRcdFx0Ly8gV2UgdHlwaWNhbGx5IGVudGVyIHRoaXMgY29kZSBwYXRoIG9uIHNDVSBiYWlsb3V0LCB3aGVyZSB3ZSBjb3B5XG5cdFx0XHQvLyBvbGRWTm9kZS5fY2hpbGRyZW4gdG8gbmV3Vk5vZGUuX2NoaWxkcmVuLiBJZiB0aGF0IGlzIHRoZSBjYXNlLCB3ZSBuZWVkXG5cdFx0XHQvLyB0byB1cGRhdGUgdGhlIG9sZCBjaGlsZHJlbidzIF9wYXJlbnQgcG9pbnRlciB0byBwb2ludCB0byB0aGUgbmV3Vk5vZGVcblx0XHRcdC8vIChjaGlsZFZOb2RlIGhlcmUpLlxuXHRcdFx0dm5vZGUuX3BhcmVudCA9IGNoaWxkVk5vZGU7XG5cblx0XHRcdGlmICh0eXBlb2Ygdm5vZGUudHlwZSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdG9sZERvbSA9IHJlb3JkZXJDaGlsZHJlbih2bm9kZSwgb2xkRG9tLCBwYXJlbnREb20pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b2xkRG9tID0gcGxhY2VDaGlsZChcblx0XHRcdFx0XHRwYXJlbnREb20sXG5cdFx0XHRcdFx0dm5vZGUsXG5cdFx0XHRcdFx0dm5vZGUsXG5cdFx0XHRcdFx0Yyxcblx0XHRcdFx0XHR2bm9kZS5fZG9tLFxuXHRcdFx0XHRcdG9sZERvbVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBvbGREb207XG59XG5cbi8qKlxuICogRmxhdHRlbiBhbmQgbG9vcCB0aHJvdWdoIHRoZSBjaGlsZHJlbiBvZiBhIHZpcnR1YWwgbm9kZVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2luZGV4JykuQ29tcG9uZW50Q2hpbGRyZW59IGNoaWxkcmVuIFRoZSB1bmZsYXR0ZW5lZFxuICogY2hpbGRyZW4gb2YgYSB2aXJ0dWFsIG5vZGVcbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4uL2ludGVybmFsJykuVk5vZGVbXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQ2hpbGRBcnJheShjaGlsZHJlbiwgb3V0KSB7XG5cdG91dCA9IG91dCB8fCBbXTtcblx0aWYgKGNoaWxkcmVuID09IG51bGwgfHwgdHlwZW9mIGNoaWxkcmVuID09ICdib29sZWFuJykge1xuXHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG5cdFx0Y2hpbGRyZW4uc29tZShjaGlsZCA9PiB7XG5cdFx0XHR0b0NoaWxkQXJyYXkoY2hpbGQsIG91dCk7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0b3V0LnB1c2goY2hpbGRyZW4pO1xuXHR9XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHBsYWNlQ2hpbGQoXG5cdHBhcmVudERvbSxcblx0Y2hpbGRWTm9kZSxcblx0b2xkVk5vZGUsXG5cdG9sZENoaWxkcmVuLFxuXHRuZXdEb20sXG5cdG9sZERvbVxuKSB7XG5cdGxldCBuZXh0RG9tO1xuXHRpZiAoY2hpbGRWTm9kZS5fbmV4dERvbSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gT25seSBGcmFnbWVudHMgb3IgY29tcG9uZW50cyB0aGF0IHJldHVybiBGcmFnbWVudCBsaWtlIFZOb2RlcyB3aWxsXG5cdFx0Ly8gaGF2ZSBhIG5vbi11bmRlZmluZWQgX25leHREb20uIENvbnRpbnVlIHRoZSBkaWZmIGZyb20gdGhlIHNpYmxpbmdcblx0XHQvLyBvZiBsYXN0IERPTSBjaGlsZCBvZiB0aGlzIGNoaWxkIFZOb2RlXG5cdFx0bmV4dERvbSA9IGNoaWxkVk5vZGUuX25leHREb207XG5cblx0XHQvLyBFYWdlcmx5IGNsZWFudXAgX25leHREb20uIFdlIGRvbid0IG5lZWQgdG8gcGVyc2lzdCB0aGUgdmFsdWUgYmVjYXVzZVxuXHRcdC8vIGl0IGlzIG9ubHkgdXNlZCBieSBgZGlmZkNoaWxkcmVuYCB0byBkZXRlcm1pbmUgd2hlcmUgdG8gcmVzdW1lIHRoZSBkaWZmIGFmdGVyXG5cdFx0Ly8gZGlmZmluZyBDb21wb25lbnRzIGFuZCBGcmFnbWVudHMuIE9uY2Ugd2Ugc3RvcmUgaXQgdGhlIG5leHRET00gbG9jYWwgdmFyLCB3ZVxuXHRcdC8vIGNhbiBjbGVhbiB1cCB0aGUgcHJvcGVydHlcblx0XHRjaGlsZFZOb2RlLl9uZXh0RG9tID0gdW5kZWZpbmVkO1xuXHR9IGVsc2UgaWYgKFxuXHRcdG9sZFZOb2RlID09IG51bGwgfHxcblx0XHRuZXdEb20gIT0gb2xkRG9tIHx8XG5cdFx0bmV3RG9tLnBhcmVudE5vZGUgPT0gbnVsbFxuXHQpIHtcblx0XHRvdXRlcjogaWYgKG9sZERvbSA9PSBudWxsIHx8IG9sZERvbS5wYXJlbnROb2RlICE9PSBwYXJlbnREb20pIHtcblx0XHRcdHBhcmVudERvbS5hcHBlbmRDaGlsZChuZXdEb20pO1xuXHRcdFx0bmV4dERvbSA9IG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGBqPG9sZENoaWxkcmVuTGVuZ3RoOyBqKz0yYCBpcyBhbiBhbHRlcm5hdGl2ZSB0byBgaisrPG9sZENoaWxkcmVuTGVuZ3RoLzJgXG5cdFx0XHRmb3IgKFxuXHRcdFx0XHRsZXQgc2liRG9tID0gb2xkRG9tLCBqID0gMDtcblx0XHRcdFx0KHNpYkRvbSA9IHNpYkRvbS5uZXh0U2libGluZykgJiYgaiA8IG9sZENoaWxkcmVuLmxlbmd0aDtcblx0XHRcdFx0aiArPSAyXG5cdFx0XHQpIHtcblx0XHRcdFx0aWYgKHNpYkRvbSA9PSBuZXdEb20pIHtcblx0XHRcdFx0XHRicmVhayBvdXRlcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cGFyZW50RG9tLmluc2VydEJlZm9yZShuZXdEb20sIG9sZERvbSk7XG5cdFx0XHRuZXh0RG9tID0gb2xkRG9tO1xuXHRcdH1cblx0fVxuXG5cdC8vIElmIHdlIGhhdmUgcHJlLWNhbGN1bGF0ZWQgdGhlIG5leHRET00gbm9kZSwgdXNlIGl0LiBFbHNlIGNhbGN1bGF0ZSBpdCBub3dcblx0Ly8gU3RyaWN0bHkgY2hlY2sgZm9yIGB1bmRlZmluZWRgIGhlcmUgY3V6IGBudWxsYCBpcyBhIHZhbGlkIHZhbHVlIG9mIGBuZXh0RG9tYC5cblx0Ly8gU2VlIG1vcmUgZGV0YWlsIGluIGNyZWF0ZS1lbGVtZW50LmpzOmNyZWF0ZVZOb2RlXG5cdGlmIChuZXh0RG9tICE9PSB1bmRlZmluZWQpIHtcblx0XHRvbGREb20gPSBuZXh0RG9tO1xuXHR9IGVsc2Uge1xuXHRcdG9sZERvbSA9IG5ld0RvbS5uZXh0U2libGluZztcblx0fVxuXG5cdHJldHVybiBvbGREb207XG59XG4iLCAiaW1wb3J0IHsgSVNfTk9OX0RJTUVOU0lPTkFMIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCBvcHRpb25zIGZyb20gJy4uL29wdGlvbnMnO1xuXG4vKipcbiAqIERpZmYgdGhlIG9sZCBhbmQgbmV3IHByb3BlcnRpZXMgb2YgYSBWTm9kZSBhbmQgYXBwbHkgY2hhbmdlcyB0byB0aGUgRE9NIG5vZGVcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnR9IGRvbSBUaGUgRE9NIG5vZGUgdG8gYXBwbHlcbiAqIGNoYW5nZXMgdG9cbiAqIEBwYXJhbSB7b2JqZWN0fSBuZXdQcm9wcyBUaGUgbmV3IHByb3BzXG4gKiBAcGFyYW0ge29iamVjdH0gb2xkUHJvcHMgVGhlIG9sZCBwcm9wc1xuICogQHBhcmFtIHtib29sZWFufSBpc1N2ZyBXaGV0aGVyIG9yIG5vdCB0aGlzIG5vZGUgaXMgYW4gU1ZHIG5vZGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaHlkcmF0ZSBXaGV0aGVyIG9yIG5vdCB3ZSBhcmUgaW4gaHlkcmF0aW9uIG1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZQcm9wcyhkb20sIG5ld1Byb3BzLCBvbGRQcm9wcywgaXNTdmcsIGh5ZHJhdGUpIHtcblx0bGV0IGk7XG5cblx0Zm9yIChpIGluIG9sZFByb3BzKSB7XG5cdFx0aWYgKGkgIT09ICdjaGlsZHJlbicgJiYgaSAhPT0gJ2tleScgJiYgIShpIGluIG5ld1Byb3BzKSkge1xuXHRcdFx0c2V0UHJvcGVydHkoZG9tLCBpLCBudWxsLCBvbGRQcm9wc1tpXSwgaXNTdmcpO1xuXHRcdH1cblx0fVxuXG5cdGZvciAoaSBpbiBuZXdQcm9wcykge1xuXHRcdGlmIChcblx0XHRcdCghaHlkcmF0ZSB8fCB0eXBlb2YgbmV3UHJvcHNbaV0gPT0gJ2Z1bmN0aW9uJykgJiZcblx0XHRcdGkgIT09ICdjaGlsZHJlbicgJiZcblx0XHRcdGkgIT09ICdrZXknICYmXG5cdFx0XHRpICE9PSAndmFsdWUnICYmXG5cdFx0XHRpICE9PSAnY2hlY2tlZCcgJiZcblx0XHRcdG9sZFByb3BzW2ldICE9PSBuZXdQcm9wc1tpXVxuXHRcdCkge1xuXHRcdFx0c2V0UHJvcGVydHkoZG9tLCBpLCBuZXdQcm9wc1tpXSwgb2xkUHJvcHNbaV0sIGlzU3ZnKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0U3R5bGUoc3R5bGUsIGtleSwgdmFsdWUpIHtcblx0aWYgKGtleVswXSA9PT0gJy0nKSB7XG5cdFx0c3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG5cdH0gZWxzZSBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHRcdHN0eWxlW2tleV0gPSAnJztcblx0fSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT0gJ251bWJlcicgfHwgSVNfTk9OX0RJTUVOU0lPTkFMLnRlc3Qoa2V5KSkge1xuXHRcdHN0eWxlW2tleV0gPSB2YWx1ZTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZVtrZXldID0gdmFsdWUgKyAncHgnO1xuXHR9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcGVydHkgdmFsdWUgb24gYSBET00gbm9kZVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH0gZG9tIFRoZSBET00gbm9kZSB0byBtb2RpZnlcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBzZXRcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldCB0aGUgcHJvcGVydHkgdG9cbiAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgVGhlIG9sZCB2YWx1ZSB0aGUgcHJvcGVydHkgaGFkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzU3ZnIFdoZXRoZXIgb3Igbm90IHRoaXMgRE9NIG5vZGUgaXMgYW4gU1ZHIG5vZGUgb3Igbm90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRQcm9wZXJ0eShkb20sIG5hbWUsIHZhbHVlLCBvbGRWYWx1ZSwgaXNTdmcpIHtcblx0bGV0IHVzZUNhcHR1cmU7XG5cblx0bzogaWYgKG5hbWUgPT09ICdzdHlsZScpIHtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdFx0XHRkb20uc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodHlwZW9mIG9sZFZhbHVlID09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGRvbS5zdHlsZS5jc3NUZXh0ID0gb2xkVmFsdWUgPSAnJztcblx0XHRcdH1cblxuXHRcdFx0aWYgKG9sZFZhbHVlKSB7XG5cdFx0XHRcdGZvciAobmFtZSBpbiBvbGRWYWx1ZSkge1xuXHRcdFx0XHRcdGlmICghKHZhbHVlICYmIG5hbWUgaW4gdmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRzZXRTdHlsZShkb20uc3R5bGUsIG5hbWUsICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdGZvciAobmFtZSBpbiB2YWx1ZSkge1xuXHRcdFx0XHRcdGlmICghb2xkVmFsdWUgfHwgdmFsdWVbbmFtZV0gIT09IG9sZFZhbHVlW25hbWVdKSB7XG5cdFx0XHRcdFx0XHRzZXRTdHlsZShkb20uc3R5bGUsIG5hbWUsIHZhbHVlW25hbWVdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Ly8gQmVuY2htYXJrIGZvciBjb21wYXJpc29uOiBodHRwczovL2VzYmVuY2guY29tL2JlbmNoLzU3NGM5NTRiZGI5NjViOWEwMDk2NWFjNlxuXHRlbHNlIGlmIChuYW1lWzBdID09PSAnbycgJiYgbmFtZVsxXSA9PT0gJ24nKSB7XG5cdFx0dXNlQ2FwdHVyZSA9IG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9DYXB0dXJlJC8sICcnKSk7XG5cblx0XHQvLyBJbmZlciBjb3JyZWN0IGNhc2luZyBmb3IgRE9NIGJ1aWx0LWluIGV2ZW50czpcblx0XHRpZiAobmFtZS50b0xvd2VyQ2FzZSgpIGluIGRvbSkgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zbGljZSgyKTtcblx0XHRlbHNlIG5hbWUgPSBuYW1lLnNsaWNlKDIpO1xuXG5cdFx0aWYgKCFkb20uX2xpc3RlbmVycykgZG9tLl9saXN0ZW5lcnMgPSB7fTtcblx0XHRkb20uX2xpc3RlbmVyc1tuYW1lICsgdXNlQ2FwdHVyZV0gPSB2YWx1ZTtcblxuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0aWYgKCFvbGRWYWx1ZSkge1xuXHRcdFx0XHRjb25zdCBoYW5kbGVyID0gdXNlQ2FwdHVyZSA/IGV2ZW50UHJveHlDYXB0dXJlIDogZXZlbnRQcm94eTtcblx0XHRcdFx0ZG9tLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGhhbmRsZXIgPSB1c2VDYXB0dXJlID8gZXZlbnRQcm94eUNhcHR1cmUgOiBldmVudFByb3h5O1xuXHRcdFx0ZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG5hbWUgIT09ICdkYW5nZXJvdXNseVNldElubmVySFRNTCcpIHtcblx0XHRpZiAoaXNTdmcpIHtcblx0XHRcdC8vIE5vcm1hbGl6ZSBpbmNvcnJlY3QgcHJvcCB1c2FnZSBmb3IgU1ZHOlxuXHRcdFx0Ly8gLSB4bGluazpocmVmIC8geGxpbmtIcmVmIC0tPiBocmVmICh4bGluazpocmVmIHdhcyByZW1vdmVkIGZyb20gU1ZHIGFuZCBpc24ndCBuZWVkZWQpXG5cdFx0XHQvLyAtIGNsYXNzTmFtZSAtLT4gY2xhc3Ncblx0XHRcdG5hbWUgPSBuYW1lLnJlcGxhY2UoL3hsaW5rKEh8OmgpLywgJ2gnKS5yZXBsYWNlKC9zTmFtZSQvLCAncycpO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRuYW1lICE9PSAnaHJlZicgJiZcblx0XHRcdG5hbWUgIT09ICdsaXN0JyAmJlxuXHRcdFx0bmFtZSAhPT0gJ2Zvcm0nICYmXG5cdFx0XHQvLyBEZWZhdWx0IHZhbHVlIGluIGJyb3dzZXJzIGlzIGAtMWAgYW5kIGFuIGVtcHR5IHN0cmluZyBpc1xuXHRcdFx0Ly8gY2FzdCB0byBgMGAgaW5zdGVhZFxuXHRcdFx0bmFtZSAhPT0gJ3RhYkluZGV4JyAmJlxuXHRcdFx0bmFtZSAhPT0gJ2Rvd25sb2FkJyAmJlxuXHRcdFx0bmFtZSBpbiBkb21cblx0XHQpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRvbVtuYW1lXSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuXHRcdFx0XHQvLyBsYWJlbGxlZCBicmVhayBpcyAxYiBzbWFsbGVyIGhlcmUgdGhhbiBhIHJldHVybiBzdGF0ZW1lbnQgKHNvcnJ5KVxuXHRcdFx0XHRicmVhayBvO1xuXHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHR9XG5cblx0XHQvLyBBUklBLWF0dHJpYnV0ZXMgaGF2ZSBhIGRpZmZlcmVudCBub3Rpb24gb2YgYm9vbGVhbiB2YWx1ZXMuXG5cdFx0Ly8gVGhlIHZhbHVlIGBmYWxzZWAgaXMgZGlmZmVyZW50IGZyb20gdGhlIGF0dHJpYnV0ZSBub3Rcblx0XHQvLyBleGlzdGluZyBvbiB0aGUgRE9NLCBzbyB3ZSBjYW4ndCByZW1vdmUgaXQuIEZvciBub24tYm9vbGVhblxuXHRcdC8vIEFSSUEtYXR0cmlidXRlcyB3ZSBjb3VsZCB0cmVhdCBmYWxzZSBhcyBhIHJlbW92YWwsIGJ1dCB0aGVcblx0XHQvLyBhbW91bnQgb2YgZXhjZXB0aW9ucyB3b3VsZCBjb3N0IHVzIHRvbyBtYW55IGJ5dGVzLiBPbiB0b3Agb2Zcblx0XHQvLyB0aGF0IG90aGVyIFZET00gZnJhbWV3b3JrcyBhbHNvIGFsd2F5cyBzdHJpbmdpZnkgYGZhbHNlYC5cblxuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdC8vIG5ldmVyIHNlcmlhbGl6ZSBmdW5jdGlvbnMgYXMgYXR0cmlidXRlIHZhbHVlc1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHR2YWx1ZSAhPSBudWxsICYmXG5cdFx0XHQodmFsdWUgIT09IGZhbHNlIHx8IChuYW1lWzBdID09PSAnYScgJiYgbmFtZVsxXSA9PT0gJ3InKSlcblx0XHQpIHtcblx0XHRcdGRvbS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkb20ucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFByb3h5IGFuIGV2ZW50IHRvIGhvb2tlZCBldmVudCBoYW5kbGVyc1xuICogQHBhcmFtIHtFdmVudH0gZSBUaGUgZXZlbnQgb2JqZWN0IGZyb20gdGhlIGJyb3dzZXJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV2ZW50UHJveHkoZSkge1xuXHR0aGlzLl9saXN0ZW5lcnNbZS50eXBlICsgZmFsc2VdKG9wdGlvbnMuZXZlbnQgPyBvcHRpb25zLmV2ZW50KGUpIDogZSk7XG59XG5cbmZ1bmN0aW9uIGV2ZW50UHJveHlDYXB0dXJlKGUpIHtcblx0dGhpcy5fbGlzdGVuZXJzW2UudHlwZSArIHRydWVdKG9wdGlvbnMuZXZlbnQgPyBvcHRpb25zLmV2ZW50KGUpIDogZSk7XG59XG4iLCAiaW1wb3J0IHsgRU1QVFlfT0JKIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IENvbXBvbmVudCwgZ2V0RG9tU2libGluZyB9IGZyb20gJy4uL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBGcmFnbWVudCB9IGZyb20gJy4uL2NyZWF0ZS1lbGVtZW50JztcbmltcG9ydCB7IGRpZmZDaGlsZHJlbiB9IGZyb20gJy4vY2hpbGRyZW4nO1xuaW1wb3J0IHsgZGlmZlByb3BzLCBzZXRQcm9wZXJ0eSB9IGZyb20gJy4vcHJvcHMnO1xuaW1wb3J0IHsgYXNzaWduLCByZW1vdmVOb2RlLCBzbGljZSB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IG9wdGlvbnMgZnJvbSAnLi4vb3B0aW9ucyc7XG5cbi8qKlxuICogRGlmZiB0d28gdmlydHVhbCBub2RlcyBhbmQgYXBwbHkgcHJvcGVyIGNoYW5nZXMgdG8gdGhlIERPTVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH0gcGFyZW50RG9tIFRoZSBwYXJlbnQgb2YgdGhlIERPTSBlbGVtZW50XG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5WTm9kZX0gbmV3Vk5vZGUgVGhlIG5ldyB2aXJ0dWFsIG5vZGVcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlZOb2RlfSBvbGRWTm9kZSBUaGUgb2xkIHZpcnR1YWwgbm9kZVxuICogQHBhcmFtIHtvYmplY3R9IGdsb2JhbENvbnRleHQgVGhlIGN1cnJlbnQgY29udGV4dCBvYmplY3QuIE1vZGlmaWVkIGJ5IGdldENoaWxkQ29udGV4dFxuICogQHBhcmFtIHtib29sZWFufSBpc1N2ZyBXaGV0aGVyIG9yIG5vdCB0aGlzIGVsZW1lbnQgaXMgYW4gU1ZHIG5vZGVcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnQ+fSBleGNlc3NEb21DaGlsZHJlblxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoJy4uL2ludGVybmFsJykuQ29tcG9uZW50Pn0gY29tbWl0UXVldWUgTGlzdCBvZiBjb21wb25lbnRzXG4gKiB3aGljaCBoYXZlIGNhbGxiYWNrcyB0byBpbnZva2UgaW4gY29tbWl0Um9vdFxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH0gb2xkRG9tIFRoZSBjdXJyZW50IGF0dGFjaGVkIERPTVxuICogZWxlbWVudCBhbnkgbmV3IGRvbSBlbGVtZW50cyBzaG91bGQgYmUgcGxhY2VkIGFyb3VuZC4gTGlrZWx5IGBudWxsYCBvbiBmaXJzdFxuICogcmVuZGVyIChleGNlcHQgd2hlbiBoeWRyYXRpbmcpLiBDYW4gYmUgYSBzaWJsaW5nIERPTSBlbGVtZW50IHdoZW4gZGlmZmluZ1xuICogRnJhZ21lbnRzIHRoYXQgaGF2ZSBzaWJsaW5ncy4gSW4gbW9zdCBjYXNlcywgaXQgc3RhcnRzIG91dCBhcyBgb2xkQ2hpbGRyZW5bMF0uX2RvbWAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0h5ZHJhdGluZ10gV2hldGhlciBvciBub3Qgd2UgYXJlIGluIGh5ZHJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZihcblx0cGFyZW50RG9tLFxuXHRuZXdWTm9kZSxcblx0b2xkVk5vZGUsXG5cdGdsb2JhbENvbnRleHQsXG5cdGlzU3ZnLFxuXHRleGNlc3NEb21DaGlsZHJlbixcblx0Y29tbWl0UXVldWUsXG5cdG9sZERvbSxcblx0aXNIeWRyYXRpbmdcbikge1xuXHRsZXQgdG1wLFxuXHRcdG5ld1R5cGUgPSBuZXdWTm9kZS50eXBlO1xuXG5cdC8vIFdoZW4gcGFzc2luZyB0aHJvdWdoIGNyZWF0ZUVsZW1lbnQgaXQgYXNzaWducyB0aGUgb2JqZWN0XG5cdC8vIGNvbnN0cnVjdG9yIGFzIHVuZGVmaW5lZC4gVGhpcyB0byBwcmV2ZW50IEpTT04taW5qZWN0aW9uLlxuXHRpZiAobmV3Vk5vZGUuY29uc3RydWN0b3IgIT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG5cblx0Ly8gSWYgdGhlIHByZXZpb3VzIGRpZmYgYmFpbGVkIG91dCwgcmVzdW1lIGNyZWF0aW5nL2h5ZHJhdGluZy5cblx0aWYgKG9sZFZOb2RlLl9oeWRyYXRpbmcgIT0gbnVsbCkge1xuXHRcdGlzSHlkcmF0aW5nID0gb2xkVk5vZGUuX2h5ZHJhdGluZztcblx0XHRvbGREb20gPSBuZXdWTm9kZS5fZG9tID0gb2xkVk5vZGUuX2RvbTtcblx0XHQvLyBpZiB3ZSByZXN1bWUsIHdlIHdhbnQgdGhlIHRyZWUgdG8gYmUgXCJ1bmxvY2tlZFwiXG5cdFx0bmV3Vk5vZGUuX2h5ZHJhdGluZyA9IG51bGw7XG5cdFx0ZXhjZXNzRG9tQ2hpbGRyZW4gPSBbb2xkRG9tXTtcblx0fVxuXG5cdGlmICgodG1wID0gb3B0aW9ucy5fZGlmZikpIHRtcChuZXdWTm9kZSk7XG5cblx0dHJ5IHtcblx0XHRvdXRlcjogaWYgKHR5cGVvZiBuZXdUeXBlID09ICdmdW5jdGlvbicpIHtcblx0XHRcdGxldCBjLCBpc05ldywgb2xkUHJvcHMsIG9sZFN0YXRlLCBzbmFwc2hvdCwgY2xlYXJQcm9jZXNzaW5nRXhjZXB0aW9uO1xuXHRcdFx0bGV0IG5ld1Byb3BzID0gbmV3Vk5vZGUucHJvcHM7XG5cblx0XHRcdC8vIE5lY2Vzc2FyeSBmb3IgY3JlYXRlQ29udGV4dCBhcGkuIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSB3aWxsIHBhc3Ncblx0XHRcdC8vIHRoZSBjb250ZXh0IHZhbHVlIGFzIGB0aGlzLmNvbnRleHRgIGp1c3QgZm9yIHRoaXMgY29tcG9uZW50LlxuXHRcdFx0dG1wID0gbmV3VHlwZS5jb250ZXh0VHlwZTtcblx0XHRcdGxldCBwcm92aWRlciA9IHRtcCAmJiBnbG9iYWxDb250ZXh0W3RtcC5faWRdO1xuXHRcdFx0bGV0IGNvbXBvbmVudENvbnRleHQgPSB0bXBcblx0XHRcdFx0PyBwcm92aWRlclxuXHRcdFx0XHRcdD8gcHJvdmlkZXIucHJvcHMudmFsdWVcblx0XHRcdFx0XHQ6IHRtcC5fZGVmYXVsdFZhbHVlXG5cdFx0XHRcdDogZ2xvYmFsQ29udGV4dDtcblxuXHRcdFx0Ly8gR2V0IGNvbXBvbmVudCBhbmQgc2V0IGl0IHRvIGBjYFxuXHRcdFx0aWYgKG9sZFZOb2RlLl9jb21wb25lbnQpIHtcblx0XHRcdFx0YyA9IG5ld1ZOb2RlLl9jb21wb25lbnQgPSBvbGRWTm9kZS5fY29tcG9uZW50O1xuXHRcdFx0XHRjbGVhclByb2Nlc3NpbmdFeGNlcHRpb24gPSBjLl9wcm9jZXNzaW5nRXhjZXB0aW9uID0gYy5fcGVuZGluZ0Vycm9yO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSW5zdGFudGlhdGUgdGhlIG5ldyBjb21wb25lbnRcblx0XHRcdFx0aWYgKCdwcm90b3R5cGUnIGluIG5ld1R5cGUgJiYgbmV3VHlwZS5wcm90b3R5cGUucmVuZGVyKSB7XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZSBUaGUgY2hlY2sgYWJvdmUgdmVyaWZpZXMgdGhhdCBuZXdUeXBlIGlzIHN1cHBvc2UgdG8gYmUgY29uc3RydWN0ZWRcblx0XHRcdFx0XHRuZXdWTm9kZS5fY29tcG9uZW50ID0gYyA9IG5ldyBuZXdUeXBlKG5ld1Byb3BzLCBjb21wb25lbnRDb250ZXh0KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuZXctY2FwXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZSBUcnVzdCBtZSwgQ29tcG9uZW50IGltcGxlbWVudHMgdGhlIGludGVyZmFjZSB3ZSB3YW50XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX2NvbXBvbmVudCA9IGMgPSBuZXcgQ29tcG9uZW50KG5ld1Byb3BzLCBjb21wb25lbnRDb250ZXh0KTtcblx0XHRcdFx0XHRjLmNvbnN0cnVjdG9yID0gbmV3VHlwZTtcblx0XHRcdFx0XHRjLnJlbmRlciA9IGRvUmVuZGVyO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwcm92aWRlcikgcHJvdmlkZXIuc3ViKGMpO1xuXG5cdFx0XHRcdGMucHJvcHMgPSBuZXdQcm9wcztcblx0XHRcdFx0aWYgKCFjLnN0YXRlKSBjLnN0YXRlID0ge307XG5cdFx0XHRcdGMuY29udGV4dCA9IGNvbXBvbmVudENvbnRleHQ7XG5cdFx0XHRcdGMuX2dsb2JhbENvbnRleHQgPSBnbG9iYWxDb250ZXh0O1xuXHRcdFx0XHRpc05ldyA9IGMuX2RpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0Yy5fcmVuZGVyQ2FsbGJhY2tzID0gW107XG5cdFx0XHR9XG5cblx0XHRcdC8vIEludm9rZSBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcblx0XHRcdGlmIChjLl9uZXh0U3RhdGUgPT0gbnVsbCkge1xuXHRcdFx0XHRjLl9uZXh0U3RhdGUgPSBjLnN0YXRlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG5ld1R5cGUuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzICE9IG51bGwpIHtcblx0XHRcdFx0aWYgKGMuX25leHRTdGF0ZSA9PSBjLnN0YXRlKSB7XG5cdFx0XHRcdFx0Yy5fbmV4dFN0YXRlID0gYXNzaWduKHt9LCBjLl9uZXh0U3RhdGUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YXNzaWduKFxuXHRcdFx0XHRcdGMuX25leHRTdGF0ZSxcblx0XHRcdFx0XHRuZXdUeXBlLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXdQcm9wcywgYy5fbmV4dFN0YXRlKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRvbGRQcm9wcyA9IGMucHJvcHM7XG5cdFx0XHRvbGRTdGF0ZSA9IGMuc3RhdGU7XG5cblx0XHRcdC8vIEludm9rZSBwcmUtcmVuZGVyIGxpZmVjeWNsZSBtZXRob2RzXG5cdFx0XHRpZiAoaXNOZXcpIHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdG5ld1R5cGUuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID09IG51bGwgJiZcblx0XHRcdFx0XHRjLmNvbXBvbmVudFdpbGxNb3VudCAhPSBudWxsXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGMuY29tcG9uZW50V2lsbE1vdW50KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYy5jb21wb25lbnREaWRNb3VudCAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Yy5fcmVuZGVyQ2FsbGJhY2tzLnB1c2goYy5jb21wb25lbnREaWRNb3VudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRuZXdUeXBlLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9PSBudWxsICYmXG5cdFx0XHRcdFx0bmV3UHJvcHMgIT09IG9sZFByb3BzICYmXG5cdFx0XHRcdFx0Yy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzICE9IG51bGxcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Yy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5ld1Byb3BzLCBjb21wb25lbnRDb250ZXh0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQoIWMuX2ZvcmNlICYmXG5cdFx0XHRcdFx0XHRjLnNob3VsZENvbXBvbmVudFVwZGF0ZSAhPSBudWxsICYmXG5cdFx0XHRcdFx0XHRjLnNob3VsZENvbXBvbmVudFVwZGF0ZShcblx0XHRcdFx0XHRcdFx0bmV3UHJvcHMsXG5cdFx0XHRcdFx0XHRcdGMuX25leHRTdGF0ZSxcblx0XHRcdFx0XHRcdFx0Y29tcG9uZW50Q29udGV4dFxuXHRcdFx0XHRcdFx0KSA9PT0gZmFsc2UpIHx8XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX29yaWdpbmFsID09PSBvbGRWTm9kZS5fb3JpZ2luYWxcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Yy5wcm9wcyA9IG5ld1Byb3BzO1xuXHRcdFx0XHRcdGMuc3RhdGUgPSBjLl9uZXh0U3RhdGU7XG5cdFx0XHRcdFx0Ly8gTW9yZSBpbmZvIGFib3V0IHRoaXMgaGVyZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vSm92aURlQ3Jvb2NrL2JlYzVmMmNlOTM1NDRkMmU2MDcwZWY4ZTAwMzZlNGU4XG5cdFx0XHRcdFx0aWYgKG5ld1ZOb2RlLl9vcmlnaW5hbCAhPT0gb2xkVk5vZGUuX29yaWdpbmFsKSBjLl9kaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHRcdGMuX3Zub2RlID0gbmV3Vk5vZGU7XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX2RvbSA9IG9sZFZOb2RlLl9kb207XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX2NoaWxkcmVuID0gb2xkVk5vZGUuX2NoaWxkcmVuO1xuXHRcdFx0XHRcdG5ld1ZOb2RlLl9jaGlsZHJlbi5mb3JFYWNoKHZub2RlID0+IHtcblx0XHRcdFx0XHRcdGlmICh2bm9kZSkgdm5vZGUuX3BhcmVudCA9IG5ld1ZOb2RlO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChjLl9yZW5kZXJDYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRjb21taXRRdWV1ZS5wdXNoKGMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrIG91dGVyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGMuY29tcG9uZW50V2lsbFVwZGF0ZSAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Yy5jb21wb25lbnRXaWxsVXBkYXRlKG5ld1Byb3BzLCBjLl9uZXh0U3RhdGUsIGNvbXBvbmVudENvbnRleHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGMuY29tcG9uZW50RGlkVXBkYXRlICE9IG51bGwpIHtcblx0XHRcdFx0XHRjLl9yZW5kZXJDYWxsYmFja3MucHVzaCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRjLmNvbXBvbmVudERpZFVwZGF0ZShvbGRQcm9wcywgb2xkU3RhdGUsIHNuYXBzaG90KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjLmNvbnRleHQgPSBjb21wb25lbnRDb250ZXh0O1xuXHRcdFx0Yy5wcm9wcyA9IG5ld1Byb3BzO1xuXHRcdFx0Yy5zdGF0ZSA9IGMuX25leHRTdGF0ZTtcblxuXHRcdFx0aWYgKCh0bXAgPSBvcHRpb25zLl9yZW5kZXIpKSB0bXAobmV3Vk5vZGUpO1xuXG5cdFx0XHRjLl9kaXJ0eSA9IGZhbHNlO1xuXHRcdFx0Yy5fdm5vZGUgPSBuZXdWTm9kZTtcblx0XHRcdGMuX3BhcmVudERvbSA9IHBhcmVudERvbTtcblxuXHRcdFx0dG1wID0gYy5yZW5kZXIoYy5wcm9wcywgYy5zdGF0ZSwgYy5jb250ZXh0KTtcblxuXHRcdFx0Ly8gSGFuZGxlIHNldFN0YXRlIGNhbGxlZCBpbiByZW5kZXIsIHNlZSAjMjU1M1xuXHRcdFx0Yy5zdGF0ZSA9IGMuX25leHRTdGF0ZTtcblxuXHRcdFx0aWYgKGMuZ2V0Q2hpbGRDb250ZXh0ICE9IG51bGwpIHtcblx0XHRcdFx0Z2xvYmFsQ29udGV4dCA9IGFzc2lnbihhc3NpZ24oe30sIGdsb2JhbENvbnRleHQpLCBjLmdldENoaWxkQ29udGV4dCgpKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFpc05ldyAmJiBjLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlICE9IG51bGwpIHtcblx0XHRcdFx0c25hcHNob3QgPSBjLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKG9sZFByb3BzLCBvbGRTdGF0ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBpc1RvcExldmVsRnJhZ21lbnQgPVxuXHRcdFx0XHR0bXAgIT0gbnVsbCAmJiB0bXAudHlwZSA9PT0gRnJhZ21lbnQgJiYgdG1wLmtleSA9PSBudWxsO1xuXHRcdFx0bGV0IHJlbmRlclJlc3VsdCA9IGlzVG9wTGV2ZWxGcmFnbWVudCA/IHRtcC5wcm9wcy5jaGlsZHJlbiA6IHRtcDtcblxuXHRcdFx0ZGlmZkNoaWxkcmVuKFxuXHRcdFx0XHRwYXJlbnREb20sXG5cdFx0XHRcdEFycmF5LmlzQXJyYXkocmVuZGVyUmVzdWx0KSA/IHJlbmRlclJlc3VsdCA6IFtyZW5kZXJSZXN1bHRdLFxuXHRcdFx0XHRuZXdWTm9kZSxcblx0XHRcdFx0b2xkVk5vZGUsXG5cdFx0XHRcdGdsb2JhbENvbnRleHQsXG5cdFx0XHRcdGlzU3ZnLFxuXHRcdFx0XHRleGNlc3NEb21DaGlsZHJlbixcblx0XHRcdFx0Y29tbWl0UXVldWUsXG5cdFx0XHRcdG9sZERvbSxcblx0XHRcdFx0aXNIeWRyYXRpbmdcblx0XHRcdCk7XG5cblx0XHRcdGMuYmFzZSA9IG5ld1ZOb2RlLl9kb207XG5cblx0XHRcdC8vIFdlIHN1Y2Nlc3NmdWxseSByZW5kZXJlZCB0aGlzIFZOb2RlLCB1bnNldCBhbnkgc3RvcmVkIGh5ZHJhdGlvbi9iYWlsb3V0IHN0YXRlOlxuXHRcdFx0bmV3Vk5vZGUuX2h5ZHJhdGluZyA9IG51bGw7XG5cblx0XHRcdGlmIChjLl9yZW5kZXJDYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRcdGNvbW1pdFF1ZXVlLnB1c2goYyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjbGVhclByb2Nlc3NpbmdFeGNlcHRpb24pIHtcblx0XHRcdFx0Yy5fcGVuZGluZ0Vycm9yID0gYy5fcHJvY2Vzc2luZ0V4Y2VwdGlvbiA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGMuX2ZvcmNlID0gZmFsc2U7XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdGV4Y2Vzc0RvbUNoaWxkcmVuID09IG51bGwgJiZcblx0XHRcdG5ld1ZOb2RlLl9vcmlnaW5hbCA9PT0gb2xkVk5vZGUuX29yaWdpbmFsXG5cdFx0KSB7XG5cdFx0XHRuZXdWTm9kZS5fY2hpbGRyZW4gPSBvbGRWTm9kZS5fY2hpbGRyZW47XG5cdFx0XHRuZXdWTm9kZS5fZG9tID0gb2xkVk5vZGUuX2RvbTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV3Vk5vZGUuX2RvbSA9IGRpZmZFbGVtZW50Tm9kZXMoXG5cdFx0XHRcdG9sZFZOb2RlLl9kb20sXG5cdFx0XHRcdG5ld1ZOb2RlLFxuXHRcdFx0XHRvbGRWTm9kZSxcblx0XHRcdFx0Z2xvYmFsQ29udGV4dCxcblx0XHRcdFx0aXNTdmcsXG5cdFx0XHRcdGV4Y2Vzc0RvbUNoaWxkcmVuLFxuXHRcdFx0XHRjb21taXRRdWV1ZSxcblx0XHRcdFx0aXNIeWRyYXRpbmdcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKCh0bXAgPSBvcHRpb25zLmRpZmZlZCkpIHRtcChuZXdWTm9kZSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRuZXdWTm9kZS5fb3JpZ2luYWwgPSBudWxsO1xuXHRcdC8vIGlmIGh5ZHJhdGluZyBvciBjcmVhdGluZyBpbml0aWFsIHRyZWUsIGJhaWxvdXQgcHJlc2VydmVzIERPTTpcblx0XHRpZiAoaXNIeWRyYXRpbmcgfHwgZXhjZXNzRG9tQ2hpbGRyZW4gIT0gbnVsbCkge1xuXHRcdFx0bmV3Vk5vZGUuX2RvbSA9IG9sZERvbTtcblx0XHRcdG5ld1ZOb2RlLl9oeWRyYXRpbmcgPSAhIWlzSHlkcmF0aW5nO1xuXHRcdFx0ZXhjZXNzRG9tQ2hpbGRyZW5bZXhjZXNzRG9tQ2hpbGRyZW4uaW5kZXhPZihvbGREb20pXSA9IG51bGw7XG5cdFx0XHQvLyBeIGNvdWxkIHBvc3NpYmx5IGJlIHNpbXBsaWZpZWQgdG86XG5cdFx0XHQvLyBleGNlc3NEb21DaGlsZHJlbi5sZW5ndGggPSAwO1xuXHRcdH1cblx0XHRvcHRpb25zLl9jYXRjaEVycm9yKGUsIG5ld1ZOb2RlLCBvbGRWTm9kZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydCgnLi4vaW50ZXJuYWwnKS5Db21wb25lbnQ+fSBjb21taXRRdWV1ZSBMaXN0IG9mIGNvbXBvbmVudHNcbiAqIHdoaWNoIGhhdmUgY2FsbGJhY2tzIHRvIGludm9rZSBpbiBjb21taXRSb290XG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5WTm9kZX0gcm9vdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tbWl0Um9vdChjb21taXRRdWV1ZSwgcm9vdCkge1xuXHRpZiAob3B0aW9ucy5fY29tbWl0KSBvcHRpb25zLl9jb21taXQocm9vdCwgY29tbWl0UXVldWUpO1xuXG5cdGNvbW1pdFF1ZXVlLnNvbWUoYyA9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEB0cy1pZ25vcmUgUmV1c2UgdGhlIGNvbW1pdFF1ZXVlIHZhcmlhYmxlIGhlcmUgc28gdGhlIHR5cGUgY2hhbmdlc1xuXHRcdFx0Y29tbWl0UXVldWUgPSBjLl9yZW5kZXJDYWxsYmFja3M7XG5cdFx0XHRjLl9yZW5kZXJDYWxsYmFja3MgPSBbXTtcblx0XHRcdGNvbW1pdFF1ZXVlLnNvbWUoY2IgPT4ge1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlIFNlZSBhYm92ZSB0cy1pZ25vcmUgb24gY29tbWl0UXVldWVcblx0XHRcdFx0Y2IuY2FsbChjKTtcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG9wdGlvbnMuX2NhdGNoRXJyb3IoZSwgYy5fdm5vZGUpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogRGlmZiB0d28gdmlydHVhbCBub2RlcyByZXByZXNlbnRpbmcgRE9NIGVsZW1lbnRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnR9IGRvbSBUaGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nXG4gKiB0aGUgdmlydHVhbCBub2RlcyBiZWluZyBkaWZmZWRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlZOb2RlfSBuZXdWTm9kZSBUaGUgbmV3IHZpcnR1YWwgbm9kZVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuVk5vZGV9IG9sZFZOb2RlIFRoZSBvbGQgdmlydHVhbCBub2RlXG4gKiBAcGFyYW0ge29iamVjdH0gZ2xvYmFsQ29udGV4dCBUaGUgY3VycmVudCBjb250ZXh0IG9iamVjdFxuICogQHBhcmFtIHtib29sZWFufSBpc1N2ZyBXaGV0aGVyIG9yIG5vdCB0aGlzIERPTSBub2RlIGlzIGFuIFNWRyBub2RlXG4gKiBAcGFyYW0geyp9IGV4Y2Vzc0RvbUNoaWxkcmVuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydCgnLi4vaW50ZXJuYWwnKS5Db21wb25lbnQ+fSBjb21taXRRdWV1ZSBMaXN0IG9mIGNvbXBvbmVudHNcbiAqIHdoaWNoIGhhdmUgY2FsbGJhY2tzIHRvIGludm9rZSBpbiBjb21taXRSb290XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzSHlkcmF0aW5nIFdoZXRoZXIgb3Igbm90IHdlIGFyZSBpbiBoeWRyYXRpb25cbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4uL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gZGlmZkVsZW1lbnROb2Rlcyhcblx0ZG9tLFxuXHRuZXdWTm9kZSxcblx0b2xkVk5vZGUsXG5cdGdsb2JhbENvbnRleHQsXG5cdGlzU3ZnLFxuXHRleGNlc3NEb21DaGlsZHJlbixcblx0Y29tbWl0UXVldWUsXG5cdGlzSHlkcmF0aW5nXG4pIHtcblx0bGV0IG9sZFByb3BzID0gb2xkVk5vZGUucHJvcHM7XG5cdGxldCBuZXdQcm9wcyA9IG5ld1ZOb2RlLnByb3BzO1xuXHRsZXQgbm9kZVR5cGUgPSBuZXdWTm9kZS50eXBlO1xuXHRsZXQgaSA9IDA7XG5cblx0Ly8gVHJhY2tzIGVudGVyaW5nIGFuZCBleGl0aW5nIFNWRyBuYW1lc3BhY2Ugd2hlbiBkZXNjZW5kaW5nIHRocm91Z2ggdGhlIHRyZWUuXG5cdGlmIChub2RlVHlwZSA9PT0gJ3N2ZycpIGlzU3ZnID0gdHJ1ZTtcblxuXHRpZiAoZXhjZXNzRG9tQ2hpbGRyZW4gIT0gbnVsbCkge1xuXHRcdGZvciAoOyBpIDwgZXhjZXNzRG9tQ2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGNoaWxkID0gZXhjZXNzRG9tQ2hpbGRyZW5baV07XG5cblx0XHRcdC8vIGlmIG5ld1ZOb2RlIG1hdGNoZXMgYW4gZWxlbWVudCBpbiBleGNlc3NEb21DaGlsZHJlbiBvciB0aGUgYGRvbWBcblx0XHRcdC8vIGFyZ3VtZW50IG1hdGNoZXMgYW4gZWxlbWVudCBpbiBleGNlc3NEb21DaGlsZHJlbiwgcmVtb3ZlIGl0IGZyb21cblx0XHRcdC8vIGV4Y2Vzc0RvbUNoaWxkcmVuIHNvIGl0IGlzbid0IGxhdGVyIHJlbW92ZWQgaW4gZGlmZkNoaWxkcmVuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGNoaWxkICYmXG5cdFx0XHRcdCdzZXRBdHRyaWJ1dGUnIGluIGNoaWxkID09PSAhIW5vZGVUeXBlICYmXG5cdFx0XHRcdChub2RlVHlwZSA/IGNoaWxkLmxvY2FsTmFtZSA9PT0gbm9kZVR5cGUgOiBjaGlsZC5ub2RlVHlwZSA9PT0gMylcblx0XHRcdCkge1xuXHRcdFx0XHRkb20gPSBjaGlsZDtcblx0XHRcdFx0ZXhjZXNzRG9tQ2hpbGRyZW5baV0gPSBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoZG9tID09IG51bGwpIHtcblx0XHRpZiAobm9kZVR5cGUgPT09IG51bGwpIHtcblx0XHRcdC8vIEB0cy1pZ25vcmUgY3JlYXRlVGV4dE5vZGUgcmV0dXJucyBUZXh0LCB3ZSBleHBlY3QgUHJlYWN0RWxlbWVudFxuXHRcdFx0cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5ld1Byb3BzKTtcblx0XHR9XG5cblx0XHRpZiAoaXNTdmcpIHtcblx0XHRcdGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcblx0XHRcdFx0J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZSBXZSBrbm93IGBuZXdWTm9kZS50eXBlYCBpcyBhIHN0cmluZ1xuXHRcdFx0XHRub2RlVHlwZVxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZSBXZSBrbm93IGBuZXdWTm9kZS50eXBlYCBpcyBhIHN0cmluZ1xuXHRcdFx0XHRub2RlVHlwZSxcblx0XHRcdFx0bmV3UHJvcHMuaXMgJiYgbmV3UHJvcHNcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gd2UgY3JlYXRlZCBhIG5ldyBwYXJlbnQsIHNvIG5vbmUgb2YgdGhlIHByZXZpb3VzbHkgYXR0YWNoZWQgY2hpbGRyZW4gY2FuIGJlIHJldXNlZDpcblx0XHRleGNlc3NEb21DaGlsZHJlbiA9IG51bGw7XG5cdFx0Ly8gd2UgYXJlIGNyZWF0aW5nIGEgbmV3IG5vZGUsIHNvIHdlIGNhbiBhc3N1bWUgdGhpcyBpcyBhIG5ldyBzdWJ0cmVlIChpbiBjYXNlIHdlIGFyZSBoeWRyYXRpbmcpLCB0aGlzIGRlb3B0cyB0aGUgaHlkcmF0ZVxuXHRcdGlzSHlkcmF0aW5nID0gZmFsc2U7XG5cdH1cblxuXHRpZiAobm9kZVR5cGUgPT09IG51bGwpIHtcblx0XHQvLyBEdXJpbmcgaHlkcmF0aW9uLCB3ZSBzdGlsbCBoYXZlIHRvIHNwbGl0IG1lcmdlZCB0ZXh0IGZyb20gU1NSJ2QgSFRNTC5cblx0XHRpZiAob2xkUHJvcHMgIT09IG5ld1Byb3BzICYmICghaXNIeWRyYXRpbmcgfHwgZG9tLmRhdGEgIT09IG5ld1Byb3BzKSkge1xuXHRcdFx0ZG9tLmRhdGEgPSBuZXdQcm9wcztcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgZXhjZXNzRG9tQ2hpbGRyZW4gd2FzIG5vdCBudWxsLCByZXBvcHVsYXRlIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudCdzIGNoaWxkcmVuOlxuXHRcdGV4Y2Vzc0RvbUNoaWxkcmVuID0gZXhjZXNzRG9tQ2hpbGRyZW4gJiYgc2xpY2UuY2FsbChkb20uY2hpbGROb2Rlcyk7XG5cblx0XHRvbGRQcm9wcyA9IG9sZFZOb2RlLnByb3BzIHx8IEVNUFRZX09CSjtcblxuXHRcdGxldCBvbGRIdG1sID0gb2xkUHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw7XG5cdFx0bGV0IG5ld0h0bWwgPSBuZXdQcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTDtcblxuXHRcdC8vIER1cmluZyBoeWRyYXRpb24sIHByb3BzIGFyZSBub3QgZGlmZmVkIGF0IGFsbCAoaW5jbHVkaW5nIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKVxuXHRcdC8vIEBUT0RPIHdlIHNob3VsZCB3YXJuIGluIGRlYnVnIG1vZGUgd2hlbiBwcm9wcyBkb24ndCBtYXRjaCBoZXJlLlxuXHRcdGlmICghaXNIeWRyYXRpbmcpIHtcblx0XHRcdC8vIEJ1dCwgaWYgd2UgYXJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSB1c2luZyBleGlzdGluZyBET00gKGUuZy4gcmVwbGFjZU5vZGUpXG5cdFx0XHQvLyB3ZSBzaG91bGQgcmVhZCB0aGUgZXhpc3RpbmcgRE9NIGF0dHJpYnV0ZXMgdG8gZGlmZiB0aGVtXG5cdFx0XHRpZiAoZXhjZXNzRG9tQ2hpbGRyZW4gIT0gbnVsbCkge1xuXHRcdFx0XHRvbGRQcm9wcyA9IHt9O1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgZG9tLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRvbGRQcm9wc1tkb20uYXR0cmlidXRlc1tpXS5uYW1lXSA9IGRvbS5hdHRyaWJ1dGVzW2ldLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChuZXdIdG1sIHx8IG9sZEh0bWwpIHtcblx0XHRcdFx0Ly8gQXZvaWQgcmUtYXBwbHlpbmcgdGhlIHNhbWUgJ19faHRtbCcgaWYgaXQgZGlkIG5vdCBjaGFuZ2VkIGJldHdlZW4gcmUtcmVuZGVyXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhbmV3SHRtbCB8fFxuXHRcdFx0XHRcdCgoIW9sZEh0bWwgfHwgbmV3SHRtbC5fX2h0bWwgIT0gb2xkSHRtbC5fX2h0bWwpICYmXG5cdFx0XHRcdFx0XHRuZXdIdG1sLl9faHRtbCAhPT0gZG9tLmlubmVySFRNTClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0ZG9tLmlubmVySFRNTCA9IChuZXdIdG1sICYmIG5ld0h0bWwuX19odG1sKSB8fCAnJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGRpZmZQcm9wcyhkb20sIG5ld1Byb3BzLCBvbGRQcm9wcywgaXNTdmcsIGlzSHlkcmF0aW5nKTtcblxuXHRcdC8vIElmIHRoZSBuZXcgdm5vZGUgZGlkbid0IGhhdmUgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwsIGRpZmYgaXRzIGNoaWxkcmVuXG5cdFx0aWYgKG5ld0h0bWwpIHtcblx0XHRcdG5ld1ZOb2RlLl9jaGlsZHJlbiA9IFtdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpID0gbmV3Vk5vZGUucHJvcHMuY2hpbGRyZW47XG5cdFx0XHRkaWZmQ2hpbGRyZW4oXG5cdFx0XHRcdGRvbSxcblx0XHRcdFx0QXJyYXkuaXNBcnJheShpKSA/IGkgOiBbaV0sXG5cdFx0XHRcdG5ld1ZOb2RlLFxuXHRcdFx0XHRvbGRWTm9kZSxcblx0XHRcdFx0Z2xvYmFsQ29udGV4dCxcblx0XHRcdFx0aXNTdmcgJiYgbm9kZVR5cGUgIT09ICdmb3JlaWduT2JqZWN0Jyxcblx0XHRcdFx0ZXhjZXNzRG9tQ2hpbGRyZW4sXG5cdFx0XHRcdGNvbW1pdFF1ZXVlLFxuXHRcdFx0XHRleGNlc3NEb21DaGlsZHJlblxuXHRcdFx0XHRcdD8gZXhjZXNzRG9tQ2hpbGRyZW5bMF1cblx0XHRcdFx0XHQ6IG9sZFZOb2RlLl9jaGlsZHJlbiAmJiBnZXREb21TaWJsaW5nKG9sZFZOb2RlLCAwKSxcblx0XHRcdFx0aXNIeWRyYXRpbmdcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJlbW92ZSBjaGlsZHJlbiB0aGF0IGFyZSBub3QgcGFydCBvZiBhbnkgdm5vZGUuXG5cdFx0XHRpZiAoZXhjZXNzRG9tQ2hpbGRyZW4gIT0gbnVsbCkge1xuXHRcdFx0XHRmb3IgKGkgPSBleGNlc3NEb21DaGlsZHJlbi5sZW5ndGg7IGktLTsgKSB7XG5cdFx0XHRcdFx0aWYgKGV4Y2Vzc0RvbUNoaWxkcmVuW2ldICE9IG51bGwpIHJlbW92ZU5vZGUoZXhjZXNzRG9tQ2hpbGRyZW5baV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gKGFzIGFib3ZlLCBkb24ndCBkaWZmIHByb3BzIGR1cmluZyBoeWRyYXRpb24pXG5cdFx0aWYgKCFpc0h5ZHJhdGluZykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQndmFsdWUnIGluIG5ld1Byb3BzICYmXG5cdFx0XHRcdChpID0gbmV3UHJvcHMudmFsdWUpICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gIzI3NTYgRm9yIHRoZSA8cHJvZ3Jlc3M+LWVsZW1lbnQgdGhlIGluaXRpYWwgdmFsdWUgaXMgMCxcblx0XHRcdFx0Ly8gZGVzcGl0ZSB0aGUgYXR0cmlidXRlIG5vdCBiZWluZyBwcmVzZW50LiBXaGVuIHRoZSBhdHRyaWJ1dGVcblx0XHRcdFx0Ly8gaXMgbWlzc2luZyB0aGUgcHJvZ3Jlc3MgYmFyIGlzIHRyZWF0ZWQgYXMgaW5kZXRlcm1pbmF0ZS5cblx0XHRcdFx0Ly8gVG8gZml4IHRoYXQgd2UnbGwgYWx3YXlzIHVwZGF0ZSBpdCB3aGVuIGl0IGlzIDAgZm9yIHByb2dyZXNzIGVsZW1lbnRzXG5cdFx0XHRcdChpICE9PSBkb20udmFsdWUgfHxcblx0XHRcdFx0XHQobm9kZVR5cGUgPT09ICdwcm9ncmVzcycgJiYgIWkpIHx8XG5cdFx0XHRcdFx0Ly8gVGhpcyBpcyBvbmx5IGZvciBJRSAxMSB0byBmaXggPHNlbGVjdD4gdmFsdWUgbm90IGJlaW5nIHVwZGF0ZWQuXG5cdFx0XHRcdFx0Ly8gVG8gYXZvaWQgYSBzdGFsZSBzZWxlY3QgdmFsdWUgd2UgbmVlZCB0byBzZXQgdGhlIG9wdGlvbi52YWx1ZVxuXHRcdFx0XHRcdC8vIGFnYWluLCB3aGljaCB0cmlnZ2VycyBJRTExIHRvIHJlLWV2YWx1YXRlIHRoZSBzZWxlY3QgdmFsdWVcblx0XHRcdFx0XHQobm9kZVR5cGUgPT09ICdvcHRpb24nICYmIGkgIT09IG9sZFByb3BzLnZhbHVlKSlcblx0XHRcdCkge1xuXHRcdFx0XHRzZXRQcm9wZXJ0eShkb20sICd2YWx1ZScsIGksIG9sZFByb3BzLnZhbHVlLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoXG5cdFx0XHRcdCdjaGVja2VkJyBpbiBuZXdQcm9wcyAmJlxuXHRcdFx0XHQoaSA9IG5ld1Byb3BzLmNoZWNrZWQpICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0aSAhPT0gZG9tLmNoZWNrZWRcblx0XHRcdCkge1xuXHRcdFx0XHRzZXRQcm9wZXJ0eShkb20sICdjaGVja2VkJywgaSwgb2xkUHJvcHMuY2hlY2tlZCwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBkb207XG59XG5cbi8qKlxuICogSW52b2tlIG9yIHVwZGF0ZSBhIHJlZiwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQgaXMgYSBmdW5jdGlvbiBvciBvYmplY3QgcmVmLlxuICogQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb259IHJlZlxuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5WTm9kZX0gdm5vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UmVmKHJlZiwgdmFsdWUsIHZub2RlKSB7XG5cdHRyeSB7XG5cdFx0aWYgKHR5cGVvZiByZWYgPT0gJ2Z1bmN0aW9uJykgcmVmKHZhbHVlKTtcblx0XHRlbHNlIHJlZi5jdXJyZW50ID0gdmFsdWU7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRvcHRpb25zLl9jYXRjaEVycm9yKGUsIHZub2RlKTtcblx0fVxufVxuXG4vKipcbiAqIFVubW91bnQgYSB2aXJ0dWFsIG5vZGUgZnJvbSB0aGUgdHJlZSBhbmQgYXBwbHkgRE9NIGNoYW5nZXNcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlZOb2RlfSB2bm9kZSBUaGUgdmlydHVhbCBub2RlIHRvIHVubW91bnRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLlZOb2RlfSBwYXJlbnRWTm9kZSBUaGUgcGFyZW50IG9mIHRoZSBWTm9kZSB0aGF0XG4gKiBpbml0aWF0ZWQgdGhlIHVubW91bnRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBSZW1vdmVdIEZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhhdCBhIHBhcmVudCBub2RlIG9mIHRoZVxuICogY3VycmVudCBlbGVtZW50IGlzIGFscmVhZHkgZGV0YWNoZWQgZnJvbSB0aGUgRE9NLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5tb3VudCh2bm9kZSwgcGFyZW50Vk5vZGUsIHNraXBSZW1vdmUpIHtcblx0bGV0IHI7XG5cdGlmIChvcHRpb25zLnVubW91bnQpIG9wdGlvbnMudW5tb3VudCh2bm9kZSk7XG5cblx0aWYgKChyID0gdm5vZGUucmVmKSkge1xuXHRcdGlmICghci5jdXJyZW50IHx8IHIuY3VycmVudCA9PT0gdm5vZGUuX2RvbSkgYXBwbHlSZWYociwgbnVsbCwgcGFyZW50Vk5vZGUpO1xuXHR9XG5cblx0aWYgKChyID0gdm5vZGUuX2NvbXBvbmVudCkgIT0gbnVsbCkge1xuXHRcdGlmIChyLmNvbXBvbmVudFdpbGxVbm1vdW50KSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdG9wdGlvbnMuX2NhdGNoRXJyb3IoZSwgcGFyZW50Vk5vZGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHIuYmFzZSA9IHIuX3BhcmVudERvbSA9IG51bGw7XG5cdH1cblxuXHRpZiAoKHIgPSB2bm9kZS5fY2hpbGRyZW4pKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAocltpXSkge1xuXHRcdFx0XHR1bm1vdW50KHJbaV0sIHBhcmVudFZOb2RlLCB0eXBlb2Ygdm5vZGUudHlwZSAhPSAnZnVuY3Rpb24nKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIXNraXBSZW1vdmUgJiYgdm5vZGUuX2RvbSAhPSBudWxsKSByZW1vdmVOb2RlKHZub2RlLl9kb20pO1xuXG5cdC8vIE11c3QgYmUgc2V0IHRvIGB1bmRlZmluZWRgIHRvIHByb3Blcmx5IGNsZWFuIHVwIGBfbmV4dERvbWBcblx0Ly8gZm9yIHdoaWNoIGBudWxsYCBpcyBhIHZhbGlkIHZhbHVlLiBTZWUgY29tbWVudCBpbiBgY3JlYXRlLWVsZW1lbnQuanNgXG5cdHZub2RlLl9kb20gPSB2bm9kZS5fbmV4dERvbSA9IHVuZGVmaW5lZDtcbn1cblxuLyoqIFRoZSBgLnJlbmRlcigpYCBtZXRob2QgZm9yIGEgUEZDIGJhY2tpbmcgaW5zdGFuY2UuICovXG5mdW5jdGlvbiBkb1JlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpIHtcblx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpO1xufVxuIiwgImltcG9ydCB7IEVNUFRZX09CSiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGNvbW1pdFJvb3QsIGRpZmYgfSBmcm9tICcuL2RpZmYvaW5kZXgnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgRnJhZ21lbnQgfSBmcm9tICcuL2NyZWF0ZS1lbGVtZW50JztcbmltcG9ydCBvcHRpb25zIGZyb20gJy4vb3B0aW9ucyc7XG5pbXBvcnQgeyBzbGljZSB9IGZyb20gJy4vdXRpbCc7XG5cbi8qKlxuICogUmVuZGVyIGEgUHJlYWN0IHZpcnR1YWwgbm9kZSBpbnRvIGEgRE9NIGVsZW1lbnRcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50Q2hpbGR9IHZub2RlIFRoZSB2aXJ0dWFsIG5vZGUgdG8gcmVuZGVyXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnR9IHBhcmVudERvbSBUaGUgRE9NIGVsZW1lbnQgdG9cbiAqIHJlbmRlciBpbnRvXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnQgfCBvYmplY3R9IFtyZXBsYWNlTm9kZV0gT3B0aW9uYWw6IEF0dGVtcHQgdG8gcmUtdXNlIGFuXG4gKiBleGlzdGluZyBET00gdHJlZSByb290ZWQgYXQgYHJlcGxhY2VOb2RlYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKHZub2RlLCBwYXJlbnREb20sIHJlcGxhY2VOb2RlKSB7XG5cdGlmIChvcHRpb25zLl9yb290KSBvcHRpb25zLl9yb290KHZub2RlLCBwYXJlbnREb20pO1xuXG5cdC8vIFdlIGFidXNlIHRoZSBgcmVwbGFjZU5vZGVgIHBhcmFtZXRlciBpbiBgaHlkcmF0ZSgpYCB0byBzaWduYWwgaWYgd2UgYXJlIGluXG5cdC8vIGh5ZHJhdGlvbiBtb2RlIG9yIG5vdCBieSBwYXNzaW5nIHRoZSBgaHlkcmF0ZWAgZnVuY3Rpb24gaW5zdGVhZCBvZiBhIERPTVxuXHQvLyBlbGVtZW50Li5cblx0bGV0IGlzSHlkcmF0aW5nID0gdHlwZW9mIHJlcGxhY2VOb2RlID09PSAnZnVuY3Rpb24nO1xuXG5cdC8vIFRvIGJlIGFibGUgdG8gc3VwcG9ydCBjYWxsaW5nIGByZW5kZXIoKWAgbXVsdGlwbGUgdGltZXMgb24gdGhlIHNhbWVcblx0Ly8gRE9NIG5vZGUsIHdlIG5lZWQgdG8gb2J0YWluIGEgcmVmZXJlbmNlIHRvIHRoZSBwcmV2aW91cyB0cmVlLiBXZSBkb1xuXHQvLyB0aGlzIGJ5IGFzc2lnbmluZyBhIG5ldyBgX2NoaWxkcmVuYCBwcm9wZXJ0eSB0byBET00gbm9kZXMgd2hpY2ggcG9pbnRzXG5cdC8vIHRvIHRoZSBsYXN0IHJlbmRlcmVkIHRyZWUuIEJ5IGRlZmF1bHQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCwgd2hpY2hcblx0Ly8gbWVhbnMgdGhhdCB3ZSBhcmUgbW91bnRpbmcgYSBuZXcgdHJlZSBmb3IgdGhlIGZpcnN0IHRpbWUuXG5cdGxldCBvbGRWTm9kZSA9IGlzSHlkcmF0aW5nXG5cdFx0PyBudWxsXG5cdFx0OiAocmVwbGFjZU5vZGUgJiYgcmVwbGFjZU5vZGUuX2NoaWxkcmVuKSB8fCBwYXJlbnREb20uX2NoaWxkcmVuO1xuXG5cdHZub2RlID0gKFxuXHRcdCghaXNIeWRyYXRpbmcgJiYgcmVwbGFjZU5vZGUpIHx8XG5cdFx0cGFyZW50RG9tXG5cdCkuX2NoaWxkcmVuID0gY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgW3Zub2RlXSk7XG5cblx0Ly8gTGlzdCBvZiBlZmZlY3RzIHRoYXQgbmVlZCB0byBiZSBjYWxsZWQgYWZ0ZXIgZGlmZmluZy5cblx0bGV0IGNvbW1pdFF1ZXVlID0gW107XG5cdGRpZmYoXG5cdFx0cGFyZW50RG9tLFxuXHRcdC8vIERldGVybWluZSB0aGUgbmV3IHZub2RlIHRyZWUgYW5kIHN0b3JlIGl0IG9uIHRoZSBET00gZWxlbWVudCBvblxuXHRcdC8vIG91ciBjdXN0b20gYF9jaGlsZHJlbmAgcHJvcGVydHkuXG5cdFx0dm5vZGUsXG5cdFx0b2xkVk5vZGUgfHwgRU1QVFlfT0JKLFxuXHRcdEVNUFRZX09CSixcblx0XHRwYXJlbnREb20ub3duZXJTVkdFbGVtZW50ICE9PSB1bmRlZmluZWQsXG5cdFx0IWlzSHlkcmF0aW5nICYmIHJlcGxhY2VOb2RlXG5cdFx0XHQ/IFtyZXBsYWNlTm9kZV1cblx0XHRcdDogb2xkVk5vZGVcblx0XHRcdD8gbnVsbFxuXHRcdFx0OiBwYXJlbnREb20uZmlyc3RDaGlsZFxuXHRcdFx0PyBzbGljZS5jYWxsKHBhcmVudERvbS5jaGlsZE5vZGVzKVxuXHRcdFx0OiBudWxsLFxuXHRcdGNvbW1pdFF1ZXVlLFxuXHRcdCFpc0h5ZHJhdGluZyAmJiByZXBsYWNlTm9kZVxuXHRcdFx0PyByZXBsYWNlTm9kZVxuXHRcdFx0OiBvbGRWTm9kZVxuXHRcdFx0PyBvbGRWTm9kZS5fZG9tXG5cdFx0XHQ6IHBhcmVudERvbS5maXJzdENoaWxkLFxuXHRcdGlzSHlkcmF0aW5nXG5cdCk7XG5cblx0Ly8gRmx1c2ggYWxsIHF1ZXVlZCBlZmZlY3RzXG5cdGNvbW1pdFJvb3QoY29tbWl0UXVldWUsIHZub2RlKTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYW4gZXhpc3RpbmcgRE9NIGVsZW1lbnQgd2l0aCBkYXRhIGZyb20gYSBQcmVhY3QgdmlydHVhbCBub2RlXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLkNvbXBvbmVudENoaWxkfSB2bm9kZSBUaGUgdmlydHVhbCBub2RlIHRvIHJlbmRlclxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5QcmVhY3RFbGVtZW50fSBwYXJlbnREb20gVGhlIERPTSBlbGVtZW50IHRvXG4gKiB1cGRhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh5ZHJhdGUodm5vZGUsIHBhcmVudERvbSkge1xuXHRyZW5kZXIodm5vZGUsIHBhcmVudERvbSwgaHlkcmF0ZSk7XG59XG4iLCAiaW1wb3J0IHsgYXNzaWduLCBzbGljZSB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBjcmVhdGVWTm9kZSB9IGZyb20gJy4vY3JlYXRlLWVsZW1lbnQnO1xuXG4vKipcbiAqIENsb25lcyB0aGUgZ2l2ZW4gVk5vZGUsIG9wdGlvbmFsbHkgYWRkaW5nIGF0dHJpYnV0ZXMvcHJvcHMgYW5kIHJlcGxhY2luZyBpdHMgY2hpbGRyZW4uXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlfSB2bm9kZSBUaGUgdmlydHVhbCBET00gZWxlbWVudCB0byBjbG9uZVxuICogQHBhcmFtIHtvYmplY3R9IHByb3BzIEF0dHJpYnV0ZXMvcHJvcHMgdG8gYWRkIHdoZW4gY2xvbmluZ1xuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnRDaGlsZHJlbj59IHJlc3QgQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIHdpbGwgYmUgdXNlZCBhcyByZXBsYWNlbWVudCBjaGlsZHJlbi5cbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG5cdGxldCBub3JtYWxpemVkUHJvcHMgPSBhc3NpZ24oe30sIHZub2RlLnByb3BzKSxcblx0XHRrZXksXG5cdFx0cmVmLFxuXHRcdGk7XG5cdGZvciAoaSBpbiBwcm9wcykge1xuXHRcdGlmIChpID09ICdrZXknKSBrZXkgPSBwcm9wc1tpXTtcblx0XHRlbHNlIGlmIChpID09ICdyZWYnKSByZWYgPSBwcm9wc1tpXTtcblx0XHRlbHNlIG5vcm1hbGl6ZWRQcm9wc1tpXSA9IHByb3BzW2ldO1xuXHR9XG5cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG5cdFx0bm9ybWFsaXplZFByb3BzLmNoaWxkcmVuID1cblx0XHRcdGFyZ3VtZW50cy5sZW5ndGggPiAzID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogY2hpbGRyZW47XG5cdH1cblxuXHRyZXR1cm4gY3JlYXRlVk5vZGUoXG5cdFx0dm5vZGUudHlwZSxcblx0XHRub3JtYWxpemVkUHJvcHMsXG5cdFx0a2V5IHx8IHZub2RlLmtleSxcblx0XHRyZWYgfHwgdm5vZGUucmVmLFxuXHRcdG51bGxcblx0KTtcbn1cbiIsICIvKipcbiAqIEZpbmQgdGhlIGNsb3Nlc3QgZXJyb3IgYm91bmRhcnkgdG8gYSB0aHJvd24gZXJyb3IgYW5kIGNhbGwgaXRcbiAqIEBwYXJhbSB7b2JqZWN0fSBlcnJvciBUaGUgdGhyb3duIHZhbHVlXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5WTm9kZX0gdm5vZGUgVGhlIHZub2RlIHRoYXQgdGhyZXdcbiAqIHRoZSBlcnJvciB0aGF0IHdhcyBjYXVnaHQgKGV4Y2VwdCBmb3IgdW5tb3VudGluZyB3aGVuIHRoaXMgcGFyYW1ldGVyXG4gKiBpcyB0aGUgaGlnaGVzdCBwYXJlbnQgdGhhdCB3YXMgYmVpbmcgdW5tb3VudGVkKVxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2ludGVybmFsJykuVk5vZGV9IFtvbGRWTm9kZV1cbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9pbnRlcm5hbCcpLkVycm9ySW5mb30gW2Vycm9ySW5mb11cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9jYXRjaEVycm9yKGVycm9yLCB2bm9kZSwgb2xkVk5vZGUsIGVycm9ySW5mbykge1xuXHQvKiogQHR5cGUge2ltcG9ydCgnLi4vaW50ZXJuYWwnKS5Db21wb25lbnR9ICovXG5cdGxldCBjb21wb25lbnQsIGN0b3IsIGhhbmRsZWQ7XG5cblx0Zm9yICg7ICh2bm9kZSA9IHZub2RlLl9wYXJlbnQpOyApIHtcblx0XHRpZiAoKGNvbXBvbmVudCA9IHZub2RlLl9jb21wb25lbnQpICYmICFjb21wb25lbnQuX3Byb2Nlc3NpbmdFeGNlcHRpb24pIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGN0b3IgPSBjb21wb25lbnQuY29uc3RydWN0b3I7XG5cblx0XHRcdFx0aWYgKGN0b3IgJiYgY3Rvci5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgIT0gbnVsbCkge1xuXHRcdFx0XHRcdGNvbXBvbmVudC5zZXRTdGF0ZShjdG9yLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnJvcikpO1xuXHRcdFx0XHRcdGhhbmRsZWQgPSBjb21wb25lbnQuX2RpcnR5O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRDYXRjaCAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Y29tcG9uZW50LmNvbXBvbmVudERpZENhdGNoKGVycm9yLCBlcnJvckluZm8gfHwge30pO1xuXHRcdFx0XHRcdGhhbmRsZWQgPSBjb21wb25lbnQuX2RpcnR5O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVGhpcyBpcyBhbiBlcnJvciBib3VuZGFyeS4gTWFyayBpdCBhcyBoYXZpbmcgYmFpbGVkIG91dCwgYW5kIHdoZXRoZXIgaXQgd2FzIG1pZC1oeWRyYXRpb24uXG5cdFx0XHRcdGlmIChoYW5kbGVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIChjb21wb25lbnQuX3BlbmRpbmdFcnJvciA9IGNvbXBvbmVudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0ZXJyb3IgPSBlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHRocm93IGVycm9yO1xufVxuIiwgImltcG9ydCB7IGgsIEZyYWdtZW50IH0gZnJvbSAncHJlYWN0J1xuZXhwb3J0IHsgaCwgRnJhZ21lbnQgfVxuIiwgImltcG9ydCB7IG9wdGlvbnMgfSBmcm9tICdwcmVhY3QnO1xuXG4vKiogQHR5cGUge251bWJlcn0gKi9cbmxldCBjdXJyZW50SW5kZXg7XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50fSAqL1xubGV0IGN1cnJlbnRDb21wb25lbnQ7XG5cbi8qKiBAdHlwZSB7bnVtYmVyfSAqL1xubGV0IGN1cnJlbnRIb29rID0gMDtcblxuLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnQ+fSAqL1xubGV0IGFmdGVyUGFpbnRFZmZlY3RzID0gW107XG5cbmxldCBvbGRCZWZvcmVEaWZmID0gb3B0aW9ucy5fZGlmZjtcbmxldCBvbGRCZWZvcmVSZW5kZXIgPSBvcHRpb25zLl9yZW5kZXI7XG5sZXQgb2xkQWZ0ZXJEaWZmID0gb3B0aW9ucy5kaWZmZWQ7XG5sZXQgb2xkQ29tbWl0ID0gb3B0aW9ucy5fY29tbWl0O1xubGV0IG9sZEJlZm9yZVVubW91bnQgPSBvcHRpb25zLnVubW91bnQ7XG5cbmNvbnN0IFJBRl9USU1FT1VUID0gMTAwO1xubGV0IHByZXZSYWY7XG5cbm9wdGlvbnMuX2RpZmYgPSB2bm9kZSA9PiB7XG5cdGN1cnJlbnRDb21wb25lbnQgPSBudWxsO1xuXHRpZiAob2xkQmVmb3JlRGlmZikgb2xkQmVmb3JlRGlmZih2bm9kZSk7XG59O1xuXG5vcHRpb25zLl9yZW5kZXIgPSB2bm9kZSA9PiB7XG5cdGlmIChvbGRCZWZvcmVSZW5kZXIpIG9sZEJlZm9yZVJlbmRlcih2bm9kZSk7XG5cblx0Y3VycmVudENvbXBvbmVudCA9IHZub2RlLl9jb21wb25lbnQ7XG5cdGN1cnJlbnRJbmRleCA9IDA7XG5cblx0Y29uc3QgaG9va3MgPSBjdXJyZW50Q29tcG9uZW50Ll9faG9va3M7XG5cdGlmIChob29rcykge1xuXHRcdGhvb2tzLl9wZW5kaW5nRWZmZWN0cy5mb3JFYWNoKGludm9rZUNsZWFudXApO1xuXHRcdGhvb2tzLl9wZW5kaW5nRWZmZWN0cy5mb3JFYWNoKGludm9rZUVmZmVjdCk7XG5cdFx0aG9va3MuX3BlbmRpbmdFZmZlY3RzID0gW107XG5cdH1cbn07XG5cbm9wdGlvbnMuZGlmZmVkID0gdm5vZGUgPT4ge1xuXHRpZiAob2xkQWZ0ZXJEaWZmKSBvbGRBZnRlckRpZmYodm5vZGUpO1xuXG5cdGNvbnN0IGMgPSB2bm9kZS5fY29tcG9uZW50O1xuXHRpZiAoYyAmJiBjLl9faG9va3MgJiYgYy5fX2hvb2tzLl9wZW5kaW5nRWZmZWN0cy5sZW5ndGgpIHtcblx0XHRhZnRlclBhaW50KGFmdGVyUGFpbnRFZmZlY3RzLnB1c2goYykpO1xuXHR9XG5cdGN1cnJlbnRDb21wb25lbnQgPSBudWxsO1xufTtcblxub3B0aW9ucy5fY29tbWl0ID0gKHZub2RlLCBjb21taXRRdWV1ZSkgPT4ge1xuXHRjb21taXRRdWV1ZS5zb21lKGNvbXBvbmVudCA9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLmZvckVhY2goaW52b2tlQ2xlYW51cCk7XG5cdFx0XHRjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcyA9IGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLmZpbHRlcihjYiA9PlxuXHRcdFx0XHRjYi5fdmFsdWUgPyBpbnZva2VFZmZlY3QoY2IpIDogdHJ1ZVxuXHRcdFx0KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb21taXRRdWV1ZS5zb21lKGMgPT4ge1xuXHRcdFx0XHRpZiAoYy5fcmVuZGVyQ2FsbGJhY2tzKSBjLl9yZW5kZXJDYWxsYmFja3MgPSBbXTtcblx0XHRcdH0pO1xuXHRcdFx0Y29tbWl0UXVldWUgPSBbXTtcblx0XHRcdG9wdGlvbnMuX2NhdGNoRXJyb3IoZSwgY29tcG9uZW50Ll92bm9kZSk7XG5cdFx0fVxuXHR9KTtcblxuXHRpZiAob2xkQ29tbWl0KSBvbGRDb21taXQodm5vZGUsIGNvbW1pdFF1ZXVlKTtcbn07XG5cbm9wdGlvbnMudW5tb3VudCA9IHZub2RlID0+IHtcblx0aWYgKG9sZEJlZm9yZVVubW91bnQpIG9sZEJlZm9yZVVubW91bnQodm5vZGUpO1xuXG5cdGNvbnN0IGMgPSB2bm9kZS5fY29tcG9uZW50O1xuXHRpZiAoYyAmJiBjLl9faG9va3MpIHtcblx0XHRsZXQgaGFzRXJyb3JlZDtcblx0XHRjLl9faG9va3MuX2xpc3QuZm9yRWFjaChzID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGludm9rZUNsZWFudXAocyk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGhhc0Vycm9yZWQgPSBlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChoYXNFcnJvcmVkKSBvcHRpb25zLl9jYXRjaEVycm9yKGhhc0Vycm9yZWQsIGMuX3Zub2RlKTtcblx0fVxufTtcblxuLyoqXG4gKiBHZXQgYSBob29rJ3Mgc3RhdGUgZnJvbSB0aGUgY3VycmVudENvbXBvbmVudFxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgaG9vayB0byBnZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlIFRoZSBpbmRleCBvZiB0aGUgaG9vayB0byBnZXRcbiAqIEByZXR1cm5zIHthbnl9XG4gKi9cbmZ1bmN0aW9uIGdldEhvb2tTdGF0ZShpbmRleCwgdHlwZSkge1xuXHRpZiAob3B0aW9ucy5faG9vaykge1xuXHRcdG9wdGlvbnMuX2hvb2soY3VycmVudENvbXBvbmVudCwgaW5kZXgsIGN1cnJlbnRIb29rIHx8IHR5cGUpO1xuXHR9XG5cdGN1cnJlbnRIb29rID0gMDtcblxuXHQvLyBMYXJnZWx5IGluc3BpcmVkIGJ5OlxuXHQvLyAqIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNoYWVsLWtsZWluL2Z1bmN5LmpzL2Jsb2IvZjZiZTczNDY4ZTZlYzQ2YjBmZjVhYTNjYzRjOWJhZjcyYTI5MDI1YS9zcmMvaG9va3MvY29yZV9ob29rcy5tanNcblx0Ly8gKiBodHRwczovL2dpdGh1Yi5jb20vbWljaGFlbC1rbGVpbi9mdW5jeS5qcy9ibG9iLzY1MGJlYWE1OGM0M2MzM2E3NDgyMGEzYzk4YjNjNzA3OWNmMmUzMzMvc3JjL3JlbmRlcmVyLm1qc1xuXHQvLyBPdGhlciBpbXBsZW1lbnRhdGlvbnMgdG8gbG9vayBhdDpcblx0Ly8gKiBodHRwczovL2NvZGVzYW5kYm94LmlvL3MvbW5veDA1cXA4XG5cdGNvbnN0IGhvb2tzID1cblx0XHRjdXJyZW50Q29tcG9uZW50Ll9faG9va3MgfHxcblx0XHQoY3VycmVudENvbXBvbmVudC5fX2hvb2tzID0ge1xuXHRcdFx0X2xpc3Q6IFtdLFxuXHRcdFx0X3BlbmRpbmdFZmZlY3RzOiBbXVxuXHRcdH0pO1xuXG5cdGlmIChpbmRleCA+PSBob29rcy5fbGlzdC5sZW5ndGgpIHtcblx0XHRob29rcy5fbGlzdC5wdXNoKHt9KTtcblx0fVxuXHRyZXR1cm4gaG9va3MuX2xpc3RbaW5kZXhdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2luZGV4JykuU3RhdGVVcGRhdGVyPGFueT59IFtpbml0aWFsU3RhdGVdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdGF0ZShpbml0aWFsU3RhdGUpIHtcblx0Y3VycmVudEhvb2sgPSAxO1xuXHRyZXR1cm4gdXNlUmVkdWNlcihpbnZva2VPclJldHVybiwgaW5pdGlhbFN0YXRlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbmRleCcpLlJlZHVjZXI8YW55LCBhbnk+fSByZWR1Y2VyXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbmRleCcpLlN0YXRlVXBkYXRlcjxhbnk+fSBpbml0aWFsU3RhdGVcbiAqIEBwYXJhbSB7KGluaXRpYWxTdGF0ZTogYW55KSA9PiB2b2lkfSBbaW5pdF1cbiAqIEByZXR1cm5zIHtbIGFueSwgKHN0YXRlOiBhbnkpID0+IHZvaWQgXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVJlZHVjZXIocmVkdWNlciwgaW5pdGlhbFN0YXRlLCBpbml0KSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuUmVkdWNlckhvb2tTdGF0ZX0gKi9cblx0Y29uc3QgaG9va1N0YXRlID0gZ2V0SG9va1N0YXRlKGN1cnJlbnRJbmRleCsrLCAyKTtcblx0aG9va1N0YXRlLl9yZWR1Y2VyID0gcmVkdWNlcjtcblx0aWYgKCFob29rU3RhdGUuX2NvbXBvbmVudCkge1xuXHRcdGhvb2tTdGF0ZS5fdmFsdWUgPSBbXG5cdFx0XHQhaW5pdCA/IGludm9rZU9yUmV0dXJuKHVuZGVmaW5lZCwgaW5pdGlhbFN0YXRlKSA6IGluaXQoaW5pdGlhbFN0YXRlKSxcblxuXHRcdFx0YWN0aW9uID0+IHtcblx0XHRcdFx0Y29uc3QgbmV4dFZhbHVlID0gaG9va1N0YXRlLl9yZWR1Y2VyKGhvb2tTdGF0ZS5fdmFsdWVbMF0sIGFjdGlvbik7XG5cdFx0XHRcdGlmIChob29rU3RhdGUuX3ZhbHVlWzBdICE9PSBuZXh0VmFsdWUpIHtcblx0XHRcdFx0XHRob29rU3RhdGUuX3ZhbHVlID0gW25leHRWYWx1ZSwgaG9va1N0YXRlLl92YWx1ZVsxXV07XG5cdFx0XHRcdFx0aG9va1N0YXRlLl9jb21wb25lbnQuc2V0U3RhdGUoe30pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdGhvb2tTdGF0ZS5fY29tcG9uZW50ID0gY3VycmVudENvbXBvbmVudDtcblx0fVxuXG5cdHJldHVybiBob29rU3RhdGUuX3ZhbHVlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuRWZmZWN0fSBjYWxsYmFja1xuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRWZmZWN0KGNhbGxiYWNrLCBhcmdzKSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuRWZmZWN0SG9va1N0YXRlfSAqL1xuXHRjb25zdCBzdGF0ZSA9IGdldEhvb2tTdGF0ZShjdXJyZW50SW5kZXgrKywgMyk7XG5cdGlmICghb3B0aW9ucy5fc2tpcEVmZmVjdHMgJiYgYXJnc0NoYW5nZWQoc3RhdGUuX2FyZ3MsIGFyZ3MpKSB7XG5cdFx0c3RhdGUuX3ZhbHVlID0gY2FsbGJhY2s7XG5cdFx0c3RhdGUuX2FyZ3MgPSBhcmdzO1xuXG5cdFx0Y3VycmVudENvbXBvbmVudC5fX2hvb2tzLl9wZW5kaW5nRWZmZWN0cy5wdXNoKHN0YXRlKTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuRWZmZWN0fSBjYWxsYmFja1xuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTGF5b3V0RWZmZWN0KGNhbGxiYWNrLCBhcmdzKSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuRWZmZWN0SG9va1N0YXRlfSAqL1xuXHRjb25zdCBzdGF0ZSA9IGdldEhvb2tTdGF0ZShjdXJyZW50SW5kZXgrKywgNCk7XG5cdGlmICghb3B0aW9ucy5fc2tpcEVmZmVjdHMgJiYgYXJnc0NoYW5nZWQoc3RhdGUuX2FyZ3MsIGFyZ3MpKSB7XG5cdFx0c3RhdGUuX3ZhbHVlID0gY2FsbGJhY2s7XG5cdFx0c3RhdGUuX2FyZ3MgPSBhcmdzO1xuXG5cdFx0Y3VycmVudENvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLnB1c2goc3RhdGUpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VSZWYoaW5pdGlhbFZhbHVlKSB7XG5cdGN1cnJlbnRIb29rID0gNTtcblx0cmV0dXJuIHVzZU1lbW8oKCkgPT4gKHsgY3VycmVudDogaW5pdGlhbFZhbHVlIH0pLCBbXSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHJlZlxuICogQHBhcmFtIHsoKSA9PiBvYmplY3R9IGNyZWF0ZUhhbmRsZVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGNyZWF0ZUhhbmRsZSwgYXJncykge1xuXHRjdXJyZW50SG9vayA9IDY7XG5cdHVzZUxheW91dEVmZmVjdChcblx0XHQoKSA9PiB7XG5cdFx0XHRpZiAodHlwZW9mIHJlZiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHJlZihjcmVhdGVIYW5kbGUoKSk7XG5cdFx0XHRcdHJldHVybiAoKSA9PiByZWYobnVsbCk7XG5cdFx0XHR9IGVsc2UgaWYgKHJlZikge1xuXHRcdFx0XHRyZWYuY3VycmVudCA9IGNyZWF0ZUhhbmRsZSgpO1xuXHRcdFx0XHRyZXR1cm4gKCkgPT4gcmVmLmN1cnJlbnQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YXJncyA9PSBudWxsID8gYXJncyA6IGFyZ3MuY29uY2F0KHJlZilcblx0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geygpID0+IGFueX0gZmFjdG9yeVxuICogQHBhcmFtIHthbnlbXX0gYXJnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTWVtbyhmYWN0b3J5LCBhcmdzKSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuTWVtb0hvb2tTdGF0ZX0gKi9cblx0Y29uc3Qgc3RhdGUgPSBnZXRIb29rU3RhdGUoY3VycmVudEluZGV4KyssIDcpO1xuXHRpZiAoYXJnc0NoYW5nZWQoc3RhdGUuX2FyZ3MsIGFyZ3MpKSB7XG5cdFx0c3RhdGUuX3ZhbHVlID0gZmFjdG9yeSgpO1xuXHRcdHN0YXRlLl9hcmdzID0gYXJncztcblx0XHRzdGF0ZS5fZmFjdG9yeSA9IGZhY3Rvcnk7XG5cdH1cblxuXHRyZXR1cm4gc3RhdGUuX3ZhbHVlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7YW55W119IGFyZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhbGxiYWNrKGNhbGxiYWNrLCBhcmdzKSB7XG5cdGN1cnJlbnRIb29rID0gODtcblx0cmV0dXJuIHVzZU1lbW8oKCkgPT4gY2FsbGJhY2ssIGFyZ3MpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuUHJlYWN0Q29udGV4dH0gY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29udGV4dChjb250ZXh0KSB7XG5cdGNvbnN0IHByb3ZpZGVyID0gY3VycmVudENvbXBvbmVudC5jb250ZXh0W2NvbnRleHQuX2lkXTtcblx0Ly8gV2UgY291bGQgc2tpcCB0aGlzIGNhbGwgaGVyZSwgYnV0IHRoYW4gd2UnZCBub3QgY2FsbFxuXHQvLyBgb3B0aW9ucy5faG9va2AuIFdlIG5lZWQgdG8gZG8gdGhhdCBpbiBvcmRlciB0byBtYWtlXG5cdC8vIHRoZSBkZXZ0b29scyBhd2FyZSBvZiB0aGlzIGhvb2suXG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29udGV4dEhvb2tTdGF0ZX0gKi9cblx0Y29uc3Qgc3RhdGUgPSBnZXRIb29rU3RhdGUoY3VycmVudEluZGV4KyssIDkpO1xuXHQvLyBUaGUgZGV2dG9vbHMgbmVlZHMgYWNjZXNzIHRvIHRoZSBjb250ZXh0IG9iamVjdCB0b1xuXHQvLyBiZSBhYmxlIHRvIHB1bGwgb2YgdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBubyBwcm92aWRlclxuXHQvLyBpcyBwcmVzZW50IGluIHRoZSB0cmVlLlxuXHRzdGF0ZS5fY29udGV4dCA9IGNvbnRleHQ7XG5cdGlmICghcHJvdmlkZXIpIHJldHVybiBjb250ZXh0Ll9kZWZhdWx0VmFsdWU7XG5cdC8vIFRoaXMgaXMgcHJvYmFibHkgbm90IHNhZmUgdG8gY29udmVydCB0byBcIiFcIlxuXHRpZiAoc3RhdGUuX3ZhbHVlID09IG51bGwpIHtcblx0XHRzdGF0ZS5fdmFsdWUgPSB0cnVlO1xuXHRcdHByb3ZpZGVyLnN1YihjdXJyZW50Q29tcG9uZW50KTtcblx0fVxuXHRyZXR1cm4gcHJvdmlkZXIucHJvcHMudmFsdWU7XG59XG5cbi8qKlxuICogRGlzcGxheSBhIGN1c3RvbSBsYWJlbCBmb3IgYSBjdXN0b20gaG9vayBmb3IgdGhlIGRldnRvb2xzIHBhbmVsXG4gKiBAdHlwZSB7PFQ+KHZhbHVlOiBULCBjYj86ICh2YWx1ZTogVCkgPT4gc3RyaW5nIHwgbnVtYmVyKSA9PiB2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidWdWYWx1ZSh2YWx1ZSwgZm9ybWF0dGVyKSB7XG5cdGlmIChvcHRpb25zLnVzZURlYnVnVmFsdWUpIHtcblx0XHRvcHRpb25zLnVzZURlYnVnVmFsdWUoZm9ybWF0dGVyID8gZm9ybWF0dGVyKHZhbHVlKSA6IHZhbHVlKTtcblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSB7KGVycm9yOiBhbnkpID0+IHZvaWR9IGNiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VFcnJvckJvdW5kYXJ5KGNiKSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuRXJyb3JCb3VuZGFyeUhvb2tTdGF0ZX0gKi9cblx0Y29uc3Qgc3RhdGUgPSBnZXRIb29rU3RhdGUoY3VycmVudEluZGV4KyssIDEwKTtcblx0Y29uc3QgZXJyU3RhdGUgPSB1c2VTdGF0ZSgpO1xuXHRzdGF0ZS5fdmFsdWUgPSBjYjtcblx0aWYgKCFjdXJyZW50Q29tcG9uZW50LmNvbXBvbmVudERpZENhdGNoKSB7XG5cdFx0Y3VycmVudENvbXBvbmVudC5jb21wb25lbnREaWRDYXRjaCA9IGVyciA9PiB7XG5cdFx0XHRpZiAoc3RhdGUuX3ZhbHVlKSBzdGF0ZS5fdmFsdWUoZXJyKTtcblx0XHRcdGVyclN0YXRlWzFdKGVycik7XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gW1xuXHRcdGVyclN0YXRlWzBdLFxuXHRcdCgpID0+IHtcblx0XHRcdGVyclN0YXRlWzFdKHVuZGVmaW5lZCk7XG5cdFx0fVxuXHRdO1xufVxuXG4vKipcbiAqIEFmdGVyIHBhaW50IGVmZmVjdHMgY29uc3VtZXIuXG4gKi9cbmZ1bmN0aW9uIGZsdXNoQWZ0ZXJQYWludEVmZmVjdHMoKSB7XG5cdGxldCBjb21wb25lbnQ7XG5cdHdoaWxlICgoY29tcG9uZW50ID0gYWZ0ZXJQYWludEVmZmVjdHMuc2hpZnQoKSkpIHtcblx0XHRpZiAoIWNvbXBvbmVudC5fcGFyZW50RG9tKSBjb250aW51ZTtcblx0XHR0cnkge1xuXHRcdFx0Y29tcG9uZW50Ll9faG9va3MuX3BlbmRpbmdFZmZlY3RzLmZvckVhY2goaW52b2tlQ2xlYW51cCk7XG5cdFx0XHRjb21wb25lbnQuX19ob29rcy5fcGVuZGluZ0VmZmVjdHMuZm9yRWFjaChpbnZva2VFZmZlY3QpO1xuXHRcdFx0Y29tcG9uZW50Ll9faG9va3MuX3BlbmRpbmdFZmZlY3RzID0gW107XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29tcG9uZW50Ll9faG9va3MuX3BlbmRpbmdFZmZlY3RzID0gW107XG5cdFx0XHRvcHRpb25zLl9jYXRjaEVycm9yKGUsIGNvbXBvbmVudC5fdm5vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5sZXQgSEFTX1JBRiA9IHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT0gJ2Z1bmN0aW9uJztcblxuLyoqXG4gKiBTY2hlZHVsZSBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgYWZ0ZXIgdGhlIGJyb3dzZXIgaGFzIGEgY2hhbmNlIHRvIHBhaW50IGEgbmV3IGZyYW1lLlxuICogRG8gdGhpcyBieSBjb21iaW5pbmcgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIChyQUYpICsgc2V0VGltZW91dCB0byBpbnZva2UgYSBjYWxsYmFjayBhZnRlclxuICogdGhlIG5leHQgYnJvd3NlciBmcmFtZS5cbiAqXG4gKiBBbHNvLCBzY2hlZHVsZSBhIHRpbWVvdXQgaW4gcGFyYWxsZWwgdG8gdGhlIHRoZSByQUYgdG8gZW5zdXJlIHRoZSBjYWxsYmFjayBpcyBpbnZva2VkXG4gKiBldmVuIGlmIFJBRiBkb2Vzbid0IGZpcmUgKGZvciBleGFtcGxlIGlmIHRoZSBicm93c2VyIHRhYiBpcyBub3QgdmlzaWJsZSlcbiAqXG4gKiBAcGFyYW0geygpID0+IHZvaWR9IGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIGFmdGVyTmV4dEZyYW1lKGNhbGxiYWNrKSB7XG5cdGNvbnN0IGRvbmUgPSAoKSA9PiB7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdGlmIChIQVNfUkFGKSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYpO1xuXHRcdHNldFRpbWVvdXQoY2FsbGJhY2spO1xuXHR9O1xuXHRjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChkb25lLCBSQUZfVElNRU9VVCk7XG5cblx0bGV0IHJhZjtcblx0aWYgKEhBU19SQUYpIHtcblx0XHRyYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZG9uZSk7XG5cdH1cbn1cblxuLy8gTm90ZTogaWYgc29tZW9uZSB1c2VkIG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsXG4vLyB0aGVuIGVmZmVjdHMgd2lsbCBBTFdBWVMgcnVuIG9uIHRoZSBORVhUIGZyYW1lIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgb25lLCBpbmN1cnJpbmcgYSB+MTZtcyBkZWxheS5cbi8vIFBlcmhhcHMgdGhpcyBpcyBub3Qgc3VjaCBhIGJpZyBkZWFsLlxuLyoqXG4gKiBTY2hlZHVsZSBhZnRlclBhaW50RWZmZWN0cyBmbHVzaCBhZnRlciB0aGUgYnJvd3NlciBwYWludHNcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZXdRdWV1ZUxlbmd0aFxuICovXG5mdW5jdGlvbiBhZnRlclBhaW50KG5ld1F1ZXVlTGVuZ3RoKSB7XG5cdGlmIChuZXdRdWV1ZUxlbmd0aCA9PT0gMSB8fCBwcmV2UmFmICE9PSBvcHRpb25zLnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuXHRcdHByZXZSYWYgPSBvcHRpb25zLnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblx0XHQocHJldlJhZiB8fCBhZnRlck5leHRGcmFtZSkoZmx1c2hBZnRlclBhaW50RWZmZWN0cyk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLkVmZmVjdEhvb2tTdGF0ZX0gaG9va1xuICovXG5mdW5jdGlvbiBpbnZva2VDbGVhbnVwKGhvb2spIHtcblx0Ly8gQSBob29rIGNsZWFudXAgY2FuIGludHJvZHVjZSBhIGNhbGwgdG8gcmVuZGVyIHdoaWNoIGNyZWF0ZXMgYSBuZXcgcm9vdCwgdGhpcyB3aWxsIGNhbGwgb3B0aW9ucy52bm9kZVxuXHQvLyBhbmQgbW92ZSB0aGUgY3VycmVudENvbXBvbmVudCBhd2F5LlxuXHRjb25zdCBjb21wID0gY3VycmVudENvbXBvbmVudDtcblx0bGV0IGNsZWFudXAgPSBob29rLl9jbGVhbnVwO1xuXHRpZiAodHlwZW9mIGNsZWFudXAgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdGhvb2suX2NsZWFudXAgPSB1bmRlZmluZWQ7XG5cdFx0Y2xlYW51cCgpO1xuXHR9XG5cdGN1cnJlbnRDb21wb25lbnQgPSBjb21wO1xufVxuXG4vKipcbiAqIEludm9rZSBhIEhvb2sncyBlZmZlY3RcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuRWZmZWN0SG9va1N0YXRlfSBob29rXG4gKi9cbmZ1bmN0aW9uIGludm9rZUVmZmVjdChob29rKSB7XG5cdC8vIEEgaG9vayBjYWxsIGNhbiBpbnRyb2R1Y2UgYSBjYWxsIHRvIHJlbmRlciB3aGljaCBjcmVhdGVzIGEgbmV3IHJvb3QsIHRoaXMgd2lsbCBjYWxsIG9wdGlvbnMudm5vZGVcblx0Ly8gYW5kIG1vdmUgdGhlIGN1cnJlbnRDb21wb25lbnQgYXdheS5cblx0Y29uc3QgY29tcCA9IGN1cnJlbnRDb21wb25lbnQ7XG5cdGhvb2suX2NsZWFudXAgPSBob29rLl92YWx1ZSgpO1xuXHRjdXJyZW50Q29tcG9uZW50ID0gY29tcDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2FueVtdfSBvbGRBcmdzXG4gKiBAcGFyYW0ge2FueVtdfSBuZXdBcmdzXG4gKi9cbmZ1bmN0aW9uIGFyZ3NDaGFuZ2VkKG9sZEFyZ3MsIG5ld0FyZ3MpIHtcblx0cmV0dXJuIChcblx0XHQhb2xkQXJncyB8fFxuXHRcdG9sZEFyZ3MubGVuZ3RoICE9PSBuZXdBcmdzLmxlbmd0aCB8fFxuXHRcdG5ld0FyZ3Muc29tZSgoYXJnLCBpbmRleCkgPT4gYXJnICE9PSBvbGRBcmdzW2luZGV4XSlcblx0KTtcbn1cblxuZnVuY3Rpb24gaW52b2tlT3JSZXR1cm4oYXJnLCBmKSB7XG5cdHJldHVybiB0eXBlb2YgZiA9PSAnZnVuY3Rpb24nID8gZihhcmcpIDogZjtcbn1cbiIsICIvKipcbiAqIEFzc2lnbiBwcm9wZXJ0aWVzIGZyb20gYHByb3BzYCB0byBgb2JqYFxuICogQHRlbXBsYXRlIE8sIFAgVGhlIG9iaiBhbmQgcHJvcHMgdHlwZXNcbiAqIEBwYXJhbSB7T30gb2JqIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvXG4gKiBAcGFyYW0ge1B9IHByb3BzIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEByZXR1cm5zIHtPICYgUH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbihvYmosIHByb3BzKSB7XG5cdGZvciAobGV0IGkgaW4gcHJvcHMpIG9ialtpXSA9IHByb3BzW2ldO1xuXHRyZXR1cm4gLyoqIEB0eXBlIHtPICYgUH0gKi8gKG9iaik7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG9iamVjdHMgaGF2ZSBhIGRpZmZlcmVudCBzaGFwZVxuICogQHBhcmFtIHtvYmplY3R9IGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBiXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dEaWZmZXJzKGEsIGIpIHtcblx0Zm9yIChsZXQgaSBpbiBhKSBpZiAoaSAhPT0gJ19fc291cmNlJyAmJiAhKGkgaW4gYikpIHJldHVybiB0cnVlO1xuXHRmb3IgKGxldCBpIGluIGIpIGlmIChpICE9PSAnX19zb3VyY2UnICYmIGFbaV0gIT09IGJbaV0pIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcblx0bGV0IHBhcmVudE5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cdGlmIChwYXJlbnROb2RlKSBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgeyBzaGFsbG93RGlmZmVycyB9IGZyb20gJy4vdXRpbCc7XG5cbi8qKlxuICogQ29tcG9uZW50IGNsYXNzIHdpdGggYSBwcmVkZWZpbmVkIGBzaG91bGRDb21wb25lbnRVcGRhdGVgIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBQdXJlQ29tcG9uZW50KHApIHtcblx0dGhpcy5wcm9wcyA9IHA7XG59XG5QdXJlQ29tcG9uZW50LnByb3RvdHlwZSA9IG5ldyBDb21wb25lbnQoKTtcbi8vIFNvbWUgdGhpcmQtcGFydHkgbGlicmFyaWVzIGNoZWNrIGlmIHRoaXMgcHJvcGVydHkgaXMgcHJlc2VudFxuUHVyZUNvbXBvbmVudC5wcm90b3R5cGUuaXNQdXJlUmVhY3RDb21wb25lbnQgPSB0cnVlO1xuUHVyZUNvbXBvbmVudC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24ocHJvcHMsIHN0YXRlKSB7XG5cdHJldHVybiBzaGFsbG93RGlmZmVycyh0aGlzLnByb3BzLCBwcm9wcykgfHwgc2hhbGxvd0RpZmZlcnModGhpcy5zdGF0ZSwgc3RhdGUpO1xufTtcbiIsICJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IHNoYWxsb3dEaWZmZXJzIH0gZnJvbSAnLi91dGlsJztcblxuLyoqXG4gKiBNZW1vaXplIGEgY29tcG9uZW50LCBzbyB0aGF0IGl0IG9ubHkgdXBkYXRlcyB3aGVuIHRoZSBwcm9wcyBhY3R1YWxseSBoYXZlXG4gKiBjaGFuZ2VkLiBUaGlzIHdhcyBwcmV2aW91c2x5IGtub3duIGFzIGBSZWFjdC5wdXJlYC5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuRnVuY3Rpb25Db21wb25lbnR9IGMgZnVuY3Rpb25hbCBjb21wb25lbnRcbiAqIEBwYXJhbSB7KHByZXY6IG9iamVjdCwgbmV4dDogb2JqZWN0KSA9PiBib29sZWFufSBbY29tcGFyZXJdIEN1c3RvbSBlcXVhbGl0eSBmdW5jdGlvblxuICogQHJldHVybnMge2ltcG9ydCgnLi9pbnRlcm5hbCcpLkZ1bmN0aW9uQ29tcG9uZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVtbyhjLCBjb21wYXJlcikge1xuXHRmdW5jdGlvbiBzaG91bGRVcGRhdGUobmV4dFByb3BzKSB7XG5cdFx0bGV0IHJlZiA9IHRoaXMucHJvcHMucmVmO1xuXHRcdGxldCB1cGRhdGVSZWYgPSByZWYgPT0gbmV4dFByb3BzLnJlZjtcblx0XHRpZiAoIXVwZGF0ZVJlZiAmJiByZWYpIHtcblx0XHRcdHJlZi5jYWxsID8gcmVmKG51bGwpIDogKHJlZi5jdXJyZW50ID0gbnVsbCk7XG5cdFx0fVxuXG5cdFx0aWYgKCFjb21wYXJlcikge1xuXHRcdFx0cmV0dXJuIHNoYWxsb3dEaWZmZXJzKHRoaXMucHJvcHMsIG5leHRQcm9wcyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICFjb21wYXJlcih0aGlzLnByb3BzLCBuZXh0UHJvcHMpIHx8ICF1cGRhdGVSZWY7XG5cdH1cblxuXHRmdW5jdGlvbiBNZW1vZWQocHJvcHMpIHtcblx0XHR0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IHNob3VsZFVwZGF0ZTtcblx0XHRyZXR1cm4gY3JlYXRlRWxlbWVudChjLCBwcm9wcyk7XG5cdH1cblx0TWVtb2VkLmRpc3BsYXlOYW1lID0gJ01lbW8oJyArIChjLmRpc3BsYXlOYW1lIHx8IGMubmFtZSkgKyAnKSc7XG5cdE1lbW9lZC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHRydWU7XG5cdE1lbW9lZC5fZm9yd2FyZGVkID0gdHJ1ZTtcblx0cmV0dXJuIE1lbW9lZDtcbn1cbiIsICJpbXBvcnQgeyBvcHRpb25zIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vdXRpbCc7XG5cbmxldCBvbGREaWZmSG9vayA9IG9wdGlvbnMuX2RpZmY7XG5vcHRpb25zLl9kaWZmID0gdm5vZGUgPT4ge1xuXHRpZiAodm5vZGUudHlwZSAmJiB2bm9kZS50eXBlLl9mb3J3YXJkZWQgJiYgdm5vZGUucmVmKSB7XG5cdFx0dm5vZGUucHJvcHMucmVmID0gdm5vZGUucmVmO1xuXHRcdHZub2RlLnJlZiA9IG51bGw7XG5cdH1cblx0aWYgKG9sZERpZmZIb29rKSBvbGREaWZmSG9vayh2bm9kZSk7XG59O1xuXG5leHBvcnQgY29uc3QgUkVBQ1RfRk9SV0FSRF9TWU1CT0wgPVxuXHQodHlwZW9mIFN5bWJvbCAhPSAndW5kZWZpbmVkJyAmJlxuXHRcdFN5bWJvbC5mb3IgJiZcblx0XHRTeW1ib2wuZm9yKCdyZWFjdC5mb3J3YXJkX3JlZicpKSB8fFxuXHQweGY0NztcblxuLyoqXG4gKiBQYXNzIHJlZiBkb3duIHRvIGEgY2hpbGQuIFRoaXMgaXMgbWFpbmx5IHVzZWQgaW4gbGlicmFyaWVzIHdpdGggSE9DcyB0aGF0XG4gKiB3cmFwIGNvbXBvbmVudHMuIFVzaW5nIGBmb3J3YXJkUmVmYCB0aGVyZSBpcyBhbiBlYXN5IHdheSB0byBnZXQgYSByZWZlcmVuY2VcbiAqIG9mIHRoZSB3cmFwcGVkIGNvbXBvbmVudCBpbnN0ZWFkIG9mIG9uZSBvZiB0aGUgd3JhcHBlciBpdHNlbGYuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbmRleCcpLkZvcndhcmRGbn0gZm5cbiAqIEByZXR1cm5zIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5GdW5jdGlvbkNvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcndhcmRSZWYoZm4pIHtcblx0Ly8gV2UgYWx3YXlzIGhhdmUgcmVmIGluIHByb3BzLnJlZiwgZXhjZXB0IGZvclxuXHQvLyBtb2J4LXJlYWN0LiBJdCB3aWxsIGNhbGwgdGhpcyBmdW5jdGlvbiBkaXJlY3RseVxuXHQvLyBhbmQgYWx3YXlzIHBhc3MgcmVmIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdGZ1bmN0aW9uIEZvcndhcmRlZChwcm9wcywgcmVmKSB7XG5cdFx0bGV0IGNsb25lID0gYXNzaWduKHt9LCBwcm9wcyk7XG5cdFx0ZGVsZXRlIGNsb25lLnJlZjtcblx0XHRyZWYgPSBwcm9wcy5yZWYgfHwgcmVmO1xuXHRcdHJldHVybiBmbihcblx0XHRcdGNsb25lLFxuXHRcdFx0IXJlZiB8fCAodHlwZW9mIHJlZiA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMocmVmKS5sZW5ndGggPT09IDApXG5cdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHQ6IHJlZlxuXHRcdCk7XG5cdH1cblxuXHQvLyBtb2J4LXJlYWN0IGNoZWNrcyBmb3IgdGhpcyBiZWluZyBwcmVzZW50XG5cdEZvcndhcmRlZC4kJHR5cGVvZiA9IFJFQUNUX0ZPUldBUkRfU1lNQk9MO1xuXHQvLyBtb2J4LXJlYWN0IGhlYXZpbHkgcmVsaWVzIG9uIGltcGxlbWVudGF0aW9uIGRldGFpbHMuXG5cdC8vIEl0IGV4cGVjdHMgYW4gb2JqZWN0IGhlcmUgd2l0aCBhIGByZW5kZXJgIHByb3BlcnR5LFxuXHQvLyBhbmQgcHJvdG90eXBlLnJlbmRlciB3aWxsIGZhaWwuIFdpdGhvdXQgdGhpc1xuXHQvLyBtb2J4LXJlYWN0IHRocm93cy5cblx0Rm9yd2FyZGVkLnJlbmRlciA9IEZvcndhcmRlZDtcblxuXHRGb3J3YXJkZWQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSBGb3J3YXJkZWQuX2ZvcndhcmRlZCA9IHRydWU7XG5cdEZvcndhcmRlZC5kaXNwbGF5TmFtZSA9ICdGb3J3YXJkUmVmKCcgKyAoZm4uZGlzcGxheU5hbWUgfHwgZm4ubmFtZSkgKyAnKSc7XG5cdHJldHVybiBGb3J3YXJkZWQ7XG59XG4iLCAiaW1wb3J0IHsgdG9DaGlsZEFycmF5IH0gZnJvbSAncHJlYWN0JztcblxuY29uc3QgbWFwRm4gPSAoY2hpbGRyZW4sIGZuKSA9PiB7XG5cdGlmIChjaGlsZHJlbiA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0cmV0dXJuIHRvQ2hpbGRBcnJheSh0b0NoaWxkQXJyYXkoY2hpbGRyZW4pLm1hcChmbikpO1xufTtcblxuLy8gVGhpcyBBUEkgaXMgY29tcGxldGVseSB1bm5lY2Vzc2FyeSBmb3IgUHJlYWN0LCBzbyBpdCdzIGJhc2ljYWxseSBwYXNzdGhyb3VnaC5cbmV4cG9ydCBjb25zdCBDaGlsZHJlbiA9IHtcblx0bWFwOiBtYXBGbixcblx0Zm9yRWFjaDogbWFwRm4sXG5cdGNvdW50KGNoaWxkcmVuKSB7XG5cdFx0cmV0dXJuIGNoaWxkcmVuID8gdG9DaGlsZEFycmF5KGNoaWxkcmVuKS5sZW5ndGggOiAwO1xuXHR9LFxuXHRvbmx5KGNoaWxkcmVuKSB7XG5cdFx0Y29uc3Qgbm9ybWFsaXplZCA9IHRvQ2hpbGRBcnJheShjaGlsZHJlbik7XG5cdFx0aWYgKG5vcm1hbGl6ZWQubGVuZ3RoICE9PSAxKSB0aHJvdyAnQ2hpbGRyZW4ub25seSc7XG5cdFx0cmV0dXJuIG5vcm1hbGl6ZWRbMF07XG5cdH0sXG5cdHRvQXJyYXk6IHRvQ2hpbGRBcnJheVxufTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIGNyZWF0ZUVsZW1lbnQsIG9wdGlvbnMsIEZyYWdtZW50IH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vdXRpbCc7XG5cbmNvbnN0IG9sZENhdGNoRXJyb3IgPSBvcHRpb25zLl9jYXRjaEVycm9yO1xub3B0aW9ucy5fY2F0Y2hFcnJvciA9IGZ1bmN0aW9uKGVycm9yLCBuZXdWTm9kZSwgb2xkVk5vZGUsIGVycm9ySW5mbykge1xuXHRpZiAoZXJyb3IudGhlbikge1xuXHRcdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50fSAqL1xuXHRcdGxldCBjb21wb25lbnQ7XG5cdFx0bGV0IHZub2RlID0gbmV3Vk5vZGU7XG5cblx0XHRmb3IgKDsgKHZub2RlID0gdm5vZGUuX3BhcmVudCk7ICkge1xuXHRcdFx0aWYgKChjb21wb25lbnQgPSB2bm9kZS5fY29tcG9uZW50KSAmJiBjb21wb25lbnQuX2NoaWxkRGlkU3VzcGVuZCkge1xuXHRcdFx0XHRpZiAobmV3Vk5vZGUuX2RvbSA9PSBudWxsKSB7XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX2RvbSA9IG9sZFZOb2RlLl9kb207XG5cdFx0XHRcdFx0bmV3Vk5vZGUuX2NoaWxkcmVuID0gb2xkVk5vZGUuX2NoaWxkcmVuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIERvbid0IGNhbGwgb2xkQ2F0Y2hFcnJvciBpZiB3ZSBmb3VuZCBhIFN1c3BlbnNlXG5cdFx0XHRcdHJldHVybiBjb21wb25lbnQuX2NoaWxkRGlkU3VzcGVuZChlcnJvciwgbmV3Vk5vZGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRvbGRDYXRjaEVycm9yKGVycm9yLCBuZXdWTm9kZSwgb2xkVk5vZGUsIGVycm9ySW5mbyk7XG59O1xuXG5jb25zdCBvbGRVbm1vdW50ID0gb3B0aW9ucy51bm1vdW50O1xub3B0aW9ucy51bm1vdW50ID0gZnVuY3Rpb24odm5vZGUpIHtcblx0LyoqIEB0eXBlIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnR9ICovXG5cdGNvbnN0IGNvbXBvbmVudCA9IHZub2RlLl9jb21wb25lbnQ7XG5cdGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50Ll9vblJlc29sdmUpIHtcblx0XHRjb21wb25lbnQuX29uUmVzb2x2ZSgpO1xuXHR9XG5cblx0Ly8gaWYgdGhlIGNvbXBvbmVudCBpcyBzdGlsbCBoeWRyYXRpbmdcblx0Ly8gbW9zdCBsaWtlbHkgaXQgaXMgYmVjYXVzZSB0aGUgY29tcG9uZW50IGlzIHN1c3BlbmRlZFxuXHQvLyB3ZSBzZXQgdGhlIHZub2RlLnR5cGUgYXMgYG51bGxgIHNvIHRoYXQgaXQgaXMgbm90IGEgdHlwZW9mIGZ1bmN0aW9uXG5cdC8vIHNvIHRoZSB1bm1vdW50IHdpbGwgcmVtb3ZlIHRoZSB2bm9kZS5fZG9tXG5cdGlmIChjb21wb25lbnQgJiYgdm5vZGUuX2h5ZHJhdGluZyA9PT0gdHJ1ZSkge1xuXHRcdHZub2RlLnR5cGUgPSBudWxsO1xuXHR9XG5cblx0aWYgKG9sZFVubW91bnQpIG9sZFVubW91bnQodm5vZGUpO1xufTtcblxuZnVuY3Rpb24gZGV0YWNoZWRDbG9uZSh2bm9kZSwgZGV0YWNoZWRQYXJlbnQsIHBhcmVudERvbSkge1xuXHRpZiAodm5vZGUpIHtcblx0XHRpZiAodm5vZGUuX2NvbXBvbmVudCAmJiB2bm9kZS5fY29tcG9uZW50Ll9faG9va3MpIHtcblx0XHRcdHZub2RlLl9jb21wb25lbnQuX19ob29rcy5fbGlzdC5mb3JFYWNoKGVmZmVjdCA9PiB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZWZmZWN0Ll9jbGVhbnVwID09ICdmdW5jdGlvbicpIGVmZmVjdC5fY2xlYW51cCgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZub2RlLl9jb21wb25lbnQuX19ob29rcyA9IG51bGw7XG5cdFx0fVxuXG5cdFx0dm5vZGUgPSBhc3NpZ24oe30sIHZub2RlKTtcblx0XHRpZiAodm5vZGUuX2NvbXBvbmVudCAhPSBudWxsKSB7XG5cdFx0XHRpZiAodm5vZGUuX2NvbXBvbmVudC5fcGFyZW50RG9tID09PSBwYXJlbnREb20pIHtcblx0XHRcdFx0dm5vZGUuX2NvbXBvbmVudC5fcGFyZW50RG9tID0gZGV0YWNoZWRQYXJlbnQ7XG5cdFx0XHR9XG5cdFx0XHR2bm9kZS5fY29tcG9uZW50ID0gbnVsbDtcblx0XHR9XG5cblx0XHR2bm9kZS5fY2hpbGRyZW4gPVxuXHRcdFx0dm5vZGUuX2NoaWxkcmVuICYmXG5cdFx0XHR2bm9kZS5fY2hpbGRyZW4ubWFwKGNoaWxkID0+XG5cdFx0XHRcdGRldGFjaGVkQ2xvbmUoY2hpbGQsIGRldGFjaGVkUGFyZW50LCBwYXJlbnREb20pXG5cdFx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIHZub2RlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVPcmlnaW5hbCh2bm9kZSwgZGV0YWNoZWRQYXJlbnQsIG9yaWdpbmFsUGFyZW50KSB7XG5cdGlmICh2bm9kZSkge1xuXHRcdHZub2RlLl9vcmlnaW5hbCA9IG51bGw7XG5cdFx0dm5vZGUuX2NoaWxkcmVuID1cblx0XHRcdHZub2RlLl9jaGlsZHJlbiAmJlxuXHRcdFx0dm5vZGUuX2NoaWxkcmVuLm1hcChjaGlsZCA9PlxuXHRcdFx0XHRyZW1vdmVPcmlnaW5hbChjaGlsZCwgZGV0YWNoZWRQYXJlbnQsIG9yaWdpbmFsUGFyZW50KVxuXHRcdFx0KTtcblxuXHRcdGlmICh2bm9kZS5fY29tcG9uZW50KSB7XG5cdFx0XHRpZiAodm5vZGUuX2NvbXBvbmVudC5fcGFyZW50RG9tID09PSBkZXRhY2hlZFBhcmVudCkge1xuXHRcdFx0XHRpZiAodm5vZGUuX2RvbSkge1xuXHRcdFx0XHRcdG9yaWdpbmFsUGFyZW50Lmluc2VydEJlZm9yZSh2bm9kZS5fZG9tLCB2bm9kZS5fbmV4dERvbSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dm5vZGUuX2NvbXBvbmVudC5fZm9yY2UgPSB0cnVlO1xuXHRcdFx0XHR2bm9kZS5fY29tcG9uZW50Ll9wYXJlbnREb20gPSBvcmlnaW5hbFBhcmVudDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdm5vZGU7XG59XG5cbi8vIGhhdmluZyBjdXN0b20gaW5oZXJpdGFuY2UgaW5zdGVhZCBvZiBhIGNsYXNzIGhlcmUgc2F2ZXMgYSBsb3Qgb2YgYnl0ZXNcbmV4cG9ydCBmdW5jdGlvbiBTdXNwZW5zZSgpIHtcblx0Ly8gd2UgZG8gbm90IGNhbGwgc3VwZXIgaGVyZSB0byBnb2xmIHNvbWUgYnl0ZXMuLi5cblx0dGhpcy5fcGVuZGluZ1N1c3BlbnNpb25Db3VudCA9IDA7XG5cdHRoaXMuX3N1c3BlbmRlcnMgPSBudWxsO1xuXHR0aGlzLl9kZXRhY2hPbk5leHRSZW5kZXIgPSBudWxsO1xufVxuXG4vLyBUaGluZ3Mgd2UgZG8gaGVyZSB0byBzYXZlIHNvbWUgYnl0ZXMgYnV0IGFyZSBub3QgcHJvcGVyIEpTIGluaGVyaXRhbmNlOlxuLy8gLSBjYWxsIGBuZXcgQ29tcG9uZW50KClgIGFzIHRoZSBwcm90b3R5cGVcbi8vIC0gZG8gbm90IHNldCBgU3VzcGVuc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yYCB0byBgU3VzcGVuc2VgXG5TdXNwZW5zZS5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50KCk7XG5cbi8qKlxuICogQHRoaXMge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlN1c3BlbnNlQ29tcG9uZW50fVxuICogQHBhcmFtIHtQcm9taXNlfSBwcm9taXNlIFRoZSB0aHJvd24gcHJvbWlzZVxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZTxhbnksIGFueT59IHN1c3BlbmRpbmdWTm9kZSBUaGUgc3VzcGVuZGluZyBjb21wb25lbnRcbiAqL1xuU3VzcGVuc2UucHJvdG90eXBlLl9jaGlsZERpZFN1c3BlbmQgPSBmdW5jdGlvbihwcm9taXNlLCBzdXNwZW5kaW5nVk5vZGUpIHtcblx0Y29uc3Qgc3VzcGVuZGluZ0NvbXBvbmVudCA9IHN1c3BlbmRpbmdWTm9kZS5fY29tcG9uZW50O1xuXG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuU3VzcGVuc2VDb21wb25lbnR9ICovXG5cdGNvbnN0IGMgPSB0aGlzO1xuXG5cdGlmIChjLl9zdXNwZW5kZXJzID09IG51bGwpIHtcblx0XHRjLl9zdXNwZW5kZXJzID0gW107XG5cdH1cblx0Yy5fc3VzcGVuZGVycy5wdXNoKHN1c3BlbmRpbmdDb21wb25lbnQpO1xuXG5cdGNvbnN0IHJlc29sdmUgPSBzdXNwZW5kZWQoYy5fdm5vZGUpO1xuXG5cdGxldCByZXNvbHZlZCA9IGZhbHNlO1xuXHRjb25zdCBvblJlc29sdmVkID0gKCkgPT4ge1xuXHRcdGlmIChyZXNvbHZlZCkgcmV0dXJuO1xuXG5cdFx0cmVzb2x2ZWQgPSB0cnVlO1xuXHRcdHN1c3BlbmRpbmdDb21wb25lbnQuX29uUmVzb2x2ZSA9IG51bGw7XG5cblx0XHRpZiAocmVzb2x2ZSkge1xuXHRcdFx0cmVzb2x2ZShvblN1c3BlbnNpb25Db21wbGV0ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9uU3VzcGVuc2lvbkNvbXBsZXRlKCk7XG5cdFx0fVxuXHR9O1xuXG5cdHN1c3BlbmRpbmdDb21wb25lbnQuX29uUmVzb2x2ZSA9IG9uUmVzb2x2ZWQ7XG5cblx0Y29uc3Qgb25TdXNwZW5zaW9uQ29tcGxldGUgPSAoKSA9PiB7XG5cdFx0aWYgKCEtLWMuX3BlbmRpbmdTdXNwZW5zaW9uQ291bnQpIHtcblx0XHRcdC8vIElmIHRoZSBzdXNwZW5zaW9uIHdhcyBkdXJpbmcgaHlkcmF0aW9uIHdlIGRvbid0IG5lZWQgdG8gcmVzdG9yZSB0aGVcblx0XHRcdC8vIHN1c3BlbmRlZCBjaGlsZHJlbiBpbnRvIHRoZSBfY2hpbGRyZW4gYXJyYXlcblx0XHRcdGlmIChjLnN0YXRlLl9zdXNwZW5kZWQpIHtcblx0XHRcdFx0Y29uc3Qgc3VzcGVuZGVkVk5vZGUgPSBjLnN0YXRlLl9zdXNwZW5kZWQ7XG5cdFx0XHRcdGMuX3Zub2RlLl9jaGlsZHJlblswXSA9IHJlbW92ZU9yaWdpbmFsKFxuXHRcdFx0XHRcdHN1c3BlbmRlZFZOb2RlLFxuXHRcdFx0XHRcdHN1c3BlbmRlZFZOb2RlLl9jb21wb25lbnQuX3BhcmVudERvbSxcblx0XHRcdFx0XHRzdXNwZW5kZWRWTm9kZS5fY29tcG9uZW50Ll9vcmlnaW5hbFBhcmVudERvbVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRjLnNldFN0YXRlKHsgX3N1c3BlbmRlZDogKGMuX2RldGFjaE9uTmV4dFJlbmRlciA9IG51bGwpIH0pO1xuXG5cdFx0XHRsZXQgc3VzcGVuZGVkO1xuXHRcdFx0d2hpbGUgKChzdXNwZW5kZWQgPSBjLl9zdXNwZW5kZXJzLnBvcCgpKSkge1xuXHRcdFx0XHRzdXNwZW5kZWQuZm9yY2VVcGRhdGUoKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIFdlIGRvIG5vdCBzZXQgYHN1c3BlbmRlZDogdHJ1ZWAgZHVyaW5nIGh5ZHJhdGlvbiBiZWNhdXNlIHdlIHdhbnQgdGhlIGFjdHVhbCBtYXJrdXBcblx0ICogdG8gcmVtYWluIG9uIHNjcmVlbiBhbmQgaHlkcmF0ZSBpdCB3aGVuIHRoZSBzdXNwZW5zZSBhY3R1YWxseSBnZXRzIHJlc29sdmVkLlxuXHQgKiBXaGlsZSBpbiBub24taHlkcmF0aW9uIGNhc2VzIHRoZSB1c3VhbCBmYWxsYmFjayAtPiBjb21wb25lbnQgZmxvdyB3b3VsZCBvY2NvdXIuXG5cdCAqL1xuXHRjb25zdCB3YXNIeWRyYXRpbmcgPSBzdXNwZW5kaW5nVk5vZGUuX2h5ZHJhdGluZyA9PT0gdHJ1ZTtcblx0aWYgKCFjLl9wZW5kaW5nU3VzcGVuc2lvbkNvdW50KysgJiYgIXdhc0h5ZHJhdGluZykge1xuXHRcdGMuc2V0U3RhdGUoeyBfc3VzcGVuZGVkOiAoYy5fZGV0YWNoT25OZXh0UmVuZGVyID0gYy5fdm5vZGUuX2NoaWxkcmVuWzBdKSB9KTtcblx0fVxuXHRwcm9taXNlLnRoZW4ob25SZXNvbHZlZCwgb25SZXNvbHZlZCk7XG59O1xuXG5TdXNwZW5zZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5fc3VzcGVuZGVycyA9IFtdO1xufTtcblxuLyoqXG4gKiBAdGhpcyB7aW1wb3J0KCcuL2ludGVybmFsJykuU3VzcGVuc2VDb21wb25lbnR9XG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlN1c3BlbnNlQ29tcG9uZW50W1wicHJvcHNcIl19IHByb3BzXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlN1c3BlbnNlU3RhdGV9IHN0YXRlXG4gKi9cblN1c3BlbnNlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihwcm9wcywgc3RhdGUpIHtcblx0aWYgKHRoaXMuX2RldGFjaE9uTmV4dFJlbmRlcikge1xuXHRcdC8vIFdoZW4gdGhlIFN1c3BlbnNlJ3MgX3Zub2RlIHdhcyBjcmVhdGVkIGJ5IGEgY2FsbCB0byBjcmVhdGVWTm9kZVxuXHRcdC8vIChpLmUuIGR1ZSB0byBhIHNldFN0YXRlIGZ1cnRoZXIgdXAgaW4gdGhlIHRyZWUpXG5cdFx0Ly8gaXQncyBfY2hpbGRyZW4gcHJvcCBpcyBudWxsLCBpbiB0aGlzIGNhc2Ugd2UgXCJmb3JnZXRcIiBhYm91dCB0aGUgcGFya2VkIHZub2RlcyB0byBkZXRhY2hcblx0XHRpZiAodGhpcy5fdm5vZGUuX2NoaWxkcmVuKSB7XG5cdFx0XHRjb25zdCBkZXRhY2hlZFBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0Y29uc3QgZGV0YWNoZWRDb21wb25lbnQgPSB0aGlzLl92bm9kZS5fY2hpbGRyZW5bMF0uX2NvbXBvbmVudDtcblx0XHRcdHRoaXMuX3Zub2RlLl9jaGlsZHJlblswXSA9IGRldGFjaGVkQ2xvbmUoXG5cdFx0XHRcdHRoaXMuX2RldGFjaE9uTmV4dFJlbmRlcixcblx0XHRcdFx0ZGV0YWNoZWRQYXJlbnQsXG5cdFx0XHRcdChkZXRhY2hlZENvbXBvbmVudC5fb3JpZ2luYWxQYXJlbnREb20gPSBkZXRhY2hlZENvbXBvbmVudC5fcGFyZW50RG9tKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0aGlzLl9kZXRhY2hPbk5leHRSZW5kZXIgPSBudWxsO1xuXHR9XG5cblx0Ly8gV3JhcCBmYWxsYmFjayB0cmVlIGluIGEgVk5vZGUgdGhhdCBwcmV2ZW50cyBpdHNlbGYgZnJvbSBiZWluZyBtYXJrZWQgYXMgYWJvcnRpbmcgbWlkLWh5ZHJhdGlvbjpcblx0LyoqIEB0eXBlIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZX0gKi9cblx0Y29uc3QgZmFsbGJhY2sgPVxuXHRcdHN0YXRlLl9zdXNwZW5kZWQgJiYgY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgcHJvcHMuZmFsbGJhY2spO1xuXHRpZiAoZmFsbGJhY2spIGZhbGxiYWNrLl9oeWRyYXRpbmcgPSBudWxsO1xuXG5cdHJldHVybiBbXG5cdFx0Y3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgc3RhdGUuX3N1c3BlbmRlZCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbiksXG5cdFx0ZmFsbGJhY2tcblx0XTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGFuZCBjYWxscyB0aGUgcGFyZW50IGNvbXBvbmVudCdzIF9zdXNwZW5kZWQgbWV0aG9kLCBwYXNzaW5nIGluIHRoZVxuICogc3VzcGVuZGVkIHZub2RlLiBUaGlzIGlzIGEgd2F5IGZvciBhIHBhcmVudCAoZS5nLiBTdXNwZW5zZUxpc3QpIHRvIGdldCBub3RpZmllZFxuICogdGhhdCBvbmUgb2YgaXRzIGNoaWxkcmVuL2Rlc2NlbmRhbnRzIHN1c3BlbmRlZC5cbiAqXG4gKiBUaGUgcGFyZW50IE1BWSByZXR1cm4gYSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgZ2V0IGNhbGxlZCB3aGVuIHRoZVxuICogc3VzcGVuc2lvbiByZXNvbHZlcywgbm90aWZ5aW5nIHRoZSBwYXJlbnQgb2YgdGhlIGZhY3QuXG4gKiBNb3Jlb3ZlciwgdGhlIGNhbGxiYWNrIGdldHMgZnVuY3Rpb24gYHVuc3VzcGVuZGAgYXMgYSBwYXJhbWV0ZXIuIFRoZSByZXNvbHZlZFxuICogY2hpbGQgZGVzY2VuZGFudCB3aWxsIG5vdCBhY3R1YWxseSBnZXQgdW5zdXNwZW5kZWQgdW50aWwgYHVuc3VzcGVuZGAgZ2V0cyBjYWxsZWQuXG4gKiBUaGlzIGlzIGEgd2F5IGZvciB0aGUgcGFyZW50IHRvIGRlbGF5IHVuc3VzcGVuZGluZy5cbiAqXG4gKiBJZiB0aGUgcGFyZW50IGRvZXMgbm90IHJldHVybiBhIGNhbGxiYWNrIHRoZW4gdGhlIHJlc29sdmVkIHZub2RlXG4gKiBnZXRzIHVuc3VzcGVuZGVkIGltbWVkaWF0ZWx5IHdoZW4gaXQgcmVzb2x2ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZX0gdm5vZGVcbiAqIEByZXR1cm5zIHsoKHVuc3VzcGVuZDogKCkgPT4gdm9pZCkgPT4gdm9pZCk/fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VzcGVuZGVkKHZub2RlKSB7XG5cdC8qKiBAdHlwZSB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50fSAqL1xuXHRsZXQgY29tcG9uZW50ID0gdm5vZGUuX3BhcmVudC5fY29tcG9uZW50O1xuXHRyZXR1cm4gY29tcG9uZW50ICYmIGNvbXBvbmVudC5fc3VzcGVuZGVkICYmIGNvbXBvbmVudC5fc3VzcGVuZGVkKHZub2RlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxhenkobG9hZGVyKSB7XG5cdGxldCBwcm9tO1xuXHRsZXQgY29tcG9uZW50O1xuXHRsZXQgZXJyb3I7XG5cblx0ZnVuY3Rpb24gTGF6eShwcm9wcykge1xuXHRcdGlmICghcHJvbSkge1xuXHRcdFx0cHJvbSA9IGxvYWRlcigpO1xuXHRcdFx0cHJvbS50aGVuKFxuXHRcdFx0XHRleHBvcnRzID0+IHtcblx0XHRcdFx0XHRjb21wb25lbnQgPSBleHBvcnRzLmRlZmF1bHQgfHwgZXhwb3J0cztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZSA9PiB7XG5cdFx0XHRcdFx0ZXJyb3IgPSBlO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXG5cdFx0aWYgKCFjb21wb25lbnQpIHtcblx0XHRcdHRocm93IHByb207XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCBwcm9wcyk7XG5cdH1cblxuXHRMYXp5LmRpc3BsYXlOYW1lID0gJ0xhenknO1xuXHRMYXp5Ll9mb3J3YXJkZWQgPSB0cnVlO1xuXHRyZXR1cm4gTGF6eTtcbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIHRvQ2hpbGRBcnJheSB9IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQgeyBzdXNwZW5kZWQgfSBmcm9tICcuL3N1c3BlbnNlLmpzJztcblxuLy8gSW5kZXhlcyB0byBsaW5rZWQgbGlzdCBub2RlcyAobm9kZXMgYXJlIHN0b3JlZCBhcyBhcnJheXMgdG8gc2F2ZSBieXRlcykuXG5jb25zdCBTVVNQRU5ERURfQ09VTlQgPSAwO1xuY29uc3QgUkVTT0xWRURfQ09VTlQgPSAxO1xuY29uc3QgTkVYVF9OT0RFID0gMjtcblxuLy8gSGF2aW5nIGN1c3RvbSBpbmhlcml0YW5jZSBpbnN0ZWFkIG9mIGEgY2xhc3MgaGVyZSBzYXZlcyBhIGxvdCBvZiBieXRlcy5cbmV4cG9ydCBmdW5jdGlvbiBTdXNwZW5zZUxpc3QoKSB7XG5cdHRoaXMuX25leHQgPSBudWxsO1xuXHR0aGlzLl9tYXAgPSBudWxsO1xufVxuXG4vLyBNYXJrIG9uZSBvZiBjaGlsZCdzIGVhcmxpZXIgc3VzcGVuc2lvbnMgYXMgcmVzb2x2ZWQuXG4vLyBTb21lIHBlbmRpbmcgY2FsbGJhY2tzIG1heSBiZWNvbWUgY2FsbGFibGUgZHVlIHRvIHRoaXNcbi8vIChlLmcuIHRoZSBsYXN0IHN1c3BlbmRlZCBkZXNjZW5kYW50IGdldHMgcmVzb2x2ZWQgd2hlblxuLy8gcmV2ZWFsT3JkZXIgPT09ICd0b2dldGhlcicpLiBQcm9jZXNzIHRob3NlIGNhbGxiYWNrcyBhcyB3ZWxsLlxuY29uc3QgcmVzb2x2ZSA9IChsaXN0LCBjaGlsZCwgbm9kZSkgPT4ge1xuXHRpZiAoKytub2RlW1JFU09MVkVEX0NPVU5UXSA9PT0gbm9kZVtTVVNQRU5ERURfQ09VTlRdKSB7XG5cdFx0Ly8gVGhlIG51bWJlciBhIGNoaWxkIChvciBhbnkgb2YgaXRzIGRlc2NlbmRhbnRzKSBoYXMgYmVlbiBzdXNwZW5kZWRcblx0XHQvLyBtYXRjaGVzIHRoZSBudW1iZXIgb2YgdGltZXMgaXQncyBiZWVuIHJlc29sdmVkLiBUaGVyZWZvcmUgd2Vcblx0XHQvLyBtYXJrIHRoZSBjaGlsZCBhcyBjb21wbGV0ZWx5IHJlc29sdmVkIGJ5IGRlbGV0aW5nIGl0IGZyb20gLl9tYXAuXG5cdFx0Ly8gVGhpcyBpcyB1c2VkIHRvIGZpZ3VyZSBvdXQgd2hlbiAqYWxsKiBjaGlsZHJlbiBoYXZlIGJlZW4gY29tcGxldGVseVxuXHRcdC8vIHJlc29sdmVkIHdoZW4gcmV2ZWFsT3JkZXIgaXMgJ3RvZ2V0aGVyJy5cblx0XHRsaXN0Ll9tYXAuZGVsZXRlKGNoaWxkKTtcblx0fVxuXG5cdC8vIElmIHJldmVhbE9yZGVyIGlzIGZhbHN5IHRoZW4gd2UgY2FuIGRvIGFuIGVhcmx5IGV4aXQsIGFzIHRoZVxuXHQvLyBjYWxsYmFja3Mgd29uJ3QgZ2V0IHF1ZXVlZCBpbiB0aGUgbm9kZSBhbnl3YXkuXG5cdC8vIElmIHJldmVhbE9yZGVyIGlzICd0b2dldGhlcicgdGhlbiBhbHNvIGRvIGFuIGVhcmx5IGV4aXRcblx0Ly8gaWYgYWxsIHN1c3BlbmRlZCBkZXNjZW5kYW50cyBoYXZlIG5vdCB5ZXQgYmVlbiByZXNvbHZlZC5cblx0aWYgKFxuXHRcdCFsaXN0LnByb3BzLnJldmVhbE9yZGVyIHx8XG5cdFx0KGxpc3QucHJvcHMucmV2ZWFsT3JkZXJbMF0gPT09ICd0JyAmJiBsaXN0Ll9tYXAuc2l6ZSlcblx0KSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gV2FsayB0aGUgY3VycmVudGx5IHN1c3BlbmRlZCBjaGlsZHJlbiBpbiBvcmRlciwgY2FsbGluZyB0aGVpclxuXHQvLyBzdG9yZWQgY2FsbGJhY2tzIG9uIHRoZSB3YXkuIFN0b3AgaWYgd2UgZW5jb3VudGVyIGEgY2hpbGQgdGhhdFxuXHQvLyBoYXMgbm90IGJlZW4gY29tcGxldGVseSByZXNvbHZlZCB5ZXQuXG5cdG5vZGUgPSBsaXN0Ll9uZXh0O1xuXHR3aGlsZSAobm9kZSkge1xuXHRcdHdoaWxlIChub2RlLmxlbmd0aCA+IDMpIHtcblx0XHRcdG5vZGUucG9wKCkoKTtcblx0XHR9XG5cdFx0aWYgKG5vZGVbUkVTT0xWRURfQ09VTlRdIDwgbm9kZVtTVVNQRU5ERURfQ09VTlRdKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0bGlzdC5fbmV4dCA9IG5vZGUgPSBub2RlW05FWFRfTk9ERV07XG5cdH1cbn07XG5cbi8vIFRoaW5ncyB3ZSBkbyBoZXJlIHRvIHNhdmUgc29tZSBieXRlcyBidXQgYXJlIG5vdCBwcm9wZXIgSlMgaW5oZXJpdGFuY2U6XG4vLyAtIGNhbGwgYG5ldyBDb21wb25lbnQoKWAgYXMgdGhlIHByb3RvdHlwZVxuLy8gLSBkbyBub3Qgc2V0IGBTdXNwZW5zZS5wcm90b3R5cGUuY29uc3RydWN0b3JgIHRvIGBTdXNwZW5zZWBcblN1c3BlbnNlTGlzdC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50KCk7XG5cblN1c3BlbnNlTGlzdC5wcm90b3R5cGUuX3N1c3BlbmRlZCA9IGZ1bmN0aW9uKGNoaWxkKSB7XG5cdGNvbnN0IGxpc3QgPSB0aGlzO1xuXHRjb25zdCBkZWxlZ2F0ZWQgPSBzdXNwZW5kZWQobGlzdC5fdm5vZGUpO1xuXG5cdGxldCBub2RlID0gbGlzdC5fbWFwLmdldChjaGlsZCk7XG5cdG5vZGVbU1VTUEVOREVEX0NPVU5UXSsrO1xuXG5cdHJldHVybiB1bnN1c3BlbmQgPT4ge1xuXHRcdGNvbnN0IHdyYXBwZWRVbnN1c3BlbmQgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIWxpc3QucHJvcHMucmV2ZWFsT3JkZXIpIHtcblx0XHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRoZSB1bmRlZmluZWQgKGZhbHN5KSByZXZlYWxPcmRlciwgYXMgdGhlcmVcblx0XHRcdFx0Ly8gaXMgbm8gbmVlZCB0byBjb29yZGluYXRlIGEgc3BlY2lmaWMgb3JkZXIgb3IgdW5zdXNwZW5kcy5cblx0XHRcdFx0dW5zdXNwZW5kKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRub2RlLnB1c2godW5zdXNwZW5kKTtcblx0XHRcdFx0cmVzb2x2ZShsaXN0LCBjaGlsZCwgbm9kZSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoZGVsZWdhdGVkKSB7XG5cdFx0XHRkZWxlZ2F0ZWQod3JhcHBlZFVuc3VzcGVuZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdyYXBwZWRVbnN1c3BlbmQoKTtcblx0XHR9XG5cdH07XG59O1xuXG5TdXNwZW5zZUxpc3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdHRoaXMuX25leHQgPSBudWxsO1xuXHR0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG5cblx0Y29uc3QgY2hpbGRyZW4gPSB0b0NoaWxkQXJyYXkocHJvcHMuY2hpbGRyZW4pO1xuXHRpZiAocHJvcHMucmV2ZWFsT3JkZXIgJiYgcHJvcHMucmV2ZWFsT3JkZXJbMF0gPT09ICdiJykge1xuXHRcdC8vIElmIG9yZGVyID09PSAnYmFja3dhcmRzJyAob3IsIHdlbGwsIGFueXRoaW5nIHN0YXJ0aW5nIHdpdGggYSAnYicpXG5cdFx0Ly8gdGhlbiBmbGlwIHRoZSBjaGlsZCBsaXN0IGFyb3VuZCBzbyB0aGF0IHRoZSBsYXN0IGNoaWxkIHdpbGwgYmVcblx0XHQvLyB0aGUgZmlyc3QgaW4gdGhlIGxpbmtlZCBsaXN0LlxuXHRcdGNoaWxkcmVuLnJldmVyc2UoKTtcblx0fVxuXHQvLyBCdWlsZCB0aGUgbGlua2VkIGxpc3QuIEl0ZXJhdGUgdGhyb3VnaCB0aGUgY2hpbGRyZW4gaW4gcmV2ZXJzZSBvcmRlclxuXHQvLyBzbyB0aGF0IGBfbmV4dGAgcG9pbnRzIHRvIHRoZSBmaXJzdCBsaW5rZWQgbGlzdCBub2RlIHRvIGJlIHJlc29sdmVkLlxuXHRmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoOyBpLS07ICkge1xuXHRcdC8vIENyZWF0ZSBhIG5ldyBsaW5rZWQgbGlzdCBub2RlIGFzIGFuIGFycmF5IG9mIGZvcm06XG5cdFx0Ly8gXHRbc3VzcGVuZGVkX2NvdW50LCByZXNvbHZlZF9jb3VudCwgbmV4dF9ub2RlXVxuXHRcdC8vIHdoZXJlIHN1c3BlbmRlZF9jb3VudCBhbmQgcmVzb2x2ZWRfY291bnQgYXJlIG51bWVyaWMgY291bnRlcnMgZm9yXG5cdFx0Ly8ga2VlcGluZyB0cmFjayBob3cgbWFueSB0aW1lcyBhIG5vZGUgaGFzIGJlZW4gc3VzcGVuZGVkIGFuZCByZXNvbHZlZC5cblx0XHQvL1xuXHRcdC8vIE5vdGUgdGhhdCBzdXNwZW5kZWRfY291bnQgc3RhcnRzIGZyb20gMSBpbnN0ZWFkIG9mIDAsIHNvIHdlIGNhbiBibG9ja1xuXHRcdC8vIHByb2Nlc3NpbmcgY2FsbGJhY2tzIHVudGlsIGNvbXBvbmVudERpZE1vdW50IGhhcyBiZWVuIGNhbGxlZC4gSW4gYSBzZW5zZVxuXHRcdC8vIG5vZGUgaXMgc3VzcGVuZGVkIGF0IGxlYXN0IHVudGlsIGNvbXBvbmVudERpZE1vdW50IGdldHMgY2FsbGVkIVxuXHRcdC8vXG5cdFx0Ly8gUGVuZGluZyBjYWxsYmFja3MgYXJlIGFkZGVkIHRvIHRoZSBlbmQgb2YgdGhlIG5vZGU6XG5cdFx0Ly8gXHRbc3VzcGVuZGVkX2NvdW50LCByZXNvbHZlZF9jb3VudCwgbmV4dF9ub2RlLCBjYWxsYmFja18wLCBjYWxsYmFja18xLCAuLi5dXG5cdFx0dGhpcy5fbWFwLnNldChjaGlsZHJlbltpXSwgKHRoaXMuX25leHQgPSBbMSwgMCwgdGhpcy5fbmV4dF0pKTtcblx0fVxuXHRyZXR1cm4gcHJvcHMuY2hpbGRyZW47XG59O1xuXG5TdXNwZW5zZUxpc3QucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IFN1c3BlbnNlTGlzdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbigpIHtcblx0Ly8gSXRlcmF0ZSB0aHJvdWdoIGFsbCBjaGlsZHJlbiBhZnRlciBtb3VudGluZyBmb3IgdHdvIHJlYXNvbnM6XG5cdC8vIDEuIEFzIGVhY2ggbm9kZVtTVVNQRU5ERURfQ09VTlRdIHN0YXJ0cyBmcm9tIDEsIHRoaXMgaXRlcmF0aW9uIGluY3JlYXNlc1xuXHQvLyAgICBlYWNoIG5vZGVbUkVMRUFTRURfQ09VTlRdIGJ5IDEsIHRoZXJlZm9yZSBiYWxhbmNpbmcgdGhlIGNvdW50ZXJzLlxuXHQvLyAgICBUaGUgbm9kZXMgY2FuIG5vdyBiZSBjb21wbGV0ZWx5IGNvbnN1bWVkIGZyb20gdGhlIGxpbmtlZCBsaXN0LlxuXHQvLyAyLiBIYW5kbGUgbm9kZXMgdGhhdCBtaWdodCBoYXZlIGdvdHRlbiByZXNvbHZlZCBiZXR3ZWVuIHJlbmRlciBhbmRcblx0Ly8gICAgY29tcG9uZW50RGlkTW91bnQuXG5cdHRoaXMuX21hcC5mb3JFYWNoKChub2RlLCBjaGlsZCkgPT4ge1xuXHRcdHJlc29sdmUodGhpcywgY2hpbGQsIG5vZGUpO1xuXHR9KTtcbn07XG4iLCAiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgcmVuZGVyIH0gZnJvbSAncHJlYWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vc3JjL2luZGV4JykuUmVuZGVyYWJsZVByb3BzPHsgY29udGV4dDogYW55IH0+fSBwcm9wc1xuICovXG5mdW5jdGlvbiBDb250ZXh0UHJvdmlkZXIocHJvcHMpIHtcblx0dGhpcy5nZXRDaGlsZENvbnRleHQgPSAoKSA9PiBwcm9wcy5jb250ZXh0O1xuXHRyZXR1cm4gcHJvcHMuY2hpbGRyZW47XG59XG5cbi8qKlxuICogUG9ydGFsIGNvbXBvbmVudFxuICogQHRoaXMge2ltcG9ydCgnLi9pbnRlcm5hbCcpLkNvbXBvbmVudH1cbiAqIEBwYXJhbSB7b2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZH0gcHJvcHNcbiAqXG4gKiBUT0RPOiB1c2UgY3JlYXRlUm9vdCgpIGluc3RlYWQgb2YgZmFrZSByb290XG4gKi9cbmZ1bmN0aW9uIFBvcnRhbChwcm9wcykge1xuXHRjb25zdCBfdGhpcyA9IHRoaXM7XG5cdGxldCBjb250YWluZXIgPSBwcm9wcy5fY29udGFpbmVyO1xuXG5cdF90aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmVuZGVyKG51bGwsIF90aGlzLl90ZW1wKTtcblx0XHRfdGhpcy5fdGVtcCA9IG51bGw7XG5cdFx0X3RoaXMuX2NvbnRhaW5lciA9IG51bGw7XG5cdH07XG5cblx0Ly8gV2hlbiB3ZSBjaGFuZ2UgY29udGFpbmVyIHdlIHNob3VsZCBjbGVhciBvdXIgb2xkIGNvbnRhaW5lciBhbmRcblx0Ly8gaW5kaWNhdGUgYSBuZXcgbW91bnQuXG5cdGlmIChfdGhpcy5fY29udGFpbmVyICYmIF90aGlzLl9jb250YWluZXIgIT09IGNvbnRhaW5lcikge1xuXHRcdF90aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG5cdH1cblxuXHQvLyBXaGVuIHByb3BzLnZub2RlIGlzIHVuZGVmaW5lZC9mYWxzZS9udWxsIHdlIGFyZSBkZWFsaW5nIHdpdGggc29tZSBraW5kIG9mXG5cdC8vIGNvbmRpdGlvbmFsIHZub2RlLiBUaGlzIHNob3VsZCBub3QgdHJpZ2dlciBhIHJlbmRlci5cblx0aWYgKHByb3BzLl92bm9kZSkge1xuXHRcdGlmICghX3RoaXMuX3RlbXApIHtcblx0XHRcdF90aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG5cblx0XHRcdC8vIENyZWF0ZSBhIGZha2UgRE9NIHBhcmVudCBub2RlIHRoYXQgbWFuYWdlcyBhIHN1YnNldCBvZiBgY29udGFpbmVyYCdzIGNoaWxkcmVuOlxuXHRcdFx0X3RoaXMuX3RlbXAgPSB7XG5cdFx0XHRcdG5vZGVUeXBlOiAxLFxuXHRcdFx0XHRwYXJlbnROb2RlOiBjb250YWluZXIsXG5cdFx0XHRcdGNoaWxkTm9kZXM6IFtdLFxuXHRcdFx0XHRhcHBlbmRDaGlsZChjaGlsZCkge1xuXHRcdFx0XHRcdHRoaXMuY2hpbGROb2Rlcy5wdXNoKGNoaWxkKTtcblx0XHRcdFx0XHRfdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0aW5zZXJ0QmVmb3JlKGNoaWxkLCBiZWZvcmUpIHtcblx0XHRcdFx0XHR0aGlzLmNoaWxkTm9kZXMucHVzaChjaGlsZCk7XG5cdFx0XHRcdFx0X3RoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlbW92ZUNoaWxkKGNoaWxkKSB7XG5cdFx0XHRcdFx0dGhpcy5jaGlsZE5vZGVzLnNwbGljZSh0aGlzLmNoaWxkTm9kZXMuaW5kZXhPZihjaGlsZCkgPj4+IDEsIDEpO1xuXHRcdFx0XHRcdF90aGlzLl9jb250YWluZXIucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIFJlbmRlciBvdXIgd3JhcHBpbmcgZWxlbWVudCBpbnRvIHRlbXAuXG5cdFx0cmVuZGVyKFxuXHRcdFx0Y3JlYXRlRWxlbWVudChDb250ZXh0UHJvdmlkZXIsIHsgY29udGV4dDogX3RoaXMuY29udGV4dCB9LCBwcm9wcy5fdm5vZGUpLFxuXHRcdFx0X3RoaXMuX3RlbXBcblx0XHQpO1xuXHR9XG5cdC8vIFdoZW4gd2UgY29tZSBmcm9tIGEgY29uZGl0aW9uYWwgcmVuZGVyLCBvbiBhIG1vdW50ZWRcblx0Ly8gcG9ydGFsIHdlIHNob3VsZCBjbGVhciB0aGUgRE9NLlxuXHRlbHNlIGlmIChfdGhpcy5fdGVtcCkge1xuXHRcdF90aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG5cdH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBgUG9ydGFsYCB0byBjb250aW51ZSByZW5kZXJpbmcgdGhlIHZub2RlIHRyZWUgYXQgYSBkaWZmZXJlbnQgRE9NIG5vZGVcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuVk5vZGV9IHZub2RlIFRoZSB2bm9kZSB0byByZW5kZXJcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuUHJlYWN0RWxlbWVudH0gY29udGFpbmVyIFRoZSBET00gbm9kZSB0byBjb250aW51ZSByZW5kZXJpbmcgaW4gdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQb3J0YWwodm5vZGUsIGNvbnRhaW5lcikge1xuXHRyZXR1cm4gY3JlYXRlRWxlbWVudChQb3J0YWwsIHsgX3Zub2RlOiB2bm9kZSwgX2NvbnRhaW5lcjogY29udGFpbmVyIH0pO1xufVxuIiwgImltcG9ydCB7XG5cdHJlbmRlciBhcyBwcmVhY3RSZW5kZXIsXG5cdGh5ZHJhdGUgYXMgcHJlYWN0SHlkcmF0ZSxcblx0b3B0aW9ucyxcblx0dG9DaGlsZEFycmF5LFxuXHRDb21wb25lbnRcbn0gZnJvbSAncHJlYWN0JztcblxuZXhwb3J0IGNvbnN0IFJFQUNUX0VMRU1FTlRfVFlQRSA9XG5cdCh0eXBlb2YgU3ltYm9sICE9ICd1bmRlZmluZWQnICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcigncmVhY3QuZWxlbWVudCcpKSB8fFxuXHQweGVhYzc7XG5cbmNvbnN0IENBTUVMX1BST1BTID0gL14oPzphY2NlbnR8YWxpZ25tZW50fGFyYWJpY3xiYXNlbGluZXxjYXB8Y2xpcCg/IVBhdGhVKXxjb2xvcnxkb21pbmFudHxmaWxsfGZsb29kfGZvbnR8Z2x5cGgoPyFSKXxob3JpenxtYXJrZXIoPyFIfFd8VSl8b3ZlcmxpbmV8cGFpbnR8c3RvcHxzdHJpa2V0aHJvdWdofHN0cm9rZXx0ZXh0KD8hTCl8dW5kZXJsaW5lfHVuaWNvZGV8dW5pdHN8dnx2ZWN0b3J8dmVydHx3b3JkfHdyaXRpbmd8eCg/IUMpKVtBLVpdLztcblxuY29uc3QgSVNfRE9NID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcblxuLy8gSW5wdXQgdHlwZXMgZm9yIHdoaWNoIG9uY2hhbmdlIHNob3VsZCBub3QgYmUgY29udmVydGVkIHRvIG9uaW5wdXQuXG4vLyB0eXBlPVwiZmlsZXxjaGVja2JveHxyYWRpb1wiLCBwbHVzIFwicmFuZ2VcIiBpbiBJRTExLlxuLy8gKElFMTEgZG9lc24ndCBzdXBwb3J0IFN5bWJvbCwgd2hpY2ggd2UgdXNlIGhlcmUgdG8gdHVybiBgcmFkYCBpbnRvIGByYWAgd2hpY2ggbWF0Y2hlcyBcInJhbmdlXCIpXG5jb25zdCBvbkNoYW5nZUlucHV0VHlwZSA9IHR5cGUgPT5cblx0KHR5cGVvZiBTeW1ib2wgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIFN5bWJvbCgpID09ICdzeW1ib2wnXG5cdFx0PyAvZmlsfGNoZXxyYWQvaVxuXHRcdDogL2ZpbHxjaGV8cmEvaVxuXHQpLnRlc3QodHlwZSk7XG5cbi8vIFNvbWUgbGlicmFyaWVzIGxpa2UgYHJlYWN0LXZpcnR1YWxpemVkYCBleHBsaWNpdGx5IGNoZWNrIGZvciB0aGlzLlxuQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG5cbi8vIGBVTlNBRkVfKmAgbGlmZWN5Y2xlIGhvb2tzXG4vLyBQcmVhY3Qgb25seSBldmVyIGludm9rZXMgdGhlIHVucHJlZml4ZWQgbWV0aG9kcy5cbi8vIEhlcmUgd2UgcHJvdmlkZSBhIGJhc2UgXCJmYWxsYmFja1wiIGltcGxlbWVudGF0aW9uIHRoYXQgY2FsbHMgYW55IGRlZmluZWQgVU5TQUZFXyBwcmVmaXhlZCBtZXRob2QuXG4vLyAtIElmIGEgY29tcG9uZW50IGRlZmluZXMgaXRzIG93biBgY29tcG9uZW50RGlkTW91bnQoKWAgKGluY2x1ZGluZyB2aWEgZGVmaW5lUHJvcGVydHkpLCB1c2UgdGhhdC5cbi8vIC0gSWYgYSBjb21wb25lbnQgZGVmaW5lcyBgVU5TQUZFX2NvbXBvbmVudERpZE1vdW50KClgLCBgY29tcG9uZW50RGlkTW91bnRgIGlzIHRoZSBhbGlhcyBnZXR0ZXIvc2V0dGVyLlxuLy8gLSBJZiBhbnl0aGluZyBhc3NpZ25zIHRvIGFuIGBVTlNBRkVfKmAgcHJvcGVydHksIHRoZSBhc3NpZ25tZW50IGlzIGZvcndhcmRlZCB0byB0aGUgdW5wcmVmaXhlZCBwcm9wZXJ0eS5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcHJlYWN0anMvcHJlYWN0L2lzc3Vlcy8xOTQxXG5bXG5cdCdjb21wb25lbnRXaWxsTW91bnQnLFxuXHQnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsXG5cdCdjb21wb25lbnRXaWxsVXBkYXRlJ1xuXS5mb3JFYWNoKGtleSA9PiB7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCBrZXksIHtcblx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0cmV0dXJuIHRoaXNbJ1VOU0FGRV8nICsga2V5XTtcblx0XHR9LFxuXHRcdHNldCh2KSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdHZhbHVlOiB2XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufSk7XG5cbi8qKlxuICogUHJveHkgcmVuZGVyKCkgc2luY2UgUmVhY3QgcmV0dXJucyBhIENvbXBvbmVudCByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlZOb2RlfSB2bm9kZSBWTm9kZSB0cmVlIHRvIHJlbmRlclxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5QcmVhY3RFbGVtZW50fSBwYXJlbnQgRE9NIG5vZGUgdG8gcmVuZGVyIHZub2RlIHRyZWUgaW50b1xuICogQHBhcmFtIHsoKSA9PiB2b2lkfSBbY2FsbGJhY2tdIE9wdGlvbmFsIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgcmVuZGVyaW5nXG4gKiBAcmV0dXJucyB7aW1wb3J0KCcuL2ludGVybmFsJykuQ29tcG9uZW50IHwgbnVsbH0gVGhlIHJvb3QgY29tcG9uZW50IHJlZmVyZW5jZSBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIodm5vZGUsIHBhcmVudCwgY2FsbGJhY2spIHtcblx0Ly8gUmVhY3QgZGVzdHJveXMgYW55IGV4aXN0aW5nIERPTSBub2Rlcywgc2VlICMxNzI3XG5cdC8vIC4uLmJ1dCBvbmx5IG9uIHRoZSBmaXJzdCByZW5kZXIsIHNlZSAjMTgyOFxuXHRpZiAocGFyZW50Ll9jaGlsZHJlbiA9PSBudWxsKSB7XG5cdFx0cGFyZW50LnRleHRDb250ZW50ID0gJyc7XG5cdH1cblxuXHRwcmVhY3RSZW5kZXIodm5vZGUsIHBhcmVudCk7XG5cdGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykgY2FsbGJhY2soKTtcblxuXHRyZXR1cm4gdm5vZGUgPyB2bm9kZS5fY29tcG9uZW50IDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh5ZHJhdGUodm5vZGUsIHBhcmVudCwgY2FsbGJhY2spIHtcblx0cHJlYWN0SHlkcmF0ZSh2bm9kZSwgcGFyZW50KTtcblx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSBjYWxsYmFjaygpO1xuXG5cdHJldHVybiB2bm9kZSA/IHZub2RlLl9jb21wb25lbnQgOiBudWxsO1xufVxuXG5sZXQgb2xkRXZlbnRIb29rID0gb3B0aW9ucy5ldmVudDtcbm9wdGlvbnMuZXZlbnQgPSBlID0+IHtcblx0aWYgKG9sZEV2ZW50SG9vaykgZSA9IG9sZEV2ZW50SG9vayhlKTtcblx0ZS5wZXJzaXN0ID0gZW1wdHk7XG5cdGUuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBpc1Byb3BhZ2F0aW9uU3RvcHBlZDtcblx0ZS5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBpc0RlZmF1bHRQcmV2ZW50ZWQ7XG5cdHJldHVybiAoZS5uYXRpdmVFdmVudCA9IGUpO1xufTtcblxuZnVuY3Rpb24gZW1wdHkoKSB7fVxuXG5mdW5jdGlvbiBpc1Byb3BhZ2F0aW9uU3RvcHBlZCgpIHtcblx0cmV0dXJuIHRoaXMuY2FuY2VsQnViYmxlO1xufVxuXG5mdW5jdGlvbiBpc0RlZmF1bHRQcmV2ZW50ZWQoKSB7XG5cdHJldHVybiB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ7XG59XG5cbmxldCBjbGFzc05hbWVEZXNjcmlwdG9yID0ge1xuXHRjb25maWd1cmFibGU6IHRydWUsXG5cdGdldCgpIHtcblx0XHRyZXR1cm4gdGhpcy5jbGFzcztcblx0fVxufTtcblxubGV0IG9sZFZOb2RlSG9vayA9IG9wdGlvbnMudm5vZGU7XG5vcHRpb25zLnZub2RlID0gdm5vZGUgPT4ge1xuXHRsZXQgdHlwZSA9IHZub2RlLnR5cGU7XG5cdGxldCBwcm9wcyA9IHZub2RlLnByb3BzO1xuXHRsZXQgbm9ybWFsaXplZFByb3BzID0gcHJvcHM7XG5cblx0Ly8gb25seSBub3JtYWxpemUgcHJvcHMgb24gRWxlbWVudCBub2Rlc1xuXHRpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdFx0Y29uc3Qgbm9uQ3VzdG9tRWxlbWVudCA9IHR5cGUuaW5kZXhPZignLScpID09PSAtMTtcblx0XHRub3JtYWxpemVkUHJvcHMgPSB7fTtcblxuXHRcdGZvciAobGV0IGkgaW4gcHJvcHMpIHtcblx0XHRcdGxldCB2YWx1ZSA9IHByb3BzW2ldO1xuXG5cdFx0XHRpZiAoSVNfRE9NICYmIGkgPT09ICdjaGlsZHJlbicgJiYgdHlwZSA9PT0gJ25vc2NyaXB0Jykge1xuXHRcdFx0XHQvLyBFbXVsYXRlIFJlYWN0J3MgYmVoYXZpb3Igb2Ygbm90IHJlbmRlcmluZyB0aGUgY29udGVudHMgb2Ygbm9zY3JpcHQgdGFncyBvbiB0aGUgY2xpZW50LlxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoaSA9PT0gJ3ZhbHVlJyAmJiAnZGVmYXVsdFZhbHVlJyBpbiBwcm9wcyAmJiB2YWx1ZSA9PSBudWxsKSB7XG5cdFx0XHRcdC8vIFNraXAgYXBwbHlpbmcgdmFsdWUgaWYgaXQgaXMgbnVsbC91bmRlZmluZWQgYW5kIHdlIGFscmVhZHkgc2V0XG5cdFx0XHRcdC8vIGEgZGVmYXVsdCB2YWx1ZVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdGkgPT09ICdkZWZhdWx0VmFsdWUnICYmXG5cdFx0XHRcdCd2YWx1ZScgaW4gcHJvcHMgJiZcblx0XHRcdFx0cHJvcHMudmFsdWUgPT0gbnVsbFxuXHRcdFx0KSB7XG5cdFx0XHRcdC8vIGBkZWZhdWx0VmFsdWVgIGlzIHRyZWF0ZWQgYXMgYSBmYWxsYmFjayBgdmFsdWVgIHdoZW4gYSB2YWx1ZSBwcm9wIGlzIHByZXNlbnQgYnV0IG51bGwvdW5kZWZpbmVkLlxuXHRcdFx0XHQvLyBgZGVmYXVsdFZhbHVlYCBmb3IgRWxlbWVudHMgd2l0aCBubyB2YWx1ZSBwcm9wIGlzIHRoZSBzYW1lIGFzIHRoZSBET00gZGVmYXVsdFZhbHVlIHByb3BlcnR5LlxuXHRcdFx0XHRpID0gJ3ZhbHVlJztcblx0XHRcdH0gZWxzZSBpZiAoaSA9PT0gJ2Rvd25sb2FkJyAmJiB2YWx1ZSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHQvLyBDYWxsaW5nIGBzZXRBdHRyaWJ1dGVgIHdpdGggYSB0cnV0aHkgdmFsdWUgd2lsbCBsZWFkIHRvIGl0IGJlaW5nXG5cdFx0XHRcdC8vIHBhc3NlZCBhcyBhIHN0cmluZ2lmaWVkIHZhbHVlLCBlLmcuIGBkb3dubG9hZD1cInRydWVcImAuIFJlYWN0XG5cdFx0XHRcdC8vIGNvbnZlcnRzIGl0IHRvIGFuIGVtcHR5IHN0cmluZyBpbnN0ZWFkLCBvdGhlcndpc2UgdGhlIGF0dHJpYnV0ZVxuXHRcdFx0XHQvLyB2YWx1ZSB3aWxsIGJlIHVzZWQgYXMgdGhlIGZpbGUgbmFtZSBhbmQgdGhlIGZpbGUgd2lsbCBiZSBjYWxsZWRcblx0XHRcdFx0Ly8gXCJ0cnVlXCIgdXBvbiBkb3dubG9hZGluZyBpdC5cblx0XHRcdFx0dmFsdWUgPSAnJztcblx0XHRcdH0gZWxzZSBpZiAoL29uZG91YmxlY2xpY2svaS50ZXN0KGkpKSB7XG5cdFx0XHRcdGkgPSAnb25kYmxjbGljayc7XG5cdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHQvXm9uY2hhbmdlKHRleHRhcmVhfGlucHV0KS9pLnRlc3QoaSArIHR5cGUpICYmXG5cdFx0XHRcdCFvbkNoYW5nZUlucHV0VHlwZShwcm9wcy50eXBlKVxuXHRcdFx0KSB7XG5cdFx0XHRcdGkgPSAnb25pbnB1dCc7XG5cdFx0XHR9IGVsc2UgaWYgKC9eb25mb2N1cyQvaS50ZXN0KGkpKSB7XG5cdFx0XHRcdGkgPSAnb25mb2N1c2luJztcblx0XHRcdH0gZWxzZSBpZiAoL15vbmJsdXIkL2kudGVzdChpKSkge1xuXHRcdFx0XHRpID0gJ29uZm9jdXNvdXQnO1xuXHRcdFx0fSBlbHNlIGlmICgvXm9uKEFuaXxUcmF8VG91fEJlZm9yZUlucHxDb21wbykvLnRlc3QoaSkpIHtcblx0XHRcdFx0aSA9IGkudG9Mb3dlckNhc2UoKTtcblx0XHRcdH0gZWxzZSBpZiAobm9uQ3VzdG9tRWxlbWVudCAmJiBDQU1FTF9QUk9QUy50ZXN0KGkpKSB7XG5cdFx0XHRcdGkgPSBpLnJlcGxhY2UoL1tBLVowLTldLywgJy0kJicpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdHZhbHVlID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXG5cdFx0XHRub3JtYWxpemVkUHJvcHNbaV0gPSB2YWx1ZTtcblx0XHR9XG5cblx0XHQvLyBBZGQgc3VwcG9ydCBmb3IgYXJyYXkgc2VsZWN0IHZhbHVlczogPHNlbGVjdCBtdWx0aXBsZSB2YWx1ZT17W119IC8+XG5cdFx0aWYgKFxuXHRcdFx0dHlwZSA9PSAnc2VsZWN0JyAmJlxuXHRcdFx0bm9ybWFsaXplZFByb3BzLm11bHRpcGxlICYmXG5cdFx0XHRBcnJheS5pc0FycmF5KG5vcm1hbGl6ZWRQcm9wcy52YWx1ZSlcblx0XHQpIHtcblx0XHRcdC8vIGZvckVhY2goKSBhbHdheXMgcmV0dXJucyB1bmRlZmluZWQsIHdoaWNoIHdlIGFidXNlIGhlcmUgdG8gdW5zZXQgdGhlIHZhbHVlIHByb3AuXG5cdFx0XHRub3JtYWxpemVkUHJvcHMudmFsdWUgPSB0b0NoaWxkQXJyYXkocHJvcHMuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuXHRcdFx0XHRjaGlsZC5wcm9wcy5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0bm9ybWFsaXplZFByb3BzLnZhbHVlLmluZGV4T2YoY2hpbGQucHJvcHMudmFsdWUpICE9IC0xO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkaW5nIHN1cHBvcnQgZm9yIGRlZmF1bHRWYWx1ZSBpbiBzZWxlY3QgdGFnXG5cdFx0aWYgKHR5cGUgPT0gJ3NlbGVjdCcgJiYgbm9ybWFsaXplZFByb3BzLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG5cdFx0XHRub3JtYWxpemVkUHJvcHMudmFsdWUgPSB0b0NoaWxkQXJyYXkocHJvcHMuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuXHRcdFx0XHRpZiAobm9ybWFsaXplZFByb3BzLm11bHRpcGxlKSB7XG5cdFx0XHRcdFx0Y2hpbGQucHJvcHMuc2VsZWN0ZWQgPVxuXHRcdFx0XHRcdFx0bm9ybWFsaXplZFByb3BzLmRlZmF1bHRWYWx1ZS5pbmRleE9mKGNoaWxkLnByb3BzLnZhbHVlKSAhPSAtMTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjaGlsZC5wcm9wcy5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0XHRub3JtYWxpemVkUHJvcHMuZGVmYXVsdFZhbHVlID09IGNoaWxkLnByb3BzLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2bm9kZS5wcm9wcyA9IG5vcm1hbGl6ZWRQcm9wcztcblxuXHRcdGlmIChwcm9wcy5jbGFzcyAhPSBwcm9wcy5jbGFzc05hbWUpIHtcblx0XHRcdGNsYXNzTmFtZURlc2NyaXB0b3IuZW51bWVyYWJsZSA9ICdjbGFzc05hbWUnIGluIHByb3BzO1xuXHRcdFx0aWYgKHByb3BzLmNsYXNzTmFtZSAhPSBudWxsKSBub3JtYWxpemVkUHJvcHMuY2xhc3MgPSBwcm9wcy5jbGFzc05hbWU7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobm9ybWFsaXplZFByb3BzLCAnY2xhc3NOYW1lJywgY2xhc3NOYW1lRGVzY3JpcHRvcik7XG5cdFx0fVxuXHR9XG5cblx0dm5vZGUuJCR0eXBlb2YgPSBSRUFDVF9FTEVNRU5UX1RZUEU7XG5cblx0aWYgKG9sZFZOb2RlSG9vaykgb2xkVk5vZGVIb29rKHZub2RlKTtcbn07XG5cbi8vIE9ubHkgbmVlZGVkIGZvciByZWFjdC1yZWxheVxubGV0IGN1cnJlbnRDb21wb25lbnQ7XG5jb25zdCBvbGRCZWZvcmVSZW5kZXIgPSBvcHRpb25zLl9yZW5kZXI7XG5vcHRpb25zLl9yZW5kZXIgPSBmdW5jdGlvbih2bm9kZSkge1xuXHRpZiAob2xkQmVmb3JlUmVuZGVyKSB7XG5cdFx0b2xkQmVmb3JlUmVuZGVyKHZub2RlKTtcblx0fVxuXHRjdXJyZW50Q29tcG9uZW50ID0gdm5vZGUuX2NvbXBvbmVudDtcbn07XG5cbi8vIFRoaXMgaXMgYSB2ZXJ5IHZlcnkgcHJpdmF0ZSBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgUmVhY3QgaXRcbi8vIGlzIHVzZWQgdG8gc29ydC1vZiBkbyBydW50aW1lIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBTbyBmYXJcbi8vIG9ubHkgYHJlYWN0LXJlbGF5YCBtYWtlcyB1c2Ugb2YgaXQuIEl0IHVzZXMgaXQgdG8gcmVhZCB0aGVcbi8vIGNvbnRleHQgdmFsdWUuXG5leHBvcnQgY29uc3QgX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSB7XG5cdFJlYWN0Q3VycmVudERpc3BhdGNoZXI6IHtcblx0XHRjdXJyZW50OiB7XG5cdFx0XHRyZWFkQ29udGV4dChjb250ZXh0KSB7XG5cdFx0XHRcdHJldHVybiBjdXJyZW50Q29tcG9uZW50Ll9nbG9iYWxDb250ZXh0W2NvbnRleHQuX2lkXS5wcm9wcy52YWx1ZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG4iLCAiaW1wb3J0IHtcblx0Y3JlYXRlRWxlbWVudCxcblx0cmVuZGVyIGFzIHByZWFjdFJlbmRlcixcblx0Y2xvbmVFbGVtZW50IGFzIHByZWFjdENsb25lRWxlbWVudCxcblx0Y3JlYXRlUmVmLFxuXHRDb21wb25lbnQsXG5cdGNyZWF0ZUNvbnRleHQsXG5cdEZyYWdtZW50XG59IGZyb20gJ3ByZWFjdCc7XG5pbXBvcnQge1xuXHR1c2VTdGF0ZSxcblx0dXNlUmVkdWNlcixcblx0dXNlRWZmZWN0LFxuXHR1c2VMYXlvdXRFZmZlY3QsXG5cdHVzZVJlZixcblx0dXNlSW1wZXJhdGl2ZUhhbmRsZSxcblx0dXNlTWVtbyxcblx0dXNlQ2FsbGJhY2ssXG5cdHVzZUNvbnRleHQsXG5cdHVzZURlYnVnVmFsdWVcbn0gZnJvbSAncHJlYWN0L2hvb2tzJztcbmltcG9ydCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICcuL1B1cmVDb21wb25lbnQnO1xuaW1wb3J0IHsgbWVtbyB9IGZyb20gJy4vbWVtbyc7XG5pbXBvcnQgeyBmb3J3YXJkUmVmIH0gZnJvbSAnLi9mb3J3YXJkUmVmJztcbmltcG9ydCB7IENoaWxkcmVuIH0gZnJvbSAnLi9DaGlsZHJlbic7XG5pbXBvcnQgeyBTdXNwZW5zZSwgbGF6eSB9IGZyb20gJy4vc3VzcGVuc2UnO1xuaW1wb3J0IHsgU3VzcGVuc2VMaXN0IH0gZnJvbSAnLi9zdXNwZW5zZS1saXN0JztcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gJy4vcG9ydGFscyc7XG5pbXBvcnQge1xuXHRoeWRyYXRlLFxuXHRyZW5kZXIsXG5cdFJFQUNUX0VMRU1FTlRfVFlQRSxcblx0X19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRURcbn0gZnJvbSAnLi9yZW5kZXInO1xuXG5jb25zdCB2ZXJzaW9uID0gJzE3LjAuMic7IC8vIHRyaWNrIGxpYnJhcmllcyB0byB0aGluayB3ZSBhcmUgcmVhY3RcblxuLyoqXG4gKiBMZWdhY3kgdmVyc2lvbiBvZiBjcmVhdGVFbGVtZW50LlxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5WTm9kZVtcInR5cGVcIl19IHR5cGUgVGhlIG5vZGUgbmFtZSBvciBDb21wb25lbnQgY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRmFjdG9yeSh0eXBlKSB7XG5cdHJldHVybiBjcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBlbGVtZW50IGlzIGEgdmFsaWQgKHApcmVhY3Qgbm9kZS5cbiAqIEBwYXJhbSB7Kn0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50KGVsZW1lbnQpIHtcblx0cmV0dXJuICEhZWxlbWVudCAmJiBlbGVtZW50LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7XG59XG5cbi8qKlxuICogV3JhcCBgY2xvbmVFbGVtZW50YCB0byBhYm9ydCBpZiB0aGUgcGFzc2VkIGVsZW1lbnQgaXMgbm90IGEgdmFsaWQgZWxlbWVudCBhbmQgYXBwbHlcbiAqIGFsbCB2bm9kZSBub3JtYWxpemF0aW9ucy5cbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2ludGVybmFsJykuVk5vZGV9IGVsZW1lbnQgVGhlIHZub2RlIHRvIGNsb25lXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgUHJvcHMgdG8gYWRkIHdoZW4gY2xvbmluZ1xuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnRDaGlsZHJlbj59IHJlc3QgT3B0aW9uYWwgY29tcG9uZW50IGNoaWxkcmVuXG4gKi9cbmZ1bmN0aW9uIGNsb25lRWxlbWVudChlbGVtZW50KSB7XG5cdGlmICghaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHJldHVybiBlbGVtZW50O1xuXHRyZXR1cm4gcHJlYWN0Q2xvbmVFbGVtZW50LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgY29tcG9uZW50IHRyZWUgZnJvbSB0aGUgRE9NLCBpbmNsdWRpbmcgc3RhdGUgYW5kIGV2ZW50IGhhbmRsZXJzLlxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5QcmVhY3RFbGVtZW50fSBjb250YWluZXJcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50QXROb2RlKGNvbnRhaW5lcikge1xuXHRpZiAoY29udGFpbmVyLl9jaGlsZHJlbikge1xuXHRcdHByZWFjdFJlbmRlcihudWxsLCBjb250YWluZXIpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIG1hdGNoaW5nIERPTSBub2RlIGZvciBhIGNvbXBvbmVudFxuICogQHBhcmFtIHtpbXBvcnQoJy4vaW50ZXJuYWwnKS5Db21wb25lbnR9IGNvbXBvbmVudFxuICogQHJldHVybnMge2ltcG9ydCgnLi9pbnRlcm5hbCcpLlByZWFjdEVsZW1lbnQgfCBudWxsfVxuICovXG5mdW5jdGlvbiBmaW5kRE9NTm9kZShjb21wb25lbnQpIHtcblx0cmV0dXJuIChcblx0XHQoY29tcG9uZW50ICYmXG5cdFx0XHQoY29tcG9uZW50LmJhc2UgfHwgKGNvbXBvbmVudC5ub2RlVHlwZSA9PT0gMSAmJiBjb21wb25lbnQpKSkgfHxcblx0XHRudWxsXG5cdCk7XG59XG5cbi8qKlxuICogRGVwcmVjYXRlZCB3YXkgdG8gY29udHJvbCBiYXRjaGVkIHJlbmRlcmluZyBpbnNpZGUgdGhlIHJlY29uY2lsZXIsIGJ1dCB3ZVxuICogYWxyZWFkeSBzY2hlZHVsZSBpbiBiYXRjaGVzIGluc2lkZSBvdXIgcmVuZGVyaW5nIGNvZGVcbiAqIEB0ZW1wbGF0ZSBBcmdcbiAqIEBwYXJhbSB7KGFyZzogQXJnKSA9PiB2b2lkfSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHRyaWdnZXJzIHRoZSB1cGRhdGVkXG4gKiBAcGFyYW0ge0FyZ30gW2FyZ10gT3B0aW9uYWwgYXJndW1lbnQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBjYWxsYmFja1xuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG5jb25zdCB1bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyA9IChjYWxsYmFjaywgYXJnKSA9PiBjYWxsYmFjayhhcmcpO1xuXG4vKipcbiAqIEluIFJlYWN0LCBgZmx1c2hTeW5jYCBmbHVzaGVzIHRoZSBlbnRpcmUgdHJlZSBhbmQgZm9yY2VzIGEgcmVyZW5kZXIuIEl0J3NcbiAqIGltcGxtZW50ZWQgaGVyZSBhcyBhIG5vLW9wLlxuICogQHRlbXBsYXRlIEFyZ1xuICogQHRlbXBsYXRlIFJlc3VsdFxuICogQHBhcmFtIHsoYXJnOiBBcmcpID0+IFJlc3VsdH0gY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBydW5zIGJlZm9yZSB0aGUgZmx1c2hcbiAqIEBwYXJhbSB7QXJnfSBbYXJnXSBPcHRpb25hbCBhcnVnbWVudCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrXG4gKiBAcmV0dXJuc1xuICovXG5jb25zdCBmbHVzaFN5bmMgPSAoY2FsbGJhY2ssIGFyZykgPT4gY2FsbGJhY2soYXJnKTtcblxuLyoqXG4gKiBTdHJpY3QgTW9kZSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gUHJlYWN0LCBzbyB3ZSBwcm92aWRlIGEgc3RhbmQtaW4gZm9yIGl0XG4gKiB0aGF0IGp1c3QgcmVuZGVycyBpdHMgY2hpbGRyZW4gd2l0aG91dCBpbXBvc2luZyBhbnkgcmVzdHJpY3Rpb25zLlxuICovXG5jb25zdCBTdHJpY3RNb2RlID0gRnJhZ21lbnQ7XG5cbmV4cG9ydCAqIGZyb20gJ3ByZWFjdC9ob29rcyc7XG5leHBvcnQge1xuXHR2ZXJzaW9uLFxuXHRDaGlsZHJlbixcblx0cmVuZGVyLFxuXHRoeWRyYXRlLFxuXHR1bm1vdW50Q29tcG9uZW50QXROb2RlLFxuXHRjcmVhdGVQb3J0YWwsXG5cdGNyZWF0ZUVsZW1lbnQsXG5cdGNyZWF0ZUNvbnRleHQsXG5cdGNyZWF0ZUZhY3RvcnksXG5cdGNsb25lRWxlbWVudCxcblx0Y3JlYXRlUmVmLFxuXHRGcmFnbWVudCxcblx0aXNWYWxpZEVsZW1lbnQsXG5cdGZpbmRET01Ob2RlLFxuXHRDb21wb25lbnQsXG5cdFB1cmVDb21wb25lbnQsXG5cdG1lbW8sXG5cdGZvcndhcmRSZWYsXG5cdGZsdXNoU3luYyxcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuXHR1bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyxcblx0U3RyaWN0TW9kZSxcblx0U3VzcGVuc2UsXG5cdFN1c3BlbnNlTGlzdCxcblx0bGF6eSxcblx0X19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRURcbn07XG5cbi8vIFJlYWN0IGNvcGllcyB0aGUgbmFtZWQgZXhwb3J0cyB0byB0aGUgZGVmYXVsdCBvbmUuXG5leHBvcnQgZGVmYXVsdCB7XG5cdHVzZVN0YXRlLFxuXHR1c2VSZWR1Y2VyLFxuXHR1c2VFZmZlY3QsXG5cdHVzZUxheW91dEVmZmVjdCxcblx0dXNlUmVmLFxuXHR1c2VJbXBlcmF0aXZlSGFuZGxlLFxuXHR1c2VNZW1vLFxuXHR1c2VDYWxsYmFjayxcblx0dXNlQ29udGV4dCxcblx0dXNlRGVidWdWYWx1ZSxcblx0dmVyc2lvbixcblx0Q2hpbGRyZW4sXG5cdHJlbmRlcixcblx0aHlkcmF0ZSxcblx0dW5tb3VudENvbXBvbmVudEF0Tm9kZSxcblx0Y3JlYXRlUG9ydGFsLFxuXHRjcmVhdGVFbGVtZW50LFxuXHRjcmVhdGVDb250ZXh0LFxuXHRjcmVhdGVGYWN0b3J5LFxuXHRjbG9uZUVsZW1lbnQsXG5cdGNyZWF0ZVJlZixcblx0RnJhZ21lbnQsXG5cdGlzVmFsaWRFbGVtZW50LFxuXHRmaW5kRE9NTm9kZSxcblx0Q29tcG9uZW50LFxuXHRQdXJlQ29tcG9uZW50LFxuXHRtZW1vLFxuXHRmb3J3YXJkUmVmLFxuXHRmbHVzaFN5bmMsXG5cdHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzLFxuXHRTdHJpY3RNb2RlLFxuXHRTdXNwZW5zZSxcblx0U3VzcGVuc2VMaXN0LFxuXHRsYXp5LFxuXHRfX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRFxufTtcbiIsICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xuZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGNoaWxkKT0+Y2xvbmVEZWVwKGNoaWxkKVxuICAgICAgICApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcCgoW2ssIHZdKT0+W1xuICAgICAgICAgICAgICAgIGssXG4gICAgICAgICAgICAgICAgY2xvbmVEZWVwKHYpXG4gICAgICAgICAgICBdXG4gICAgICAgICkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4iLCAibW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbnRlbnQ6IFtdLFxuICBwcmVzZXRzOiBbXSxcbiAgZGFya01vZGU6ICdtZWRpYScsIC8vIG9yICdjbGFzcydcbiAgdGhlbWU6IHtcbiAgICBzY3JlZW5zOiB7XG4gICAgICBzbTogJzY0MHB4JyxcbiAgICAgIG1kOiAnNzY4cHgnLFxuICAgICAgbGc6ICcxMDI0cHgnLFxuICAgICAgeGw6ICcxMjgwcHgnLFxuICAgICAgJzJ4bCc6ICcxNTM2cHgnLFxuICAgIH0sXG4gICAgY29sb3JzOiAoeyBjb2xvcnMgfSkgPT4gKHtcbiAgICAgIGluaGVyaXQ6IGNvbG9ycy5pbmhlcml0LFxuICAgICAgY3VycmVudDogY29sb3JzLmN1cnJlbnQsXG4gICAgICB0cmFuc3BhcmVudDogY29sb3JzLnRyYW5zcGFyZW50LFxuICAgICAgYmxhY2s6IGNvbG9ycy5ibGFjayxcbiAgICAgIHdoaXRlOiBjb2xvcnMud2hpdGUsXG4gICAgICBzbGF0ZTogY29sb3JzLnNsYXRlLFxuICAgICAgZ3JheTogY29sb3JzLmdyYXksXG4gICAgICB6aW5jOiBjb2xvcnMuemluYyxcbiAgICAgIG5ldXRyYWw6IGNvbG9ycy5uZXV0cmFsLFxuICAgICAgc3RvbmU6IGNvbG9ycy5zdG9uZSxcbiAgICAgIHJlZDogY29sb3JzLnJlZCxcbiAgICAgIG9yYW5nZTogY29sb3JzLm9yYW5nZSxcbiAgICAgIGFtYmVyOiBjb2xvcnMuYW1iZXIsXG4gICAgICB5ZWxsb3c6IGNvbG9ycy55ZWxsb3csXG4gICAgICBsaW1lOiBjb2xvcnMubGltZSxcbiAgICAgIGdyZWVuOiBjb2xvcnMuZ3JlZW4sXG4gICAgICBlbWVyYWxkOiBjb2xvcnMuZW1lcmFsZCxcbiAgICAgIHRlYWw6IGNvbG9ycy50ZWFsLFxuICAgICAgY3lhbjogY29sb3JzLmN5YW4sXG4gICAgICBza3k6IGNvbG9ycy5za3ksXG4gICAgICBibHVlOiBjb2xvcnMuYmx1ZSxcbiAgICAgIGluZGlnbzogY29sb3JzLmluZGlnbyxcbiAgICAgIHZpb2xldDogY29sb3JzLnZpb2xldCxcbiAgICAgIHB1cnBsZTogY29sb3JzLnB1cnBsZSxcbiAgICAgIGZ1Y2hzaWE6IGNvbG9ycy5mdWNoc2lhLFxuICAgICAgcGluazogY29sb3JzLnBpbmssXG4gICAgICByb3NlOiBjb2xvcnMucm9zZSxcbiAgICB9KSxcbiAgICBjb2x1bW5zOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICAxOiAnMScsXG4gICAgICAyOiAnMicsXG4gICAgICAzOiAnMycsXG4gICAgICA0OiAnNCcsXG4gICAgICA1OiAnNScsXG4gICAgICA2OiAnNicsXG4gICAgICA3OiAnNycsXG4gICAgICA4OiAnOCcsXG4gICAgICA5OiAnOScsXG4gICAgICAxMDogJzEwJyxcbiAgICAgIDExOiAnMTEnLFxuICAgICAgMTI6ICcxMicsXG4gICAgICAnM3hzJzogJzE2cmVtJyxcbiAgICAgICcyeHMnOiAnMThyZW0nLFxuICAgICAgeHM6ICcyMHJlbScsXG4gICAgICBzbTogJzI0cmVtJyxcbiAgICAgIG1kOiAnMjhyZW0nLFxuICAgICAgbGc6ICczMnJlbScsXG4gICAgICB4bDogJzM2cmVtJyxcbiAgICAgICcyeGwnOiAnNDJyZW0nLFxuICAgICAgJzN4bCc6ICc0OHJlbScsXG4gICAgICAnNHhsJzogJzU2cmVtJyxcbiAgICAgICc1eGwnOiAnNjRyZW0nLFxuICAgICAgJzZ4bCc6ICc3MnJlbScsXG4gICAgICAnN3hsJzogJzgwcmVtJyxcbiAgICB9LFxuICAgIHNwYWNpbmc6IHtcbiAgICAgIHB4OiAnMXB4JyxcbiAgICAgIDA6ICcwcHgnLFxuICAgICAgMC41OiAnMC4xMjVyZW0nLFxuICAgICAgMTogJzAuMjVyZW0nLFxuICAgICAgMS41OiAnMC4zNzVyZW0nLFxuICAgICAgMjogJzAuNXJlbScsXG4gICAgICAyLjU6ICcwLjYyNXJlbScsXG4gICAgICAzOiAnMC43NXJlbScsXG4gICAgICAzLjU6ICcwLjg3NXJlbScsXG4gICAgICA0OiAnMXJlbScsXG4gICAgICA1OiAnMS4yNXJlbScsXG4gICAgICA2OiAnMS41cmVtJyxcbiAgICAgIDc6ICcxLjc1cmVtJyxcbiAgICAgIDg6ICcycmVtJyxcbiAgICAgIDk6ICcyLjI1cmVtJyxcbiAgICAgIDEwOiAnMi41cmVtJyxcbiAgICAgIDExOiAnMi43NXJlbScsXG4gICAgICAxMjogJzNyZW0nLFxuICAgICAgMTQ6ICczLjVyZW0nLFxuICAgICAgMTY6ICc0cmVtJyxcbiAgICAgIDIwOiAnNXJlbScsXG4gICAgICAyNDogJzZyZW0nLFxuICAgICAgMjg6ICc3cmVtJyxcbiAgICAgIDMyOiAnOHJlbScsXG4gICAgICAzNjogJzlyZW0nLFxuICAgICAgNDA6ICcxMHJlbScsXG4gICAgICA0NDogJzExcmVtJyxcbiAgICAgIDQ4OiAnMTJyZW0nLFxuICAgICAgNTI6ICcxM3JlbScsXG4gICAgICA1NjogJzE0cmVtJyxcbiAgICAgIDYwOiAnMTVyZW0nLFxuICAgICAgNjQ6ICcxNnJlbScsXG4gICAgICA3MjogJzE4cmVtJyxcbiAgICAgIDgwOiAnMjByZW0nLFxuICAgICAgOTY6ICcyNHJlbScsXG4gICAgfSxcbiAgICBhbmltYXRpb246IHtcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICAgIHNwaW46ICdzcGluIDFzIGxpbmVhciBpbmZpbml0ZScsXG4gICAgICBwaW5nOiAncGluZyAxcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKSBpbmZpbml0ZScsXG4gICAgICBwdWxzZTogJ3B1bHNlIDJzIGN1YmljLWJlemllcigwLjQsIDAsIDAuNiwgMSkgaW5maW5pdGUnLFxuICAgICAgYm91bmNlOiAnYm91bmNlIDFzIGluZmluaXRlJyxcbiAgICB9LFxuICAgIGFzcGVjdFJhdGlvOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICBzcXVhcmU6ICcxIC8gMScsXG4gICAgICB2aWRlbzogJzE2IC8gOScsXG4gICAgfSxcbiAgICBiYWNrZHJvcEJsdXI6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdibHVyJyksXG4gICAgYmFja2Ryb3BCcmlnaHRuZXNzOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnYnJpZ2h0bmVzcycpLFxuICAgIGJhY2tkcm9wQ29udHJhc3Q6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdjb250cmFzdCcpLFxuICAgIGJhY2tkcm9wR3JheXNjYWxlOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnZ3JheXNjYWxlJyksXG4gICAgYmFja2Ryb3BIdWVSb3RhdGU6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdodWVSb3RhdGUnKSxcbiAgICBiYWNrZHJvcEludmVydDogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ2ludmVydCcpLFxuICAgIGJhY2tkcm9wT3BhY2l0eTogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ29wYWNpdHknKSxcbiAgICBiYWNrZHJvcFNhdHVyYXRlOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnc2F0dXJhdGUnKSxcbiAgICBiYWNrZHJvcFNlcGlhOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnc2VwaWEnKSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdjb2xvcnMnKSxcbiAgICBiYWNrZ3JvdW5kSW1hZ2U6IHtcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICAgICdncmFkaWVudC10by10JzogJ2xpbmVhci1ncmFkaWVudCh0byB0b3AsIHZhcigtLXR3LWdyYWRpZW50LXN0b3BzKSknLFxuICAgICAgJ2dyYWRpZW50LXRvLXRyJzogJ2xpbmVhci1ncmFkaWVudCh0byB0b3AgcmlnaHQsIHZhcigtLXR3LWdyYWRpZW50LXN0b3BzKSknLFxuICAgICAgJ2dyYWRpZW50LXRvLXInOiAnbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCB2YXIoLS10dy1ncmFkaWVudC1zdG9wcykpJyxcbiAgICAgICdncmFkaWVudC10by1icic6ICdsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tIHJpZ2h0LCB2YXIoLS10dy1ncmFkaWVudC1zdG9wcykpJyxcbiAgICAgICdncmFkaWVudC10by1iJzogJ2xpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHZhcigtLXR3LWdyYWRpZW50LXN0b3BzKSknLFxuICAgICAgJ2dyYWRpZW50LXRvLWJsJzogJ2xpbmVhci1ncmFkaWVudCh0byBib3R0b20gbGVmdCwgdmFyKC0tdHctZ3JhZGllbnQtc3RvcHMpKScsXG4gICAgICAnZ3JhZGllbnQtdG8tbCc6ICdsaW5lYXItZ3JhZGllbnQodG8gbGVmdCwgdmFyKC0tdHctZ3JhZGllbnQtc3RvcHMpKScsXG4gICAgICAnZ3JhZGllbnQtdG8tdGwnOiAnbGluZWFyLWdyYWRpZW50KHRvIHRvcCBsZWZ0LCB2YXIoLS10dy1ncmFkaWVudC1zdG9wcykpJyxcbiAgICB9LFxuICAgIGJhY2tncm91bmRPcGFjaXR5OiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnb3BhY2l0eScpLFxuICAgIGJhY2tncm91bmRQb3NpdGlvbjoge1xuICAgICAgYm90dG9tOiAnYm90dG9tJyxcbiAgICAgIGNlbnRlcjogJ2NlbnRlcicsXG4gICAgICBsZWZ0OiAnbGVmdCcsXG4gICAgICAnbGVmdC1ib3R0b20nOiAnbGVmdCBib3R0b20nLFxuICAgICAgJ2xlZnQtdG9wJzogJ2xlZnQgdG9wJyxcbiAgICAgIHJpZ2h0OiAncmlnaHQnLFxuICAgICAgJ3JpZ2h0LWJvdHRvbSc6ICdyaWdodCBib3R0b20nLFxuICAgICAgJ3JpZ2h0LXRvcCc6ICdyaWdodCB0b3AnLFxuICAgICAgdG9wOiAndG9wJyxcbiAgICB9LFxuICAgIGJhY2tncm91bmRTaXplOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICBjb3ZlcjogJ2NvdmVyJyxcbiAgICAgIGNvbnRhaW46ICdjb250YWluJyxcbiAgICB9LFxuICAgIGJsdXI6IHtcbiAgICAgIDA6ICcwJyxcbiAgICAgIG5vbmU6ICcwJyxcbiAgICAgIHNtOiAnNHB4JyxcbiAgICAgIERFRkFVTFQ6ICc4cHgnLFxuICAgICAgbWQ6ICcxMnB4JyxcbiAgICAgIGxnOiAnMTZweCcsXG4gICAgICB4bDogJzI0cHgnLFxuICAgICAgJzJ4bCc6ICc0MHB4JyxcbiAgICAgICczeGwnOiAnNjRweCcsXG4gICAgfSxcbiAgICBicmlnaHRuZXNzOiB7XG4gICAgICAwOiAnMCcsXG4gICAgICA1MDogJy41JyxcbiAgICAgIDc1OiAnLjc1JyxcbiAgICAgIDkwOiAnLjknLFxuICAgICAgOTU6ICcuOTUnLFxuICAgICAgMTAwOiAnMScsXG4gICAgICAxMDU6ICcxLjA1JyxcbiAgICAgIDExMDogJzEuMScsXG4gICAgICAxMjU6ICcxLjI1JyxcbiAgICAgIDE1MDogJzEuNScsXG4gICAgICAyMDA6ICcyJyxcbiAgICB9LFxuICAgIGJvcmRlckNvbG9yOiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgLi4udGhlbWUoJ2NvbG9ycycpLFxuICAgICAgREVGQVVMVDogdGhlbWUoJ2NvbG9ycy5ncmF5LjIwMCcsICdjdXJyZW50Q29sb3InKSxcbiAgICB9KSxcbiAgICBib3JkZXJPcGFjaXR5OiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnb3BhY2l0eScpLFxuICAgIGJvcmRlclJhZGl1czoge1xuICAgICAgbm9uZTogJzBweCcsXG4gICAgICBzbTogJzAuMTI1cmVtJyxcbiAgICAgIERFRkFVTFQ6ICcwLjI1cmVtJyxcbiAgICAgIG1kOiAnMC4zNzVyZW0nLFxuICAgICAgbGc6ICcwLjVyZW0nLFxuICAgICAgeGw6ICcwLjc1cmVtJyxcbiAgICAgICcyeGwnOiAnMXJlbScsXG4gICAgICAnM3hsJzogJzEuNXJlbScsXG4gICAgICBmdWxsOiAnOTk5OXB4JyxcbiAgICB9LFxuICAgIGJvcmRlclNwYWNpbmc6ICh7IHRoZW1lIH0pID0+ICh7XG4gICAgICAuLi50aGVtZSgnc3BhY2luZycpLFxuICAgIH0pLFxuICAgIGJvcmRlcldpZHRoOiB7XG4gICAgICBERUZBVUxUOiAnMXB4JyxcbiAgICAgIDA6ICcwcHgnLFxuICAgICAgMjogJzJweCcsXG4gICAgICA0OiAnNHB4JyxcbiAgICAgIDg6ICc4cHgnLFxuICAgIH0sXG4gICAgYm94U2hhZG93OiB7XG4gICAgICBzbTogJzAgMXB4IDJweCAwIHJnYigwIDAgMCAvIDAuMDUpJyxcbiAgICAgIERFRkFVTFQ6ICcwIDFweCAzcHggMCByZ2IoMCAwIDAgLyAwLjEpLCAwIDFweCAycHggLTFweCByZ2IoMCAwIDAgLyAwLjEpJyxcbiAgICAgIG1kOiAnMCA0cHggNnB4IC0xcHggcmdiKDAgMCAwIC8gMC4xKSwgMCAycHggNHB4IC0ycHggcmdiKDAgMCAwIC8gMC4xKScsXG4gICAgICBsZzogJzAgMTBweCAxNXB4IC0zcHggcmdiKDAgMCAwIC8gMC4xKSwgMCA0cHggNnB4IC00cHggcmdiKDAgMCAwIC8gMC4xKScsXG4gICAgICB4bDogJzAgMjBweCAyNXB4IC01cHggcmdiKDAgMCAwIC8gMC4xKSwgMCA4cHggMTBweCAtNnB4IHJnYigwIDAgMCAvIDAuMSknLFxuICAgICAgJzJ4bCc6ICcwIDI1cHggNTBweCAtMTJweCByZ2IoMCAwIDAgLyAwLjI1KScsXG4gICAgICBpbm5lcjogJ2luc2V0IDAgMnB4IDRweCAwIHJnYigwIDAgMCAvIDAuMDUpJyxcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICB9LFxuICAgIGJveFNoYWRvd0NvbG9yOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnY29sb3JzJyksXG4gICAgY2FyZXRDb2xvcjogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ2NvbG9ycycpLFxuICAgIGFjY2VudENvbG9yOiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgLi4udGhlbWUoJ2NvbG9ycycpLFxuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgIH0pLFxuICAgIGNvbnRyYXN0OiB7XG4gICAgICAwOiAnMCcsXG4gICAgICA1MDogJy41JyxcbiAgICAgIDc1OiAnLjc1JyxcbiAgICAgIDEwMDogJzEnLFxuICAgICAgMTI1OiAnMS4yNScsXG4gICAgICAxNTA6ICcxLjUnLFxuICAgICAgMjAwOiAnMicsXG4gICAgfSxcbiAgICBjb250YWluZXI6IHt9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICB9LFxuICAgIGN1cnNvcjoge1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnLFxuICAgICAgcG9pbnRlcjogJ3BvaW50ZXInLFxuICAgICAgd2FpdDogJ3dhaXQnLFxuICAgICAgdGV4dDogJ3RleHQnLFxuICAgICAgbW92ZTogJ21vdmUnLFxuICAgICAgaGVscDogJ2hlbHAnLFxuICAgICAgJ25vdC1hbGxvd2VkJzogJ25vdC1hbGxvd2VkJyxcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICAgICdjb250ZXh0LW1lbnUnOiAnY29udGV4dC1tZW51JyxcbiAgICAgIHByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICAgICAgY2VsbDogJ2NlbGwnLFxuICAgICAgY3Jvc3NoYWlyOiAnY3Jvc3NoYWlyJyxcbiAgICAgICd2ZXJ0aWNhbC10ZXh0JzogJ3ZlcnRpY2FsLXRleHQnLFxuICAgICAgYWxpYXM6ICdhbGlhcycsXG4gICAgICBjb3B5OiAnY29weScsXG4gICAgICAnbm8tZHJvcCc6ICduby1kcm9wJyxcbiAgICAgIGdyYWI6ICdncmFiJyxcbiAgICAgIGdyYWJiaW5nOiAnZ3JhYmJpbmcnLFxuICAgICAgJ2FsbC1zY3JvbGwnOiAnYWxsLXNjcm9sbCcsXG4gICAgICAnY29sLXJlc2l6ZSc6ICdjb2wtcmVzaXplJyxcbiAgICAgICdyb3ctcmVzaXplJzogJ3Jvdy1yZXNpemUnLFxuICAgICAgJ24tcmVzaXplJzogJ24tcmVzaXplJyxcbiAgICAgICdlLXJlc2l6ZSc6ICdlLXJlc2l6ZScsXG4gICAgICAncy1yZXNpemUnOiAncy1yZXNpemUnLFxuICAgICAgJ3ctcmVzaXplJzogJ3ctcmVzaXplJyxcbiAgICAgICduZS1yZXNpemUnOiAnbmUtcmVzaXplJyxcbiAgICAgICdudy1yZXNpemUnOiAnbnctcmVzaXplJyxcbiAgICAgICdzZS1yZXNpemUnOiAnc2UtcmVzaXplJyxcbiAgICAgICdzdy1yZXNpemUnOiAnc3ctcmVzaXplJyxcbiAgICAgICdldy1yZXNpemUnOiAnZXctcmVzaXplJyxcbiAgICAgICducy1yZXNpemUnOiAnbnMtcmVzaXplJyxcbiAgICAgICduZXN3LXJlc2l6ZSc6ICduZXN3LXJlc2l6ZScsXG4gICAgICAnbndzZS1yZXNpemUnOiAnbndzZS1yZXNpemUnLFxuICAgICAgJ3pvb20taW4nOiAnem9vbS1pbicsXG4gICAgICAnem9vbS1vdXQnOiAnem9vbS1vdXQnLFxuICAgIH0sXG4gICAgZGl2aWRlQ29sb3I6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdib3JkZXJDb2xvcicpLFxuICAgIGRpdmlkZU9wYWNpdHk6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdib3JkZXJPcGFjaXR5JyksXG4gICAgZGl2aWRlV2lkdGg6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdib3JkZXJXaWR0aCcpLFxuICAgIGRyb3BTaGFkb3c6IHtcbiAgICAgIHNtOiAnMCAxcHggMXB4IHJnYigwIDAgMCAvIDAuMDUpJyxcbiAgICAgIERFRkFVTFQ6IFsnMCAxcHggMnB4IHJnYigwIDAgMCAvIDAuMSknLCAnMCAxcHggMXB4IHJnYigwIDAgMCAvIDAuMDYpJ10sXG4gICAgICBtZDogWycwIDRweCAzcHggcmdiKDAgMCAwIC8gMC4wNyknLCAnMCAycHggMnB4IHJnYigwIDAgMCAvIDAuMDYpJ10sXG4gICAgICBsZzogWycwIDEwcHggOHB4IHJnYigwIDAgMCAvIDAuMDQpJywgJzAgNHB4IDNweCByZ2IoMCAwIDAgLyAwLjEpJ10sXG4gICAgICB4bDogWycwIDIwcHggMTNweCByZ2IoMCAwIDAgLyAwLjAzKScsICcwIDhweCA1cHggcmdiKDAgMCAwIC8gMC4wOCknXSxcbiAgICAgICcyeGwnOiAnMCAyNXB4IDI1cHggcmdiKDAgMCAwIC8gMC4xNSknLFxuICAgICAgbm9uZTogJzAgMCAjMDAwMCcsXG4gICAgfSxcbiAgICBmaWxsOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnY29sb3JzJyksXG4gICAgZ3JheXNjYWxlOiB7XG4gICAgICAwOiAnMCcsXG4gICAgICBERUZBVUxUOiAnMTAwJScsXG4gICAgfSxcbiAgICBodWVSb3RhdGU6IHtcbiAgICAgIDA6ICcwZGVnJyxcbiAgICAgIDE1OiAnMTVkZWcnLFxuICAgICAgMzA6ICczMGRlZycsXG4gICAgICA2MDogJzYwZGVnJyxcbiAgICAgIDkwOiAnOTBkZWcnLFxuICAgICAgMTgwOiAnMTgwZGVnJyxcbiAgICB9LFxuICAgIGludmVydDoge1xuICAgICAgMDogJzAnLFxuICAgICAgREVGQVVMVDogJzEwMCUnLFxuICAgIH0sXG4gICAgZmxleDoge1xuICAgICAgMTogJzEgMSAwJScsXG4gICAgICBhdXRvOiAnMSAxIGF1dG8nLFxuICAgICAgaW5pdGlhbDogJzAgMSBhdXRvJyxcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICB9LFxuICAgIGZsZXhCYXNpczogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgIC4uLnRoZW1lKCdzcGFjaW5nJyksXG4gICAgICAnMS8yJzogJzUwJScsXG4gICAgICAnMS8zJzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzIvMyc6ICc2Ni42NjY2NjclJyxcbiAgICAgICcxLzQnOiAnMjUlJyxcbiAgICAgICcyLzQnOiAnNTAlJyxcbiAgICAgICczLzQnOiAnNzUlJyxcbiAgICAgICcxLzUnOiAnMjAlJyxcbiAgICAgICcyLzUnOiAnNDAlJyxcbiAgICAgICczLzUnOiAnNjAlJyxcbiAgICAgICc0LzUnOiAnODAlJyxcbiAgICAgICcxLzYnOiAnMTYuNjY2NjY3JScsXG4gICAgICAnMi82JzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzMvNic6ICc1MCUnLFxuICAgICAgJzQvNic6ICc2Ni42NjY2NjclJyxcbiAgICAgICc1LzYnOiAnODMuMzMzMzMzJScsXG4gICAgICAnMS8xMic6ICc4LjMzMzMzMyUnLFxuICAgICAgJzIvMTInOiAnMTYuNjY2NjY3JScsXG4gICAgICAnMy8xMic6ICcyNSUnLFxuICAgICAgJzQvMTInOiAnMzMuMzMzMzMzJScsXG4gICAgICAnNS8xMic6ICc0MS42NjY2NjclJyxcbiAgICAgICc2LzEyJzogJzUwJScsXG4gICAgICAnNy8xMic6ICc1OC4zMzMzMzMlJyxcbiAgICAgICc4LzEyJzogJzY2LjY2NjY2NyUnLFxuICAgICAgJzkvMTInOiAnNzUlJyxcbiAgICAgICcxMC8xMic6ICc4My4zMzMzMzMlJyxcbiAgICAgICcxMS8xMic6ICc5MS42NjY2NjclJyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICB9KSxcbiAgICBmbGV4R3Jvdzoge1xuICAgICAgMDogJzAnLFxuICAgICAgREVGQVVMVDogJzEnLFxuICAgIH0sXG4gICAgZmxleFNocmluazoge1xuICAgICAgMDogJzAnLFxuICAgICAgREVGQVVMVDogJzEnLFxuICAgIH0sXG4gICAgZm9udEZhbWlseToge1xuICAgICAgc2FuczogW1xuICAgICAgICAndWktc2Fucy1zZXJpZicsXG4gICAgICAgICdzeXN0ZW0tdWknLFxuICAgICAgICAnLWFwcGxlLXN5c3RlbScsXG4gICAgICAgICdCbGlua01hY1N5c3RlbUZvbnQnLFxuICAgICAgICAnXCJTZWdvZSBVSVwiJyxcbiAgICAgICAgJ1JvYm90bycsXG4gICAgICAgICdcIkhlbHZldGljYSBOZXVlXCInLFxuICAgICAgICAnQXJpYWwnLFxuICAgICAgICAnXCJOb3RvIFNhbnNcIicsXG4gICAgICAgICdzYW5zLXNlcmlmJyxcbiAgICAgICAgJ1wiQXBwbGUgQ29sb3IgRW1vamlcIicsXG4gICAgICAgICdcIlNlZ29lIFVJIEVtb2ppXCInLFxuICAgICAgICAnXCJTZWdvZSBVSSBTeW1ib2xcIicsXG4gICAgICAgICdcIk5vdG8gQ29sb3IgRW1vamlcIicsXG4gICAgICBdLFxuICAgICAgc2VyaWY6IFsndWktc2VyaWYnLCAnR2VvcmdpYScsICdDYW1icmlhJywgJ1wiVGltZXMgTmV3IFJvbWFuXCInLCAnVGltZXMnLCAnc2VyaWYnXSxcbiAgICAgIG1vbm86IFtcbiAgICAgICAgJ3VpLW1vbm9zcGFjZScsXG4gICAgICAgICdTRk1vbm8tUmVndWxhcicsXG4gICAgICAgICdNZW5sbycsXG4gICAgICAgICdNb25hY28nLFxuICAgICAgICAnQ29uc29sYXMnLFxuICAgICAgICAnXCJMaWJlcmF0aW9uIE1vbm9cIicsXG4gICAgICAgICdcIkNvdXJpZXIgTmV3XCInLFxuICAgICAgICAnbW9ub3NwYWNlJyxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBmb250U2l6ZToge1xuICAgICAgeHM6IFsnMC43NXJlbScsIHsgbGluZUhlaWdodDogJzFyZW0nIH1dLFxuICAgICAgc206IFsnMC44NzVyZW0nLCB7IGxpbmVIZWlnaHQ6ICcxLjI1cmVtJyB9XSxcbiAgICAgIGJhc2U6IFsnMXJlbScsIHsgbGluZUhlaWdodDogJzEuNXJlbScgfV0sXG4gICAgICBsZzogWycxLjEyNXJlbScsIHsgbGluZUhlaWdodDogJzEuNzVyZW0nIH1dLFxuICAgICAgeGw6IFsnMS4yNXJlbScsIHsgbGluZUhlaWdodDogJzEuNzVyZW0nIH1dLFxuICAgICAgJzJ4bCc6IFsnMS41cmVtJywgeyBsaW5lSGVpZ2h0OiAnMnJlbScgfV0sXG4gICAgICAnM3hsJzogWycxLjg3NXJlbScsIHsgbGluZUhlaWdodDogJzIuMjVyZW0nIH1dLFxuICAgICAgJzR4bCc6IFsnMi4yNXJlbScsIHsgbGluZUhlaWdodDogJzIuNXJlbScgfV0sXG4gICAgICAnNXhsJzogWyczcmVtJywgeyBsaW5lSGVpZ2h0OiAnMScgfV0sXG4gICAgICAnNnhsJzogWyczLjc1cmVtJywgeyBsaW5lSGVpZ2h0OiAnMScgfV0sXG4gICAgICAnN3hsJzogWyc0LjVyZW0nLCB7IGxpbmVIZWlnaHQ6ICcxJyB9XSxcbiAgICAgICc4eGwnOiBbJzZyZW0nLCB7IGxpbmVIZWlnaHQ6ICcxJyB9XSxcbiAgICAgICc5eGwnOiBbJzhyZW0nLCB7IGxpbmVIZWlnaHQ6ICcxJyB9XSxcbiAgICB9LFxuICAgIGZvbnRXZWlnaHQ6IHtcbiAgICAgIHRoaW46ICcxMDAnLFxuICAgICAgZXh0cmFsaWdodDogJzIwMCcsXG4gICAgICBsaWdodDogJzMwMCcsXG4gICAgICBub3JtYWw6ICc0MDAnLFxuICAgICAgbWVkaXVtOiAnNTAwJyxcbiAgICAgIHNlbWlib2xkOiAnNjAwJyxcbiAgICAgIGJvbGQ6ICc3MDAnLFxuICAgICAgZXh0cmFib2xkOiAnODAwJyxcbiAgICAgIGJsYWNrOiAnOTAwJyxcbiAgICB9LFxuICAgIGdhcDogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ3NwYWNpbmcnKSxcbiAgICBncmFkaWVudENvbG9yU3RvcHM6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdjb2xvcnMnKSxcbiAgICBncmlkQXV0b0NvbHVtbnM6IHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgIG1pbjogJ21pbi1jb250ZW50JyxcbiAgICAgIG1heDogJ21heC1jb250ZW50JyxcbiAgICAgIGZyOiAnbWlubWF4KDAsIDFmciknLFxuICAgIH0sXG4gICAgZ3JpZEF1dG9Sb3dzOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICBtaW46ICdtaW4tY29udGVudCcsXG4gICAgICBtYXg6ICdtYXgtY29udGVudCcsXG4gICAgICBmcjogJ21pbm1heCgwLCAxZnIpJyxcbiAgICB9LFxuICAgIGdyaWRDb2x1bW46IHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgICdzcGFuLTEnOiAnc3BhbiAxIC8gc3BhbiAxJyxcbiAgICAgICdzcGFuLTInOiAnc3BhbiAyIC8gc3BhbiAyJyxcbiAgICAgICdzcGFuLTMnOiAnc3BhbiAzIC8gc3BhbiAzJyxcbiAgICAgICdzcGFuLTQnOiAnc3BhbiA0IC8gc3BhbiA0JyxcbiAgICAgICdzcGFuLTUnOiAnc3BhbiA1IC8gc3BhbiA1JyxcbiAgICAgICdzcGFuLTYnOiAnc3BhbiA2IC8gc3BhbiA2JyxcbiAgICAgICdzcGFuLTcnOiAnc3BhbiA3IC8gc3BhbiA3JyxcbiAgICAgICdzcGFuLTgnOiAnc3BhbiA4IC8gc3BhbiA4JyxcbiAgICAgICdzcGFuLTknOiAnc3BhbiA5IC8gc3BhbiA5JyxcbiAgICAgICdzcGFuLTEwJzogJ3NwYW4gMTAgLyBzcGFuIDEwJyxcbiAgICAgICdzcGFuLTExJzogJ3NwYW4gMTEgLyBzcGFuIDExJyxcbiAgICAgICdzcGFuLTEyJzogJ3NwYW4gMTIgLyBzcGFuIDEyJyxcbiAgICAgICdzcGFuLWZ1bGwnOiAnMSAvIC0xJyxcbiAgICB9LFxuICAgIGdyaWRDb2x1bW5FbmQ6IHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgIDE6ICcxJyxcbiAgICAgIDI6ICcyJyxcbiAgICAgIDM6ICczJyxcbiAgICAgIDQ6ICc0JyxcbiAgICAgIDU6ICc1JyxcbiAgICAgIDY6ICc2JyxcbiAgICAgIDc6ICc3JyxcbiAgICAgIDg6ICc4JyxcbiAgICAgIDk6ICc5JyxcbiAgICAgIDEwOiAnMTAnLFxuICAgICAgMTE6ICcxMScsXG4gICAgICAxMjogJzEyJyxcbiAgICAgIDEzOiAnMTMnLFxuICAgIH0sXG4gICAgZ3JpZENvbHVtblN0YXJ0OiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICAxOiAnMScsXG4gICAgICAyOiAnMicsXG4gICAgICAzOiAnMycsXG4gICAgICA0OiAnNCcsXG4gICAgICA1OiAnNScsXG4gICAgICA2OiAnNicsXG4gICAgICA3OiAnNycsXG4gICAgICA4OiAnOCcsXG4gICAgICA5OiAnOScsXG4gICAgICAxMDogJzEwJyxcbiAgICAgIDExOiAnMTEnLFxuICAgICAgMTI6ICcxMicsXG4gICAgICAxMzogJzEzJyxcbiAgICB9LFxuICAgIGdyaWRSb3c6IHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgICdzcGFuLTEnOiAnc3BhbiAxIC8gc3BhbiAxJyxcbiAgICAgICdzcGFuLTInOiAnc3BhbiAyIC8gc3BhbiAyJyxcbiAgICAgICdzcGFuLTMnOiAnc3BhbiAzIC8gc3BhbiAzJyxcbiAgICAgICdzcGFuLTQnOiAnc3BhbiA0IC8gc3BhbiA0JyxcbiAgICAgICdzcGFuLTUnOiAnc3BhbiA1IC8gc3BhbiA1JyxcbiAgICAgICdzcGFuLTYnOiAnc3BhbiA2IC8gc3BhbiA2JyxcbiAgICAgICdzcGFuLWZ1bGwnOiAnMSAvIC0xJyxcbiAgICB9LFxuICAgIGdyaWRSb3dTdGFydDoge1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgMTogJzEnLFxuICAgICAgMjogJzInLFxuICAgICAgMzogJzMnLFxuICAgICAgNDogJzQnLFxuICAgICAgNTogJzUnLFxuICAgICAgNjogJzYnLFxuICAgICAgNzogJzcnLFxuICAgIH0sXG4gICAgZ3JpZFJvd0VuZDoge1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgMTogJzEnLFxuICAgICAgMjogJzInLFxuICAgICAgMzogJzMnLFxuICAgICAgNDogJzQnLFxuICAgICAgNTogJzUnLFxuICAgICAgNjogJzYnLFxuICAgICAgNzogJzcnLFxuICAgIH0sXG4gICAgZ3JpZFRlbXBsYXRlQ29sdW1uczoge1xuICAgICAgbm9uZTogJ25vbmUnLFxuICAgICAgMTogJ3JlcGVhdCgxLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgMjogJ3JlcGVhdCgyLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgMzogJ3JlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNDogJ3JlcGVhdCg0LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNTogJ3JlcGVhdCg1LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNjogJ3JlcGVhdCg2LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNzogJ3JlcGVhdCg3LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgODogJ3JlcGVhdCg4LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgOTogJ3JlcGVhdCg5LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgMTA6ICdyZXBlYXQoMTAsIG1pbm1heCgwLCAxZnIpKScsXG4gICAgICAxMTogJ3JlcGVhdCgxMSwgbWlubWF4KDAsIDFmcikpJyxcbiAgICAgIDEyOiAncmVwZWF0KDEyLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgIH0sXG4gICAgZ3JpZFRlbXBsYXRlUm93czoge1xuICAgICAgbm9uZTogJ25vbmUnLFxuICAgICAgMTogJ3JlcGVhdCgxLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgMjogJ3JlcGVhdCgyLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgMzogJ3JlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNDogJ3JlcGVhdCg0LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNTogJ3JlcGVhdCg1LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgICAgNjogJ3JlcGVhdCg2LCBtaW5tYXgoMCwgMWZyKSknLFxuICAgIH0sXG4gICAgaGVpZ2h0OiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgLi4udGhlbWUoJ3NwYWNpbmcnKSxcbiAgICAgICcxLzInOiAnNTAlJyxcbiAgICAgICcxLzMnOiAnMzMuMzMzMzMzJScsXG4gICAgICAnMi8zJzogJzY2LjY2NjY2NyUnLFxuICAgICAgJzEvNCc6ICcyNSUnLFxuICAgICAgJzIvNCc6ICc1MCUnLFxuICAgICAgJzMvNCc6ICc3NSUnLFxuICAgICAgJzEvNSc6ICcyMCUnLFxuICAgICAgJzIvNSc6ICc0MCUnLFxuICAgICAgJzMvNSc6ICc2MCUnLFxuICAgICAgJzQvNSc6ICc4MCUnLFxuICAgICAgJzEvNic6ICcxNi42NjY2NjclJyxcbiAgICAgICcyLzYnOiAnMzMuMzMzMzMzJScsXG4gICAgICAnMy82JzogJzUwJScsXG4gICAgICAnNC82JzogJzY2LjY2NjY2NyUnLFxuICAgICAgJzUvNic6ICc4My4zMzMzMzMlJyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICAgIHNjcmVlbjogJzEwMHZoJyxcbiAgICAgIG1pbjogJ21pbi1jb250ZW50JyxcbiAgICAgIG1heDogJ21heC1jb250ZW50JyxcbiAgICAgIGZpdDogJ2ZpdC1jb250ZW50JyxcbiAgICB9KSxcbiAgICBpbnNldDogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgIC4uLnRoZW1lKCdzcGFjaW5nJyksXG4gICAgICAnMS8yJzogJzUwJScsXG4gICAgICAnMS8zJzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzIvMyc6ICc2Ni42NjY2NjclJyxcbiAgICAgICcxLzQnOiAnMjUlJyxcbiAgICAgICcyLzQnOiAnNTAlJyxcbiAgICAgICczLzQnOiAnNzUlJyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICB9KSxcbiAgICBrZXlmcmFtZXM6IHtcbiAgICAgIHNwaW46IHtcbiAgICAgICAgdG86IHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICdyb3RhdGUoMzYwZGVnKScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcGluZzoge1xuICAgICAgICAnNzUlLCAxMDAlJzoge1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDIpJyxcbiAgICAgICAgICBvcGFjaXR5OiAnMCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcHVsc2U6IHtcbiAgICAgICAgJzUwJSc6IHtcbiAgICAgICAgICBvcGFjaXR5OiAnLjUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGJvdW5jZToge1xuICAgICAgICAnMCUsIDEwMCUnOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtMjUlKScsXG4gICAgICAgICAgYW5pbWF0aW9uVGltaW5nRnVuY3Rpb246ICdjdWJpYy1iZXppZXIoMC44LDAsMSwxKScsXG4gICAgICAgIH0sXG4gICAgICAgICc1MCUnOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAnbm9uZScsXG4gICAgICAgICAgYW5pbWF0aW9uVGltaW5nRnVuY3Rpb246ICdjdWJpYy1iZXppZXIoMCwwLDAuMiwxKScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGV0dGVyU3BhY2luZzoge1xuICAgICAgdGlnaHRlcjogJy0wLjA1ZW0nLFxuICAgICAgdGlnaHQ6ICctMC4wMjVlbScsXG4gICAgICBub3JtYWw6ICcwZW0nLFxuICAgICAgd2lkZTogJzAuMDI1ZW0nLFxuICAgICAgd2lkZXI6ICcwLjA1ZW0nLFxuICAgICAgd2lkZXN0OiAnMC4xZW0nLFxuICAgIH0sXG4gICAgbGluZUhlaWdodDoge1xuICAgICAgbm9uZTogJzEnLFxuICAgICAgdGlnaHQ6ICcxLjI1JyxcbiAgICAgIHNudWc6ICcxLjM3NScsXG4gICAgICBub3JtYWw6ICcxLjUnLFxuICAgICAgcmVsYXhlZDogJzEuNjI1JyxcbiAgICAgIGxvb3NlOiAnMicsXG4gICAgICAzOiAnLjc1cmVtJyxcbiAgICAgIDQ6ICcxcmVtJyxcbiAgICAgIDU6ICcxLjI1cmVtJyxcbiAgICAgIDY6ICcxLjVyZW0nLFxuICAgICAgNzogJzEuNzVyZW0nLFxuICAgICAgODogJzJyZW0nLFxuICAgICAgOTogJzIuMjVyZW0nLFxuICAgICAgMTA6ICcyLjVyZW0nLFxuICAgIH0sXG4gICAgbGlzdFN0eWxlVHlwZToge1xuICAgICAgbm9uZTogJ25vbmUnLFxuICAgICAgZGlzYzogJ2Rpc2MnLFxuICAgICAgZGVjaW1hbDogJ2RlY2ltYWwnLFxuICAgIH0sXG4gICAgbWFyZ2luOiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgLi4udGhlbWUoJ3NwYWNpbmcnKSxcbiAgICB9KSxcbiAgICBtYXhIZWlnaHQ6ICh7IHRoZW1lIH0pID0+ICh7XG4gICAgICAuLi50aGVtZSgnc3BhY2luZycpLFxuICAgICAgZnVsbDogJzEwMCUnLFxuICAgICAgc2NyZWVuOiAnMTAwdmgnLFxuICAgICAgbWluOiAnbWluLWNvbnRlbnQnLFxuICAgICAgbWF4OiAnbWF4LWNvbnRlbnQnLFxuICAgICAgZml0OiAnZml0LWNvbnRlbnQnLFxuICAgIH0pLFxuICAgIG1heFdpZHRoOiAoeyB0aGVtZSwgYnJlYWtwb2ludHMgfSkgPT4gKHtcbiAgICAgIG5vbmU6ICdub25lJyxcbiAgICAgIDA6ICcwcmVtJyxcbiAgICAgIHhzOiAnMjByZW0nLFxuICAgICAgc206ICcyNHJlbScsXG4gICAgICBtZDogJzI4cmVtJyxcbiAgICAgIGxnOiAnMzJyZW0nLFxuICAgICAgeGw6ICczNnJlbScsXG4gICAgICAnMnhsJzogJzQycmVtJyxcbiAgICAgICczeGwnOiAnNDhyZW0nLFxuICAgICAgJzR4bCc6ICc1NnJlbScsXG4gICAgICAnNXhsJzogJzY0cmVtJyxcbiAgICAgICc2eGwnOiAnNzJyZW0nLFxuICAgICAgJzd4bCc6ICc4MHJlbScsXG4gICAgICBmdWxsOiAnMTAwJScsXG4gICAgICBtaW46ICdtaW4tY29udGVudCcsXG4gICAgICBtYXg6ICdtYXgtY29udGVudCcsXG4gICAgICBmaXQ6ICdmaXQtY29udGVudCcsXG4gICAgICBwcm9zZTogJzY1Y2gnLFxuICAgICAgLi4uYnJlYWtwb2ludHModGhlbWUoJ3NjcmVlbnMnKSksXG4gICAgfSksXG4gICAgbWluSGVpZ2h0OiB7XG4gICAgICAwOiAnMHB4JyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICAgIHNjcmVlbjogJzEwMHZoJyxcbiAgICAgIG1pbjogJ21pbi1jb250ZW50JyxcbiAgICAgIG1heDogJ21heC1jb250ZW50JyxcbiAgICAgIGZpdDogJ2ZpdC1jb250ZW50JyxcbiAgICB9LFxuICAgIG1pbldpZHRoOiB7XG4gICAgICAwOiAnMHB4JyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICAgIG1pbjogJ21pbi1jb250ZW50JyxcbiAgICAgIG1heDogJ21heC1jb250ZW50JyxcbiAgICAgIGZpdDogJ2ZpdC1jb250ZW50JyxcbiAgICB9LFxuICAgIG9iamVjdFBvc2l0aW9uOiB7XG4gICAgICBib3R0b206ICdib3R0b20nLFxuICAgICAgY2VudGVyOiAnY2VudGVyJyxcbiAgICAgIGxlZnQ6ICdsZWZ0JyxcbiAgICAgICdsZWZ0LWJvdHRvbSc6ICdsZWZ0IGJvdHRvbScsXG4gICAgICAnbGVmdC10b3AnOiAnbGVmdCB0b3AnLFxuICAgICAgcmlnaHQ6ICdyaWdodCcsXG4gICAgICAncmlnaHQtYm90dG9tJzogJ3JpZ2h0IGJvdHRvbScsXG4gICAgICAncmlnaHQtdG9wJzogJ3JpZ2h0IHRvcCcsXG4gICAgICB0b3A6ICd0b3AnLFxuICAgIH0sXG4gICAgb3BhY2l0eToge1xuICAgICAgMDogJzAnLFxuICAgICAgNTogJzAuMDUnLFxuICAgICAgMTA6ICcwLjEnLFxuICAgICAgMjA6ICcwLjInLFxuICAgICAgMjU6ICcwLjI1JyxcbiAgICAgIDMwOiAnMC4zJyxcbiAgICAgIDQwOiAnMC40JyxcbiAgICAgIDUwOiAnMC41JyxcbiAgICAgIDYwOiAnMC42JyxcbiAgICAgIDcwOiAnMC43JyxcbiAgICAgIDc1OiAnMC43NScsXG4gICAgICA4MDogJzAuOCcsXG4gICAgICA5MDogJzAuOScsXG4gICAgICA5NTogJzAuOTUnLFxuICAgICAgMTAwOiAnMScsXG4gICAgfSxcbiAgICBvcmRlcjoge1xuICAgICAgZmlyc3Q6ICctOTk5OScsXG4gICAgICBsYXN0OiAnOTk5OScsXG4gICAgICBub25lOiAnMCcsXG4gICAgICAxOiAnMScsXG4gICAgICAyOiAnMicsXG4gICAgICAzOiAnMycsXG4gICAgICA0OiAnNCcsXG4gICAgICA1OiAnNScsXG4gICAgICA2OiAnNicsXG4gICAgICA3OiAnNycsXG4gICAgICA4OiAnOCcsXG4gICAgICA5OiAnOScsXG4gICAgICAxMDogJzEwJyxcbiAgICAgIDExOiAnMTEnLFxuICAgICAgMTI6ICcxMicsXG4gICAgfSxcbiAgICBwYWRkaW5nOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnc3BhY2luZycpLFxuICAgIHBsYWNlaG9sZGVyQ29sb3I6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdjb2xvcnMnKSxcbiAgICBwbGFjZWhvbGRlck9wYWNpdHk6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdvcGFjaXR5JyksXG4gICAgb3V0bGluZUNvbG9yOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnY29sb3JzJyksXG4gICAgb3V0bGluZU9mZnNldDoge1xuICAgICAgMDogJzBweCcsXG4gICAgICAxOiAnMXB4JyxcbiAgICAgIDI6ICcycHgnLFxuICAgICAgNDogJzRweCcsXG4gICAgICA4OiAnOHB4JyxcbiAgICB9LFxuICAgIG91dGxpbmVXaWR0aDoge1xuICAgICAgMDogJzBweCcsXG4gICAgICAxOiAnMXB4JyxcbiAgICAgIDI6ICcycHgnLFxuICAgICAgNDogJzRweCcsXG4gICAgICA4OiAnOHB4JyxcbiAgICB9LFxuICAgIHJpbmdDb2xvcjogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgIERFRkFVTFQ6IHRoZW1lKCdjb2xvcnMuYmx1ZS41MDAnLCAnIzNiODJmNicpLFxuICAgICAgLi4udGhlbWUoJ2NvbG9ycycpLFxuICAgIH0pLFxuICAgIHJpbmdPZmZzZXRDb2xvcjogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ2NvbG9ycycpLFxuICAgIHJpbmdPZmZzZXRXaWR0aDoge1xuICAgICAgMDogJzBweCcsXG4gICAgICAxOiAnMXB4JyxcbiAgICAgIDI6ICcycHgnLFxuICAgICAgNDogJzRweCcsXG4gICAgICA4OiAnOHB4JyxcbiAgICB9LFxuICAgIHJpbmdPcGFjaXR5OiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgREVGQVVMVDogJzAuNScsXG4gICAgICAuLi50aGVtZSgnb3BhY2l0eScpLFxuICAgIH0pLFxuICAgIHJpbmdXaWR0aDoge1xuICAgICAgREVGQVVMVDogJzNweCcsXG4gICAgICAwOiAnMHB4JyxcbiAgICAgIDE6ICcxcHgnLFxuICAgICAgMjogJzJweCcsXG4gICAgICA0OiAnNHB4JyxcbiAgICAgIDg6ICc4cHgnLFxuICAgIH0sXG4gICAgcm90YXRlOiB7XG4gICAgICAwOiAnMGRlZycsXG4gICAgICAxOiAnMWRlZycsXG4gICAgICAyOiAnMmRlZycsXG4gICAgICAzOiAnM2RlZycsXG4gICAgICA2OiAnNmRlZycsXG4gICAgICAxMjogJzEyZGVnJyxcbiAgICAgIDQ1OiAnNDVkZWcnLFxuICAgICAgOTA6ICc5MGRlZycsXG4gICAgICAxODA6ICcxODBkZWcnLFxuICAgIH0sXG4gICAgc2F0dXJhdGU6IHtcbiAgICAgIDA6ICcwJyxcbiAgICAgIDUwOiAnLjUnLFxuICAgICAgMTAwOiAnMScsXG4gICAgICAxNTA6ICcxLjUnLFxuICAgICAgMjAwOiAnMicsXG4gICAgfSxcbiAgICBzY2FsZToge1xuICAgICAgMDogJzAnLFxuICAgICAgNTA6ICcuNScsXG4gICAgICA3NTogJy43NScsXG4gICAgICA5MDogJy45JyxcbiAgICAgIDk1OiAnLjk1JyxcbiAgICAgIDEwMDogJzEnLFxuICAgICAgMTA1OiAnMS4wNScsXG4gICAgICAxMTA6ICcxLjEnLFxuICAgICAgMTI1OiAnMS4yNScsXG4gICAgICAxNTA6ICcxLjUnLFxuICAgIH0sXG4gICAgc2Nyb2xsTWFyZ2luOiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgLi4udGhlbWUoJ3NwYWNpbmcnKSxcbiAgICB9KSxcbiAgICBzY3JvbGxQYWRkaW5nOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnc3BhY2luZycpLFxuICAgIHNlcGlhOiB7XG4gICAgICAwOiAnMCcsXG4gICAgICBERUZBVUxUOiAnMTAwJScsXG4gICAgfSxcbiAgICBza2V3OiB7XG4gICAgICAwOiAnMGRlZycsXG4gICAgICAxOiAnMWRlZycsXG4gICAgICAyOiAnMmRlZycsXG4gICAgICAzOiAnM2RlZycsXG4gICAgICA2OiAnNmRlZycsXG4gICAgICAxMjogJzEyZGVnJyxcbiAgICB9LFxuICAgIHNwYWNlOiAoeyB0aGVtZSB9KSA9PiAoe1xuICAgICAgLi4udGhlbWUoJ3NwYWNpbmcnKSxcbiAgICB9KSxcbiAgICBzdHJva2U6ICh7IHRoZW1lIH0pID0+IHRoZW1lKCdjb2xvcnMnKSxcbiAgICBzdHJva2VXaWR0aDoge1xuICAgICAgMDogJzAnLFxuICAgICAgMTogJzEnLFxuICAgICAgMjogJzInLFxuICAgIH0sXG4gICAgdGV4dENvbG9yOiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnY29sb3JzJyksXG4gICAgdGV4dERlY29yYXRpb25Db2xvcjogKHsgdGhlbWUgfSkgPT4gdGhlbWUoJ2NvbG9ycycpLFxuICAgIHRleHREZWNvcmF0aW9uVGhpY2tuZXNzOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICAnZnJvbS1mb250JzogJ2Zyb20tZm9udCcsXG4gICAgICAwOiAnMHB4JyxcbiAgICAgIDE6ICcxcHgnLFxuICAgICAgMjogJzJweCcsXG4gICAgICA0OiAnNHB4JyxcbiAgICAgIDg6ICc4cHgnLFxuICAgIH0sXG4gICAgdGV4dFVuZGVybGluZU9mZnNldDoge1xuICAgICAgYXV0bzogJ2F1dG8nLFxuICAgICAgMDogJzBweCcsXG4gICAgICAxOiAnMXB4JyxcbiAgICAgIDI6ICcycHgnLFxuICAgICAgNDogJzRweCcsXG4gICAgICA4OiAnOHB4JyxcbiAgICB9LFxuICAgIHRleHRJbmRlbnQ6ICh7IHRoZW1lIH0pID0+ICh7XG4gICAgICAuLi50aGVtZSgnc3BhY2luZycpLFxuICAgIH0pLFxuICAgIHRleHRPcGFjaXR5OiAoeyB0aGVtZSB9KSA9PiB0aGVtZSgnb3BhY2l0eScpLFxuICAgIHRyYW5zZm9ybU9yaWdpbjoge1xuICAgICAgY2VudGVyOiAnY2VudGVyJyxcbiAgICAgIHRvcDogJ3RvcCcsXG4gICAgICAndG9wLXJpZ2h0JzogJ3RvcCByaWdodCcsXG4gICAgICByaWdodDogJ3JpZ2h0JyxcbiAgICAgICdib3R0b20tcmlnaHQnOiAnYm90dG9tIHJpZ2h0JyxcbiAgICAgIGJvdHRvbTogJ2JvdHRvbScsXG4gICAgICAnYm90dG9tLWxlZnQnOiAnYm90dG9tIGxlZnQnLFxuICAgICAgbGVmdDogJ2xlZnQnLFxuICAgICAgJ3RvcC1sZWZ0JzogJ3RvcCBsZWZ0JyxcbiAgICB9LFxuICAgIHRyYW5zaXRpb25EZWxheToge1xuICAgICAgNzU6ICc3NW1zJyxcbiAgICAgIDEwMDogJzEwMG1zJyxcbiAgICAgIDE1MDogJzE1MG1zJyxcbiAgICAgIDIwMDogJzIwMG1zJyxcbiAgICAgIDMwMDogJzMwMG1zJyxcbiAgICAgIDUwMDogJzUwMG1zJyxcbiAgICAgIDcwMDogJzcwMG1zJyxcbiAgICAgIDEwMDA6ICcxMDAwbXMnLFxuICAgIH0sXG4gICAgdHJhbnNpdGlvbkR1cmF0aW9uOiB7XG4gICAgICBERUZBVUxUOiAnMTUwbXMnLFxuICAgICAgNzU6ICc3NW1zJyxcbiAgICAgIDEwMDogJzEwMG1zJyxcbiAgICAgIDE1MDogJzE1MG1zJyxcbiAgICAgIDIwMDogJzIwMG1zJyxcbiAgICAgIDMwMDogJzMwMG1zJyxcbiAgICAgIDUwMDogJzUwMG1zJyxcbiAgICAgIDcwMDogJzcwMG1zJyxcbiAgICAgIDEwMDA6ICcxMDAwbXMnLFxuICAgIH0sXG4gICAgdHJhbnNpdGlvblByb3BlcnR5OiB7XG4gICAgICBub25lOiAnbm9uZScsXG4gICAgICBhbGw6ICdhbGwnLFxuICAgICAgREVGQVVMVDpcbiAgICAgICAgJ2NvbG9yLCBiYWNrZ3JvdW5kLWNvbG9yLCBib3JkZXItY29sb3IsIHRleHQtZGVjb3JhdGlvbi1jb2xvciwgZmlsbCwgc3Ryb2tlLCBvcGFjaXR5LCBib3gtc2hhZG93LCB0cmFuc2Zvcm0sIGZpbHRlciwgYmFja2Ryb3AtZmlsdGVyJyxcbiAgICAgIGNvbG9yczogJ2NvbG9yLCBiYWNrZ3JvdW5kLWNvbG9yLCBib3JkZXItY29sb3IsIHRleHQtZGVjb3JhdGlvbi1jb2xvciwgZmlsbCwgc3Ryb2tlJyxcbiAgICAgIG9wYWNpdHk6ICdvcGFjaXR5JyxcbiAgICAgIHNoYWRvdzogJ2JveC1zaGFkb3cnLFxuICAgICAgdHJhbnNmb3JtOiAndHJhbnNmb3JtJyxcbiAgICB9LFxuICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjoge1xuICAgICAgREVGQVVMVDogJ2N1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSknLFxuICAgICAgbGluZWFyOiAnbGluZWFyJyxcbiAgICAgIGluOiAnY3ViaWMtYmV6aWVyKDAuNCwgMCwgMSwgMSknLFxuICAgICAgb3V0OiAnY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSknLFxuICAgICAgJ2luLW91dCc6ICdjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpJyxcbiAgICB9LFxuICAgIHRyYW5zbGF0ZTogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgIC4uLnRoZW1lKCdzcGFjaW5nJyksXG4gICAgICAnMS8yJzogJzUwJScsXG4gICAgICAnMS8zJzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzIvMyc6ICc2Ni42NjY2NjclJyxcbiAgICAgICcxLzQnOiAnMjUlJyxcbiAgICAgICcyLzQnOiAnNTAlJyxcbiAgICAgICczLzQnOiAnNzUlJyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICB9KSxcbiAgICB3aWR0aDogKHsgdGhlbWUgfSkgPT4gKHtcbiAgICAgIGF1dG86ICdhdXRvJyxcbiAgICAgIC4uLnRoZW1lKCdzcGFjaW5nJyksXG4gICAgICAnMS8yJzogJzUwJScsXG4gICAgICAnMS8zJzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzIvMyc6ICc2Ni42NjY2NjclJyxcbiAgICAgICcxLzQnOiAnMjUlJyxcbiAgICAgICcyLzQnOiAnNTAlJyxcbiAgICAgICczLzQnOiAnNzUlJyxcbiAgICAgICcxLzUnOiAnMjAlJyxcbiAgICAgICcyLzUnOiAnNDAlJyxcbiAgICAgICczLzUnOiAnNjAlJyxcbiAgICAgICc0LzUnOiAnODAlJyxcbiAgICAgICcxLzYnOiAnMTYuNjY2NjY3JScsXG4gICAgICAnMi82JzogJzMzLjMzMzMzMyUnLFxuICAgICAgJzMvNic6ICc1MCUnLFxuICAgICAgJzQvNic6ICc2Ni42NjY2NjclJyxcbiAgICAgICc1LzYnOiAnODMuMzMzMzMzJScsXG4gICAgICAnMS8xMic6ICc4LjMzMzMzMyUnLFxuICAgICAgJzIvMTInOiAnMTYuNjY2NjY3JScsXG4gICAgICAnMy8xMic6ICcyNSUnLFxuICAgICAgJzQvMTInOiAnMzMuMzMzMzMzJScsXG4gICAgICAnNS8xMic6ICc0MS42NjY2NjclJyxcbiAgICAgICc2LzEyJzogJzUwJScsXG4gICAgICAnNy8xMic6ICc1OC4zMzMzMzMlJyxcbiAgICAgICc4LzEyJzogJzY2LjY2NjY2NyUnLFxuICAgICAgJzkvMTInOiAnNzUlJyxcbiAgICAgICcxMC8xMic6ICc4My4zMzMzMzMlJyxcbiAgICAgICcxMS8xMic6ICc5MS42NjY2NjclJyxcbiAgICAgIGZ1bGw6ICcxMDAlJyxcbiAgICAgIHNjcmVlbjogJzEwMHZ3JyxcbiAgICAgIG1pbjogJ21pbi1jb250ZW50JyxcbiAgICAgIG1heDogJ21heC1jb250ZW50JyxcbiAgICAgIGZpdDogJ2ZpdC1jb250ZW50JyxcbiAgICB9KSxcbiAgICB3aWxsQ2hhbmdlOiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICBzY3JvbGw6ICdzY3JvbGwtcG9zaXRpb24nLFxuICAgICAgY29udGVudHM6ICdjb250ZW50cycsXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2Zvcm0nLFxuICAgIH0sXG4gICAgekluZGV4OiB7XG4gICAgICBhdXRvOiAnYXV0bycsXG4gICAgICAwOiAnMCcsXG4gICAgICAxMDogJzEwJyxcbiAgICAgIDIwOiAnMjAnLFxuICAgICAgMzA6ICczMCcsXG4gICAgICA0MDogJzQwJyxcbiAgICAgIDUwOiAnNTAnLFxuICAgIH0sXG4gIH0sXG4gIHZhcmlhbnRPcmRlcjogW1xuICAgICdmaXJzdCcsXG4gICAgJ2xhc3QnLFxuICAgICdvZGQnLFxuICAgICdldmVuJyxcbiAgICAndmlzaXRlZCcsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdlbXB0eScsXG4gICAgJ3JlYWQtb25seScsXG4gICAgJ2dyb3VwLWhvdmVyJyxcbiAgICAnZ3JvdXAtZm9jdXMnLFxuICAgICdmb2N1cy13aXRoaW4nLFxuICAgICdob3ZlcicsXG4gICAgJ2ZvY3VzJyxcbiAgICAnZm9jdXMtdmlzaWJsZScsXG4gICAgJ2FjdGl2ZScsXG4gICAgJ2Rpc2FibGVkJyxcbiAgXSxcbiAgcGx1Z2luczogW10sXG59XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX2Nsb25lRGVlcCA9IHJlcXVpcmUoXCIuLi91dGlsL2Nsb25lRGVlcFwiKTtcbnZhciBfZGVmYXVsdENvbmZpZ1N0dWIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9zdHVicy9kZWZhdWx0Q29uZmlnLnN0dWJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICB9O1xufVxudmFyIF9kZWZhdWx0ID0gKDAsIF9jbG9uZURlZXApLmNsb25lRGVlcChfZGVmYXVsdENvbmZpZ1N0dWIuZGVmYXVsdC50aGVtZSk7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiIsICJsZXQgZGVmYXVsdFRoZW1lID0gcmVxdWlyZSgnLi9saWIvcHVibGljL2RlZmF1bHQtdGhlbWUnKVxubW9kdWxlLmV4cG9ydHMgPSAoZGVmYXVsdFRoZW1lLl9fZXNNb2R1bGUgPyBkZWZhdWx0VGhlbWUgOiB7IGRlZmF1bHQ6IGRlZmF1bHRUaGVtZSB9KS5kZWZhdWx0XG4iLCAiY29uc3QgZGVmYXVsdFRoZW1lID0gcmVxdWlyZShcInRhaWx3aW5kY3NzL2RlZmF1bHRUaGVtZVwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY29udGVudDogW1wiLi4vKiovKi5saXF1aWRcIiwgXCIuL3NyYy8qKi8qLHtqcyxqc3gsdHMsdHN4fVwiXSxcbiAgdGhlbWU6IHtcbiAgICBleHRlbmQ6IHtcbiAgICAgIGNvbG9yczoge1xuICAgICAgICBcImJhc2UtYmcxXCI6IFwicmdiKHZhcigtLWNvbG9yLWJhc2UtYmFja2dyb3VuZC0xKSlcIixcbiAgICAgICAgXCJiYXNlLWJnMlwiOiBcInJnYih2YXIoLS1jb2xvci1iYXNlLWJhY2tncm91bmQtMikpXCIsXG4gICAgICAgIFwiYmFzZS10ZXh0XCI6IFwicmdiKHZhcigtLWNvbG9yLWJhc2UtdGV4dCkpXCIsXG4gICAgICAgIGFjY2VudDE6IFwicmdiKHZhcigtLWNvbG9yLWJhc2UtYWNjZW50LTEpKVwiLFxuICAgICAgICBhY2NlbnQyOiBcInJnYih2YXIoLS1jb2xvci1iYXNlLWFjY2VudC0yKSlcIixcbiAgICAgICAgXCJidXR0b24tbGFiZWxcIjogXCJyZ2IodmFyKC0tY29sb3ItYmFzZS1zb2xpZC1idXR0b24tbGFiZWxzKSlcIixcbiAgICAgICAgXCJncmF5aXNoLWJsdWVcIjogXCIjRDJENkRFXCIsXG4gICAgICAgIFwibGlnaHQtZ3JheVwiOiBcIiNEMkQyRDJcIixcbiAgICAgICAgXCJsaW5rLWdyYXlcIjogXCIjOTI5MjkyXCIsXG4gICAgICAgIFwicGFsZS1ncmF5XCI6IFwiI0Y2RjZGNlwiLFxuICAgICAgICBcImF0aGVucy1ncmF5XCI6IFwiI0U5RUJFRlwiLFxuICAgICAgICBcInYtYmVpZ2VcIjogXCIjRTlEN0FFXCIsXG4gICAgICAgIFwidi1ibGFja1wiOiBcIiM0MzQzNDNcIixcbiAgICAgICAgXCJ2LWJsdWVcIjogXCIjNDU1RkVGXCIsXG4gICAgICAgIFwidi1icm93blwiOiBcIiM3NjU3MURcIixcbiAgICAgICAgXCJ2LWNsZWFyXCI6IFwiI0ZBRkNGRlwiLFxuICAgICAgICBcInYtZ29sZFwiOiBcIiNFNEM4NjJcIixcbiAgICAgICAgXCJ2LWdyYXlcIjogXCIjQjlCOUI5XCIsXG4gICAgICAgIFwidi1ncmVlblwiOiBcIiM2Qjg0NDFcIixcbiAgICAgICAgXCJ2LWljZWJsdWVcIjogXCIjRDNFN0ZGXCIsXG4gICAgICAgIFwidi1pbmRpZ29cIjogXCIjMjY0MjhCXCIsXG4gICAgICAgIFwidi1raGFraVwiOiBcIiNCOThFM0JcIixcbiAgICAgICAgXCJ2LW1pbnRcIjogXCIjN0ZDOUJEXCIsXG4gICAgICAgIFwidi1tb2NoYVwiOiBcIiM2QjUzNThcIixcbiAgICAgICAgXCJ2LW5hdnlcIjogXCIjMzQ0NTcxXCIsXG4gICAgICAgIFwidi1vcmFuZ2VcIjogXCIjRUE5MTNGXCIsXG4gICAgICAgIFwidi1waW5rXCI6IFwiI0YxOEZEQ1wiLFxuICAgICAgICBcInYtcHVycGxlXCI6IFwiI0IzNTNFMFwiLFxuICAgICAgICBcInYtcmVkXCI6IFwiI2UwNDAxMFwiLFxuICAgICAgICBcInYtd2hpdGVcIjogXCIjRjBGMEYwXCIsXG4gICAgICAgIFwidi13aW5lXCI6IFwiIzlCM0M0RVwiLFxuICAgICAgICBcInYteWVsbG93XCI6IFwiI0Y0Rjg2MlwiLFxuICAgICAgfSxcbiAgICAgIGJyaWdodG5lc3M6IHtcbiAgICAgICAgMjU6IFwiLjI1XCIsXG4gICAgICB9LFxuICAgICAgc3BhY2luZzoge1xuICAgICAgICBcImR0LXZcIjogXCIzMnB4XCIsXG4gICAgICAgIFwiZHQtaFwiOiBcIjEwcHhcIixcbiAgICAgICAgXCJtYi12XCI6IFwiMzJweFwiLFxuICAgICAgICBcIm1iLWhcIjogXCIyMHB4XCIsXG4gICAgICAgIFwiZ3JpZC1kdC12XCI6IFwidmFyKC0tZ3JpZC1kdC12LXNwYWNpbmcpXCIsXG4gICAgICAgIFwiZ3JpZC1kdC1oXCI6IFwidmFyKC0tZ3JpZC1kdC1oLXNwYWNpbmcpXCIsXG4gICAgICAgIFwiZ3JpZC1tYi12XCI6IFwidmFyKC0tZ3JpZC1tYi12LXNwYWNpbmcpXCIsXG4gICAgICAgIFwiZ3JpZC1tYi1oXCI6IFwidmFyKC0tZ3JpZC1tYi1oLXNwYWNpbmcpXCIsXG4gICAgICAgIFwic2VjdGlvbi1teVwiOiBcIjUwcHhcIixcbiAgICAgICAgXCIxJVwiOiBcIjElXCIsXG4gICAgICAgIFwiMS8xMFwiOiBcIjEwJVwiLFxuICAgICAgICBcIjIvMTBcIjogXCIyMCVcIixcbiAgICAgICAgXCI5LzEwXCI6IFwiOTAlXCIsXG4gICAgICAgIFwiMnB4XCI6IFwiMnB4XCIsXG4gICAgICAgIFwiNnB4XCI6IFwiNnB4XCIsXG4gICAgICAgIFwiOHB4XCI6IFwiOHB4XCIsXG4gICAgICAgIFwiMTJweFwiOiBcIjEycHhcIixcbiAgICAgICAgXCIxNHB4XCI6IFwiMTRweFwiLFxuICAgICAgICBcIjE2cHhcIjogXCIxNnB4XCIsXG4gICAgICAgIFwiMjBweFwiOiBcIjIwcHhcIixcbiAgICAgICAgXCIyNHB4XCI6IFwiMjRweFwiLFxuICAgICAgICBcIjMycHhcIjogXCIzMnB4XCIsXG4gICAgICAgIFwiMzZweFwiOiBcIjM2cHhcIixcbiAgICAgICAgXCI0MHB4XCI6IFwiNDBweFwiLFxuICAgICAgICBcIjQycHhcIjogXCI0MnB4XCIsXG4gICAgICAgIFwiNDhweFwiOiBcIjQ4cHhcIixcbiAgICAgICAgXCI1NnB4XCI6IFwiNTZweFwiLFxuICAgICAgICBcIjY0cHhcIjogXCI2NHB4XCIsXG4gICAgICAgIFwiNzJweFwiOiBcIjcycHhcIixcbiAgICAgICAgXCI4NnB4XCI6IFwiODZweFwiLFxuICAgICAgICBcIjk2cHhcIjogXCI5NnB4XCIsXG4gICAgICAgIFwiMTEycHhcIjogXCIxMTJweFwiLFxuICAgICAgICBcIjEyMHB4XCI6IFwiMTIwcHhcIixcbiAgICAgICAgXCI3LjV2d1wiOiBcIjcuNXZ3XCIsXG4gICAgICB9LFxuICAgICAgcGFkZGluZzoge1xuICAgICAgICBcIjEvMTBcIjogXCIxMCVcIixcbiAgICAgICAgXCI4cHhcIjogXCI4cHhcIixcbiAgICAgICAgXCIyNHB4XCI6IFwiMjRweFwiLFxuICAgICAgICBcIjMycHhcIjogXCIzMnB4XCIsXG4gICAgICAgIFwiNDRweFwiOiBcIjQ0cHhcIixcbiAgICAgICAgXCI2NHB4XCI6IFwiNjRweFwiLFxuICAgICAgfSxcbiAgICAgIHdpZHRoOiB7XG4gICAgICAgIFwicGFnZS1jb250ZW50XCI6IFwidmFyKC0tcGFnZS13aWR0aClcIixcbiAgICAgICAgXCJwYWdlLW1vYmlsZVwiOiBcIjkwJVwiLFxuICAgICAgICBcIjcwJVwiOiBcIjcwJVwiLFxuICAgICAgICBcIjcvMTBcIjogXCI3MCVcIixcbiAgICAgIH0sXG4gICAgICBtYXhXaWR0aDoge1xuICAgICAgICBcIm1vZGFsLWNvbnRlbnRcIjogXCJ2YXIoLS1tb2RhbC1jb250ZW50LXdpZHRoKVwiLFxuICAgICAgfSxcbiAgICAgIGhlaWdodDoge1xuICAgICAgICBcIjIwdmhcIjogXCIyMHZoXCIsXG4gICAgICAgIFwiMzV2aFwiOiBcIjM1dmhcIixcbiAgICAgICAgXCI0MHZoXCI6IFwiNDB2aFwiLFxuICAgICAgICBcIjYwdmhcIjogXCI2MHZoXCIsXG4gICAgICAgIFwiNzB2aFwiOiBcIjcwdmhcIixcbiAgICAgICAgXCI4MHZoXCI6IFwiODB2aFwiLFxuICAgICAgfSxcbiAgICAgIG1heEhlaWdodDoge1xuICAgICAgICBcIjQwdmhcIjogXCI0MHZoXCIsXG4gICAgICAgIFwiODB2aFwiOiBcIjgwdmhcIixcbiAgICAgIH0sXG4gICAgICBsaW5lSGVpZ2h0OiB7XG4gICAgICAgIFwiZXh0cmEtbG9vc2VcIjogXCIyLjVcIixcbiAgICAgIH0sXG4gICAgICB6SW5kZXg6IHtcbiAgICAgICAgMTogXCIxXCIsXG4gICAgICAgIGhlYWRlcjogXCIxMDAwXCIsXG4gICAgICAgIG92ZXJsYXk6IFwiMjAwMFwiLFxuICAgICAgICBzaWRlcGFuZWw6IFwiMjEwMFwiLFxuICAgICAgICBtb2RhbDogXCIyMTAwXCIsXG4gICAgICAgIFwibW9kYWwtY292ZXJcIjogXCIyMTEwXCIsXG4gICAgICAgIFwibW9kYWwtY292ZXItMjBcIjogXCIyMTIwXCIsXG4gICAgICAgIFwibW9kYWwtY292ZXItMzBcIjogXCIyMTMwXCIsXG4gICAgICAgIFwibW9kYWwtY2xvc2VcIjogXCIyMjAwXCIsXG4gICAgICB9LFxuICAgICAgaW5zZXQ6IHtcbiAgICAgICAgXCIxLzEwXCI6IFwiMTAlXCIsXG4gICAgICAgIFwiMi8xMFwiOiBcIjIwJVwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNjcmVlbnM6IHtcbiAgICAgIC4uLmRlZmF1bHRUaGVtZS5zY3JlZW5zLFxuICAgIH0sXG4gICAgZm9udEZhbWlseToge1xuICAgICAgYm9keTogXCJ2YXIoLS1mb250LWJvZHktZmFtaWx5KVwiLFxuICAgICAgaGVhZGluZzogXCJ2YXIoLS1mb250LWhlYWRpbmctZmFtaWx5KVwiLFxuICAgIH0sXG4gICAgZm9udFdlaWdodDoge1xuICAgICAgYm9keTogXCJ2YXIoLS1mb250LWJvZHktd2VpZ2h0KVwiLFxuICAgICAgXCJib2R5LWJvbGRcIjogXCJ2YXIoLS1mb250LWJvZHktd2VpZ2h0LWJvbGQpXCIsXG4gICAgICBoZWFkaW5nOiBcInZhcigtLWZvbnQtaGVhZGluZy13ZWlnaHQpXCIsXG4gICAgfSxcbiAgICBmb250U2l6ZToge1xuICAgICAgXCJ2LWgwXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogNC42cmVtKVwiLFxuICAgICAgXCJ2LWgxXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogNC4wcmVtKVwiLFxuICAgICAgXCJ2LWgyXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMy42cmVtKVwiLFxuICAgICAgXCJ2LWgzXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMi43cmVtKVwiLFxuICAgICAgXCJ2LWg0XCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMi4wcmVtKVwiLFxuICAgICAgXCJ2LWg1XCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMS41cmVtKVwiLFxuICAgICAgXCJ2LWg2XCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMS40cmVtKVwiLFxuICAgICAgXCJ2LWgwLXNcIjogXCJjYWxjKHZhcigtLWZvbnQtaGVhZGluZy1zY2FsZSkgKiAzLjRyZW0pXCIsXG4gICAgICBcInYtaDEtc1wiOiBcImNhbGModmFyKC0tZm9udC1oZWFkaW5nLXNjYWxlKSAqIDMuMHJlbSlcIixcbiAgICAgIFwidi1oMi1zXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMi42cmVtKVwiLFxuICAgICAgXCJ2LWgzLXNcIjogXCJjYWxjKHZhcigtLWZvbnQtaGVhZGluZy1zY2FsZSkgKiAyLjByZW0pXCIsXG4gICAgICBcInYtaDQtc1wiOiBcImNhbGModmFyKC0tZm9udC1oZWFkaW5nLXNjYWxlKSAqIDEuOHJlbSlcIixcbiAgICAgIFwidi1oNS1zXCI6IFwiY2FsYyh2YXIoLS1mb250LWhlYWRpbmctc2NhbGUpICogMS42cmVtKVwiLFxuICAgICAgXCJ2LWg2LXNcIjogXCJjYWxjKHZhcigtLWZvbnQtaGVhZGluZy1zY2FsZSkgKiAxLjRyZW0pXCIsXG4gICAgICA5OiBcIjAuOXJlbVwiLFxuICAgICAgMTA6IFwiMS4wcmVtXCIsXG4gICAgICAxMTogXCIxLjFyZW1cIixcbiAgICAgIDEyOiBcIjEuMnJlbVwiLFxuICAgICAgMTM6IFwiMS4zcmVtXCIsXG4gICAgICAxNDogXCIxLjRyZW1cIixcbiAgICAgIDE1OiBcIjEuNXJlbVwiLFxuICAgICAgMTY6IFwiMS42cmVtXCIsXG4gICAgICAxODogXCIxLjhyZW1cIixcbiAgICAgIDIwOiBcIjIuMHJlbVwiLFxuICAgICAgMjI6IFwiMi4ycmVtXCIsXG4gICAgICAyNDogXCIyLjRyZW1cIixcbiAgICAgIDI2OiBcIjIuNnJlbVwiLFxuICAgICAgMjg6IFwiMi44cmVtXCIsXG4gICAgICAzMjogXCIzLjJyZW1cIixcbiAgICAgIDM2OiBcIjMuNnJlbVwiLFxuICAgICAgNDA6IFwiNC4wcmVtXCIsXG4gICAgICA0ODogXCI0LjhyZW1cIixcbiAgICAgIDUyOiBcIjUuMnJlbVwiLFxuICAgICAgNTY6IFwiNS42cmVtXCIsXG4gICAgICA2MDogXCI2LjByZW1cIixcbiAgICAgIDgwOiBcIjguMHJlbVwiLFxuICAgICAgMTAwOiBcIjEwLjByZW1cIixcbiAgICAgIDExMDogXCIxMS4wcmVtXCIsXG4gICAgICAxMjA6IFwiMTIuMHJlbVwiLFxuICAgICAgMTUwOiBcIjE1LjByZW1cIixcbiAgICB9LFxuICB9LFxuICBwbHVnaW5zOiBbXSxcbn1cbiIsICJpbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwicHJlYWN0XCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi4vY29tcG9uZW50cy9wcm9kdWN0cy9fRGVzY3JpcHRpb24nIHdhcyByLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCBEZXNjcmlwdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9wcm9kdWN0cy9fRGVzY3JpcHRpb25cIlxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuLi9jb21wb25lbnRzL3Byb2R1Y3RzL19HYWxsZXJ5JyB3YXMgcmVzb2wuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IEdhbGxlcnkgZnJvbSBcIi4uL2NvbXBvbmVudHMvcHJvZHVjdHMvX0dhbGxlcnlcIlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9kdWN0KCkge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTEyIHB0LVs0dnddIHNtOnB0LTMyIHB4LVs0dnddIHNtOnB4LVs4dnddIHNtOmdhcC14LVs0dnddXCI+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPEdhbGxlcnkgLz5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8RGVzY3JpcHRpb24gLz5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgPC9kaXY+XG4gIClcbn1cblxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbnJlbmRlcig8UHJvZHVjdCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHAtcHJvZHVjdFwiKSlcbiIsICJpbXBvcnQgeyBwcm9kdWN0IH0gZnJvbSBcIi4vX1Byb2R1Y3RTdG9yZVwiXG5pbXBvcnQgeyBzZWN0aW9uSWQgfSBmcm9tIFwiLi9fU2VjdGlvblN0b3JlXCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9fVmFyaWFudEZpZWxkc2V0cycgd2FzIHJlc29sdmVkIHRvICcvVXNlLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCBWYXJpYW50RmllbGRzZXRzIGZyb20gXCIuL19WYXJpYW50RmllbGRzZXRzXCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9fRm9ybScgd2FzIHJlc29sdmVkIHRvICcvVXNlcnMvS2F6dWhvSXNoLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCBGb3JtIGZyb20gXCIuL19Gb3JtXCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9fUGlja3VwQXZhaWxhYmlsaXR5JyB3YXMgcmVzb2x2ZWQgdG8gJy9VLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCBQaWNrdXBBdmFpbGFiaWxpdHkgZnJvbSBcIi4vX1BpY2t1cEF2YWlsYWJpbGl0eVwiXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDYxNDIpOiBNb2R1bGUgJy4vX1RhZycgd2FzIHJlc29sdmVkIHRvICcvVXNlcnMvS2F6dWhvSXNoaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG5pbXBvcnQgVGFnIGZyb20gXCIuL19UYWdcIlxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19BY2NvcmRpb24nIHdhcyByZXNvbHZlZCB0byAnL1VzZXJzL0thenUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IEFjY29yZGlvbiBmcm9tIFwiLi9fQWNjb3JkaW9uXCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9fUHJpY2UnIHdhcyByZXNvbHZlZCB0byAnL1VzZXJzL0thenVob0lzLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCBQcmljZSBmcm9tIFwiLi9fUHJpY2VcIlxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19Gb3JtSW5zdGFsbG1lbnQnIHdhcyByZXNvbHZlZCB0byAnL1VzZXIuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IEZvcm1JbnN0YWxsbWVudCBmcm9tIFwiLi9fRm9ybUluc3RhbGxtZW50XCJcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGVzY3JpcHRpb24oKSB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tNSBjb2wtc3Bhbi0xIHAtOFwiPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGRpdiBpZD17YFByb2R1Y3RJbmZvLSR7c2VjdGlvbklkfWB9IGNsYXNzTmFtZT1cInByb2R1Y3RfX2luZm8tY29udGFpbmVyLS1zdGlja3lcIj5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8cCBjbGFzc05hbWU9XCJcIj57cHJvZHVjdC52ZW5kb3J9PC9wPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwicHJvZHVjdF9fdGl0bGVcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLVsxcmVtXSAgdGV4dC1bMjdweF0gdGV4dC1bMjBweF1cIj57cHJvZHVjdC50aXRsZX08L3NwYW4+XG4gICAgICAgICAgICB7cHJvZHVjdC50YWdzLmluY2x1ZGVzKFwibmV3XCIpICYmIChcbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoLVsxZW1dIHVwcGVyY2FzZSBhbGlnbi10ZXh0LWJvdHRvbVwiPlxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgPFRhZyB0eXBlPVwibmV3XCIgLz5cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8L2gxPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDwvZGl2PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInByb2R1Y3RfX3RleHQgc3VidGl0bGVcIj48L3A+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxQcmljZSAvPlxuICAgICAgICB7cHJvZHVjdC50YWdzLmluY2x1ZGVzKFwicmVzdG9ja1wiKSAmJiAoXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBoLVsxZW1dIG10LTZcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8VGFnIHR5cGU9XCJyZXN0b2NrXCIgbGFiZWw9XCJcdTUxOERcdTUxNjVcdTgzNzdcIiAvPlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICl9XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxGb3JtSW5zdGFsbG1lbnQgLz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPFZhcmlhbnRGaWVsZHNldHMgLz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPEZvcm0gLz5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPGxpbmsgaHJlZj1cIi9hc3NldHMvY29tcG9uZW50LXBpY2t1cC1hdmFpbGFiaWxpdHkuY3NzP3Y9MjMwMjc0MjczNjE5Mjc2OTMyNlwiIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIiBtZWRpYT1cImFsbFwiIC8+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8UGlja3VwQXZhaWxhYmlsaXR5IC8+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPHNjcmlwdCBzcmM9XCIvYXNzZXRzL3BpY2t1cC1hdmFpbGFiaWxpdHkuanM/dj05NTM0NTIxNjk4ODk4NTIzOTYzXCIgZGVmZXI9XCJkZWZlclwiPjwvc2NyaXB0PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8QWNjb3JkaW9uIGlkPVwiaW5saW5lLWpzb24tYmxvY2stcHJvZHVjdC1kZXRhaWxcIiAvPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8QWNjb3JkaW9uIGlkPVwiaW5saW5lLWpzb24tYmxvY2stcHJvZHVjdC1kaW1lbnNpb25zXCIgLz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPEFjY29yZGlvbiBpZD1cImlubGluZS1qc29uLWJsb2NrLXByb2R1Y3QtcXVhbGl0eVwiIC8+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJibG9jayBlbXB0eTpibG9jayBoLTRcIj48L2Rpdj5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8ZGl2Plx1MjAzQlx1OEZENFx1NTRDMVx1MzBGQlx1NEVBNFx1NjNEQlx1MzBGQlx1MzBBRFx1MzBFM1x1MzBGM1x1MzBCQlx1MzBFQlx1MzA2Qlx1MzA2NFx1MzA0NFx1MzA2NjwvZGl2PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxwPlx1MzA1NFx1NkNFOFx1NjU4N1x1NzhCQVx1NUI5QVx1NUY4Q1x1MzAwMVx1MzA0QVx1NUJBMlx1NjlEOFx1OTBGRFx1NTQwOFx1MzA2N1x1MzA2RVx1OEZENFx1NTRDMVx1MzBGQlx1NEVBNFx1NjNEQlx1MzBGQlx1MzBBRFx1MzBFM1x1MzBGM1x1MzBCQlx1MzBFQlx1MzA2Rlx1NjI3Rlx1MzA2M1x1MzA2Nlx1MzA0QVx1MzA4QVx1MzA3RVx1MzA1Qlx1MzA5M1x1MzAwMlx1NUZDNVx1MzA1QVx1NTU0Nlx1NTRDMVx1NTQwRFx1MzBGQlx1MzBBQlx1MzBFOVx1MzBGQ1x1MzBGQlx1MzBCNVx1MzBBNFx1MzBCQVx1MzBGQlx1NjU3MFx1OTFDRlx1MzA5Mlx1MzA1NFx1NzhCQVx1OEE4RFx1MzA2RVx1NEUwQVx1MzAwMVx1MzA1NFx1NkNFOFx1NjU4N1x1MzA5Mlx1MzA0QVx1OTg1OFx1MzA0NFx1MzA0NFx1MzA1Rlx1MzA1N1x1MzA3RVx1MzA1OVx1MzAwMjwvcD5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8L2Rpdj5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwgIi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG5leHBvcnQgY29uc3QgcHJvZHVjdCA9IEpTT04ucGFyc2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmxpbmUtanNvbi1wcm9kdWN0XCIpLnRleHQpXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuZXhwb3J0IGNvbnN0IGF2YWlsYWJsZVZhcmlhbnQgPSBKU09OLnBhcnNlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5saW5lLWpzb24tcHJvZHVjdC1hdmFpbGFibGVcIikudGV4dClcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG5leHBvcnQgY29uc3QgcHJvZHVjdExhbmcgPSBKU09OLnBhcnNlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5saW5lLWpzb24tcHJvZHVjdC1sYW5nXCIpLnRleHQpXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuZXhwb3J0IGNvbnN0IHByb2R1Y3RVcmwgPSBKU09OLnBhcnNlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmxpbmUtanNvbi1wcm9kdWN0LXVybCcpLnRleHQpXG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCB9IGZyb20gJ3ByZWFjdCdcblxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTU0KTogRXhwZWN0ZWQgMSBhcmd1bWVudHMsIGJ1dCBnb3QgMC5cbmV4cG9ydCBjb25zdCBTZWN0aW9uQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKVxuXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuY29uc3Qgc2VjdGlvbiA9IEpTT04ucGFyc2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lubGluZS1qc29uLXNlY3Rpb24nKS50ZXh0KVxuXG5leHBvcnQgY29uc3Qgc2VjdGlvbkluaXRpYWwgPSB7Li4uc2VjdGlvbn1cbmV4cG9ydCBjb25zdCBzZWN0aW9uSWQgPSBzZWN0aW9uLmlkXG4iLCAiLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19WYXJpYW50RmllbGRzZXQnIHdhcyByZXNvbHZlZCB0byAnL1VzZXIuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IFZhcmlhbnRGaWVsZHNldCBmcm9tICcuL19WYXJpYW50RmllbGRzZXQnXG5pbXBvcnQgeyBwcm9kdWN0VXJsIH0gZnJvbSAnLi9fUHJvZHVjdFN0b3JlJ1xuaW1wb3J0IHsgc2VjdGlvbklkIH0gZnJvbSAnLi9fU2VjdGlvblN0b3JlJ1xuaW1wb3J0IHsgb3B0aW9uc1dpdGhWYWx1ZXMgfSBmcm9tICcuL19WYXJpYW50U3RvcmUnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZhcmlhbnRGaWVsZHNldHMoKSB7XG4gIGNvbnN0IGhhc1NpemUgPSBvcHRpb25zV2l0aFZhbHVlcz8ubWFwKCAob3B0aW9uOiBhbnkpID0+IG9wdGlvbi5uYW1lICkuZmlsdGVyKCAobmFtZTogYW55KSA9PiBuYW1lID09PSAnU2l6ZScgKS5pbmNsdWRlcygnU2l6ZScpXG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDxkaXYgY2xhc3NOYW1lPVwibm8tanMtaGlkZGVuIHB5LTE0XCIgZGF0YS1zZWN0aW9uPXtzZWN0aW9uSWR9IGRhdGEtdXJsPXtwcm9kdWN0VXJsfT5cbiAgICAgIHsoKCkgPT4ge1xuICAgICAgICBpZiAoICFoYXNTaXplICkge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3NOYW1lPXtganMgcHJvZHVjdC1mb3JtX19pbnB1dCBmbGV4IGNvbnRlbnQtY2VudGVyIGl0ZW1zLWNlbnRlciBTaXplYH0+XG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LVs0ZW1dXCI+XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3NOYW1lPVwiZm9ybV9fbGFiZWwgY29udGVudHNcIj5TaXplOiA8L2xlZ2VuZD5cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgRnJlZVxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgPC9maWVsZHNldD5cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0pKCl9XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAge29wdGlvbnNXaXRoVmFsdWVzPy5tYXAoIChvcHRpb246IGFueSkgPT4gPFZhcmlhbnRGaWVsZHNldCBvcHRpb249e29wdGlvbn0gc2VjdGlvbklkPXtzZWN0aW9uSWR9Lz4pfVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3ByZWFjdC9ob29rcydcbmltcG9ydCB7IGNoZWNrZWRPcHRpb25zQXRvbSB9IGZyb20gJy4uLy4uL19BdG9tcydcbmltcG9ydCB7IHVzZUF0b21WYWx1ZSB9IGZyb20gJ2pvdGFpL3V0aWxzJ1xuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19WYXJpYW50T3B0aW9uJyB3YXMgcmVzb2x2ZWQgdG8gJy9Vc2Vycy8uLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IFZhcmlhbnRPcHRpb24gZnJvbSAnLi9fVmFyaWFudE9wdGlvbidcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmFyaWFudEZpZWxkc2V0KHtcbiAgb3B0aW9uXG59OiBhbnkpIHtcbiAgY29uc3QgY2hlY2tlZCA9IHVzZUF0b21WYWx1ZShjaGVja2VkT3B0aW9uc0F0b20pXG4gIGNvbnN0IFtjb2xvciwgc2V0Q29sb3JOYW1lXSA9IHVzZVN0YXRlKGNoZWNrZWRbJ0NvbG9yJ10pXG4gIGNvbnN0IGNoYW5nZUNvbG9yID0gZnVuY3Rpb24obmFtZTogYW55KSB7XG4gICAgc2V0Q29sb3JOYW1lKG5hbWUpXG4gIH1cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgcmV0dXJuIDw+XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDxmaWVsZHNldCBjbGFzc05hbWU9e2BqcyBwcm9kdWN0LWZvcm1fX2lucHV0IGZsZXggY29udGVudC1jZW50ZXIgJHsgb3B0aW9uLm5hbWUgPT09ICdDb2xvcicgJiYgJyFtLTAnIH0gJHtvcHRpb24ubmFtZX1gfT5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1bNGVtXSBzaHJpbmstMFwiPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxsZWdlbmQgY2xhc3NOYW1lPVwiZm9ybV9fbGFiZWwgY29udGVudHNcIj57b3B0aW9uLm5hbWV9OiA8L2xlZ2VuZD5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC15LTFcIj5cbiAgICAgICAgeyBvcHRpb24ubmFtZSA9PT0gJ0NvbG9yJyAmJiAoXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxkaXY+e2NvbG9yfTwvZGl2PlxuICAgICAgICApfVxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXBcIj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIHtvcHRpb24udmFsdWVzLm1hcCggKHZhbHVlOiBhbnksIGluZGV4OiBhbnkpICA9PiA8VmFyaWFudE9wdGlvbiB7Li4ue29wdGlvbiwgdmFsdWUsIGluZGV4LCBjaGFuZ2VDb2xvcn19IC8+ICl9XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9kaXY+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8L2Rpdj5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgPC9maWVsZHNldD5cbiAgPC8+O1xufVxuIiwgImltcG9ydCB7IGF0b20gfSBmcm9tICdqb3RhaSdcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9jb21wb25lbnRzL3Byb2R1Y3RzL19QcmljZVN0b3JlJyB3YXMgcmVzLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCB7IHByaWNlSW5pdGlhbCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9kdWN0cy9fUHJpY2VTdG9yZSdcbmltcG9ydCB7IGF2YWlsYWJsZVZhcmlhbnQgYXMgdmFyaWFudCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9kdWN0cy9fUHJvZHVjdFN0b3JlJ1xuaW1wb3J0IHsgY2hlY2tlZE9wdGlvbnMgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvZHVjdHMvX1ZhcmlhbnRTdG9yZSdcblxuZXhwb3J0IGNvbnN0IHByaWNlQXRvbSA9IGF0b20oIHByaWNlSW5pdGlhbCApXG5leHBvcnQgY29uc3QgdmFyaWFudEF0b20gPSBhdG9tKCB2YXJpYW50IClcbmV4cG9ydCBjb25zdCBjaGVja2VkT3B0aW9uc0F0b20gPSBhdG9tKCBjaGVja2VkT3B0aW9ucyApXG5leHBvcnQgY29uc3QgY2hlY2tlZE9wdGlvbnNSV0F0b20gPSBhdG9tKFxuICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1NTApOiBQcm9wZXJ0eSAndmFsdWVzJyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlICdPYmplY3RDby4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gIChnZXQpID0+IE9iamVjdC52YWx1ZXMoZ2V0KGNoZWNrZWRPcHRpb25zQXRvbSkpLFxuICAoZ2V0LCBzZXQsIG9wdGlvbikgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0KGNoZWNrZWRPcHRpb25zQXRvbSlcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1NzEpOiBPYmplY3QgaXMgb2YgdHlwZSAndW5rbm93bicuXG4gICAgc3RhdGVbb3B0aW9uLm5hbWVdID0gb3B0aW9uLnZhbHVlXG4gICAgc2V0KGNoZWNrZWRPcHRpb25zQXRvbSwgc3RhdGUpXG4gIH1cbilcbmV4cG9ydCBjb25zdCBwcm9jZXNzaW5nQXRvbSA9IGF0b20oZmFsc2UpXG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlRGVidWdWYWx1ZSwgdXNlUmVmLCBjcmVhdGVFbGVtZW50LCB1c2VDb250ZXh0LCB1c2VDYWxsYmFjaywgdXNlUmVkdWNlciB9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgU1VTUEVOU0VfUFJPTUlTRSA9IFN5bWJvbCgpO1xuY29uc3QgaXNTdXNwZW5zZVByb21pc2UgPSAocHJvbWlzZSkgPT4gISFwcm9taXNlW1NVU1BFTlNFX1BST01JU0VdO1xuY29uc3QgaXNTdXNwZW5zZVByb21pc2VBbHJlYWR5Q2FuY2VsbGVkID0gKHN1c3BlbnNlUHJvbWlzZSkgPT4gIXN1c3BlbnNlUHJvbWlzZVtTVVNQRU5TRV9QUk9NSVNFXS5jO1xuY29uc3QgY2FuY2VsU3VzcGVuc2VQcm9taXNlID0gKHN1c3BlbnNlUHJvbWlzZSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICAoX2IgPSAoX2EgPSBzdXNwZW5zZVByb21pc2VbU1VTUEVOU0VfUFJPTUlTRV0pLmMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKTtcbn07XG5jb25zdCBpc0VxdWFsU3VzcGVuc2VQcm9taXNlID0gKG9sZFN1c3BlbnNlUHJvbWlzZSwgbmV3U3VzcGVuc2VQcm9taXNlKSA9PiB7XG4gIGNvbnN0IG9sZE9yaWdpbmFsUHJvbWlzZSA9IG9sZFN1c3BlbnNlUHJvbWlzZVtTVVNQRU5TRV9QUk9NSVNFXS5vO1xuICBjb25zdCBuZXdPcmlnaW5hbFByb21pc2UgPSBuZXdTdXNwZW5zZVByb21pc2VbU1VTUEVOU0VfUFJPTUlTRV0ubztcbiAgcmV0dXJuIG9sZE9yaWdpbmFsUHJvbWlzZSA9PT0gbmV3T3JpZ2luYWxQcm9taXNlIHx8IG9sZFN1c3BlbnNlUHJvbWlzZSA9PT0gbmV3T3JpZ2luYWxQcm9taXNlIHx8IGlzU3VzcGVuc2VQcm9taXNlKG9sZE9yaWdpbmFsUHJvbWlzZSkgJiYgaXNFcXVhbFN1c3BlbnNlUHJvbWlzZShvbGRPcmlnaW5hbFByb21pc2UsIG5ld1N1c3BlbnNlUHJvbWlzZSk7XG59O1xuY29uc3QgY3JlYXRlU3VzcGVuc2VQcm9taXNlID0gKHByb21pc2UpID0+IHtcbiAgY29uc3Qgb2JqZWN0VG9BdHRhY2ggPSB7XG4gICAgbzogcHJvbWlzZSxcbiAgICBjOiBudWxsXG4gIH07XG4gIGNvbnN0IHN1c3BlbnNlUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgb2JqZWN0VG9BdHRhY2guYyA9ICgpID0+IHtcbiAgICAgIG9iamVjdFRvQXR0YWNoLmMgPSBudWxsO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH07XG4gICAgcHJvbWlzZS50aGVuKG9iamVjdFRvQXR0YWNoLmMsIG9iamVjdFRvQXR0YWNoLmMpO1xuICB9KTtcbiAgc3VzcGVuc2VQcm9taXNlW1NVU1BFTlNFX1BST01JU0VdID0gb2JqZWN0VG9BdHRhY2g7XG4gIHJldHVybiBzdXNwZW5zZVByb21pc2U7XG59O1xuXG52YXIgX19kZWZQcm9wJDEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyQxID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXM7XG52YXIgX19nZXRPd25Qcm9wRGVzY3MkMSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMkMSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wJDEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSQxID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AkMSA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3AkMShvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMkMSA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wJDEuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcCQxKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scyQxKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyQxKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtJDEuY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wJDEoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyQxID0gKGEsIGIpID0+IF9fZGVmUHJvcHMkMShhLCBfX2dldE93blByb3BEZXNjcyQxKGIpKTtcbmNvbnN0IGhhc0luaXRpYWxWYWx1ZSA9IChhdG9tKSA9PiBcImluaXRcIiBpbiBhdG9tO1xuY29uc3QgUkVBRF9BVE9NID0gXCJyXCI7XG5jb25zdCBXUklURV9BVE9NID0gXCJ3XCI7XG5jb25zdCBDT01NSVRfQVRPTSA9IFwiY1wiO1xuY29uc3QgU1VCU0NSSUJFX0FUT00gPSBcInNcIjtcbmNvbnN0IFJFU1RPUkVfQVRPTVMgPSBcImhcIjtcbmNvbnN0IERFVl9TVUJTQ1JJQkVfU1RBVEUgPSBcIm5cIjtcbmNvbnN0IERFVl9HRVRfTU9VTlRFRF9BVE9NUyA9IFwibFwiO1xuY29uc3QgREVWX0dFVF9BVE9NX1NUQVRFID0gXCJhXCI7XG5jb25zdCBERVZfR0VUX01PVU5URUQgPSBcIm1cIjtcbmNvbnN0IGNyZWF0ZVN0b3JlID0gKGluaXRpYWxWYWx1ZXMpID0+IHtcbiAgY29uc3QgY29tbWl0dGVkQXRvbVN0YXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gIGNvbnN0IG1vdW50ZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcGVuZGluZ01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGxldCBzdGF0ZUxpc3RlbmVycztcbiAgbGV0IG1vdW50ZWRBdG9tcztcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgJiYgaW1wb3J0Lm1ldGEuZW52Lk1PREUpICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIHN0YXRlTGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBtb3VudGVkQXRvbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICB9XG4gIGlmIChpbml0aWFsVmFsdWVzKSB7XG4gICAgZm9yIChjb25zdCBbYXRvbSwgdmFsdWVdIG9mIGluaXRpYWxWYWx1ZXMpIHtcbiAgICAgIGNvbnN0IGF0b21TdGF0ZSA9IHsgdjogdmFsdWUsIHI6IDAsIGQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkgfTtcbiAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ICYmIGltcG9ydC5tZXRhLmVudi5NT0RFKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgT2JqZWN0LmZyZWV6ZShhdG9tU3RhdGUpO1xuICAgICAgICBpZiAoIWhhc0luaXRpYWxWYWx1ZShhdG9tKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkZvdW5kIGluaXRpYWwgdmFsdWUgZm9yIGRlcml2ZWQgYXRvbSB3aGljaCBjYW4gY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvclwiLCBhdG9tKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29tbWl0dGVkQXRvbVN0YXRlTWFwLnNldChhdG9tLCBhdG9tU3RhdGUpO1xuICAgIH1cbiAgfVxuICBjb25zdCBzdXNwZW5zZVByb21pc2VDYWNoZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICBjb25zdCBhZGRTdXNwZW5zZVByb21pc2VUb0NhY2hlID0gKHZlcnNpb24sIGF0b20sIHN1c3BlbnNlUHJvbWlzZSkgPT4ge1xuICAgIGxldCBjYWNoZSA9IHN1c3BlbnNlUHJvbWlzZUNhY2hlTWFwLmdldChhdG9tKTtcbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBzdXNwZW5zZVByb21pc2VDYWNoZU1hcC5zZXQoYXRvbSwgY2FjaGUpO1xuICAgIH1cbiAgICBzdXNwZW5zZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICBpZiAoY2FjaGUuZ2V0KHZlcnNpb24pID09PSBzdXNwZW5zZVByb21pc2UpIHtcbiAgICAgICAgY2FjaGUuZGVsZXRlKHZlcnNpb24pO1xuICAgICAgICBpZiAoIWNhY2hlLnNpemUpIHtcbiAgICAgICAgICBzdXNwZW5zZVByb21pc2VDYWNoZU1hcC5kZWxldGUoYXRvbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjYWNoZS5zZXQodmVyc2lvbiwgc3VzcGVuc2VQcm9taXNlKTtcbiAgfTtcbiAgY29uc3QgY2FuY2VsQWxsU3VzcGVuc2VQcm9taXNlSW5DYWNoZSA9IChhdG9tKSA9PiB7XG4gICAgY29uc3QgdmVyc2lvblNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgY2FjaGUgPSBzdXNwZW5zZVByb21pc2VDYWNoZU1hcC5nZXQoYXRvbSk7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICBzdXNwZW5zZVByb21pc2VDYWNoZU1hcC5kZWxldGUoYXRvbSk7XG4gICAgICBjYWNoZS5mb3JFYWNoKChzdXNwZW5zZVByb21pc2UsIHZlcnNpb24pID0+IHtcbiAgICAgICAgY2FuY2VsU3VzcGVuc2VQcm9taXNlKHN1c3BlbnNlUHJvbWlzZSk7XG4gICAgICAgIHZlcnNpb25TZXQuYWRkKHZlcnNpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB2ZXJzaW9uU2V0O1xuICB9O1xuICBjb25zdCB2ZXJzaW9uZWRBdG9tU3RhdGVNYXBNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgZ2V0VmVyc2lvbmVkQXRvbVN0YXRlTWFwID0gKHZlcnNpb24pID0+IHtcbiAgICBsZXQgdmVyc2lvbmVkQXRvbVN0YXRlTWFwID0gdmVyc2lvbmVkQXRvbVN0YXRlTWFwTWFwLmdldCh2ZXJzaW9uKTtcbiAgICBpZiAoIXZlcnNpb25lZEF0b21TdGF0ZU1hcCkge1xuICAgICAgdmVyc2lvbmVkQXRvbVN0YXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIHZlcnNpb25lZEF0b21TdGF0ZU1hcE1hcC5zZXQodmVyc2lvbiwgdmVyc2lvbmVkQXRvbVN0YXRlTWFwKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnNpb25lZEF0b21TdGF0ZU1hcDtcbiAgfTtcbiAgY29uc3QgZ2V0QXRvbVN0YXRlID0gKHZlcnNpb24sIGF0b20pID0+IHtcbiAgICBpZiAodmVyc2lvbikge1xuICAgICAgY29uc3QgdmVyc2lvbmVkQXRvbVN0YXRlTWFwID0gZ2V0VmVyc2lvbmVkQXRvbVN0YXRlTWFwKHZlcnNpb24pO1xuICAgICAgbGV0IGF0b21TdGF0ZSA9IHZlcnNpb25lZEF0b21TdGF0ZU1hcC5nZXQoYXRvbSk7XG4gICAgICBpZiAoIWF0b21TdGF0ZSkge1xuICAgICAgICBhdG9tU3RhdGUgPSBnZXRBdG9tU3RhdGUodmVyc2lvbi5wLCBhdG9tKTtcbiAgICAgICAgaWYgKGF0b21TdGF0ZSkge1xuICAgICAgICAgIGlmIChcInBcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgICAgICAgIGF0b21TdGF0ZS5wLnRoZW4oKCkgPT4gdmVyc2lvbmVkQXRvbVN0YXRlTWFwLmRlbGV0ZShhdG9tKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZlcnNpb25lZEF0b21TdGF0ZU1hcC5zZXQoYXRvbSwgYXRvbVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1pdHRlZEF0b21TdGF0ZU1hcC5nZXQoYXRvbSk7XG4gIH07XG4gIGNvbnN0IHNldEF0b21TdGF0ZSA9ICh2ZXJzaW9uLCBhdG9tLCBhdG9tU3RhdGUpID0+IHtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiAmJiBpbXBvcnQubWV0YS5lbnYuTU9ERSkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBPYmplY3QuZnJlZXplKGF0b21TdGF0ZSk7XG4gICAgfVxuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uZWRBdG9tU3RhdGVNYXAgPSBnZXRWZXJzaW9uZWRBdG9tU3RhdGVNYXAodmVyc2lvbik7XG4gICAgICB2ZXJzaW9uZWRBdG9tU3RhdGVNYXAuc2V0KGF0b20sIGF0b21TdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZXZBdG9tU3RhdGUgPSBjb21taXR0ZWRBdG9tU3RhdGVNYXAuZ2V0KGF0b20pO1xuICAgICAgY29tbWl0dGVkQXRvbVN0YXRlTWFwLnNldChhdG9tLCBhdG9tU3RhdGUpO1xuICAgICAgaWYgKCFwZW5kaW5nTWFwLmhhcyhhdG9tKSkge1xuICAgICAgICBwZW5kaW5nTWFwLnNldChhdG9tLCBwcmV2QXRvbVN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGNyZWF0ZVJlYWREZXBlbmRlbmNpZXMgPSAodmVyc2lvbiwgcHJldlJlYWREZXBlbmRlbmNpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBkZXBlbmRlbmNpZXMpID0+IHtcbiAgICBpZiAoIWRlcGVuZGVuY2llcykge1xuICAgICAgcmV0dXJuIHByZXZSZWFkRGVwZW5kZW5jaWVzO1xuICAgIH1cbiAgICBjb25zdCByZWFkRGVwZW5kZW5jaWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGRlcGVuZGVuY2llcy5mb3JFYWNoKChhdG9tKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCByZXZpc2lvbiA9ICgoX2EgPSBnZXRBdG9tU3RhdGUodmVyc2lvbiwgYXRvbSkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yKSB8fCAwO1xuICAgICAgcmVhZERlcGVuZGVuY2llcy5zZXQoYXRvbSwgcmV2aXNpb24pO1xuICAgICAgaWYgKHByZXZSZWFkRGVwZW5kZW5jaWVzLmdldChhdG9tKSAhPT0gcmV2aXNpb24pIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHByZXZSZWFkRGVwZW5kZW5jaWVzLnNpemUgPT09IHJlYWREZXBlbmRlbmNpZXMuc2l6ZSAmJiAhY2hhbmdlZCkge1xuICAgICAgcmV0dXJuIHByZXZSZWFkRGVwZW5kZW5jaWVzO1xuICAgIH1cbiAgICByZXR1cm4gcmVhZERlcGVuZGVuY2llcztcbiAgfTtcbiAgY29uc3Qgc2V0QXRvbVZhbHVlID0gKHZlcnNpb24sIGF0b20sIHZhbHVlLCBkZXBlbmRlbmNpZXMsIHN1c3BlbnNlUHJvbWlzZSkgPT4ge1xuICAgIGNvbnN0IGF0b21TdGF0ZSA9IGdldEF0b21TdGF0ZSh2ZXJzaW9uLCBhdG9tKTtcbiAgICBpZiAoYXRvbVN0YXRlKSB7XG4gICAgICBpZiAoc3VzcGVuc2VQcm9taXNlICYmICghKFwicFwiIGluIGF0b21TdGF0ZSkgfHwgIWlzRXF1YWxTdXNwZW5zZVByb21pc2UoYXRvbVN0YXRlLnAsIHN1c3BlbnNlUHJvbWlzZSkpKSB7XG4gICAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgICB9XG4gICAgICBpZiAoXCJwXCIgaW4gYXRvbVN0YXRlKSB7XG4gICAgICAgIGNhbmNlbFN1c3BlbnNlUHJvbWlzZShhdG9tU3RhdGUucCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5leHRBdG9tU3RhdGUgPSB7XG4gICAgICB2OiB2YWx1ZSxcbiAgICAgIHI6IChhdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGF0b21TdGF0ZS5yKSB8fCAwLFxuICAgICAgZDogY3JlYXRlUmVhZERlcGVuZGVuY2llcyh2ZXJzaW9uLCBhdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGF0b21TdGF0ZS5kLCBkZXBlbmRlbmNpZXMpXG4gICAgfTtcbiAgICBpZiAoIWF0b21TdGF0ZSB8fCAhKFwidlwiIGluIGF0b21TdGF0ZSkgfHwgIU9iamVjdC5pcyhhdG9tU3RhdGUudiwgdmFsdWUpKSB7XG4gICAgICArK25leHRBdG9tU3RhdGUucjtcbiAgICAgIGlmIChuZXh0QXRvbVN0YXRlLmQuaGFzKGF0b20pKSB7XG4gICAgICAgIG5leHRBdG9tU3RhdGUuZCA9IG5ldyBNYXAobmV4dEF0b21TdGF0ZS5kKS5zZXQoYXRvbSwgbmV4dEF0b21TdGF0ZS5yKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5leHRBdG9tU3RhdGUuZCAhPT0gYXRvbVN0YXRlLmQgJiYgKG5leHRBdG9tU3RhdGUuZC5zaXplICE9PSBhdG9tU3RhdGUuZC5zaXplIHx8ICFBcnJheS5mcm9tKG5leHRBdG9tU3RhdGUuZC5rZXlzKCkpLmV2ZXJ5KChhKSA9PiBhdG9tU3RhdGUuZC5oYXMoYSkpKSkge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgIGZsdXNoUGVuZGluZyh2ZXJzaW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRBdG9tU3RhdGUodmVyc2lvbiwgYXRvbSwgbmV4dEF0b21TdGF0ZSk7XG4gICAgcmV0dXJuIG5leHRBdG9tU3RhdGU7XG4gIH07XG4gIGNvbnN0IHNldEF0b21SZWFkRXJyb3IgPSAodmVyc2lvbiwgYXRvbSwgZXJyb3IsIGRlcGVuZGVuY2llcywgc3VzcGVuc2VQcm9taXNlKSA9PiB7XG4gICAgY29uc3QgYXRvbVN0YXRlID0gZ2V0QXRvbVN0YXRlKHZlcnNpb24sIGF0b20pO1xuICAgIGlmIChhdG9tU3RhdGUpIHtcbiAgICAgIGlmIChzdXNwZW5zZVByb21pc2UgJiYgKCEoXCJwXCIgaW4gYXRvbVN0YXRlKSB8fCAhaXNFcXVhbFN1c3BlbnNlUHJvbWlzZShhdG9tU3RhdGUucCwgc3VzcGVuc2VQcm9taXNlKSkpIHtcbiAgICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChcInBcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgICAgY2FuY2VsU3VzcGVuc2VQcm9taXNlKGF0b21TdGF0ZS5wKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV4dEF0b21TdGF0ZSA9IHtcbiAgICAgIGU6IGVycm9yLFxuICAgICAgcjogKGF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogYXRvbVN0YXRlLnIpIHx8IDAsXG4gICAgICBkOiBjcmVhdGVSZWFkRGVwZW5kZW5jaWVzKHZlcnNpb24sIGF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogYXRvbVN0YXRlLmQsIGRlcGVuZGVuY2llcylcbiAgICB9O1xuICAgIHNldEF0b21TdGF0ZSh2ZXJzaW9uLCBhdG9tLCBuZXh0QXRvbVN0YXRlKTtcbiAgICByZXR1cm4gbmV4dEF0b21TdGF0ZTtcbiAgfTtcbiAgY29uc3Qgc2V0QXRvbVN1c3BlbnNlUHJvbWlzZSA9ICh2ZXJzaW9uLCBhdG9tLCBzdXNwZW5zZVByb21pc2UsIGRlcGVuZGVuY2llcykgPT4ge1xuICAgIGNvbnN0IGF0b21TdGF0ZSA9IGdldEF0b21TdGF0ZSh2ZXJzaW9uLCBhdG9tKTtcbiAgICBpZiAoYXRvbVN0YXRlICYmIFwicFwiIGluIGF0b21TdGF0ZSkge1xuICAgICAgaWYgKGlzRXF1YWxTdXNwZW5zZVByb21pc2UoYXRvbVN0YXRlLnAsIHN1c3BlbnNlUHJvbWlzZSkpIHtcbiAgICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICAgIH1cbiAgICAgIGNhbmNlbFN1c3BlbnNlUHJvbWlzZShhdG9tU3RhdGUucCk7XG4gICAgfVxuICAgIGFkZFN1c3BlbnNlUHJvbWlzZVRvQ2FjaGUodmVyc2lvbiwgYXRvbSwgc3VzcGVuc2VQcm9taXNlKTtcbiAgICBjb25zdCBuZXh0QXRvbVN0YXRlID0ge1xuICAgICAgcDogc3VzcGVuc2VQcm9taXNlLFxuICAgICAgcjogKGF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogYXRvbVN0YXRlLnIpIHx8IDAsXG4gICAgICBkOiBjcmVhdGVSZWFkRGVwZW5kZW5jaWVzKHZlcnNpb24sIGF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogYXRvbVN0YXRlLmQsIGRlcGVuZGVuY2llcylcbiAgICB9O1xuICAgIHNldEF0b21TdGF0ZSh2ZXJzaW9uLCBhdG9tLCBuZXh0QXRvbVN0YXRlKTtcbiAgICByZXR1cm4gbmV4dEF0b21TdGF0ZTtcbiAgfTtcbiAgY29uc3Qgc2V0QXRvbVByb21pc2VPclZhbHVlID0gKHZlcnNpb24sIGF0b20sIHByb21pc2VPclZhbHVlLCBkZXBlbmRlbmNpZXMpID0+IHtcbiAgICBpZiAocHJvbWlzZU9yVmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICBjb25zdCBzdXNwZW5zZVByb21pc2UgPSBjcmVhdGVTdXNwZW5zZVByb21pc2UocHJvbWlzZU9yVmFsdWUudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgc2V0QXRvbVZhbHVlKHZlcnNpb24sIGF0b20sIHZhbHVlLCBkZXBlbmRlbmNpZXMsIHN1c3BlbnNlUHJvbWlzZSk7XG4gICAgICAgIGZsdXNoUGVuZGluZyh2ZXJzaW9uKTtcbiAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIGlmIChpc1N1c3BlbnNlUHJvbWlzZShlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGUudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWRBdG9tU3RhdGUodmVyc2lvbiwgYXRvbSwgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QXRvbVJlYWRFcnJvcih2ZXJzaW9uLCBhdG9tLCBlLCBkZXBlbmRlbmNpZXMsIHN1c3BlbnNlUHJvbWlzZSk7XG4gICAgICAgIGZsdXNoUGVuZGluZyh2ZXJzaW9uKTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBzZXRBdG9tU3VzcGVuc2VQcm9taXNlKHZlcnNpb24sIGF0b20sIHN1c3BlbnNlUHJvbWlzZSwgZGVwZW5kZW5jaWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNldEF0b21WYWx1ZSh2ZXJzaW9uLCBhdG9tLCBwcm9taXNlT3JWYWx1ZSwgZGVwZW5kZW5jaWVzKTtcbiAgfTtcbiAgY29uc3Qgc2V0QXRvbUludmFsaWRhdGVkID0gKHZlcnNpb24sIGF0b20pID0+IHtcbiAgICBjb25zdCBhdG9tU3RhdGUgPSBnZXRBdG9tU3RhdGUodmVyc2lvbiwgYXRvbSk7XG4gICAgaWYgKGF0b21TdGF0ZSkge1xuICAgICAgaWYgKFwicFwiIGluIGF0b21TdGF0ZSkge1xuICAgICAgICBjYW5jZWxTdXNwZW5zZVByb21pc2UoYXRvbVN0YXRlLnApO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV4dEF0b21TdGF0ZSA9IF9fc3ByZWFkUHJvcHMkMShfX3NwcmVhZFZhbHVlcyQxKHt9LCBhdG9tU3RhdGUpLCB7XG4gICAgICAgIGk6IGF0b21TdGF0ZS5yXG4gICAgICB9KTtcbiAgICAgIHNldEF0b21TdGF0ZSh2ZXJzaW9uLCBhdG9tLCBuZXh0QXRvbVN0YXRlKTtcbiAgICB9IGVsc2UgaWYgKChpbXBvcnQubWV0YS5lbnYgJiYgaW1wb3J0Lm1ldGEuZW52Lk1PREUpICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS53YXJuKFwiW0J1Z10gY291bGQgbm90IGludmFsaWRhdGUgbm9uIGV4aXN0aW5nIGF0b21cIiwgYXRvbSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWFkQXRvbVN0YXRlID0gKHZlcnNpb24sIGF0b20sIGZvcmNlKSA9PiB7XG4gICAgaWYgKCFmb3JjZSkge1xuICAgICAgY29uc3QgYXRvbVN0YXRlID0gZ2V0QXRvbVN0YXRlKHZlcnNpb24sIGF0b20pO1xuICAgICAgaWYgKGF0b21TdGF0ZSkge1xuICAgICAgICBpZiAoYXRvbVN0YXRlLnIgIT09IGF0b21TdGF0ZS5pICYmIFwicFwiIGluIGF0b21TdGF0ZSAmJiAhaXNTdXNwZW5zZVByb21pc2VBbHJlYWR5Q2FuY2VsbGVkKGF0b21TdGF0ZS5wKSkge1xuICAgICAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgYXRvbVN0YXRlLmQuZm9yRWFjaCgoXywgYSkgPT4ge1xuICAgICAgICAgIGlmIChhICE9PSBhdG9tKSB7XG4gICAgICAgICAgICBpZiAoIW1vdW50ZWRNYXAuaGFzKGEpKSB7XG4gICAgICAgICAgICAgIHJlYWRBdG9tU3RhdGUodmVyc2lvbiwgYSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBhU3RhdGUgPSBnZXRBdG9tU3RhdGUodmVyc2lvbiwgYSk7XG4gICAgICAgICAgICAgIGlmIChhU3RhdGUgJiYgYVN0YXRlLnIgPT09IGFTdGF0ZS5pKSB7XG4gICAgICAgICAgICAgICAgcmVhZEF0b21TdGF0ZSh2ZXJzaW9uLCBhKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChBcnJheS5mcm9tKGF0b21TdGF0ZS5kKS5ldmVyeSgoW2EsIHJdKSA9PiB7XG4gICAgICAgICAgY29uc3QgYVN0YXRlID0gZ2V0QXRvbVN0YXRlKHZlcnNpb24sIGEpO1xuICAgICAgICAgIHJldHVybiBhU3RhdGUgJiYgXCJ2XCIgaW4gYVN0YXRlICYmIGFTdGF0ZS5yID09PSByO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVwZW5kZW5jaWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvbWlzZU9yVmFsdWUgPSBhdG9tLnJlYWQoKGEpID0+IHtcbiAgICAgICAgZGVwZW5kZW5jaWVzLmFkZChhKTtcbiAgICAgICAgY29uc3QgYVN0YXRlID0gYSA9PT0gYXRvbSA/IGdldEF0b21TdGF0ZSh2ZXJzaW9uLCBhKSA6IHJlYWRBdG9tU3RhdGUodmVyc2lvbiwgYSk7XG4gICAgICAgIGlmIChhU3RhdGUpIHtcbiAgICAgICAgICBpZiAoXCJlXCIgaW4gYVN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBhU3RhdGUuZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFwicFwiIGluIGFTdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgYVN0YXRlLnA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhU3RhdGUudjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzSW5pdGlhbFZhbHVlKGEpKSB7XG4gICAgICAgICAgcmV0dXJuIGEuaW5pdDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBhdG9tIGluaXRcIik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzZXRBdG9tUHJvbWlzZU9yVmFsdWUodmVyc2lvbiwgYXRvbSwgcHJvbWlzZU9yVmFsdWUsIGRlcGVuZGVuY2llcyk7XG4gICAgfSBjYXRjaCAoZXJyb3JPclByb21pc2UpIHtcbiAgICAgIGlmIChlcnJvck9yUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgY29uc3Qgc3VzcGVuc2VQcm9taXNlID0gY3JlYXRlU3VzcGVuc2VQcm9taXNlKGVycm9yT3JQcm9taXNlKTtcbiAgICAgICAgcmV0dXJuIHNldEF0b21TdXNwZW5zZVByb21pc2UodmVyc2lvbiwgYXRvbSwgc3VzcGVuc2VQcm9taXNlLCBkZXBlbmRlbmNpZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNldEF0b21SZWFkRXJyb3IodmVyc2lvbiwgYXRvbSwgZXJyb3JPclByb21pc2UsIGRlcGVuZGVuY2llcyk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWFkQXRvbSA9IChyZWFkaW5nQXRvbSwgdmVyc2lvbikgPT4ge1xuICAgIGNvbnN0IGF0b21TdGF0ZSA9IHJlYWRBdG9tU3RhdGUodmVyc2lvbiwgcmVhZGluZ0F0b20pO1xuICAgIHJldHVybiBhdG9tU3RhdGU7XG4gIH07XG4gIGNvbnN0IGFkZEF0b20gPSAoYWRkaW5nQXRvbSkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gbW91bnRlZE1hcC5nZXQoYWRkaW5nQXRvbSk7XG4gICAgaWYgKCFtb3VudGVkKSB7XG4gICAgICBtb3VudGVkID0gbW91bnRBdG9tKGFkZGluZ0F0b20pO1xuICAgIH1cbiAgICByZXR1cm4gbW91bnRlZDtcbiAgfTtcbiAgY29uc3QgY2FuVW5tb3VudEF0b20gPSAoYXRvbSwgbW91bnRlZCkgPT4gIW1vdW50ZWQubC5zaXplICYmICghbW91bnRlZC50LnNpemUgfHwgbW91bnRlZC50LnNpemUgPT09IDEgJiYgbW91bnRlZC50LmhhcyhhdG9tKSk7XG4gIGNvbnN0IGRlbEF0b20gPSAoZGVsZXRpbmdBdG9tKSA9PiB7XG4gICAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGRlbGV0aW5nQXRvbSk7XG4gICAgaWYgKG1vdW50ZWQgJiYgY2FuVW5tb3VudEF0b20oZGVsZXRpbmdBdG9tLCBtb3VudGVkKSkge1xuICAgICAgdW5tb3VudEF0b20oZGVsZXRpbmdBdG9tKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGludmFsaWRhdGVEZXBlbmRlbnRzID0gKHZlcnNpb24sIGF0b20pID0+IHtcbiAgICBjb25zdCBtb3VudGVkID0gbW91bnRlZE1hcC5nZXQoYXRvbSk7XG4gICAgbW91bnRlZCA9PSBudWxsID8gdm9pZCAwIDogbW91bnRlZC50LmZvckVhY2goKGRlcGVuZGVudCkgPT4ge1xuICAgICAgaWYgKGRlcGVuZGVudCAhPT0gYXRvbSkge1xuICAgICAgICBzZXRBdG9tSW52YWxpZGF0ZWQodmVyc2lvbiwgZGVwZW5kZW50KTtcbiAgICAgICAgaW52YWxpZGF0ZURlcGVuZGVudHModmVyc2lvbiwgZGVwZW5kZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgd3JpdGVBdG9tU3RhdGUgPSAodmVyc2lvbiwgYXRvbSwgdXBkYXRlKSA9PiB7XG4gICAgbGV0IGlzU3luYyA9IHRydWU7XG4gICAgY29uc3Qgd3JpdGVHZXR0ZXIgPSAoYSwgb3B0aW9ucykgPT4ge1xuICAgICAgY29uc3QgYVN0YXRlID0gcmVhZEF0b21TdGF0ZSh2ZXJzaW9uLCBhKTtcbiAgICAgIGlmIChcImVcIiBpbiBhU3RhdGUpIHtcbiAgICAgICAgdGhyb3cgYVN0YXRlLmU7XG4gICAgICB9XG4gICAgICBpZiAoXCJwXCIgaW4gYVN0YXRlKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVuc3RhYmxlX3Byb21pc2UpIHtcbiAgICAgICAgICByZXR1cm4gYVN0YXRlLnAudGhlbigoKSA9PiB3cml0ZUdldHRlcihhLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgJiYgaW1wb3J0Lm1ldGEuZW52Lk1PREUpICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIlJlYWRpbmcgcGVuZGluZyBhdG9tIHN0YXRlIGluIHdyaXRlIG9wZXJhdGlvbi4gV2UgdGhyb3cgYSBwcm9taXNlIGZvciBub3cuXCIsIGEpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGFTdGF0ZS5wO1xuICAgICAgfVxuICAgICAgaWYgKFwidlwiIGluIGFTdGF0ZSkge1xuICAgICAgICByZXR1cm4gYVN0YXRlLnY7XG4gICAgICB9XG4gICAgICBpZiAoKGltcG9ydC5tZXRhLmVudiAmJiBpbXBvcnQubWV0YS5lbnYuTU9ERSkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIltCdWddIG5vIHZhbHVlIGZvdW5kIHdoaWxlIHJlYWRpbmcgYXRvbSBpbiB3cml0ZSBvcGVyYXRpb24uIFRoaXMgaXMgcHJvYmFibHkgYSBidWcuXCIsIGEpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm8gdmFsdWUgZm91bmRcIik7XG4gICAgfTtcbiAgICBjb25zdCBzZXR0ZXIgPSAoYSwgdikgPT4ge1xuICAgICAgbGV0IHByb21pc2VPclZvaWQyO1xuICAgICAgaWYgKGEgPT09IGF0b20pIHtcbiAgICAgICAgaWYgKCFoYXNJbml0aWFsVmFsdWUoYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhdG9tIG5vdCB3cml0YWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJzaW9uU2V0ID0gY2FuY2VsQWxsU3VzcGVuc2VQcm9taXNlSW5DYWNoZShhKTtcbiAgICAgICAgdmVyc2lvblNldC5mb3JFYWNoKChjYW5jZWxsZWRWZXJzaW9uKSA9PiB7XG4gICAgICAgICAgaWYgKGNhbmNlbGxlZFZlcnNpb24gIT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgIHNldEF0b21Qcm9taXNlT3JWYWx1ZShjYW5jZWxsZWRWZXJzaW9uLCBhLCB2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRBdG9tUHJvbWlzZU9yVmFsdWUodmVyc2lvbiwgYSwgdik7XG4gICAgICAgIGludmFsaWRhdGVEZXBlbmRlbnRzKHZlcnNpb24sIGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZU9yVm9pZDIgPSB3cml0ZUF0b21TdGF0ZSh2ZXJzaW9uLCBhLCB2KTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNTeW5jKSB7XG4gICAgICAgIGZsdXNoUGVuZGluZyh2ZXJzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9taXNlT3JWb2lkMjtcbiAgICB9O1xuICAgIGNvbnN0IHByb21pc2VPclZvaWQgPSBhdG9tLndyaXRlKHdyaXRlR2V0dGVyLCBzZXR0ZXIsIHVwZGF0ZSk7XG4gICAgaXNTeW5jID0gZmFsc2U7XG4gICAgdmVyc2lvbiA9IHZvaWQgMDtcbiAgICByZXR1cm4gcHJvbWlzZU9yVm9pZDtcbiAgfTtcbiAgY29uc3Qgd3JpdGVBdG9tID0gKHdyaXRpbmdBdG9tLCB1cGRhdGUsIHZlcnNpb24pID0+IHtcbiAgICBjb25zdCBwcm9taXNlT3JWb2lkID0gd3JpdGVBdG9tU3RhdGUodmVyc2lvbiwgd3JpdGluZ0F0b20sIHVwZGF0ZSk7XG4gICAgZmx1c2hQZW5kaW5nKHZlcnNpb24pO1xuICAgIHJldHVybiBwcm9taXNlT3JWb2lkO1xuICB9O1xuICBjb25zdCBpc0FjdHVhbGx5V3JpdGFibGVBdG9tID0gKGF0b20pID0+ICEhYXRvbS53cml0ZTtcbiAgY29uc3QgbW91bnRBdG9tID0gKGF0b20sIGluaXRpYWxEZXBlbmRlbnQpID0+IHtcbiAgICBjb25zdCBtb3VudGVkID0ge1xuICAgICAgdDogbmV3IFNldChpbml0aWFsRGVwZW5kZW50ICYmIFtpbml0aWFsRGVwZW5kZW50XSksXG4gICAgICBsOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gICAgfTtcbiAgICBtb3VudGVkTWFwLnNldChhdG9tLCBtb3VudGVkKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiAmJiBpbXBvcnQubWV0YS5lbnYuTU9ERSkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBtb3VudGVkQXRvbXMuYWRkKGF0b20pO1xuICAgIH1cbiAgICBjb25zdCBhdG9tU3RhdGUgPSByZWFkQXRvbVN0YXRlKHZvaWQgMCwgYXRvbSk7XG4gICAgYXRvbVN0YXRlLmQuZm9yRWFjaCgoXywgYSkgPT4ge1xuICAgICAgY29uc3QgYU1vdW50ZWQgPSBtb3VudGVkTWFwLmdldChhKTtcbiAgICAgIGlmIChhTW91bnRlZCkge1xuICAgICAgICBhTW91bnRlZC50LmFkZChhdG9tKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhICE9PSBhdG9tKSB7XG4gICAgICAgICAgbW91bnRBdG9tKGEsIGF0b20pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkgJiYgYXRvbS5vbk1vdW50KSB7XG4gICAgICBjb25zdCBzZXRBdG9tID0gKHVwZGF0ZSkgPT4gd3JpdGVBdG9tKGF0b20sIHVwZGF0ZSk7XG4gICAgICBjb25zdCBvblVubW91bnQgPSBhdG9tLm9uTW91bnQoc2V0QXRvbSk7XG4gICAgICBpZiAob25Vbm1vdW50KSB7XG4gICAgICAgIG1vdW50ZWQudSA9IG9uVW5tb3VudDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1vdW50ZWQ7XG4gIH07XG4gIGNvbnN0IHVubW91bnRBdG9tID0gKGF0b20pID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3Qgb25Vbm1vdW50ID0gKF9hID0gbW91bnRlZE1hcC5nZXQoYXRvbSkpID09IG51bGwgPyB2b2lkIDAgOiBfYS51O1xuICAgIGlmIChvblVubW91bnQpIHtcbiAgICAgIG9uVW5tb3VudCgpO1xuICAgIH1cbiAgICBtb3VudGVkTWFwLmRlbGV0ZShhdG9tKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiAmJiBpbXBvcnQubWV0YS5lbnYuTU9ERSkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBtb3VudGVkQXRvbXMuZGVsZXRlKGF0b20pO1xuICAgIH1cbiAgICBjb25zdCBhdG9tU3RhdGUgPSBnZXRBdG9tU3RhdGUodm9pZCAwLCBhdG9tKTtcbiAgICBpZiAoYXRvbVN0YXRlKSB7XG4gICAgICBhdG9tU3RhdGUuZC5mb3JFYWNoKChfLCBhKSA9PiB7XG4gICAgICAgIGlmIChhICE9PSBhdG9tKSB7XG4gICAgICAgICAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGEpO1xuICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICBtb3VudGVkLnQuZGVsZXRlKGF0b20pO1xuICAgICAgICAgICAgaWYgKGNhblVubW91bnRBdG9tKGEsIG1vdW50ZWQpKSB7XG4gICAgICAgICAgICAgIHVubW91bnRBdG9tKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICgoaW1wb3J0Lm1ldGEuZW52ICYmIGltcG9ydC5tZXRhLmVudi5NT0RFKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIltCdWddIGNvdWxkIG5vdCBmaW5kIGF0b20gc3RhdGUgdG8gdW5tb3VudFwiLCBhdG9tKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdW50RGVwZW5kZW5jaWVzID0gKGF0b20sIGF0b21TdGF0ZSwgcHJldlJlYWREZXBlbmRlbmNpZXMpID0+IHtcbiAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBuZXcgU2V0KGF0b21TdGF0ZS5kLmtleXMoKSk7XG4gICAgcHJldlJlYWREZXBlbmRlbmNpZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZSZWFkRGVwZW5kZW5jaWVzLmZvckVhY2goKF8sIGEpID0+IHtcbiAgICAgIGlmIChkZXBlbmRlbmNpZXMuaGFzKGEpKSB7XG4gICAgICAgIGRlcGVuZGVuY2llcy5kZWxldGUoYSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vdW50ZWQgPSBtb3VudGVkTWFwLmdldChhKTtcbiAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgIG1vdW50ZWQudC5kZWxldGUoYXRvbSk7XG4gICAgICAgIGlmIChjYW5Vbm1vdW50QXRvbShhLCBtb3VudGVkKSkge1xuICAgICAgICAgIHVubW91bnRBdG9tKGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZGVwZW5kZW5jaWVzLmZvckVhY2goKGEpID0+IHtcbiAgICAgIGNvbnN0IG1vdW50ZWQgPSBtb3VudGVkTWFwLmdldChhKTtcbiAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgIG1vdW50ZWQudC5hZGQoYXRvbSk7XG4gICAgICB9IGVsc2UgaWYgKG1vdW50ZWRNYXAuaGFzKGF0b20pKSB7XG4gICAgICAgIG1vdW50QXRvbShhLCBhdG9tKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZmx1c2hQZW5kaW5nID0gKHZlcnNpb24pID0+IHtcbiAgICBpZiAodmVyc2lvbikge1xuICAgICAgY29uc3QgdmVyc2lvbmVkQXRvbVN0YXRlTWFwID0gZ2V0VmVyc2lvbmVkQXRvbVN0YXRlTWFwKHZlcnNpb24pO1xuICAgICAgdmVyc2lvbmVkQXRvbVN0YXRlTWFwLmZvckVhY2goKGF0b21TdGF0ZSwgYXRvbSkgPT4ge1xuICAgICAgICBpZiAoYXRvbVN0YXRlICE9PSBjb21taXR0ZWRBdG9tU3RhdGVNYXAuZ2V0KGF0b20pKSB7XG4gICAgICAgICAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGF0b20pO1xuICAgICAgICAgIG1vdW50ZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG1vdW50ZWQubC5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIodmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2hpbGUgKHBlbmRpbmdNYXAuc2l6ZSkge1xuICAgICAgY29uc3QgcGVuZGluZyA9IEFycmF5LmZyb20ocGVuZGluZ01hcCk7XG4gICAgICBwZW5kaW5nTWFwLmNsZWFyKCk7XG4gICAgICBwZW5kaW5nLmZvckVhY2goKFthdG9tLCBwcmV2QXRvbVN0YXRlXSkgPT4ge1xuICAgICAgICBjb25zdCBhdG9tU3RhdGUgPSBnZXRBdG9tU3RhdGUodm9pZCAwLCBhdG9tKTtcbiAgICAgICAgaWYgKGF0b21TdGF0ZSAmJiBhdG9tU3RhdGUuZCAhPT0gKHByZXZBdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZBdG9tU3RhdGUuZCkpIHtcbiAgICAgICAgICBtb3VudERlcGVuZGVuY2llcyhhdG9tLCBhdG9tU3RhdGUsIHByZXZBdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZBdG9tU3RhdGUuZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGF0b20pO1xuICAgICAgICBtb3VudGVkID09IG51bGwgPyB2b2lkIDAgOiBtb3VudGVkLmwuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ICYmIGltcG9ydC5tZXRhLmVudi5NT0RFKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHN0YXRlTGlzdGVuZXJzLmZvckVhY2goKGwpID0+IGwoKSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjb21taXRWZXJzaW9uZWRBdG9tU3RhdGVNYXAgPSAodmVyc2lvbikgPT4ge1xuICAgIGNvbnN0IHZlcnNpb25lZEF0b21TdGF0ZU1hcCA9IGdldFZlcnNpb25lZEF0b21TdGF0ZU1hcCh2ZXJzaW9uKTtcbiAgICB2ZXJzaW9uZWRBdG9tU3RhdGVNYXAuZm9yRWFjaCgoYXRvbVN0YXRlLCBhdG9tKSA9PiB7XG4gICAgICBjb25zdCBwcmV2QXRvbVN0YXRlID0gY29tbWl0dGVkQXRvbVN0YXRlTWFwLmdldChhdG9tKTtcbiAgICAgIGlmIChhdG9tU3RhdGUuciA+ICgocHJldkF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogcHJldkF0b21TdGF0ZS5yKSB8fCAwKSB8fCBcInZcIiBpbiBhdG9tU3RhdGUgJiYgYXRvbVN0YXRlLnIgPT09IChwcmV2QXRvbVN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2QXRvbVN0YXRlLnIpICYmIGF0b21TdGF0ZS5kICE9PSAocHJldkF0b21TdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogcHJldkF0b21TdGF0ZS5kKSkge1xuICAgICAgICBjb21taXR0ZWRBdG9tU3RhdGVNYXAuc2V0KGF0b20sIGF0b21TdGF0ZSk7XG4gICAgICAgIGlmIChhdG9tU3RhdGUuZCAhPT0gKHByZXZBdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZBdG9tU3RhdGUuZCkpIHtcbiAgICAgICAgICBtb3VudERlcGVuZGVuY2llcyhhdG9tLCBhdG9tU3RhdGUsIHByZXZBdG9tU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZBdG9tU3RhdGUuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgY29tbWl0QXRvbSA9IChfYXRvbSwgdmVyc2lvbikgPT4ge1xuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICBjb21taXRWZXJzaW9uZWRBdG9tU3RhdGVNYXAodmVyc2lvbik7XG4gICAgfVxuICAgIGZsdXNoUGVuZGluZyh2b2lkIDApO1xuICB9O1xuICBjb25zdCBzdWJzY3JpYmVBdG9tID0gKGF0b20sIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgbW91bnRlZCA9IGFkZEF0b20oYXRvbSk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gbW91bnRlZC5sO1xuICAgIGxpc3RlbmVycy5hZGQoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgIGRlbEF0b20oYXRvbSk7XG4gICAgfTtcbiAgfTtcbiAgY29uc3QgcmVzdG9yZUF0b21zID0gKHZhbHVlcywgdmVyc2lvbikgPT4ge1xuICAgIGZvciAoY29uc3QgW2F0b20sIHZhbHVlXSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmIChoYXNJbml0aWFsVmFsdWUoYXRvbSkpIHtcbiAgICAgICAgc2V0QXRvbVByb21pc2VPclZhbHVlKHZlcnNpb24sIGF0b20sIHZhbHVlKTtcbiAgICAgICAgaW52YWxpZGF0ZURlcGVuZGVudHModmVyc2lvbiwgYXRvbSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZsdXNoUGVuZGluZyh2ZXJzaW9uKTtcbiAgfTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgJiYgaW1wb3J0Lm1ldGEuZW52Lk1PREUpICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIHJldHVybiB7XG4gICAgICBbUkVBRF9BVE9NXTogcmVhZEF0b20sXG4gICAgICBbV1JJVEVfQVRPTV06IHdyaXRlQXRvbSxcbiAgICAgIFtDT01NSVRfQVRPTV06IGNvbW1pdEF0b20sXG4gICAgICBbU1VCU0NSSUJFX0FUT01dOiBzdWJzY3JpYmVBdG9tLFxuICAgICAgW1JFU1RPUkVfQVRPTVNdOiByZXN0b3JlQXRvbXMsXG4gICAgICBbREVWX1NVQlNDUklCRV9TVEFURV06IChsKSA9PiB7XG4gICAgICAgIHN0YXRlTGlzdGVuZXJzLmFkZChsKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBzdGF0ZUxpc3RlbmVycy5kZWxldGUobCk7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgW0RFVl9HRVRfTU9VTlRFRF9BVE9NU106ICgpID0+IG1vdW50ZWRBdG9tcy52YWx1ZXMoKSxcbiAgICAgIFtERVZfR0VUX0FUT01fU1RBVEVdOiAoYSkgPT4gY29tbWl0dGVkQXRvbVN0YXRlTWFwLmdldChhKSxcbiAgICAgIFtERVZfR0VUX01PVU5URURdOiAoYSkgPT4gbW91bnRlZE1hcC5nZXQoYSlcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgW1JFQURfQVRPTV06IHJlYWRBdG9tLFxuICAgIFtXUklURV9BVE9NXTogd3JpdGVBdG9tLFxuICAgIFtDT01NSVRfQVRPTV06IGNvbW1pdEF0b20sXG4gICAgW1NVQlNDUklCRV9BVE9NXTogc3Vic2NyaWJlQXRvbSxcbiAgICBbUkVTVE9SRV9BVE9NU106IHJlc3RvcmVBdG9tc1xuICB9O1xufTtcbmNvbnN0IGNyZWF0ZVN0b3JlRm9yRXhwb3J0ID0gKGluaXRpYWxWYWx1ZXMpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBjcmVhdGVTdG9yZShpbml0aWFsVmFsdWVzKTtcbiAgY29uc3QgZ2V0ID0gKGF0b20pID0+IHtcbiAgICBjb25zdCBhdG9tU3RhdGUgPSBzdG9yZVtSRUFEX0FUT01dKGF0b20pO1xuICAgIGlmIChcImVcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgIHRocm93IGF0b21TdGF0ZS5lO1xuICAgIH1cbiAgICBpZiAoXCJwXCIgaW4gYXRvbVN0YXRlKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbVN0YXRlLnY7XG4gIH07XG4gIGNvbnN0IGFzeW5jR2V0ID0gKGF0b20pID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBhdG9tU3RhdGUgPSBzdG9yZVtSRUFEX0FUT01dKGF0b20pO1xuICAgIGlmIChcImVcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgIHJlamVjdChhdG9tU3RhdGUuZSk7XG4gICAgfSBlbHNlIGlmIChcInBcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgIHJlc29sdmUoYXRvbVN0YXRlLnAudGhlbigoKSA9PiBhc3luY0dldChhdG9tKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKGF0b21TdGF0ZS52KTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzZXQgPSAoYXRvbSwgdXBkYXRlKSA9PiBzdG9yZVtXUklURV9BVE9NXShhdG9tLCB1cGRhdGUpO1xuICBjb25zdCBzdWIgPSAoYXRvbSwgY2FsbGJhY2spID0+IHN0b3JlW1NVQlNDUklCRV9BVE9NXShhdG9tLCBjYWxsYmFjayk7XG4gIHJldHVybiB7XG4gICAgZ2V0LFxuICAgIGFzeW5jR2V0LFxuICAgIHNldCxcbiAgICBzdWIsXG4gICAgU0VDUkVUX0lOVEVSTkFMX3N0b3JlOiBzdG9yZVxuICB9O1xufTtcblxuY29uc3QgY3JlYXRlU2NvcGVDb250YWluZXIgPSAoaW5pdGlhbFZhbHVlcywgdW5zdGFibGVfY3JlYXRlU3RvcmUpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSB1bnN0YWJsZV9jcmVhdGVTdG9yZSA/IHVuc3RhYmxlX2NyZWF0ZVN0b3JlKGluaXRpYWxWYWx1ZXMpLlNFQ1JFVF9JTlRFUk5BTF9zdG9yZSA6IGNyZWF0ZVN0b3JlKGluaXRpYWxWYWx1ZXMpO1xuICByZXR1cm4geyBzOiBzdG9yZSB9O1xufTtcbmNvbnN0IFNjb3BlQ29udGV4dE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5jb25zdCBnZXRTY29wZUNvbnRleHQgPSAoc2NvcGUpID0+IHtcbiAgaWYgKCFTY29wZUNvbnRleHRNYXAuaGFzKHNjb3BlKSkge1xuICAgIFNjb3BlQ29udGV4dE1hcC5zZXQoc2NvcGUsIGNyZWF0ZUNvbnRleHQoY3JlYXRlU2NvcGVDb250YWluZXIoKSkpO1xuICB9XG4gIHJldHVybiBTY29wZUNvbnRleHRNYXAuZ2V0KHNjb3BlKTtcbn07XG5cbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xuY29uc3QgYXRvbVRvUHJpbnRhYmxlID0gKGF0b20pID0+IGF0b20uZGVidWdMYWJlbCB8fCBhdG9tLnRvU3RyaW5nKCk7XG5jb25zdCBzdGF0ZVRvUHJpbnRhYmxlID0gKFtzdG9yZSwgYXRvbXNdKSA9PiBPYmplY3QuZnJvbUVudHJpZXMoYXRvbXMuZmxhdE1hcCgoYXRvbSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBtb3VudGVkID0gKF9hID0gc3RvcmVbREVWX0dFVF9NT1VOVEVEXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoc3RvcmUsIGF0b20pO1xuICBpZiAoIW1vdW50ZWQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZGVwZW5kZW50cyA9IG1vdW50ZWQudDtcbiAgY29uc3QgYXRvbVN0YXRlID0gKChfYiA9IHN0b3JlW0RFVl9HRVRfQVRPTV9TVEFURV0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKHN0b3JlLCBhdG9tKSkgfHwge307XG4gIHJldHVybiBbXG4gICAgW1xuICAgICAgYXRvbVRvUHJpbnRhYmxlKGF0b20pLFxuICAgICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSwgXCJlXCIgaW4gYXRvbVN0YXRlICYmIHsgZXJyb3I6IGF0b21TdGF0ZS5lIH0pLCBcInBcIiBpbiBhdG9tU3RhdGUgJiYgeyBwcm9taXNlOiBhdG9tU3RhdGUucCB9KSwgXCJ2XCIgaW4gYXRvbVN0YXRlICYmIHsgdmFsdWU6IGF0b21TdGF0ZS52IH0pLCB7XG4gICAgICAgIGRlcGVuZGVudHM6IEFycmF5LmZyb20oZGVwZW5kZW50cykubWFwKGF0b21Ub1ByaW50YWJsZSlcbiAgICAgIH0pXG4gICAgXVxuICBdO1xufSkpO1xuY29uc3QgdXNlRGVidWdTdGF0ZSA9IChzY29wZUNvbnRhaW5lcikgPT4ge1xuICBjb25zdCB7IHM6IHN0b3JlIH0gPSBzY29wZUNvbnRhaW5lcjtcbiAgY29uc3QgW2F0b21zLCBzZXRBdG9tc10gPSB1c2VTdGF0ZShbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHNldEF0b21zKEFycmF5LmZyb20oKChfYTIgPSBzdG9yZVtERVZfR0VUX01PVU5URURfQVRPTVNdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmNhbGwoc3RvcmUpKSB8fCBbXSkpO1xuICAgIH07XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoX2EgPSBzdG9yZVtERVZfU1VCU0NSSUJFX1NUQVRFXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoc3RvcmUsIGNhbGxiYWNrKTtcbiAgICBjYWxsYmFjaygpO1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW3N0b3JlXSk7XG4gIHVzZURlYnVnVmFsdWUoW3N0b3JlLCBhdG9tc10sIHN0YXRlVG9QcmludGFibGUpO1xufTtcblxuY29uc3QgUHJvdmlkZXIgPSAoe1xuICBjaGlsZHJlbixcbiAgaW5pdGlhbFZhbHVlcyxcbiAgc2NvcGUsXG4gIHVuc3RhYmxlX2NyZWF0ZVN0b3JlLFxuICB1bnN0YWJsZV9lbmFibGVWZXJzaW9uZWRXcml0ZVxufSkgPT4ge1xuICBjb25zdCBbdmVyc2lvbiwgc2V0VmVyc2lvbl0gPSB1c2VTdGF0ZSgpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICBzY29wZUNvbnRhaW5lclJlZi5jdXJyZW50LnNbQ09NTUlUX0FUT01dKG51bGwsIHZlcnNpb24pO1xuICAgICAgZGVsZXRlIHZlcnNpb24ucDtcbiAgICB9XG4gIH0sIFt2ZXJzaW9uXSk7XG4gIGNvbnN0IHNjb3BlQ29udGFpbmVyUmVmID0gdXNlUmVmKCk7XG4gIGlmICghc2NvcGVDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgIHNjb3BlQ29udGFpbmVyUmVmLmN1cnJlbnQgPSBjcmVhdGVTY29wZUNvbnRhaW5lcihpbml0aWFsVmFsdWVzLCB1bnN0YWJsZV9jcmVhdGVTdG9yZSk7XG4gICAgaWYgKHVuc3RhYmxlX2VuYWJsZVZlcnNpb25lZFdyaXRlKSB7XG4gICAgICBzY29wZUNvbnRhaW5lclJlZi5jdXJyZW50LncgPSAod3JpdGUpID0+IHtcbiAgICAgICAgc2V0VmVyc2lvbigocGFyZW50VmVyc2lvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IG5leHRWZXJzaW9uID0gcGFyZW50VmVyc2lvbiA/IHsgcDogcGFyZW50VmVyc2lvbiB9IDoge307XG4gICAgICAgICAgd3JpdGUobmV4dFZlcnNpb24pO1xuICAgICAgICAgIHJldHVybiBuZXh0VmVyc2lvbjtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBpZiAoKGltcG9ydC5tZXRhLmVudiAmJiBpbXBvcnQubWV0YS5lbnYuTU9ERSkgIT09IFwicHJvZHVjdGlvblwiICYmICF1bnN0YWJsZV9lbmFibGVWZXJzaW9uZWRXcml0ZSkge1xuICAgIHVzZURlYnVnU3RhdGUoc2NvcGVDb250YWluZXJSZWYuY3VycmVudCk7XG4gIH1cbiAgY29uc3QgU2NvcGVDb250YWluZXJDb250ZXh0ID0gZ2V0U2NvcGVDb250ZXh0KHNjb3BlKTtcbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoU2NvcGVDb250YWluZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHNjb3BlQ29udGFpbmVyUmVmLmN1cnJlbnRcbiAgfSwgY2hpbGRyZW4pO1xufTtcblxubGV0IGtleUNvdW50ID0gMDtcbmZ1bmN0aW9uIGF0b20ocmVhZCwgd3JpdGUpIHtcbiAgY29uc3Qga2V5ID0gYGF0b20keysra2V5Q291bnR9YDtcbiAgY29uc3QgY29uZmlnID0ge1xuICAgIHRvU3RyaW5nOiAoKSA9PiBrZXlcbiAgfTtcbiAgaWYgKHR5cGVvZiByZWFkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25maWcucmVhZCA9IHJlYWQ7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLmluaXQgPSByZWFkO1xuICAgIGNvbmZpZy5yZWFkID0gKGdldCkgPT4gZ2V0KGNvbmZpZyk7XG4gICAgY29uZmlnLndyaXRlID0gKGdldCwgc2V0LCB1cGRhdGUpID0+IHNldChjb25maWcsIHR5cGVvZiB1cGRhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHVwZGF0ZShnZXQoY29uZmlnKSkgOiB1cGRhdGUpO1xuICB9XG4gIGlmICh3cml0ZSkge1xuICAgIGNvbmZpZy53cml0ZSA9IHdyaXRlO1xuICB9XG4gIHJldHVybiBjb25maWc7XG59XG5cbmZ1bmN0aW9uIHVzZUF0b21WYWx1ZShhdG9tLCBzY29wZSkge1xuICBjb25zdCBTY29wZUNvbnRleHQgPSBnZXRTY29wZUNvbnRleHQoc2NvcGUpO1xuICBjb25zdCB7IHM6IHN0b3JlIH0gPSB1c2VDb250ZXh0KFNjb3BlQ29udGV4dCk7XG4gIGNvbnN0IGdldEF0b21WYWx1ZSA9IHVzZUNhbGxiYWNrKCh2ZXJzaW9uMikgPT4ge1xuICAgIGNvbnN0IGF0b21TdGF0ZSA9IHN0b3JlW1JFQURfQVRPTV0oYXRvbSwgdmVyc2lvbjIpO1xuICAgIGlmIChcImVcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICAgIHRocm93IGF0b21TdGF0ZS5lO1xuICAgIH1cbiAgICBpZiAoXCJwXCIgaW4gYXRvbVN0YXRlKSB7XG4gICAgICB0aHJvdyBhdG9tU3RhdGUucDtcbiAgICB9XG4gICAgaWYgKFwidlwiIGluIGF0b21TdGF0ZSkge1xuICAgICAgcmV0dXJuIGF0b21TdGF0ZS52O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBhdG9tIHZhbHVlXCIpO1xuICB9LCBbc3RvcmUsIGF0b21dKTtcbiAgY29uc3QgW1t2ZXJzaW9uLCB2YWx1ZSwgYXRvbUZyb21Vc2VSZWR1Y2VyXSwgcmVyZW5kZXJJZkNoYW5nZWRdID0gdXNlUmVkdWNlcih1c2VDYWxsYmFjaygocHJldiwgbmV4dFZlcnNpb24pID0+IHtcbiAgICBjb25zdCBuZXh0VmFsdWUgPSBnZXRBdG9tVmFsdWUobmV4dFZlcnNpb24pO1xuICAgIGlmIChPYmplY3QuaXMocHJldlsxXSwgbmV4dFZhbHVlKSAmJiBwcmV2WzJdID09PSBhdG9tKSB7XG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9XG4gICAgcmV0dXJuIFtuZXh0VmVyc2lvbiwgbmV4dFZhbHVlLCBhdG9tXTtcbiAgfSwgW2dldEF0b21WYWx1ZSwgYXRvbV0pLCB2b2lkIDAsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsVmVyc2lvbiA9IHZvaWQgMDtcbiAgICBjb25zdCBpbml0aWFsVmFsdWUgPSBnZXRBdG9tVmFsdWUoaW5pdGlhbFZlcnNpb24pO1xuICAgIHJldHVybiBbaW5pdGlhbFZlcnNpb24sIGluaXRpYWxWYWx1ZSwgYXRvbV07XG4gIH0pO1xuICBpZiAoYXRvbUZyb21Vc2VSZWR1Y2VyICE9PSBhdG9tKSB7XG4gICAgcmVyZW5kZXJJZkNoYW5nZWQodm9pZCAwKTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3RvcmVbU1VCU0NSSUJFX0FUT01dKGF0b20sIHJlcmVuZGVySWZDaGFuZ2VkKTtcbiAgICByZXJlbmRlcklmQ2hhbmdlZCh2b2lkIDApO1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW3N0b3JlLCBhdG9tXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3RvcmVbQ09NTUlUX0FUT01dKGF0b20sIHZlcnNpb24pO1xuICB9KTtcbiAgdXNlRGVidWdWYWx1ZSh2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0QXRvbShhdG9tLCBzY29wZSkge1xuICBjb25zdCBTY29wZUNvbnRleHQgPSBnZXRTY29wZUNvbnRleHQoc2NvcGUpO1xuICBjb25zdCB7IHM6IHN0b3JlLCB3OiB2ZXJzaW9uZWRXcml0ZSB9ID0gdXNlQ29udGV4dChTY29wZUNvbnRleHQpO1xuICBjb25zdCBzZXRBdG9tID0gdXNlQ2FsbGJhY2soKHVwZGF0ZSkgPT4ge1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ICYmIGltcG9ydC5tZXRhLmVudi5NT0RFKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIShcIndyaXRlXCIgaW4gYXRvbSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCB3cml0YWJsZSBhdG9tXCIpO1xuICAgIH1cbiAgICBjb25zdCB3cml0ZSA9ICh2ZXJzaW9uKSA9PiBzdG9yZVtXUklURV9BVE9NXShhdG9tLCB1cGRhdGUsIHZlcnNpb24pO1xuICAgIHJldHVybiB2ZXJzaW9uZWRXcml0ZSA/IHZlcnNpb25lZFdyaXRlKHdyaXRlKSA6IHdyaXRlKCk7XG4gIH0sIFtzdG9yZSwgdmVyc2lvbmVkV3JpdGUsIGF0b21dKTtcbiAgcmV0dXJuIHNldEF0b207XG59XG5cbmZ1bmN0aW9uIHVzZUF0b20oYXRvbSwgc2NvcGUpIHtcbiAgaWYgKFwic2NvcGVcIiBpbiBhdG9tKSB7XG4gICAgY29uc29sZS53YXJuKFwiYXRvbS5zY29wZSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgZG8gdXNlQXRvbShhdG9tLCBzY29wZSkgaW5zdGVhZC5cIik7XG4gICAgc2NvcGUgPSBhdG9tLnNjb3BlO1xuICB9XG4gIHJldHVybiBbXG4gICAgdXNlQXRvbVZhbHVlKGF0b20sIHNjb3BlKSxcbiAgICB1c2VTZXRBdG9tKGF0b20sIHNjb3BlKVxuICBdO1xufVxuXG5leHBvcnQgeyBQcm92aWRlciwgZ2V0U2NvcGVDb250ZXh0IGFzIFNFQ1JFVF9JTlRFUk5BTF9nZXRTY29wZUNvbnRleHQsIGF0b20sIGNyZWF0ZVN0b3JlRm9yRXhwb3J0IGFzIHVuc3RhYmxlX2NyZWF0ZVN0b3JlLCB1c2VBdG9tLCB1c2VBdG9tVmFsdWUsIHVzZVNldEF0b20gfTtcbiIsICJleHBvcnQgY29uc3QgcHJpY2VKc29uSWQgPSAnaW5saW5lLWpzb24tcHJvZHVjdC1wcmljZSdcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG5leHBvcnQgY29uc3QgcHJpY2VJbml0aWFsID0gSlNPTi5wYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmljZUpzb25JZCkudGV4dClcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncHJlYWN0J1xuXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1NTQpOiBFeHBlY3RlZCAxIGFyZ3VtZW50cywgYnV0IGdvdCAwLlxuZXhwb3J0IGNvbnN0IFZhcmlhbnRzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKVxuXG4vKipcbiAqIHN0YXRlID0ge1NpemU6IFNtYWxsLCBDb2xvcjogV2hpdGV9XG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja2VkUmVkdWNlciA9IChzdGF0ZTogYW55LCBvcHRpb246IGFueSkgPT4ge1xuICBzdGF0ZVtvcHRpb24ubmFtZV0gPSBvcHRpb24udmFsdWVcbiAgcmV0dXJuIHN0YXRlXG59XG5cbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG5leHBvcnQgY29uc3QgcHJvZHVjdFZhcmlhbnRzID0gSlNPTi5wYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5saW5lLWpzb24tcHJvZHVjdC12YXJpYW50cycpLnRleHQpXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuZXhwb3J0IGNvbnN0IG9wdGlvbnNXaXRoVmFsdWVzID0gSlNPTi5wYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlubGluZS1qc29uLXByb2R1Y3Qtb3B0aW9ucy13aXRoLXZhbHVlc1wiKS50ZXh0KVxuPy5maWx0ZXIoIChvcHRpb246IGFueSkgPT4gb3B0aW9uLm5hbWUgPT09ICdDb2xvcicgfHwgb3B0aW9uLm5hbWUgPT09ICdTaXplJyApXG5cbmV4cG9ydCBjb25zdCBjaGVja2VkT3B0aW9ucyA9IG9wdGlvbnNXaXRoVmFsdWVzLnJlZHVjZShcbiAgKHByZXY6IGFueSwge1xuICAgIG5hbWUsXG4gICAgc2VsZWN0ZWRfdmFsdWVcbiAgfTogYW55KSA9PiBPYmplY3QuYXNzaWduKHByZXYsIHtbbmFtZV06IHNlbGVjdGVkX3ZhbHVlfSksXG4gIHt9XG4pXG5cbmV4cG9ydCBjb25zdCB2YXJpYW50SW1hZ2VzID0gcHJvZHVjdFZhcmlhbnRzXG4gIC5maWx0ZXIoICh2OiBhbnkpID0+IHY/LmZlYXR1cmVkX2ltYWdlIClcbiAgLm1hcCggKHtcbiAgaWQsXG4gIHRpdGxlLFxuICBvcHRpb24xLFxuICBvcHRpb24yLFxuICBmZWF0dXJlZF9pbWFnZVxufTogYW55KSA9PiAoe1xuICAgIHZhcmlhbnRfaWQ6IGlkLFxuICAgIHRpdGxlLFxuICAgIG9wdGlvbjEsXG4gICAgb3B0aW9uMixcbiAgICBpZDogZmVhdHVyZWRfaW1hZ2UuaWQsXG4gICAgc3JjOiBmZWF0dXJlZF9pbWFnZS5zcmMucmVwbGFjZSgvXmh0dHBzPzovLCAnJyksXG4gICAgdmFyaWFudF9pZHM6IGZlYXR1cmVkX2ltYWdlLnZhcmlhbnRfaWRzLFxuICB9KSApXG4iLCAiaW1wb3J0IHsgYXRvbSwgU0VDUkVUX0lOVEVSTkFMX2dldFNjb3BlQ29udGV4dCwgdXNlQXRvbSwgdXNlU2V0QXRvbSB9IGZyb20gJ2pvdGFpJztcbmV4cG9ydCB7IHVzZUF0b21WYWx1ZSwgdXNlU2V0QXRvbSBhcyB1c2VVcGRhdGVBdG9tIH0gZnJvbSAnam90YWknO1xuaW1wb3J0IHsgdXNlQ29udGV4dCwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IFJFU0VUID0gU3ltYm9sKCk7XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVzZXQoaW5pdGlhbFZhbHVlKSB7XG4gIGNvbnN0IGFuQXRvbSA9IGF0b20oaW5pdGlhbFZhbHVlLCAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgIGlmICh1cGRhdGUgPT09IFJFU0VUKSB7XG4gICAgICBzZXQoYW5BdG9tLCBpbml0aWFsVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXQoYW5BdG9tLCB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGFuQXRvbSkpIDogdXBkYXRlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5jb25zdCBXUklURV9BVE9NID0gXCJ3XCI7XG5jb25zdCBSRVNUT1JFX0FUT01TID0gXCJoXCI7XG5cbmZ1bmN0aW9uIHVzZVJlc2V0QXRvbShhbkF0b20sIHNjb3BlKSB7XG4gIGNvbnN0IFNjb3BlQ29udGV4dCA9IFNFQ1JFVF9JTlRFUk5BTF9nZXRTY29wZUNvbnRleHQoc2NvcGUpO1xuICBjb25zdCBzdG9yZSA9IHVzZUNvbnRleHQoU2NvcGVDb250ZXh0KS5zO1xuICBjb25zdCBzZXRBdG9tID0gdXNlQ2FsbGJhY2soKCkgPT4gc3RvcmVbV1JJVEVfQVRPTV0oYW5BdG9tLCBSRVNFVCksIFtzdG9yZSwgYW5BdG9tXSk7XG4gIHJldHVybiBzZXRBdG9tO1xufVxuXG5mdW5jdGlvbiB1c2VSZWR1Y2VyQXRvbShhbkF0b20sIHJlZHVjZXIsIHNjb3BlKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlQXRvbShhbkF0b20sIHNjb3BlKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VDYWxsYmFjaygoYWN0aW9uKSA9PiB7XG4gICAgc2V0U3RhdGUoKHByZXYpID0+IHJlZHVjZXIocHJldiwgYWN0aW9uKSk7XG4gIH0sIFtzZXRTdGF0ZSwgcmVkdWNlcl0pO1xuICByZXR1cm4gW3N0YXRlLCBkaXNwYXRjaF07XG59XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVkdWNlcihpbml0aWFsVmFsdWUsIHJlZHVjZXIpIHtcbiAgY29uc3QgYW5BdG9tID0gYXRvbShpbml0aWFsVmFsdWUsIChnZXQsIHNldCwgYWN0aW9uKSA9PiBzZXQoYW5BdG9tLCByZWR1Y2VyKGdldChhbkF0b20pLCBhY3Rpb24pKSk7XG4gIHJldHVybiBhbkF0b207XG59XG5cbmZ1bmN0aW9uIGF0b21GYW1pbHkoaW5pdGlhbGl6ZUF0b20sIGFyZUVxdWFsKSB7XG4gIGxldCBzaG91bGRSZW1vdmUgPSBudWxsO1xuICBjb25zdCBhdG9tcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0IGNyZWF0ZUF0b20gPSAocGFyYW0pID0+IHtcbiAgICBsZXQgaXRlbTtcbiAgICBpZiAoYXJlRXF1YWwgPT09IHZvaWQgMCkge1xuICAgICAgaXRlbSA9IGF0b21zLmdldChwYXJhbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGF0b21zKSB7XG4gICAgICAgIGlmIChhcmVFcXVhbChrZXksIHBhcmFtKSkge1xuICAgICAgICAgIGl0ZW0gPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXRlbSAhPT0gdm9pZCAwKSB7XG4gICAgICBpZiAoc2hvdWxkUmVtb3ZlID09IG51bGwgPyB2b2lkIDAgOiBzaG91bGRSZW1vdmUoaXRlbVsxXSwgcGFyYW0pKSB7XG4gICAgICAgIGF0b21zLmRlbGV0ZShwYXJhbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXRlbVswXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV3QXRvbSA9IGluaXRpYWxpemVBdG9tKHBhcmFtKTtcbiAgICBhdG9tcy5zZXQocGFyYW0sIFtuZXdBdG9tLCBEYXRlLm5vdygpXSk7XG4gICAgcmV0dXJuIG5ld0F0b207XG4gIH07XG4gIGNyZWF0ZUF0b20ucmVtb3ZlID0gKHBhcmFtKSA9PiB7XG4gICAgaWYgKGFyZUVxdWFsID09PSB2b2lkIDApIHtcbiAgICAgIGF0b21zLmRlbGV0ZShwYXJhbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgYXRvbXMpIHtcbiAgICAgICAgaWYgKGFyZUVxdWFsKGtleSwgcGFyYW0pKSB7XG4gICAgICAgICAgYXRvbXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNyZWF0ZUF0b20uc2V0U2hvdWxkUmVtb3ZlID0gKGZuKSA9PiB7XG4gICAgc2hvdWxkUmVtb3ZlID0gZm47XG4gICAgaWYgKCFzaG91bGRSZW1vdmUpXG4gICAgICByZXR1cm47XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgYXRvbXMpIHtcbiAgICAgIGlmIChzaG91bGRSZW1vdmUodmFsdWVbMV0sIGtleSkpIHtcbiAgICAgICAgYXRvbXMuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gY3JlYXRlQXRvbTtcbn1cblxuY29uc3QgZ2V0V2Vha0NhY2hlSXRlbSA9IChjYWNoZSwgZGVwcykgPT4ge1xuICBkbyB7XG4gICAgY29uc3QgW2RlcCwgLi4ucmVzdF0gPSBkZXBzO1xuICAgIGNvbnN0IGVudHJ5ID0gY2FjaGUuZ2V0KGRlcCk7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXJlc3QubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZW50cnlbMV07XG4gICAgfVxuICAgIGNhY2hlID0gZW50cnlbMF07XG4gICAgZGVwcyA9IHJlc3Q7XG4gIH0gd2hpbGUgKGRlcHMubGVuZ3RoKTtcbn07XG5jb25zdCBzZXRXZWFrQ2FjaGVJdGVtID0gKGNhY2hlLCBkZXBzLCBpdGVtKSA9PiB7XG4gIGRvIHtcbiAgICBjb25zdCBbZGVwLCAuLi5yZXN0XSA9IGRlcHM7XG4gICAgbGV0IGVudHJ5ID0gY2FjaGUuZ2V0KGRlcCk7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgZW50cnkgPSBbIG5ldyBXZWFrTWFwKCldO1xuICAgICAgY2FjaGUuc2V0KGRlcCwgZW50cnkpO1xuICAgIH1cbiAgICBpZiAoIXJlc3QubGVuZ3RoKSB7XG4gICAgICBlbnRyeVsxXSA9IGl0ZW07XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhY2hlID0gZW50cnlbMF07XG4gICAgZGVwcyA9IHJlc3Q7XG4gIH0gd2hpbGUgKGRlcHMubGVuZ3RoKTtcbn07XG5jb25zdCBjcmVhdGVNZW1vaXplQXRvbSA9ICgpID0+IHtcbiAgY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgbWVtb2l6ZUF0b20gPSAoY3JlYXRlQXRvbSwgZGVwcykgPT4ge1xuICAgIGNvbnN0IGNhY2hlZEF0b20gPSBnZXRXZWFrQ2FjaGVJdGVtKGNhY2hlLCBkZXBzKTtcbiAgICBpZiAoY2FjaGVkQXRvbSkge1xuICAgICAgcmV0dXJuIGNhY2hlZEF0b207XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWRBdG9tID0gY3JlYXRlQXRvbSgpO1xuICAgIHNldFdlYWtDYWNoZUl0ZW0oY2FjaGUsIGRlcHMsIGNyZWF0ZWRBdG9tKTtcbiAgICByZXR1cm4gY3JlYXRlZEF0b207XG4gIH07XG4gIHJldHVybiBtZW1vaXplQXRvbTtcbn07XG5cbmNvbnN0IG1lbW9pemVBdG9tJDQgPSBjcmVhdGVNZW1vaXplQXRvbSgpO1xuZnVuY3Rpb24gc2VsZWN0QXRvbShhbkF0b20sIHNlbGVjdG9yLCBlcXVhbGl0eUZuID0gT2JqZWN0LmlzKSB7XG4gIHJldHVybiBtZW1vaXplQXRvbSQ0KCgpID0+IHtcbiAgICBjb25zdCByZWZBdG9tID0gYXRvbSgoKSA9PiAoe30pKTtcbiAgICBjb25zdCBkZXJpdmVkQXRvbSA9IGF0b20oKGdldCkgPT4ge1xuICAgICAgY29uc3Qgc2xpY2UgPSBzZWxlY3RvcihnZXQoYW5BdG9tKSk7XG4gICAgICBjb25zdCByZWYgPSBnZXQocmVmQXRvbSk7XG4gICAgICBpZiAoXCJwcmV2XCIgaW4gcmVmICYmIGVxdWFsaXR5Rm4ocmVmLnByZXYsIHNsaWNlKSkge1xuICAgICAgICByZXR1cm4gcmVmLnByZXY7XG4gICAgICB9XG4gICAgICByZWYucHJldiA9IHNsaWNlO1xuICAgICAgcmV0dXJuIHNsaWNlO1xuICAgIH0pO1xuICAgIHJldHVybiBkZXJpdmVkQXRvbTtcbiAgfSwgW2FuQXRvbSwgc2VsZWN0b3IsIGVxdWFsaXR5Rm5dKTtcbn1cblxuZnVuY3Rpb24gdXNlQXRvbUNhbGxiYWNrKGNhbGxiYWNrLCBzY29wZSkge1xuICBjb25zdCBhbkF0b20gPSB1c2VNZW1vKCgpID0+IGF0b20obnVsbCwgKGdldCwgc2V0LCBbYXJnLCByZXNvbHZlLCByZWplY3RdKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc29sdmUoY2FsbGJhY2soZ2V0LCBzZXQsIGFyZykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9XG4gIH0pLCBbY2FsbGJhY2tdKTtcbiAgY29uc3QgaW52b2tlID0gdXNlU2V0QXRvbShhbkF0b20sIHNjb3BlKTtcbiAgcmV0dXJuIHVzZUNhbGxiYWNrKChhcmcpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpbnZva2UoW2FyZywgcmVzb2x2ZSwgcmVqZWN0XSk7XG4gIH0pLCBbaW52b2tlXSk7XG59XG5cbmNvbnN0IG1lbW9pemVBdG9tJDMgPSBjcmVhdGVNZW1vaXplQXRvbSgpO1xuY29uc3QgZGVlcEZyZWV6ZSA9IChvYmopID0+IHtcbiAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgfHwgb2JqID09PSBudWxsKVxuICAgIHJldHVybjtcbiAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICBjb25zdCBwcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopO1xuICBmb3IgKGNvbnN0IG5hbWUgb2YgcHJvcE5hbWVzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBvYmpbbmFtZV07XG4gICAgZGVlcEZyZWV6ZSh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5mdW5jdGlvbiBmcmVlemVBdG9tKGFuQXRvbSkge1xuICByZXR1cm4gbWVtb2l6ZUF0b20kMygoKSA9PiB7XG4gICAgY29uc3QgZnJvemVuQXRvbSA9IGF0b20oKGdldCkgPT4gZGVlcEZyZWV6ZShnZXQoYW5BdG9tKSksIChfZ2V0LCBzZXQsIGFyZykgPT4gc2V0KGFuQXRvbSwgYXJnKSk7XG4gICAgcmV0dXJuIGZyb3plbkF0b207XG4gIH0sIFthbkF0b21dKTtcbn1cbmZ1bmN0aW9uIGZyZWV6ZUF0b21DcmVhdG9yKGNyZWF0ZUF0b20pIHtcbiAgcmV0dXJuICguLi5wYXJhbXMpID0+IHtcbiAgICBjb25zdCBhbkF0b20gPSBjcmVhdGVBdG9tKC4uLnBhcmFtcyk7XG4gICAgY29uc3Qgb3JpZ1JlYWQgPSBhbkF0b20ucmVhZDtcbiAgICBhbkF0b20ucmVhZCA9IChnZXQpID0+IGRlZXBGcmVlemUob3JpZ1JlYWQoZ2V0KSk7XG4gICAgcmV0dXJuIGFuQXRvbTtcbiAgfTtcbn1cblxuY29uc3QgbWVtb2l6ZUF0b20kMiA9IGNyZWF0ZU1lbW9pemVBdG9tKCk7XG5jb25zdCBpc1dyaXRhYmxlID0gKGF0b20yKSA9PiAhIWF0b20yLndyaXRlO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh4KSA9PiB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gc3BsaXRBdG9tKGFyckF0b20sIGtleUV4dHJhY3Rvcikge1xuICByZXR1cm4gbWVtb2l6ZUF0b20kMigoKSA9PiB7XG4gICAgY29uc3QgbWFwcGluZ0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gICAgY29uc3QgZ2V0TWFwcGluZyA9IChhcnIsIHByZXYpID0+IHtcbiAgICAgIGxldCBtYXBwaW5nID0gbWFwcGluZ0NhY2hlLmdldChhcnIpO1xuICAgICAgaWYgKG1hcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIG1hcHBpbmc7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmV2TWFwcGluZyA9IHByZXYgJiYgbWFwcGluZ0NhY2hlLmdldChwcmV2KTtcbiAgICAgIGNvbnN0IGF0b21MaXN0ID0gW107XG4gICAgICBjb25zdCBrZXlMaXN0ID0gW107XG4gICAgICBhcnIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5RXh0cmFjdG9yID8ga2V5RXh0cmFjdG9yKGl0ZW0pIDogaW5kZXg7XG4gICAgICAgIGtleUxpc3RbaW5kZXhdID0ga2V5O1xuICAgICAgICBjb25zdCBjYWNoZWRBdG9tID0gcHJldk1hcHBpbmcgJiYgcHJldk1hcHBpbmcuYXRvbUxpc3RbcHJldk1hcHBpbmcua2V5TGlzdC5pbmRleE9mKGtleSldO1xuICAgICAgICBpZiAoY2FjaGVkQXRvbSkge1xuICAgICAgICAgIGF0b21MaXN0W2luZGV4XSA9IGNhY2hlZEF0b207XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1SZWZBdG9tID0gYXRvbSgoKSA9PiAoe30pKTtcbiAgICAgICAgY29uc3QgcmVhZDIgPSAoZ2V0KSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbVJlZiA9IGdldChpdGVtUmVmQXRvbSk7XG4gICAgICAgICAgY29uc3QgcmVmID0gZ2V0KHJlZkF0b20pO1xuICAgICAgICAgIGNvbnN0IGFycjIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgICAgY29uc3QgbWFwcGluZzIgPSBnZXRNYXBwaW5nKGFycjIsIHJlZi5wcmV2KTtcbiAgICAgICAgICBjb25zdCBpbmRleDIgPSBtYXBwaW5nMi5rZXlMaXN0LmluZGV4T2Yoa2V5KTtcbiAgICAgICAgICBpZiAoaW5kZXgyIDwgMCB8fCBpbmRleDIgPj0gYXJyMi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChcInByZXZcIiBpbiBpdGVtUmVmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtUmVmLnByZXY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzcGxpdEF0b206IGluZGV4IG91dCBvZiBib3VuZHMgZm9yIHJlYWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1SZWYucHJldiA9IGFycjJbaW5kZXgyXTtcbiAgICAgICAgICByZXR1cm4gYXJyMltpbmRleDJdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB3cml0ZTIgPSAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlZiA9IGdldChyZWZBdG9tKTtcbiAgICAgICAgICBjb25zdCBhcnIyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgIGNvbnN0IG1hcHBpbmcyID0gZ2V0TWFwcGluZyhhcnIyLCByZWYucHJldik7XG4gICAgICAgICAgY29uc3QgaW5kZXgyID0gbWFwcGluZzIua2V5TGlzdC5pbmRleE9mKGtleSk7XG4gICAgICAgICAgaWYgKGluZGV4MiA8IDAgfHwgaW5kZXgyID49IGFycjIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzcGxpdEF0b206IGluZGV4IG91dCBvZiBib3VuZHMgZm9yIHdyaXRlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBuZXh0SXRlbSA9IGlzRnVuY3Rpb24odXBkYXRlKSA/IHVwZGF0ZShhcnIyW2luZGV4Ml0pIDogdXBkYXRlO1xuICAgICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgICAuLi5hcnIyLnNsaWNlKDAsIGluZGV4MiksXG4gICAgICAgICAgICBuZXh0SXRlbSxcbiAgICAgICAgICAgIC4uLmFycjIuc2xpY2UoaW5kZXgyICsgMSlcbiAgICAgICAgICBdKTtcbiAgICAgICAgfTtcbiAgICAgICAgYXRvbUxpc3RbaW5kZXhdID0gaXNXcml0YWJsZShhcnJBdG9tKSA/IGF0b20ocmVhZDIsIHdyaXRlMikgOiBhdG9tKHJlYWQyKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHByZXZNYXBwaW5nICYmIHByZXZNYXBwaW5nLmtleUxpc3QubGVuZ3RoID09PSBrZXlMaXN0Lmxlbmd0aCAmJiBwcmV2TWFwcGluZy5rZXlMaXN0LmV2ZXJ5KCh4LCBpKSA9PiB4ID09PSBrZXlMaXN0W2ldKSkge1xuICAgICAgICBtYXBwaW5nID0gcHJldk1hcHBpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXBwaW5nID0geyBhdG9tTGlzdCwga2V5TGlzdCB9O1xuICAgICAgfVxuICAgICAgbWFwcGluZ0NhY2hlLnNldChhcnIsIG1hcHBpbmcpO1xuICAgICAgcmV0dXJuIG1hcHBpbmc7XG4gICAgfTtcbiAgICBjb25zdCByZWZBdG9tID0gYXRvbSgoKSA9PiAoe30pKTtcbiAgICBjb25zdCByZWFkID0gKGdldCkgPT4ge1xuICAgICAgY29uc3QgcmVmID0gZ2V0KHJlZkF0b20pO1xuICAgICAgY29uc3QgYXJyID0gZ2V0KGFyckF0b20pO1xuICAgICAgY29uc3QgbWFwcGluZyA9IGdldE1hcHBpbmcoYXJyLCByZWYucHJldik7XG4gICAgICByZWYucHJldiA9IGFycjtcbiAgICAgIHJldHVybiBtYXBwaW5nLmF0b21MaXN0O1xuICAgIH07XG4gICAgY29uc3Qgd3JpdGUgPSAoZ2V0LCBzZXQsIGF0b21Ub1JlbW92ZSkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGF0b21Ub1JlbW92ZSk7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgLi4uYXJyLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgICAuLi5hcnIuc2xpY2UoaW5kZXggKyAxKVxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNwbGl0dGVkQXRvbSA9IGlzV3JpdGFibGUoYXJyQXRvbSkgPyBhdG9tKHJlYWQsIHdyaXRlKSA6IGF0b20ocmVhZCk7XG4gICAgcmV0dXJuIHNwbGl0dGVkQXRvbTtcbiAgfSwga2V5RXh0cmFjdG9yID8gW2FyckF0b20sIGtleUV4dHJhY3Rvcl0gOiBbYXJyQXRvbV0pO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aERlZmF1bHQoZ2V0RGVmYXVsdCkge1xuICBjb25zdCBFTVBUWSA9IFN5bWJvbCgpO1xuICBjb25zdCBvdmVyd3JpdHRlbkF0b20gPSBhdG9tKEVNUFRZKTtcbiAgY29uc3QgYW5BdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgY29uc3Qgb3ZlcndyaXR0ZW4gPSBnZXQob3ZlcndyaXR0ZW5BdG9tKTtcbiAgICBpZiAob3ZlcndyaXR0ZW4gIT09IEVNUFRZKSB7XG4gICAgICByZXR1cm4gb3ZlcndyaXR0ZW47XG4gICAgfVxuICAgIHJldHVybiBnZXREZWZhdWx0KGdldCk7XG4gIH0sIChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgaWYgKHVwZGF0ZSA9PT0gUkVTRVQpIHtcbiAgICAgIHJldHVybiBzZXQob3ZlcndyaXR0ZW5BdG9tLCBFTVBUWSk7XG4gICAgfVxuICAgIHJldHVybiBzZXQob3ZlcndyaXR0ZW5BdG9tLCB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGFuQXRvbSkpIDogdXBkYXRlKTtcbiAgfSk7XG4gIHJldHVybiBhbkF0b207XG59XG5cbnZhciBfX2RlZlByb3AkMSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZlByb3BzJDEgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjcyQxID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyQxID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AkMSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtJDEgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCQxID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcCQxKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyQxID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AkMS5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wJDEoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzJDEpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzJDEoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0kMS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AkMShhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzJDEgPSAoYSwgYikgPT4gX19kZWZQcm9wcyQxKGEsIF9fZ2V0T3duUHJvcERlc2NzJDEoYikpO1xuY29uc3QgbWVtb2l6ZUF0b20kMSA9IGNyZWF0ZU1lbW9pemVBdG9tKCk7XG5mdW5jdGlvbiB3YWl0Rm9yQWxsKGF0b21zKSB7XG4gIGNvbnN0IGNyZWF0ZUF0b20gPSAoKSA9PiB7XG4gICAgY29uc3QgdW53cmFwcGVkQXRvbXMgPSB1bndyYXBBdG9tcyhhdG9tcyk7XG4gICAgY29uc3QgZGVyaXZlZEF0b20gPSBhdG9tKChnZXQpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICBjb25zdCB2YWx1ZXMgPSB1bndyYXBwZWRBdG9tcy5tYXAoKGFuQXRvbSwgaW5kZXgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gZ2V0KGFuQXRvbSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHByb21pc2VzW2luZGV4XSA9IGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChwcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBSZXN1bHRzKGF0b21zLCB2YWx1ZXMpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZXJpdmVkQXRvbTtcbiAgfTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXRvbXMpKSB7XG4gICAgcmV0dXJuIG1lbW9pemVBdG9tJDEoY3JlYXRlQXRvbSwgYXRvbXMpO1xuICB9XG4gIHJldHVybiBjcmVhdGVBdG9tKCk7XG59XG5jb25zdCB1bndyYXBBdG9tcyA9IChhdG9tcykgPT4gQXJyYXkuaXNBcnJheShhdG9tcykgPyBhdG9tcyA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGF0b21zKS5tYXAoKGtleSkgPT4gYXRvbXNba2V5XSk7XG5jb25zdCB3cmFwUmVzdWx0cyA9IChhdG9tcywgcmVzdWx0cykgPT4gQXJyYXkuaXNBcnJheShhdG9tcykgPyByZXN1bHRzIDogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXRvbXMpLnJlZHVjZSgob3V0LCBrZXksIGlkeCkgPT4gX19zcHJlYWRQcm9wcyQxKF9fc3ByZWFkVmFsdWVzJDEoe30sIG91dCksIHsgW2tleV06IHJlc3VsdHNbaWR4XSB9KSwge30pO1xuXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmUHJvcHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbnZhciBfX2dldE93blByb3BEZXNjcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO1xudmFyIF9fZ2V0T3duUHJvcFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19wcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3NwcmVhZFZhbHVlcyA9IChhLCBiKSA9PiB7XG4gIGZvciAodmFyIHByb3AgaW4gYiB8fCAoYiA9IHt9KSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gIGlmIChfX2dldE93blByb3BTeW1ib2xzKVxuICAgIGZvciAodmFyIHByb3Agb2YgX19nZXRPd25Qcm9wU3ltYm9scyhiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bS5jYWxsKGIsIHByb3ApKVxuICAgICAgICBfX2RlZk5vcm1hbFByb3AoYSwgcHJvcCwgYltwcm9wXSk7XG4gICAgfVxuICByZXR1cm4gYTtcbn07XG52YXIgX19zcHJlYWRQcm9wcyA9IChhLCBiKSA9PiBfX2RlZlByb3BzKGEsIF9fZ2V0T3duUHJvcERlc2NzKGIpKTtcbmZ1bmN0aW9uIGNyZWF0ZUpTT05TdG9yYWdlKGdldFN0cmluZ1N0b3JhZ2UpIHtcbiAgbGV0IGxhc3RTdHI7XG4gIGxldCBsYXN0VmFsdWU7XG4gIHJldHVybiB7XG4gICAgZ2V0SXRlbTogKGtleSkgPT4ge1xuICAgICAgY29uc3QgcGFyc2UgPSAoc3RyMikgPT4ge1xuICAgICAgICBzdHIyID0gc3RyMiB8fCBcIlwiO1xuICAgICAgICBpZiAobGFzdFN0ciAhPT0gc3RyMikge1xuICAgICAgICAgIGxhc3RWYWx1ZSA9IEpTT04ucGFyc2Uoc3RyMik7XG4gICAgICAgICAgbGFzdFN0ciA9IHN0cjI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhc3RWYWx1ZTtcbiAgICAgIH07XG4gICAgICBjb25zdCBzdHIgPSBnZXRTdHJpbmdTdG9yYWdlKCkuZ2V0SXRlbShrZXkpO1xuICAgICAgaWYgKHN0ciBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50aGVuKHBhcnNlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZShzdHIpO1xuICAgIH0sXG4gICAgc2V0SXRlbTogKGtleSwgbmV3VmFsdWUpID0+IGdldFN0cmluZ1N0b3JhZ2UoKS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKSxcbiAgICByZW1vdmVJdGVtOiAoa2V5KSA9PiBnZXRTdHJpbmdTdG9yYWdlKCkucmVtb3ZlSXRlbShrZXkpXG4gIH07XG59XG5jb25zdCBkZWZhdWx0U3RvcmFnZSA9IGNyZWF0ZUpTT05TdG9yYWdlKCgpID0+IGxvY2FsU3RvcmFnZSk7XG5kZWZhdWx0U3RvcmFnZS5zdWJzY3JpYmUgPSAoa2V5LCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBzdG9yYWdlRXZlbnRDYWxsYmFjayA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBrZXkgJiYgZS5uZXdWYWx1ZSkge1xuICAgICAgY2FsbGJhY2soSlNPTi5wYXJzZShlLm5ld1ZhbHVlKSk7XG4gICAgfVxuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgc3RvcmFnZUV2ZW50Q2FsbGJhY2spO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBzdG9yYWdlRXZlbnRDYWxsYmFjayk7XG4gIH07XG59O1xuZnVuY3Rpb24gYXRvbVdpdGhTdG9yYWdlKGtleSwgaW5pdGlhbFZhbHVlLCBzdG9yYWdlID0gZGVmYXVsdFN0b3JhZ2UpIHtcbiAgY29uc3QgZ2V0SW5pdGlhbFZhbHVlID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUuY2F0Y2goKCkgPT4gaW5pdGlhbFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBpbml0aWFsVmFsdWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBiYXNlQXRvbSA9IGF0b20oc3RvcmFnZS5kZWxheUluaXQgPyBpbml0aWFsVmFsdWUgOiBnZXRJbml0aWFsVmFsdWUoKSk7XG4gIGJhc2VBdG9tLm9uTW91bnQgPSAoc2V0QXRvbSkgPT4ge1xuICAgIGxldCB1bnN1YjtcbiAgICBpZiAoc3RvcmFnZS5zdWJzY3JpYmUpIHtcbiAgICAgIHVuc3ViID0gc3RvcmFnZS5zdWJzY3JpYmUoa2V5LCBzZXRBdG9tKTtcbiAgICAgIHNldEF0b20oZ2V0SW5pdGlhbFZhbHVlKCkpO1xuICAgIH1cbiAgICBpZiAoc3RvcmFnZS5kZWxheUluaXQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0SW5pdGlhbFZhbHVlKCk7XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlLnRoZW4oc2V0QXRvbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRBdG9tKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuc3ViO1xuICB9O1xuICBjb25zdCBhbkF0b20gPSBhdG9tKChnZXQpID0+IGdldChiYXNlQXRvbSksIChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgaWYgKHVwZGF0ZSA9PT0gUkVTRVQpIHtcbiAgICAgIHNldChiYXNlQXRvbSwgaW5pdGlhbFZhbHVlKTtcbiAgICAgIHJldHVybiBzdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGJhc2VBdG9tKSkgOiB1cGRhdGU7XG4gICAgc2V0KGJhc2VBdG9tLCBuZXdWYWx1ZSk7XG4gICAgcmV0dXJuIHN0b3JhZ2Uuc2V0SXRlbShrZXksIG5ld1ZhbHVlKTtcbiAgfSk7XG4gIHJldHVybiBhbkF0b207XG59XG5mdW5jdGlvbiBhdG9tV2l0aEhhc2goa2V5LCBpbml0aWFsVmFsdWUsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2VyaWFsaXplID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc2VyaWFsaXplKSB8fCBKU09OLnN0cmluZ2lmeTtcbiAgY29uc3QgZGVzZXJpYWxpemUgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5kZXNlcmlhbGl6ZSkgfHwgSlNPTi5wYXJzZTtcbiAgY29uc3Qgc3Vic2NyaWJlID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc3Vic2NyaWJlKSB8fCAoKGNhbGxiYWNrKSA9PiB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIGNhbGxiYWNrKTtcbiAgICB9O1xuICB9KTtcbiAgY29uc3QgaGFzaFN0b3JhZ2UgPSBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHtcbiAgICBnZXRJdGVtOiAoa2V5MikgPT4ge1xuICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5oYXNoLnNsaWNlKDEpKTtcbiAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gc2VhcmNoUGFyYW1zLmdldChrZXkyKTtcbiAgICAgIGlmIChzdG9yZWRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyB2YWx1ZSBzdG9yZWRcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemUoc3RvcmVkVmFsdWUpO1xuICAgIH0sXG4gICAgc2V0SXRlbTogKGtleTIsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLmhhc2guc2xpY2UoMSkpO1xuICAgICAgc2VhcmNoUGFyYW1zLnNldChrZXkyLCBzZXJpYWxpemUobmV3VmFsdWUpKTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIiNcIiArIHNlYXJjaFBhcmFtcy50b1N0cmluZygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2F0aW9uLmhhc2ggPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IChrZXkyKSA9PiB7XG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLmhhc2guc2xpY2UoMSkpO1xuICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShrZXkyKTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIiNcIiArIHNlYXJjaFBhcmFtcy50b1N0cmluZygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2F0aW9uLmhhc2ggPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRlbGF5SW5pdCkgJiYgeyBkZWxheUluaXQ6IHRydWUgfSksIHtcbiAgICBzdWJzY3JpYmU6IChrZXkyLCBzZXRWYWx1ZSkgPT4ge1xuICAgICAgY29uc3QgY2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uaGFzaC5zbGljZSgxKSk7XG4gICAgICAgIGNvbnN0IHN0ciA9IHNlYXJjaFBhcmFtcy5nZXQoa2V5Mik7XG4gICAgICAgIGlmIChzdHIgIT09IG51bGwpIHtcbiAgICAgICAgICBzZXRWYWx1ZShkZXNlcmlhbGl6ZShzdHIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRWYWx1ZShpbml0aWFsVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGF0b21XaXRoU3RvcmFnZShrZXksIGluaXRpYWxWYWx1ZSwgaGFzaFN0b3JhZ2UpO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aE9ic2VydmFibGUoY3JlYXRlT2JzZXJ2YWJsZSwgb3B0aW9ucykge1xuICBjb25zdCBvYnNlcnZhYmxlUmVzdWx0QXRvbSA9IGF0b20oKGdldCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBsZXQgb2JzZXJ2YWJsZSA9IGNyZWF0ZU9ic2VydmFibGUoZ2V0KTtcbiAgICBjb25zdCBpdHNlbGYgPSAoX2EgPSBvYnNlcnZhYmxlW1N5bWJvbC5vYnNlcnZhYmxlXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwob2JzZXJ2YWJsZSk7XG4gICAgaWYgKGl0c2VsZikge1xuICAgICAgb2JzZXJ2YWJsZSA9IGl0c2VsZjtcbiAgICB9XG4gICAgY29uc3QgZGF0YUF0b20gPSBhdG9tKChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmluaXRpYWxWYWx1ZSkgPyBnZXRJbml0aWFsVmFsdWUob3B0aW9ucykgOiBmaXJzdFZhbHVlRnJvbShvYnNlcnZhYmxlKSk7XG4gICAgbGV0IHNldERhdGEgPSAoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzZXR0aW5nIGRhdGEgd2l0aG91dCBtb3VudFwiKTtcbiAgICB9O1xuICAgIGNvbnN0IGRhdGFMaXN0ZW5lciA9IChkYXRhKSA9PiB7XG4gICAgICBzZXREYXRhKGRhdGEpO1xuICAgIH07XG4gICAgY29uc3QgZXJyb3JMaXN0ZW5lciA9IChlcnJvcikgPT4ge1xuICAgICAgc2V0RGF0YShQcm9taXNlLnJlamVjdChlcnJvcikpO1xuICAgIH07XG4gICAgbGV0IHN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgZGF0YUF0b20ub25Nb3VudCA9ICh1cGRhdGUpID0+IHtcbiAgICAgIHNldERhdGEgPSB1cGRhdGU7XG4gICAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZShkYXRhTGlzdGVuZXIsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc3Vic2NyaXB0aW9uID09IG51bGwgPyB2b2lkIDAgOiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBkYXRhQXRvbSwgb2JzZXJ2YWJsZSB9O1xuICB9KTtcbiAgY29uc3Qgb2JzZXJ2YWJsZUF0b20gPSBhdG9tKChnZXQpID0+IHtcbiAgICBjb25zdCB7IGRhdGFBdG9tIH0gPSBnZXQob2JzZXJ2YWJsZVJlc3VsdEF0b20pO1xuICAgIHJldHVybiBnZXQoZGF0YUF0b20pO1xuICB9LCAoZ2V0LCBfc2V0LCBkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBvYnNlcnZhYmxlIH0gPSBnZXQob2JzZXJ2YWJsZVJlc3VsdEF0b20pO1xuICAgIGlmIChcIm5leHRcIiBpbiBvYnNlcnZhYmxlKSB7XG4gICAgICBvYnNlcnZhYmxlLm5leHQoZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm9ic2VydmFibGUgaXMgbm90IHN1YmplY3RcIik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9ic2VydmFibGVBdG9tO1xufVxuZnVuY3Rpb24gZ2V0SW5pdGlhbFZhbHVlKG9wdGlvbnMpIHtcbiAgY29uc3QgaW5pdGlhbFZhbHVlID0gb3B0aW9ucy5pbml0aWFsVmFsdWU7XG4gIHJldHVybiBpbml0aWFsVmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGluaXRpYWxWYWx1ZSgpIDogaW5pdGlhbFZhbHVlO1xufVxuZnVuY3Rpb24gZmlyc3RWYWx1ZUZyb20oc291cmNlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbGV0IHJlc29sdmVkID0gZmFsc2U7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAodmFsdWUpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIHJlamVjdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgaHlkcmF0ZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHVzZUh5ZHJhdGVBdG9tcyh2YWx1ZXMsIHNjb3BlKSB7XG4gIGNvbnN0IFNjb3BlQ29udGV4dCA9IFNFQ1JFVF9JTlRFUk5BTF9nZXRTY29wZUNvbnRleHQoc2NvcGUpO1xuICBjb25zdCBzY29wZUNvbnRhaW5lciA9IHVzZUNvbnRleHQoU2NvcGVDb250ZXh0KTtcbiAgY29uc3Qgc3RvcmUgPSBzY29wZUNvbnRhaW5lci5zO1xuICBjb25zdCBoeWRyYXRlZFNldCA9IGdldEh5ZHJhdGVkU2V0KHNjb3BlQ29udGFpbmVyKTtcbiAgY29uc3QgdHVwbGVzVG9SZXN0b3JlID0gW107XG4gIGZvciAoY29uc3QgdHVwbGUgb2YgdmFsdWVzKSB7XG4gICAgY29uc3QgYXRvbSA9IHR1cGxlWzBdO1xuICAgIGlmICghaHlkcmF0ZWRTZXQuaGFzKGF0b20pKSB7XG4gICAgICBoeWRyYXRlZFNldC5hZGQoYXRvbSk7XG4gICAgICB0dXBsZXNUb1Jlc3RvcmUucHVzaCh0dXBsZSk7XG4gICAgfVxuICB9XG4gIGlmICh0dXBsZXNUb1Jlc3RvcmUubGVuZ3RoKSB7XG4gICAgc3RvcmVbUkVTVE9SRV9BVE9NU10odHVwbGVzVG9SZXN0b3JlKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0SHlkcmF0ZWRTZXQoc2NvcGVDb250YWluZXIpIHtcbiAgbGV0IGh5ZHJhdGVkU2V0ID0gaHlkcmF0ZWRNYXAuZ2V0KHNjb3BlQ29udGFpbmVyKTtcbiAgaWYgKCFoeWRyYXRlZFNldCkge1xuICAgIGh5ZHJhdGVkU2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgaHlkcmF0ZWRNYXAuc2V0KHNjb3BlQ29udGFpbmVyLCBoeWRyYXRlZFNldCk7XG4gIH1cbiAgcmV0dXJuIGh5ZHJhdGVkU2V0O1xufVxuXG5jb25zdCBtZW1vaXplQXRvbSA9IGNyZWF0ZU1lbW9pemVBdG9tKCk7XG5jb25zdCBMT0FESU5HID0geyBzdGF0ZTogXCJsb2FkaW5nXCIgfTtcbmZ1bmN0aW9uIGxvYWRhYmxlKGFuQXRvbSkge1xuICByZXR1cm4gbWVtb2l6ZUF0b20oKCkgPT4ge1xuICAgIGNvbnN0IGxvYWRhYmxlQXRvbUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gICAgY29uc3QgY2F0Y2hBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgICBsZXQgcHJvbWlzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBnZXQoYW5BdG9tKTtcbiAgICAgICAgY29uc3QgbG9hZGFibGVBdG9tMiA9IGF0b20oeyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGEgfSk7XG4gICAgICAgIHJldHVybiBsb2FkYWJsZUF0b20yO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIHByb21pc2UgPSBlcnJvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBsb2FkYWJsZUF0b20yID0gYXRvbSh7XG4gICAgICAgICAgICBzdGF0ZTogXCJoYXNFcnJvclwiLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbG9hZGFibGVBdG9tMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgY2FjaGVkID0gbG9hZGFibGVBdG9tQ2FjaGUuZ2V0KHByb21pc2UpO1xuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgfVxuICAgICAgY29uc3QgbG9hZGFibGVBdG9tID0gYXRvbShMT0FESU5HLCBhc3luYyAoZ2V0Miwgc2V0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldDIoYW5BdG9tLCB7IHVuc3RhYmxlX3Byb21pc2U6IHRydWUgfSk7XG4gICAgICAgICAgc2V0KGxvYWRhYmxlQXRvbSwgeyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGEgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgc2V0KGxvYWRhYmxlQXRvbSwgeyBzdGF0ZTogXCJoYXNFcnJvclwiLCBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsb2FkYWJsZUF0b20ub25Nb3VudCA9IChpbml0KSA9PiB7XG4gICAgICAgIGluaXQoKTtcbiAgICAgIH07XG4gICAgICBsb2FkYWJsZUF0b21DYWNoZS5zZXQocHJvbWlzZSwgbG9hZGFibGVBdG9tKTtcbiAgICAgIHJldHVybiBsb2FkYWJsZUF0b207XG4gICAgfSk7XG4gICAgY29uc3QgZGVyaXZlZEF0b20gPSBhdG9tKChnZXQpID0+IHtcbiAgICAgIGNvbnN0IGxvYWRhYmxlQXRvbSA9IGdldChjYXRjaEF0b20pO1xuICAgICAgcmV0dXJuIGdldChsb2FkYWJsZUF0b20pO1xuICAgIH0pO1xuICAgIHJldHVybiBkZXJpdmVkQXRvbTtcbiAgfSwgW2FuQXRvbV0pO1xufVxuXG5leHBvcnQgeyBSRVNFVCwgYXRvbUZhbWlseSwgYXRvbVdpdGhEZWZhdWx0LCBhdG9tV2l0aEhhc2gsIGF0b21XaXRoT2JzZXJ2YWJsZSwgYXRvbVdpdGhSZWR1Y2VyLCBhdG9tV2l0aFJlc2V0LCBhdG9tV2l0aFN0b3JhZ2UsIGNyZWF0ZUpTT05TdG9yYWdlLCBmcmVlemVBdG9tLCBmcmVlemVBdG9tQ3JlYXRvciwgbG9hZGFibGUsIHNlbGVjdEF0b20sIHNwbGl0QXRvbSwgdXNlQXRvbUNhbGxiYWNrLCB1c2VIeWRyYXRlQXRvbXMsIHVzZVJlZHVjZXJBdG9tLCB1c2VSZXNldEF0b20sIHdhaXRGb3JBbGwgfTtcbiIsICJpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcydcbmltcG9ydCB7IHVzZUF0b20sIFByb3ZpZGVyIH0gZnJvbSAnam90YWknXG5pbXBvcnQgeyB1c2VBdG9tVmFsdWUsIHVzZVVwZGF0ZUF0b20gfSBmcm9tICdqb3RhaS91dGlscydcbmltcG9ydCB7IHByb2R1Y3RVcmwgfSBmcm9tICcuL19Qcm9kdWN0U3RvcmUnXG5pbXBvcnQgeyBwcmljZUF0b20sIHZhcmlhbnRBdG9tLCBjaGVja2VkT3B0aW9uc0F0b20sIGNoZWNrZWRPcHRpb25zUldBdG9tLCBwcm9jZXNzaW5nQXRvbSB9IGZyb20gJy4uLy4uL19BdG9tcydcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNjE0Mik6IE1vZHVsZSAnLi9fUHJpY2VTdG9yZScgd2FzIHJlc29sdmVkIHRvICcvVXNlcnMvS2F6Li4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCB7IHByaWNlSnNvbklkIH0gZnJvbSAnLi9fUHJpY2VTdG9yZSdcbmltcG9ydCB7IHByb2R1Y3RWYXJpYW50cyB9IGZyb20gJy4vX1ZhcmlhbnRTdG9yZSdcbmltcG9ydCB7IHNlY3Rpb25JZCB9IGZyb20gJy4vX1NlY3Rpb25TdG9yZSdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmFyaWFudE9wdGlvbih7XG4gIG9wdGlvbixcbiAgdmFsdWUsXG4gIGluZGV4LFxuICBjaGFuZ2VDb2xvclxufTogYW55KSB7XG4gIGNvbnN0IGlucHV0ID0gdXNlUmVmKClcbiAgY29uc3QgW3ZhcmlhbnQsIHNldFZhcmlhbnRdID0gdXNlQXRvbSh2YXJpYW50QXRvbSlcbiAgY29uc3QgY2hlY2tlZCA9IHVzZUF0b21WYWx1ZShjaGVja2VkT3B0aW9uc0F0b20pXG4gIGNvbnN0IGNoZWNrT3B0aW9uID0gdXNlVXBkYXRlQXRvbShjaGVja2VkT3B0aW9uc1JXQXRvbSlcbiAgY29uc3Qgc2V0UHJpY2UgPSB1c2VVcGRhdGVBdG9tKHByaWNlQXRvbSlcbiAgY29uc3Qgc2V0UHJvY2Vzc2luZyA9IHVzZVVwZGF0ZUF0b20ocHJvY2Vzc2luZ0F0b20pXG5cbiAgZnVuY3Rpb24gdG9nZ2xlQWRkQnV0dG9uKGRpc2FibGUgPSB0cnVlLCB0ZXh0OiBhbnksIG1vZGlmeUNsYXNzID0gdHJ1ZSkge1xuICAgIGNvbnN0IHByb2R1Y3RGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHByb2R1Y3QtZm9ybS0ke3NlY3Rpb25JZH1gKTtcbiAgICBpZiAoIXByb2R1Y3RGb3JtKSByZXR1cm47XG4gICAgY29uc3QgYWRkQnV0dG9uID0gcHJvZHVjdEZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZGRcIl0nKTtcbiAgICBjb25zdCBhZGRCdXR0b25UZXh0ID0gcHJvZHVjdEZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZGRcIl0gPiBzcGFuJyk7XG4gIFxuICAgIGlmICghYWRkQnV0dG9uKSByZXR1cm47XG4gIFxuICAgIGlmIChkaXNhYmxlKSB7XG4gICAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMxKTogT2JqZWN0IGlzIHBvc3NpYmx5ICdudWxsJy5cbiAgICAgIGlmICh0ZXh0KSBhZGRCdXR0b25UZXh0LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG4gICAgICBhZGRCdXR0b25UZXh0LnRleHRDb250ZW50ID0gd2luZG93LnZhcmlhbnRTdHJpbmdzLmFkZFRvQ2FydDtcbiAgICB9XG4gIFxuICAgIGlmICghbW9kaWZ5Q2xhc3MpIHJldHVybjtcbiAgfVxuICBcbiAgZnVuY3Rpb24gdXBkYXRlUGlja3VwQXZhaWxhYmlsaXR5KCkge1xuICAgIGNvbnN0IHBpY2tVcEF2YWlsYWJpbGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3BpY2t1cC1hdmFpbGFiaWxpdHknKTtcbiAgICBpZiAoIXBpY2tVcEF2YWlsYWJpbGl0eSkgcmV0dXJuO1xuICBcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzMzkpOiBQcm9wZXJ0eSAnZmV0Y2hBdmFpbGFiaWxpdHknIGRvZXMgbm90IGV4aXN0IG9uIHR5cC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgaWYgKHZhcmlhbnQgJiYgdmFyaWFudC5hdmFpbGFibGUgJiYgcGlja1VwQXZhaWxhYmlsaXR5Py5mZXRjaEF2YWlsYWJpbGl0eSkge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyMzM5KTogUHJvcGVydHkgJ2ZldGNoQXZhaWxhYmlsaXR5JyBkb2VzIG5vdCBleGlzdCBvbiB0eXAuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgcGlja1VwQXZhaWxhYmlsaXR5Py5mZXRjaEF2YWlsYWJpbGl0eSh2YXJpYW50LmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGlja1VwQXZhaWxhYmlsaXR5Py5yZW1vdmVBdHRyaWJ1dGUoJ2F2YWlsYWJsZScpO1xuICAgICAgcGlja1VwQXZhaWxhYmlsaXR5LmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gcmVtb3ZlRXJyb3JNZXNzYWdlKCkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMik6IE9iamVjdCBpcyBwb3NzaWJseSAndW5kZWZpbmVkJy5cbiAgICBjb25zdCBzZWN0aW9uID0gaW5wdXQuY3VycmVudC5jbG9zZXN0KCdzZWN0aW9uJyk7XG4gICAgaWYgKCFzZWN0aW9uKSByZXR1cm47XG4gIFxuICAgIGNvbnN0IHByb2R1Y3RGb3JtID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdwcm9kdWN0LWZvcm0nKTtcbiAgICBpZiAocHJvZHVjdEZvcm0pIHByb2R1Y3RGb3JtLmhhbmRsZUVycm9yTWVzc2FnZSgpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBzZXRVbmF2YWlsYWJsZSgpIHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcHJvZHVjdC1mb3JtLSR7c2VjdGlvbklkfWApO1xuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvbj8ucXVlcnlTZWxlY3RvcignW25hbWU9XCJhZGRcIl0nKTtcbiAgICBjb25zdCBhZGRCdXR0b25UZXh0ID0gYnV0dG9uPy5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImFkZFwiXSA+IHNwYW4nKTtcbiAgICBjb25zdCBwcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcmljZS0ke3NlY3Rpb25JZH1gKTtcbiAgICBpZiAoIWFkZEJ1dHRvbikgcmV0dXJuO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMyk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcgb3IgJ3VuZGVmaW5lZCcuXG4gICAgYWRkQnV0dG9uVGV4dC50ZXh0Q29udGVudCA9IHdpbmRvdy52YXJpYW50U3RyaW5ncy51bmF2YWlsYWJsZTtcbiAgICBpZiAocHJpY2UpIHByaWNlLmNsYXNzTGlzdC5hZGQoJ3Zpc2liaWxpdHktaGlkZGVuJyk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHVwZGF0ZVVSTCgpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzIpOiBPYmplY3QgaXMgcG9zc2libHkgJ3VuZGVmaW5lZCcuXG4gICAgaWYgKCF2YXJpYW50IHx8IGlucHV0LmN1cnJlbnQudXBkYXRlVXJsID09PSAnZmFsc2UnKSByZXR1cm5cbiAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyB9LCAnJywgYCR7cHJvZHVjdFVybH0/dmFyaWFudD0ke3ZhcmlhbnQuaWR9YClcbiAgfVxuICBcbiAgZnVuY3Rpb24gdXBkYXRlVmFyaWFudElucHV0KCkge1xuICAgIGNvbnN0IHByb2R1Y3RGb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCNwcm9kdWN0LWZvcm0tJHtzZWN0aW9uSWR9YClcbiAgICBwcm9kdWN0Rm9ybXMuZm9yRWFjaCgocHJvZHVjdEZvcm0pID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gcHJvZHVjdEZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImlkXCJdJylcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG4gICAgICBpbnB1dC52YWx1ZSA9IHZhcmlhbnQuaWRcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG4gICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlIH0pKVxuICAgIH0pXG4gIH1cbiAgXG4gIGFzeW5jIGZ1bmN0aW9uIHJlbmRlclByb2R1Y3RJbmZvKCkge1xuICAgIHNldFByb2Nlc3NpbmcoIHRydWUgKVxuICAgIHJldHVybiBmZXRjaChgJHtwcm9kdWN0VXJsfT92YXJpYW50PSR7dmFyaWFudC5pZH0mc2VjdGlvbl9pZD0ke3NlY3Rpb25JZH1gKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAudGhlbigocmVzcG9uc2VUZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlVGV4dCwgJ3RleHQvaHRtbCcpXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGh0bWwuZ2V0RWxlbWVudEJ5SWQocHJpY2VKc29uSWQpXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG4gICAgICAgIGNvbnN0IG5ld1ByaWNlID0gSlNPTi5wYXJzZShzb3VyY2UudGV4dClcbiAgICAgICAgaWYgKCBuZXdQcmljZSApIHtcbiAgICAgICAgICBzZXRQcmljZShuZXdQcmljZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzMzkpOiBQcm9wZXJ0eSAndmFyaWFudFN0cmluZ3MnIGRvZXMgbm90IGV4aXN0IG9uIHR5cGUgJy4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIHRvZ2dsZUFkZEJ1dHRvbighdmFyaWFudC5hdmFpbGFibGUsIHdpbmRvdy52YXJpYW50U3RyaW5ncy5zb2xkT3V0KVxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTUwKTogUHJvcGVydHkgJ2ZpbmFsbHknIGRvZXMgbm90IGV4aXN0IG9uIHR5cGUgJ1Byb21pc2UuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgfSkuZmluYWxseSggKCkgPT4gc2V0UHJvY2Vzc2luZyggZmFsc2UgKSApXG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsKCkge1xuICAgIGNvbnN0IHNoYXJlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYFNoYXJlLSR7c2VjdGlvbklkfWApXG4gICAgaWYgKCFzaGFyZUJ1dHRvbikgcmV0dXJuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyMzM5KTogUHJvcGVydHkgJ3VwZGF0ZVVybCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnSFRNTEUuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIHNoYXJlQnV0dG9uLnVwZGF0ZVVybChgJHt3aW5kb3cuc2hvcFVybH0ke3Byb2R1Y3RVcmx9P3ZhcmlhbnQ9JHt2YXJpYW50LmlkfWApXG4gIH1cbiAgY29uc3Qgb25DaGFuZ2UgPSAoZTogYW55KSA9PiB7XG4gICAgY2hlY2tPcHRpb24oaW5wdXQuY3VycmVudClcbiAgICBjb25zdCBjdXJyZW50VmFyaWFudCA9IHByb2R1Y3RWYXJpYW50cy5maW5kKCh7XG4gICAgICBvcHRpb25zXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTUwKTogUHJvcGVydHkgJ3ZhbHVlcycgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnT2JqZWN0Q28uLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIH06IGFueSkgPT4gIW9wdGlvbnMubWFwKChvcHRpb246IGFueSkgPT4gT2JqZWN0LnZhbHVlcyhjaGVja2VkKS5pbmNsdWRlcyhvcHRpb24pKS5pbmNsdWRlcyhmYWxzZSkpXG4gICAgaWYoIWN1cnJlbnRWYXJpYW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc2V0VmFyaWFudChjdXJyZW50VmFyaWFudClcbiAgfVxuICAvKipcbiAgICogXHUzMEM3XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEM4XHUzMDZFXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGXHU3MkI2XHU2MTRCXHUzMDkyXHU1MjFEXHU2NzFGXHU1MzE2XG4gICAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMik6IE9iamVjdCBpcyBwb3NzaWJseSAndW5kZWZpbmVkJy5cbiAgICBpbnB1dC5jdXJyZW50LmNoZWNrZWQgPSBvcHRpb24uc2VsZWN0ZWRfdmFsdWUgPT0gdmFsdWVcbiAgfSwgW10pXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMyKTogT2JqZWN0IGlzIHBvc3NpYmx5ICd1bmRlZmluZWQnLlxuICAgIGlmKCBpbnB1dC5jdXJyZW50LnZhbHVlICE9PSBjaGVja2VkW2lucHV0LmN1cnJlbnQubmFtZV0gKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdG9nZ2xlQWRkQnV0dG9uKHRydWUsICcnLCBmYWxzZSlcbiAgICB1cGRhdGVQaWNrdXBBdmFpbGFiaWxpdHkoKVxuICAgIHJlbW92ZUVycm9yTWVzc2FnZSgpXG4gICAgaWYgKCF2YXJpYW50KSB7XG4gICAgICB0b2dnbGVBZGRCdXR0b24odHJ1ZSwgJycsIHRydWUpXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1NTQpOiBFeHBlY3RlZCAwIGFyZ3VtZW50cywgYnV0IGdvdCAxLlxuICAgICAgc2V0VW5hdmFpbGFibGUoc2VjdGlvbklkKVxuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVVUkwoKVxuICAgICAgdXBkYXRlVmFyaWFudElucHV0KClcbiAgICAgIHJlbmRlclByb2R1Y3RJbmZvKClcbiAgICAgIHVwZGF0ZVNoYXJlVXJsKClcbiAgICB9XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMyKTogT2JqZWN0IGlzIHBvc3NpYmx5ICd1bmRlZmluZWQnLlxuICAgIGNoYW5nZUNvbG9yKGlucHV0LmN1cnJlbnQudmFsdWUpXG4gIH0sIFt2YXJpYW50XSlcbiAgY29uc3QgY2xhc3NOYW1lQmFzZSA9IGByZWxhdGl2ZSBib3JkZXItd2hpdGUgYm9yZGVyLVs0cHhdIHBlZXItY2hlY2tlZDpzaGFkb3ctWzBfMF8xcHhfMXB4XyMzMzMzMzNdIGhvdmVyOnNoYWRvdy1bMF8wXzJweF8wX2JsYWNrXSByb3VuZGVkLWZ1bGxgXG4gIGNvbnN0IGJlZm9yZUNsYXNzTmFtZSA9IGBiZWZvcmU6Y29udGVudC1bYXR0cihkYXRhLXRleHQpXSBiZWZvcmU6dGV4dC1bbGVuZ3RoOjFyZW1dIGJlZm9yZTphYnNvbHV0ZSBiZWZvcmU6dG9wLTEvMiBiZWZvcmU6bGVmdC0xLzIgYmVmb3JlOi10cmFuc2xhdGUteS0xLzIgYmVmb3JlOi10cmFuc2xhdGUteC0xLzJgXG4gIGNvbnN0IGJnQ29sb3IgPSBvcHRpb24ubmFtZSA9PT0gJ0NvbG9yJyA/IGBiZy12LSR7dmFsdWUudG9Mb3dlckNhc2UoKX1gIDogJydcbiAgY29uc3QgdGV4dCA9IG9wdGlvbi5uYW1lID09PSAnQ29sb3InID8gJycgOiB2YWx1ZVxuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgPFByb3ZpZGVyPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50cyBncm91cFwiPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgIGlkPXtgJHtzZWN0aW9uSWR9LSR7b3B0aW9uLnBvc2l0aW9ufS0ke2luZGV4fWB9XG4gICAgICAgICAgbmFtZT17b3B0aW9uLm5hbWV9XG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgIGZvcm09e2Bwcm9kdWN0LWZvcm0tJHtzZWN0aW9uSWR9YH1cbiAgICAgICAgICByZWY9e2lucHV0fVxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJwZWVyXCJcbiAgICAgICAgLz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8bGFiZWwgZm9yPXtgJHtzZWN0aW9uSWR9LSR7b3B0aW9uLnBvc2l0aW9ufS0ke2luZGV4fWB9IGRhdGEtdGV4dD17dGV4dH1cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZUJhc2V9ICR7YmVmb3JlQ2xhc3NOYW1lfSAke2JnQ29sb3J9YH1cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA+PC9sYWJlbD5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgIDwvUHJvdmlkZXI+XG4gIClcbn1cbiIsICJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSBcInByZWFjdC9ob29rc1wiXG5pbXBvcnQgeyB2YXJpYW50QXRvbSwgcHJvY2Vzc2luZ0F0b20gfSBmcm9tIFwiLi4vLi4vX0F0b21zXCJcbmltcG9ydCB7IHVzZUF0b20gfSBmcm9tIFwiam90YWlcIlxuXG5jb25zdCBGb3JtID0gKCkgPT4ge1xuICBjb25zdCBmb3JtUmVmID0gdXNlUmVmKG51bGwpXG4gIGNvbnN0IHNwaW5uZXJSZWYgPSB1c2VSZWYobnVsbClcbiAgY29uc3QgW2Vyck1zZywgc2V0RXJyb3JNZXNzYWdlXSA9IHVzZVN0YXRlKFwiXCIpXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldExvYWRpbmdTdGF0ZV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgY2FydE5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJjYXJ0LW5vdGlmaWNhdGlvblwiKVxuICBjb25zdCBbdmFyaWFudF0gPSB1c2VBdG9tKHZhcmlhbnRBdG9tKVxuICBjb25zdCBbaXNQcm9jZXNzaW5nXSA9IHVzZUF0b20ocHJvY2Vzc2luZ0F0b20pXG5cbiAgZnVuY3Rpb24gb25TdWJtaXRIYW5kbGVyKGV2dDogYW55KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoaXNMb2FkaW5nKSByZXR1cm5cblxuICAgIGhhbmRsZUVycm9yTWVzc2FnZSgpXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMxKTogT2JqZWN0IGlzIHBvc3NpYmx5ICdudWxsJy5cbiAgICBjYXJ0Tm90aWZpY2F0aW9uLnNldEFjdGl2ZUVsZW1lbnQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudClcblxuICAgIHNldExvYWRpbmdTdGF0ZSh0cnVlKVxuXG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsIEFjY2VwdDogYGFwcGxpY2F0aW9uL2phdmFzY3JpcHRgIH0sXG4gICAgfVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzA1Myk6IEVsZW1lbnQgaW1wbGljaXRseSBoYXMgYW4gJ2FueScgdHlwZSBiZWNhdXNlIGV4cHJlLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICBjb25maWcuaGVhZGVyc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI3OTApOiBUaGUgb3BlcmFuZCBvZiBhICdkZWxldGUnIG9wZXJhdG9yIG11c3QgYmUgb3B0aW9uYS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdXG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzNDUpOiBBcmd1bWVudCBvZiB0eXBlICdudWxsJyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybVJlZi5jdXJyZW50KVxuICAgIGZvcm1EYXRhLmFwcGVuZChcbiAgICAgIFwic2VjdGlvbnNcIixcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjUzMSk6IE9iamVjdCBpcyBwb3NzaWJseSAnbnVsbCcuXG4gICAgICBjYXJ0Tm90aWZpY2F0aW9uLmdldFNlY3Rpb25zVG9SZW5kZXIoKS5tYXAoKHNlY3Rpb246IGFueSkgPT4gc2VjdGlvbi5pZClcbiAgICApXG4gICAgZm9ybURhdGEuYXBwZW5kKFwic2VjdGlvbnNfdXJsXCIsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSlcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzMzkpOiBQcm9wZXJ0eSAnYm9keScgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAneyBtZXRob2Q6IC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgY29uZmlnLmJvZHkgPSBmb3JtRGF0YVxuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyMzA0KTogQ2Fubm90IGZpbmQgbmFtZSAncm91dGVzJy5cbiAgICBmZXRjaChgJHtyb3V0ZXMuY2FydF9hZGRfdXJsfWAsIGNvbmZpZylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMpIHtcbiAgICAgICAgICBoYW5kbGVFcnJvck1lc3NhZ2UocmVzcG9uc2UuZGVzY3JpcHRpb24pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMxKTogT2JqZWN0IGlzIHBvc3NpYmx5ICdudWxsJy5cbiAgICAgICAgY2FydE5vdGlmaWNhdGlvbi5yZW5kZXJDb250ZW50cyhyZXNwb25zZSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgICAgfSlcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjU1MCk6IFByb3BlcnR5ICdmaW5hbGx5JyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlICdQcm9taXNlLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKGZhbHNlKVxuICAgICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UgPSBmYWxzZSkge1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMjM0NSk6IEFyZ3VtZW50IG9mIHR5cGUgJ2Jvb2xlYW4nIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIHNldEVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpXG4gICAgfVxuICB9XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcHJvZHVjdC1mb3JtICR7aXNQcm9jZXNzaW5nID8gXCJvcGFjaXR5LTIwIHRyYW5zaXRpb24tb3BhY2l0eVwiIDogXCJcIn1gfT5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdC1mb3JtX19lcnJvci1tZXNzYWdlLXdyYXBwZXJcIiByb2xlPVwiYWxlcnRcIiBoaWRkZW49e2Vyck1zZyA9PT0gXCJcIn0+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPHN2ZyBhcmlhLWhpZGRlbj1cInRydWVcIiBmb2N1c2FibGU9XCJmYWxzZVwiIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjbGFzc05hbWU9XCJpY29uIGljb24tZXJyb3JcIiB2aWV3Qm94PVwiMCAwIDEzIDEzXCI+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxjaXJjbGUgY3g9XCI2LjVcIiBjeT1cIjYuNTAwNDlcIiByPVwiNS41XCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2Utd2lkdGg9XCIyXCI+PC9jaXJjbGU+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxjaXJjbGUgY3g9XCI2LjVcIiBjeT1cIjYuNVwiIHI9XCI1LjVcIiBmaWxsPVwiI0VCMDAxQlwiIHN0cm9rZT1cIiNFQjAwMUJcIiBzdHJva2Utd2lkdGg9XCIwLjdcIj48L2NpcmNsZT5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNNS44NzQxMyAzLjUyODMyTDUuOTc0MzkgNy41NzIxNkg3LjAyNzEzTDcuMTI3MzkgMy41MjgzMkg1Ljg3NDEzWk02LjUwMDc2IDkuNjYwOTFDNi44ODA5MSA5LjY2MDkxIDcuMTgxNjkgOS4zNzI2NyA3LjE4MTY5IDkuMDA1MDRDNy4xODE2OSA4LjYzNzQyIDYuODgwOTEgOC4zNDkxNyA2LjUwMDc2IDguMzQ5MTdDNi4xMjA2MSA4LjM0OTE3IDUuODE5ODIgOC42Mzc0MiA1LjgxOTgyIDkuMDA1MDRDNS44MTk4MiA5LjM3MjY3IDYuMTIwNjEgOS42NjA5MSA2LjUwMDc2IDkuNjYwOTFaXCJcbiAgICAgICAgICAgIGZpbGw9XCJ3aGl0ZVwiXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTUuODc0MTMgMy4xNzgzMkg1LjUxNTM1TDUuNTI0MjQgMy41MzdMNS42MjQ1IDcuNTgwODNMNS42MzI5NiA3LjkyMjE2SDUuOTc0MzlINy4wMjcxM0g3LjM2ODU2TDcuMzc3MDIgNy41ODA4M0w3LjQ3NzI4IDMuNTM3TDcuNDg2MTcgMy4xNzgzMkg3LjEyNzM5SDUuODc0MTNaTTYuNTAwNzYgMTAuMDEwOUM3LjA2MTIxIDEwLjAxMDkgNy41MzE3IDkuNTc4NzIgNy41MzE3IDkuMDA1MDRDNy41MzE3IDguNDMxMzcgNy4wNjEyMSA3Ljk5OTE4IDYuNTAwNzYgNy45OTkxOEM1Ljk0MDMxIDcuOTk5MTggNS40Njk4MiA4LjQzMTM3IDUuNDY5ODIgOS4wMDUwNEM1LjQ2OTgyIDkuNTc4NzIgNS45NDAzMSAxMC4wMTA5IDYuNTAwNzYgMTAuMDEwOVpcIlxuICAgICAgICAgICAgZmlsbD1cIndoaXRlXCJcbiAgICAgICAgICAgIHN0cm9rZT1cIiNFQjAwMUJcIlxuICAgICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMC43XCJcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8L3N2Zz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcm9kdWN0LWZvcm1fX2Vycm9yLW1lc3NhZ2VcIj57ZXJyTXNnfTwvc3Bhbj5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIGFjdGlvbj1cIi9jYXJ0L2FkZFwiIGFjY2VwdC1jaGFyc2V0PVwiVVRGLThcIiBjbGFzc05hbWU9XCJmb3JtXCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIiBub3ZhbGlkYXRlPVwibm92YWxpZGF0ZVwiIGRhdGEtdHlwZT1cImFkZC10by1jYXJ0LWZvcm1cIiBvblN1Ym1pdD17b25TdWJtaXRIYW5kbGVyfSByZWY9e2Zvcm1SZWZ9PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImZvcm1fdHlwZVwiIHZhbHVlPVwicHJvZHVjdFwiIC8+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwidXRmOFwiIHZhbHVlPVwiXHUyNzEzXCIgLz5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJpZFwiIHZhbHVlPXt2YXJpYW50LmlkfSAvPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZHVjdC1mb3JtX19idXR0b25zXCI+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIG5hbWU9XCJhZGRcIiBjbGFzc05hbWU9e2Ake2lzTG9hZGluZyA/IFwibG9hZGluZ1wiIDogXCJcIn0gYmctYWNjZW50MSB0ZXh0LXdoaXRlIHByb2R1Y3QtZm9ybV9fc3VibWl0IGJ1dHRvbiBidXR0b24tLWZ1bGwtd2lkdGggYnV0dG9uLS1wcmltYXJ5YH0gYXJpYS1kaXNhYmxlZD17aXNMb2FkaW5nfSBkaXNhYmxlZD17IXZhcmlhbnQuYXZhaWxhYmxlfT5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxzcGFuPnt2YXJpYW50LmF2YWlsYWJsZSA/IFwiQUREIFRPIENBUlRcIiA6IFwiU09MRCBPVVRcIn08L3NwYW4+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGxvYWRpbmctb3ZlcmxheV9fc3Bpbm5lciAke2lzTG9hZGluZyA/IFwiXCIgOiBcImhpZGRlblwifWB9IHJlZj17c3Bpbm5lclJlZn0+XG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgPHN2ZyBhcmlhLWhpZGRlbj1cInRydWVcIiBmb2N1c2FibGU9XCJmYWxzZVwiIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjbGFzc05hbWU9XCJzcGlubmVyXCIgdmlld0JveD1cIjAgMCA2NiA2NlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJwYXRoXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI2XCIgY3g9XCIzM1wiIGN5PVwiMzNcIiByPVwiMzBcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPGRpdiBjbGFzcz17YGNhcnRfX2R5bmFtaWMtY2hlY2tvdXQtYnV0dG9ucyBhZGRpdGlvbmFsLWNoZWNrb3V0LWJ1dHRvbnMgJHt2YXJpYW50LmF2YWlsYWJsZSA/IFwiXCIgOiBcImhpZGRlblwifWB9PlxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkeW5hbWljLWNoZWNrb3V0X19jb250ZW50XCIgaWQ9XCJkeW5hbWljLWNoZWNrb3V0LWNhcnRcIiBkYXRhLXNob3BpZnk9XCJkeW5hbWljLWNoZWNrb3V0LWNhcnRcIj48L2Rpdj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9kaXY+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8L2Zvcm0+XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDwvZGl2PlxuICApXG59XG5leHBvcnQgZGVmYXVsdCBGb3JtXG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGlja3VwQXZhaWxhYmlsaXR5KCkge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8cGlja3VwLWF2YWlsYWJpbGl0eSBjbGFzcz1cInByb2R1Y3RfX3BpY2t1cC1hdmFpbGFiaWxpdGllcyBuby1qcy1oaWRkZW5cIiBkYXRhLXJvb3QtdXJsPVwiL1wiIGRhdGEtdmFyaWFudC1pZD1cIjQyNTgyNDM1ODU2NjQyXCIgZGF0YS1oYXMtb25seS1kZWZhdWx0LXZhcmlhbnQ9XCJmYWxzZVwiPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPHRlbXBsYXRlPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxwaWNrdXAtYXZhaWxhYmlsaXR5LXByZXZpZXcgY2xhc3M9XCJwaWNrdXAtYXZhaWxhYmlsaXR5LXByZXZpZXdcIj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBmb2N1c2FibGU9XCJmYWxzZVwiIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjbGFzcz1cImljb24gaWNvbi11bmF2YWlsYWJsZVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxwYXRoIGZpbGw9XCIjREUzNjE4XCIgc3Ryb2tlPVwiI2ZmZlwiIGQ9XCJNMTMuOTQgMy45NEwxMCA3Ljg3OGwtMy45NC0zLjk0QTEuNDk5IDEuNDk5IDAgMTAzLjk0IDYuMDZMNy44OCAxMGwtMy45NCAzLjk0YTEuNDk5IDEuNDk5IDAgMTAyLjEyIDIuMTJMMTAgMTIuMTJsMy45NCAzLjk0YTEuNDk3IDEuNDk3IDAgMDAyLjEyIDAgMS40OTkgMS40OTkgMCAwMDAtMi4xMkwxMi4xMjIgMTBsMy45NC0zLjk0YTEuNDk5IDEuNDk5IDAgMTAtMi4xMjEtMi4xMnpcIj48L3BhdGg+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicGlja3VwLWF2YWlsYWJpbGl0eS1pbmZvXCI+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8cCBjbGFzcz1cImNhcHRpb24tbGFyZ2VcIj5Db3VsZG4ndCBsb2FkIHBpY2t1cCBhdmFpbGFiaWxpdHk8L3A+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGlja3VwLWF2YWlsYWJpbGl0eS1idXR0b24gbGluayBsaW5rLS10ZXh0IHVuZGVybGluZWQtbGlua1wiPlJlZnJlc2g8L2J1dHRvbj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9waWNrdXAtYXZhaWxhYmlsaXR5LXByZXZpZXc+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8L3RlbXBsYXRlPlxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8L3BpY2t1cC1hdmFpbGFiaWxpdHk+XG4gIClcbn0iLCAiaW1wb3J0IHsgbmV3VGFnQ2xhc3MsIHJlc3RvY2tUYWdDbGFzcyB9IGZyb20gXCIuL19UYWdTdG9yZVwiXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRhZyh7XG4gIHR5cGUsXG4gIGxhYmVsXG59OiBhbnkpIHtcbiAgY29uc3QgY2xhc3NOYW1lID0gdHlwZSA9PT0gXCJuZXdcIiA/IG5ld1RhZ0NsYXNzIDogcmVzdG9ja1RhZ0NsYXNzXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgcmV0dXJuIDxsYWJlbCBjbGFzc05hbWU9e2B0ZXh0LTEwIHB4LTQgcHktMSBpbmxpbmUtYmxvY2sgJHtjbGFzc05hbWV9YH0+e2xhYmVsID8/IHR5cGV9PC9sYWJlbD5cbn1cbiIsICJleHBvcnQgY29uc3QgbmV3VGFnQ2xhc3MgPSAnYmctWyNDQzZENzhdIHRleHQtd2hpdGUnXG5leHBvcnQgY29uc3QgcmVzdG9ja1RhZ0NsYXNzID0gJ2JvcmRlciBib3JkZXItbGluay1ncmF5J1xuIiwgImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInByZWFjdC9ob29rc1wiXG5pbXBvcnQgeyBzZWN0aW9uSWQgfSBmcm9tIFwiLi9fU2VjdGlvblN0b3JlXCJcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQWNjb3JkaW9uKHtcbiAgaWRcbn06IGFueSkge1xuICBjb25zdCBqc29uRWxtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXG4gIGlmICghanNvbkVsbSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgcmV0dXJuIDw+PC8+XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzMzkpOiBQcm9wZXJ0eSAndGV4dCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnSFRNTEVsZW1lbi4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgSlNPTi5wYXJzZShqc29uRWxtLnRleHQpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhpZClcbiAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICByZXR1cm4gPD48Lz5cbiAgfVxuICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDIzMzkpOiBQcm9wZXJ0eSAndGV4dCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnSFRNTEVsZW1lbi4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGpzb25FbG0udGV4dClcbiAgaWYgKCFqc29uIHx8ICFqc29uPy5jb250ZW50Py5sZW5ndGggfHwganNvbi5jb250ZW50LmpvaW4oXCJcIikgPT09IFwiXCIpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIHJldHVybiA8PjwvPlxuICB9XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBvblRvZ2dsZSA9IChlOiBhbnkpID0+IHNldElzT3BlbihlLnRhcmdldC5vcGVuKVxuICBjb25zdCBkZXRhaWxzSWQgPSBgRGV0YWlscy0ke2pzb24/LmlkfS0ke3NlY3Rpb25JZH1gXG4gIGNvbnN0IGNvbnRlbnRJZCA9IGBQcm9kdWN0QWNjb3JkaW9uLSR7anNvbj8uaWR9LSR7c2VjdGlvbklkfWBcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwcm9kdWN0X19hY2NvcmRpb24gYWNjb3JkaW9uXCI+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8ZGV0YWlscyBpZD17ZGV0YWlsc0lkfSBvcGVuPXtpc09wZW59IG9uVG9nZ2xlPXtvblRvZ2dsZX0gZGF0YS1pZD17aWR9PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxzdW1tYXJ5IHJvbGU9XCJidXR0b25cIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIiBhcmlhLWNvbnRyb2xzPXtjb250ZW50SWR9PlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN1bW1hcnlfX3RpdGxlXCI+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiaDQgYWNjb3JkaW9uX190aXRsZVwiPntqc29uLmhlYWRpbmd9PC9oMj5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC0xNiAgZmxleCBwbGFjZS1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPXtgJHtpc09wZW4gPyBcIlwiIDogXCJoaWRkZW5cIn1gfSB3aWR0aD1cIjE0XCIgaGVpZ2h0PVwiMlwiIHZpZXdCb3g9XCIwIDAgMTQgMlwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMCAxSDE0XCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT17YCR7aXNPcGVuID8gXCJoaWRkZW5cIiA6IFwiXCJ9YH0gd2lkdGg9XCIxNFwiIGhlaWdodD1cIjE0XCIgdmlld0JveD1cIjAgMCAxNCAxNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMCA3SDE0XCIgc3Ryb2tlPVwiYmxhY2tcIiAvPlxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNyAxNEw3IDBcIiBzdHJva2U9XCJibGFja1wiIC8+XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9zdW1tYXJ5PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWNjb3JkaW9uX19jb250ZW50IHJ0ZVwiIGlkPXtjb250ZW50SWR9IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDoganNvbj8uY29udGVudC5qb2luKFwiXCIpIH19PjwvZGl2PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPC9kZXRhaWxzPlxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwgImltcG9ydCB7IHVzZUF0b20sIFByb3ZpZGVyIH0gZnJvbSAnam90YWknXG5pbXBvcnQgeyBwcmljZUF0b20sIHByb2Nlc3NpbmdBdG9tIH0gZnJvbSAnLi4vLi4vX0F0b21zJ1xuaW1wb3J0IHsgc2VjdGlvbklkIH0gZnJvbSAnLi9fU2VjdGlvblN0b3JlJ1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByaWNlKCkge1xuICBjb25zdCBbcHJpY2VdID0gdXNlQXRvbShwcmljZUF0b20pXG4gIGNvbnN0IFtpc1Byb2Nlc3NpbmddID0gdXNlQXRvbShwcm9jZXNzaW5nQXRvbSlcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDxQcm92aWRlcj5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbm8tanMtaGlkZGVuICR7aXNQcm9jZXNzaW5nID8gJ29wYWNpdHktMjAgdHJhbnNpdGlvbi1vcGFjaXR5JyA6ICcnIH1gfSBpZD17YHByaWNlLSR7c2VjdGlvbklkfWB9IHJvbGU9XCJzdGF0dXNcIj5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8ZGl2IGNsYXNzPXtgcHJpY2UgJHtwcmljZS5wcmljZV9jbGFzc30gJHtwcmljZS5hdmFpbGFibGUgPyAnJyA6ICdwcmljZS0tc29sZC1vdXQnfSAke3ByaWNlLmNvbXBhcmVfYXRfcHJpY2UgPiBwcmljZS5wcmljZSA/ICdwcmljZS0tb24tc2FsZScgOiAnJ30gJHtwcmljZS5wcmljZV92YXJpZXMgPT09IGZhbHNlICYmIHByaWNlLmNvbXBhcmVfYXRfcHJpY2VfdmFyaWVzID8gJ3ByaWNlLS1uby1jb21wYXJlJyA6ICcnfSAke3ByaWNlLnNob3dfYmFkZ2VzID8gJ3ByaWNlLS1zaG93LWJhZGdlJyA6ICcnfWB9PlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByaWNlX19jb250YWluZXJcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJpY2VfX3JlZ3VsYXJcIj5cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ2aXN1YWxseS1oaWRkZW4gdmlzdWFsbHktaGlkZGVuLS1pbmxpbmVcIj57cHJpY2UucmVndWxhcl9wcmljZX08L3NwYW4+XG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJpY2UtaXRlbSBwcmljZS1pdGVtLS1yZWd1bGFyXCI+eyAocHJpY2UucHJpY2UgLyAxMDApLnRvTG9jYWxlU3RyaW5nKCdqYS1KUCcsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnSlBZJyB9KSB9PC9zcGFuPlxuICAgICAgICAgICAgICB7ICggcHJpY2UudGF4ZXNfaW5jbHVkZWQgfHwgcHJpY2UuaGFzX3NoaXBwaW5nX3BvbGljeV9ib2R5ICkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcm9kdWN0X190YXggY2FwdGlvbiBydGUgcGwtMVwiPlxuICAgICAgICAgICAgICAgICAge3ByaWNlLnRheGVzX2luY2x1ZGVkID8gJyhcdTdBMEVcdThGQkMpJyA6ICcnfVxuICAgICAgICAgICAgICAgICAge3ByaWNlLmhhc19zaGlwcGluZ19wb2xpY3lfYm9keSA/IHByaWNlLnNoaXBwaW5nX3BvbGljeV9odG1sIDogJyd9XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8L2Rpdj5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgIDwvUHJvdmlkZXI+XG4gIClcbn0iLCAiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdwcmVhY3QvaG9va3MnXG5pbXBvcnQgeyB1c2VBdG9tIH0gZnJvbSAnam90YWknXG5pbXBvcnQgeyB2YXJpYW50QXRvbSB9IGZyb20gJy4uLy4uL19BdG9tcydcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGb3JtSW5zdGFsbG1lbnQoKSB7XG4gIGNvbnN0IGlkUmVmID0gdXNlUmVmKG51bGwpXG4gIGNvbnN0IFt2YXJpYW50XSA9IHVzZUF0b20odmFyaWFudEF0b20pXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMxKTogT2JqZWN0IGlzIHBvc3NpYmx5ICdudWxsJy5cbiAgICBpZFJlZi5jdXJyZW50LnZhbHVlID0gdmFyaWFudD8uaWRcbiAgfSwgW3ZhcmlhbnRdKVxuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8Zm9ybSBtZXRob2Q9XCJwb3N0XCIgYWN0aW9uPVwiL2NhcnQvYWRkXCIgaWQ9XCJwcm9kdWN0LWZvcm0taW5zdGFsbG1lbnRcIiBhY2NlcHQtY2hhcnNldD1cIlVURi04XCIgY2xhc3M9XCJpbnN0YWxsbWVudCBjYXB0aW9uLWxhcmdlXCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj5cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImZvcm1fdHlwZVwiIHZhbHVlPVwicHJvZHVjdFwiIC8+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ1dGY4XCIgdmFsdWU9XCJcdTI3MTNcIiAvPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiaWRcIiB2YWx1ZT17dmFyaWFudD8uaWR9IHJlZj17aWRSZWZ9IC8+XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDwvZm9ybT5cbiAgKVxufVxuIiwgImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicHJlYWN0L2hvb2tzXCJcbmltcG9ydCB7IHVzZUF0b20sIFByb3ZpZGVyIH0gZnJvbSBcImpvdGFpXCJcbmltcG9ydCB7IHZhcmlhbnRBdG9tIH0gZnJvbSBcIi4uLy4uL19BdG9tc1wiXG5pbXBvcnQgeyBwcm9kdWN0IH0gZnJvbSBcIi4vX1Byb2R1Y3RTdG9yZVwiXG5pbXBvcnQgeyBnZXRNZWRpYVdpdGhWYXJpYW50cyB9IGZyb20gXCIuL19NZWRpYVN0b3JlXCJcbi8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAxNik6IENvdWxkIG5vdCBmaW5kIGEgZGVjbGFyYXRpb24gZmlsZSBmb3IgbW9kdWxlICcuLi8uLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3RhaWx3aW5kLmNvbmZpZy5janNcIlxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19UaHVtcycgd2FzIHJlc29sdmVkIHRvICcvVXNlcnMvS2F6dWhvSXMuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IFRodW1zIGZyb20gXCIuL19UaHVtc1wiXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDYxNDIpOiBNb2R1bGUgJy4vX1ByZXZpZXcnIHdhcyByZXNvbHZlZCB0byAnL1VzZXJzL0thenVoby4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG5pbXBvcnQgUHJldmlldyBmcm9tIFwiLi9fUHJldmlld1wiXG5cbi8vIEltcG9ydCBTd2lwZXIgc3R5bGVzXG5pbXBvcnQgXCJzd2lwZXIvY3NzXCJcbmltcG9ydCBcInN3aXBlci9jc3MvZnJlZS1tb2RlXCJcbmltcG9ydCBcInN3aXBlci9jc3MvbmF2aWdhdGlvblwiXG5pbXBvcnQgXCJzd2lwZXIvY3NzL3RodW1ic1wiXG5pbXBvcnQgXCIuLi8uLi8uLi9jc3Mvc3R5bGVzLmNzc1wiXG5cbmZ1bmN0aW9uIHJlc29sdXRpb24oKSB7XG4gIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGhcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gR2FsbGVyeSgpIHtcbiAgY29uc3QgW3ZhcmlhbnRdID0gdXNlQXRvbSh2YXJpYW50QXRvbSlcbiAgY29uc3QgaXNNb2JpbGUgPSByZXNvbHV0aW9uKCkgPD0gcGFyc2VJbnQodGhlbWUuc2NyZWVucy5zbS5zbGljZSgwLCAtMikpXG4gIGlmICghcHJvZHVjdD8ubWVkaWE/Lmxlbmd0aCkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgcmV0dXJuIDw+PC8+XG4gIH1cbiAgY29uc3QgW3ByZXZpZXdTd2lwZXIsIHNldFByZXZpZXdTd2lwZXJdID0gdXNlU3RhdGUobnVsbClcbiAgY29uc3QgW3RodW1ic1N3aXBlciwgc2V0VGh1bWJzU3dpcGVyXSA9IHVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IGltYWdlcyA9IGdldE1lZGlhV2l0aFZhcmlhbnRzKClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMDYpOiBQYXJhbWV0ZXIgJ2ltYWdlJyBpbXBsaWNpdGx5IGhhcyBhbiAnYW55JyB0eXBlLlxuICAgIGNvbnN0IGluZGV4ID0gaW1hZ2VzLmluZGV4T2YoaW1hZ2VzLmZpbmQoKGltYWdlKSA9PiBpbWFnZS52YXJpYW50X2lkcz8uaW5jbHVkZXModmFyaWFudC5pZCkpKVxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuICAgIHByZXZpZXdTd2lwZXIuc2xpZGVUbyhpbmRleClcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDI1MzEpOiBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnLlxuICAgIHRodW1ic1N3aXBlci5zbGlkZVRvKGluZGV4KVxuICB9LCBbdmFyaWFudF0pXG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8UHJvdmlkZXI+XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zcGFuLTEgbWQ6Y29sLXNwYW4tNyBmbGV4IGp1c3RpZnktZW5kIGl0ZW1zLWNlbnRlciBtZDppdGVtcy1zdGFydCByZWxhdGl2ZSB0b3AtWzNyZW1dIHRvcC1hdXRvIHotWzJdIHctZnVsbCBtYXgtaC1bY2FsYyg5MHZoLTQuNHJlbSldIGZsZXgtY29sLXJldmVyc2VcIj5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPFRodW1zIGlzTW9iaWxlPXtpc01vYmlsZX0gaW1hZ2VzPXtpbWFnZXN9IG9uU3dpcGVyPXtzZXRUaHVtYnNTd2lwZXJ9IHByZXY9eygpID0+IHByZXZpZXdTd2lwZXIuc2xpZGVQcmV2KCl9IG5leHQ9eygpID0+IHByZXZpZXdTd2lwZXIuc2xpZGVOZXh0KCl9IC8+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZSB3LVsyJV0gc2hyaW5rLTAgYmxvY2sgZW1wdHk6YmxvY2sgaGlkZGVuIGVtcHR5OmhpZGRlblwiPjwvZGl2PlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICA8UHJldmlldyBpc01vYmlsZT17aXNNb2JpbGV9IGltYWdlcz17aW1hZ2VzfSB0aHVtYnM9e3sgc3dpcGVyOiB0aHVtYnNTd2lwZXIgfX0gb25Td2lwZXI9e3NldFByZXZpZXdTd2lwZXJ9IC8+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgIDwvUHJvdmlkZXI+XG4gIClcbn1cbiIsICJpbXBvcnQgeyBhdmFpbGFibGVWYXJpYW50IH0gZnJvbSAnLi9fUHJvZHVjdFN0b3JlJ1xuaW1wb3J0IHsgdmFyaWFudEltYWdlcyB9IGZyb20gJy4vX1ZhcmlhbnRTdG9yZSdcblxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUygyNTMxKTogT2JqZWN0IGlzIHBvc3NpYmx5ICdudWxsJy5cbmV4cG9ydCBjb25zdCBtZWRpYXMgPSBKU09OLnBhcnNlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5saW5lLWpzb24tcHJvZHVjdC1tZWRpYXNcIikudGV4dClcbmV4cG9ydCBjb25zdCBnZXRNZWRpYVdpdGhWYXJpYW50cyA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBpbWFnZXM6IGFueSA9IFtdXG4gIGlmKCBhdmFpbGFibGVWYXJpYW50ICYmIGF2YWlsYWJsZVZhcmlhbnQ/LmZlYXR1cmVkX21lZGlhICkge1xuICAgIGltYWdlcy5wdXNoKHtcbiAgICAgIC4uLmF2YWlsYWJsZVZhcmlhbnQuZmVhdHVyZWRfbWVkaWEsXG4gICAgICB2YXJpYW50X2lkOiBhdmFpbGFibGVWYXJpYW50LmlkLFxuICAgICAgdmFyaWFudDogYXZhaWxhYmxlVmFyaWFudCxcbiAgICB9KVxuICB9XG4gIG1lZGlhcy5mb3JFYWNoKCAobWVkaWE6IGFueSkgPT4ge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAzMSk6IEJpbmRpbmcgZWxlbWVudCAnaWQnIGltcGxpY2l0bHkgaGFzIGFuICdhbnknIHR5cGUuXG4gICAgaWYoIGltYWdlcy5maWx0ZXIoICh7aWR9KSA9PiBpZCA9PT0gbWVkaWEuaWQgKT8ubGVuZ3RoICE9PSAwICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHZhcmlhbnRJbWFnZSA9IHZhcmlhbnRJbWFnZXMuZmluZCggKHtcbiAgICAgIHNyY1xuICAgIH06IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHNyYyA9PT0gbWVkaWEucHJldmlld19pbWFnZS5zcmNcbiAgICB9IClcbiAgICBpbWFnZXMucHVzaCh7XG4gICAgICAuLi5tZWRpYSxcbiAgICAgIHZhcmlhbnRfaWQ6IHZhcmlhbnRJbWFnZT8udmFyaWFudF9pZCxcbiAgICAgIHZhcmlhbnRfaWRzOiB2YXJpYW50SW1hZ2U/LnZhcmlhbnRfaWRzLFxuICAgICAgdmFyaWFudDogdmFyaWFudEltYWdlLFxuICAgIH0pXG4gIH0pXG4gIHJldHVybiBpbWFnZXNcbn1cbiIsICJpbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicHJlYWN0L2hvb2tzXCJcbmltcG9ydCB7IE5hdmlnYXRpb24sIFRodW1icyB9IGZyb20gXCJzd2lwZXJcIlxuaW1wb3J0IHsgU3dpcGVyLCBTd2lwZXJTbGlkZSB9IGZyb20gXCJzd2lwZXIvcmVhY3RcIlxuXG5jb25zdCBhcnJvd0NsYXNzTmFtZSA9IGBlbXB0eTpmbGV4IHJlbGF0aXZlIHRvcC1hdXRvIGJvdHRvbS1hdXRvIGxlZnQtYXV0byB6LVsxMF0gY3Vyc29yLXBvaW50ZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYWZ0ZXI6Y29udGVudC1ub25lIHJlbGF0aXZlIGJlZm9yZTpjb250ZW50LVsnJ10gYmVmb3JlOmFic29sdXRlIGJlZm9yZTp3LVszMDAlXSBiZWZvcmU6aC1bMzAwJV1gXG5cbmZ1bmN0aW9uIFByZXZBcnJvdyh7XG4gIG9uQ2xpY2tcbn06IGFueSkge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8YnV0dG9uIGNsYXNzTmFtZT17YXJyb3dDbGFzc05hbWV9IG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMTJcIiB2aWV3Qm94PVwiMCAwIDIwIDEyXCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPHBhdGggZD1cIk0xIDExTDEwIDJMMTkgMTFcIiBzdHJva2U9XCJibGFja1wiIHN0cm9rZS13aWR0aD1cIjJcIiAvPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPC9zdmc+XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDwvYnV0dG9uPlxuICApXG59XG5cbmZ1bmN0aW9uIE5leHRBcnJvdyh7XG4gIG9uQ2xpY2tcbn06IGFueSkge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8YnV0dG9uIGNsYXNzTmFtZT17YXJyb3dDbGFzc05hbWV9IG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMTJcIiB2aWV3Qm94PVwiMCAwIDIwIDEyXCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPHBhdGggZD1cIk0xOSAxTDEwIDEwTDAuOTk5OTk5IDFcIiBzdHJva2U9XCJibGFja1wiIHN0cm9rZS13aWR0aD1cIjJcIiAvPlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPC9zdmc+XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgIDwvYnV0dG9uPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRodW1zKHtcbiAgaW1hZ2VzLFxuICBvblN3aXBlcixcbiAgcHJldixcbiAgbmV4dCxcbiAgaXNNb2JpbGVcbn06IGFueSkge1xuICBjb25zdCBwcmV2QXJyb3cgPSB1c2VSZWYobnVsbClcbiAgY29uc3QgbmV4dEFycm93ID0gdXNlUmVmKG51bGwpXG4gIGNvbnN0IHNsaWRlc1BlclZpZXcgPSBpc01vYmlsZSA/IDcgOiA2XG4gIGNvbnN0IG5hdmlnYXRpb24gPSBpc01vYmlsZVxuICAgID8gZmFsc2VcbiAgICA6IHtcbiAgICAgICAgcHJldkVsOiBwcmV2QXJyb3cuY3VycmVudCxcbiAgICAgICAgbmV4dEVsOiBuZXh0QXJyb3cuY3VycmVudCxcbiAgICAgIH1cbiAgY29uc3QgbW9kdWxlcyA9IGlzTW9iaWxlID8gW1RodW1ic10gOiBbTmF2aWdhdGlvbiwgVGh1bWJzXVxuICByZXR1cm4gaW1hZ2VzLmxlbmd0aCA+IDEgPyAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZSB3LVs4JV0gc2hyaW5rLTAgYmxvY2sgZW1wdHk6YmxvY2sgaGlkZGVuIGVtcHR5OmhpZGRlblwiPjwvZGl2PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IG1kOmZsZXgtY29sIGl0ZW1zLWNlbnRlciBzaHJpbmstMCBnYXAteS1bMTZweF0gdy1mdWxsIG1kOnctWzIwJV0gaC1tYXggbWF4LWgtWzgwdmhdIG1kOmgtW2NhbGMoMzV2dyoxLjQyNSldIHB0LTQgcmVsYXRpdmUgbWQ6c3RpY2t5IHRvcC1hdXRvIG1kOnRvcC0xMlwiPlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDE3MDA0KTogQ2Fubm90IHVzZSBKU1ggdW5sZXNzIHRoZSAnLS1qc3gnIGZsYWcgaXMgcHJvdmlkZWQuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICB7IWlzTW9iaWxlICYmIDxQcmV2QXJyb3cgcmVmPXtwcmV2QXJyb3d9IG9uQ2xpY2s9eygpID0+IHByZXYoKX0gLz59XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIDxTd2lwZXIgb25Td2lwZXI9e29uU3dpcGVyfSBkaXJlY3Rpb249e2lzTW9iaWxlID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCJ9IHNsaWRlc1BlclZpZXc9e3NsaWRlc1BlclZpZXd9IG1vZHVsZXM9e21vZHVsZXN9IHdhdGNoU2xpZGVzUHJvZ3Jlc3M9e3RydWV9IHNwYWNlQmV0d2Vlbj17MTB9IGNsYXNzTmFtZT1cIm15U3dpcGVyIGgtZnVsbCB3LWZ1bGxcIiBuYXZpZ2F0aW9uPXtuYXZpZ2F0aW9ufT5cbiAgICAgICAgICB7aW1hZ2VzLm1hcCgoaW1hZ2U6IGFueSwgaW5kZXg6IGFueSkgPT4gKFxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIDxTd2lwZXJTbGlkZSBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCIhaC1tYXggY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2U/LnByZXZpZXdfaW1hZ2Uuc3JjfSBhbHQ9e2ltYWdlPy5hbHQgPz8gaW5kZXh9IGNsYXNzTmFtZT1cIm9iamVjdC1jb250YWluIHctZnVsbCBoLWZ1bGwgaC1hdXRvXCIgbG9hZGluZz1cImxhenlcIiBkZWNvZGluZz1cImFzeW5jXCIgZGF0YS1oYXNoPXtpbWFnZS5wcmV2aWV3X2ltYWdlLmlkfSAvPlxuICAgICAgICAgICAgPC9Td2lwZXJTbGlkZT5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9Td2lwZXI+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgIHshaXNNb2JpbGUgJiYgPE5leHRBcnJvdyByZWY9e25leHRBcnJvd30gb25DbGljaz17KCkgPT4gbmV4dCgpfSAvPn1cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApIDogbnVsbDtcbn1cbiIsICIvKipcbiAqIFN3aXBlciA4LjAuN1xuICogTW9zdCBtb2Rlcm4gbW9iaWxlIHRvdWNoIHNsaWRlciBhbmQgZnJhbWV3b3JrIHdpdGggaGFyZHdhcmUgYWNjZWxlcmF0ZWQgdHJhbnNpdGlvbnNcbiAqIGh0dHBzOi8vc3dpcGVyanMuY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMTQtMjAyMiBWbGFkaW1pciBLaGFybGFtcGlkaVxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICpcbiAqIFJlbGVhc2VkIG9uOiBNYXJjaCA0LCAyMDIyXG4gKi9cblxuZXhwb3J0IHsgZGVmYXVsdCBhcyBTd2lwZXIsIGRlZmF1bHQgfSBmcm9tICcuL2NvcmUvY29yZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFZpcnR1YWwgfSBmcm9tICcuL21vZHVsZXMvdmlydHVhbC92aXJ0dWFsLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgS2V5Ym9hcmQgfSBmcm9tICcuL21vZHVsZXMva2V5Ym9hcmQva2V5Ym9hcmQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZXdoZWVsIH0gZnJvbSAnLi9tb2R1bGVzL21vdXNld2hlZWwvbW91c2V3aGVlbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE5hdmlnYXRpb24gfSBmcm9tICcuL21vZHVsZXMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGFnaW5hdGlvbiB9IGZyb20gJy4vbW9kdWxlcy9wYWdpbmF0aW9uL3BhZ2luYXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTY3JvbGxiYXIgfSBmcm9tICcuL21vZHVsZXMvc2Nyb2xsYmFyL3Njcm9sbGJhci5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBhcmFsbGF4IH0gZnJvbSAnLi9tb2R1bGVzL3BhcmFsbGF4L3BhcmFsbGF4LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbSB9IGZyb20gJy4vbW9kdWxlcy96b29tL3pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBMYXp5IH0gZnJvbSAnLi9tb2R1bGVzL2xhenkvbGF6eS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIENvbnRyb2xsZXIgfSBmcm9tICcuL21vZHVsZXMvY29udHJvbGxlci9jb250cm9sbGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQTExeSB9IGZyb20gJy4vbW9kdWxlcy9hMTF5L2ExMXkuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBIaXN0b3J5IH0gZnJvbSAnLi9tb2R1bGVzL2hpc3RvcnkvaGlzdG9yeS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEhhc2hOYXZpZ2F0aW9uIH0gZnJvbSAnLi9tb2R1bGVzL2hhc2gtbmF2aWdhdGlvbi9oYXNoLW5hdmlnYXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBBdXRvcGxheSB9IGZyb20gJy4vbW9kdWxlcy9hdXRvcGxheS9hdXRvcGxheS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFRodW1icyB9IGZyb20gJy4vbW9kdWxlcy90aHVtYnMvdGh1bWJzLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRnJlZU1vZGUgfSBmcm9tICcuL21vZHVsZXMvZnJlZS1tb2RlL2ZyZWUtbW9kZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEdyaWQgfSBmcm9tICcuL21vZHVsZXMvZ3JpZC9ncmlkLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTWFuaXB1bGF0aW9uIH0gZnJvbSAnLi9tb2R1bGVzL21hbmlwdWxhdGlvbi9tYW5pcHVsYXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFZmZlY3RGYWRlIH0gZnJvbSAnLi9tb2R1bGVzL2VmZmVjdC1mYWRlL2VmZmVjdC1mYWRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRWZmZWN0Q3ViZSB9IGZyb20gJy4vbW9kdWxlcy9lZmZlY3QtY3ViZS9lZmZlY3QtY3ViZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEVmZmVjdEZsaXAgfSBmcm9tICcuL21vZHVsZXMvZWZmZWN0LWZsaXAvZWZmZWN0LWZsaXAuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFZmZlY3RDb3ZlcmZsb3cgfSBmcm9tICcuL21vZHVsZXMvZWZmZWN0LWNvdmVyZmxvdy9lZmZlY3QtY292ZXJmbG93LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRWZmZWN0Q3JlYXRpdmUgfSBmcm9tICcuL21vZHVsZXMvZWZmZWN0LWNyZWF0aXZlL2VmZmVjdC1jcmVhdGl2ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEVmZmVjdENhcmRzIH0gZnJvbSAnLi9tb2R1bGVzL2VmZmVjdC1jYXJkcy9lZmZlY3QtY2FyZHMuanMnOyIsICIvKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IFwib2ZmXCIgKi9cbmltcG9ydCB7IGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5pbXBvcnQgJCBmcm9tICcuLi9zaGFyZWQvZG9tLmpzJztcbmltcG9ydCB7IGV4dGVuZCwgbm93LCBkZWxldGVQcm9wcyB9IGZyb20gJy4uL3NoYXJlZC91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXRTdXBwb3J0IH0gZnJvbSAnLi4vc2hhcmVkL2dldC1zdXBwb3J0LmpzJztcbmltcG9ydCB7IGdldERldmljZSB9IGZyb20gJy4uL3NoYXJlZC9nZXQtZGV2aWNlLmpzJztcbmltcG9ydCB7IGdldEJyb3dzZXIgfSBmcm9tICcuLi9zaGFyZWQvZ2V0LWJyb3dzZXIuanMnO1xuaW1wb3J0IFJlc2l6ZSBmcm9tICcuL21vZHVsZXMvcmVzaXplL3Jlc2l6ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnLi9tb2R1bGVzL29ic2VydmVyL29ic2VydmVyLmpzJztcbmltcG9ydCBldmVudHNFbWl0dGVyIGZyb20gJy4vZXZlbnRzLWVtaXR0ZXIuanMnO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICcuL3VwZGF0ZS9pbmRleC5qcyc7XG5pbXBvcnQgdHJhbnNsYXRlIGZyb20gJy4vdHJhbnNsYXRlL2luZGV4LmpzJztcbmltcG9ydCB0cmFuc2l0aW9uIGZyb20gJy4vdHJhbnNpdGlvbi9pbmRleC5qcyc7XG5pbXBvcnQgc2xpZGUgZnJvbSAnLi9zbGlkZS9pbmRleC5qcyc7XG5pbXBvcnQgbG9vcCBmcm9tICcuL2xvb3AvaW5kZXguanMnO1xuaW1wb3J0IGdyYWJDdXJzb3IgZnJvbSAnLi9ncmFiLWN1cnNvci9pbmRleC5qcyc7XG5pbXBvcnQgZXZlbnRzIGZyb20gJy4vZXZlbnRzL2luZGV4LmpzJztcbmltcG9ydCBicmVha3BvaW50cyBmcm9tICcuL2JyZWFrcG9pbnRzL2luZGV4LmpzJztcbmltcG9ydCBjbGFzc2VzIGZyb20gJy4vY2xhc3Nlcy9pbmRleC5qcyc7XG5pbXBvcnQgaW1hZ2VzIGZyb20gJy4vaW1hZ2VzL2luZGV4LmpzJztcbmltcG9ydCBjaGVja092ZXJmbG93IGZyb20gJy4vY2hlY2stb3ZlcmZsb3cvaW5kZXguanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IG1vZHVsZUV4dGVuZFBhcmFtcyBmcm9tICcuL21vZHVsZUV4dGVuZFBhcmFtcy5qcyc7XG5jb25zdCBwcm90b3R5cGVzID0ge1xuICBldmVudHNFbWl0dGVyLFxuICB1cGRhdGUsXG4gIHRyYW5zbGF0ZSxcbiAgdHJhbnNpdGlvbixcbiAgc2xpZGUsXG4gIGxvb3AsXG4gIGdyYWJDdXJzb3IsXG4gIGV2ZW50cyxcbiAgYnJlYWtwb2ludHMsXG4gIGNoZWNrT3ZlcmZsb3csXG4gIGNsYXNzZXMsXG4gIGltYWdlc1xufTtcbmNvbnN0IGV4dGVuZGVkRGVmYXVsdHMgPSB7fTtcblxuY2xhc3MgU3dpcGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IGVsO1xuICAgIGxldCBwYXJhbXM7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIGFyZ3NbMF0uY29uc3RydWN0b3IgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3NbMF0pLnNsaWNlKDgsIC0xKSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHBhcmFtcyA9IGFyZ3NbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIFtlbCwgcGFyYW1zXSA9IGFyZ3M7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMpIHBhcmFtcyA9IHt9O1xuICAgIHBhcmFtcyA9IGV4dGVuZCh7fSwgcGFyYW1zKTtcbiAgICBpZiAoZWwgJiYgIXBhcmFtcy5lbCkgcGFyYW1zLmVsID0gZWw7XG5cbiAgICBpZiAocGFyYW1zLmVsICYmICQocGFyYW1zLmVsKS5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBzd2lwZXJzID0gW107XG4gICAgICAkKHBhcmFtcy5lbCkuZWFjaChjb250YWluZXJFbCA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IGV4dGVuZCh7fSwgcGFyYW1zLCB7XG4gICAgICAgICAgZWw6IGNvbnRhaW5lckVsXG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXJzLnB1c2gobmV3IFN3aXBlcihuZXdQYXJhbXMpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN3aXBlcnM7XG4gICAgfSAvLyBTd2lwZXIgSW5zdGFuY2VcblxuXG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBzd2lwZXIuX19zd2lwZXJfXyA9IHRydWU7XG4gICAgc3dpcGVyLnN1cHBvcnQgPSBnZXRTdXBwb3J0KCk7XG4gICAgc3dpcGVyLmRldmljZSA9IGdldERldmljZSh7XG4gICAgICB1c2VyQWdlbnQ6IHBhcmFtcy51c2VyQWdlbnRcbiAgICB9KTtcbiAgICBzd2lwZXIuYnJvd3NlciA9IGdldEJyb3dzZXIoKTtcbiAgICBzd2lwZXIuZXZlbnRzTGlzdGVuZXJzID0ge307XG4gICAgc3dpcGVyLmV2ZW50c0FueUxpc3RlbmVycyA9IFtdO1xuICAgIHN3aXBlci5tb2R1bGVzID0gWy4uLnN3aXBlci5fX21vZHVsZXNfX107XG5cbiAgICBpZiAocGFyYW1zLm1vZHVsZXMgJiYgQXJyYXkuaXNBcnJheShwYXJhbXMubW9kdWxlcykpIHtcbiAgICAgIHN3aXBlci5tb2R1bGVzLnB1c2goLi4ucGFyYW1zLm1vZHVsZXMpO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbE1vZHVsZXNQYXJhbXMgPSB7fTtcbiAgICBzd2lwZXIubW9kdWxlcy5mb3JFYWNoKG1vZCA9PiB7XG4gICAgICBtb2Qoe1xuICAgICAgICBzd2lwZXIsXG4gICAgICAgIGV4dGVuZFBhcmFtczogbW9kdWxlRXh0ZW5kUGFyYW1zKHBhcmFtcywgYWxsTW9kdWxlc1BhcmFtcyksXG4gICAgICAgIG9uOiBzd2lwZXIub24uYmluZChzd2lwZXIpLFxuICAgICAgICBvbmNlOiBzd2lwZXIub25jZS5iaW5kKHN3aXBlciksXG4gICAgICAgIG9mZjogc3dpcGVyLm9mZi5iaW5kKHN3aXBlciksXG4gICAgICAgIGVtaXQ6IHN3aXBlci5lbWl0LmJpbmQoc3dpcGVyKVxuICAgICAgfSk7XG4gICAgfSk7IC8vIEV4dGVuZCBkZWZhdWx0cyB3aXRoIG1vZHVsZXMgcGFyYW1zXG5cbiAgICBjb25zdCBzd2lwZXJQYXJhbXMgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBhbGxNb2R1bGVzUGFyYW1zKTsgLy8gRXh0ZW5kIGRlZmF1bHRzIHdpdGggcGFzc2VkIHBhcmFtc1xuXG4gICAgc3dpcGVyLnBhcmFtcyA9IGV4dGVuZCh7fSwgc3dpcGVyUGFyYW1zLCBleHRlbmRlZERlZmF1bHRzLCBwYXJhbXMpO1xuICAgIHN3aXBlci5vcmlnaW5hbFBhcmFtcyA9IGV4dGVuZCh7fSwgc3dpcGVyLnBhcmFtcyk7XG4gICAgc3dpcGVyLnBhc3NlZFBhcmFtcyA9IGV4dGVuZCh7fSwgcGFyYW1zKTsgLy8gYWRkIGV2ZW50IGxpc3RlbmVyc1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMgJiYgc3dpcGVyLnBhcmFtcy5vbikge1xuICAgICAgT2JqZWN0LmtleXMoc3dpcGVyLnBhcmFtcy5vbikuZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICBzd2lwZXIub24oZXZlbnROYW1lLCBzd2lwZXIucGFyYW1zLm9uW2V2ZW50TmFtZV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMgJiYgc3dpcGVyLnBhcmFtcy5vbkFueSkge1xuICAgICAgc3dpcGVyLm9uQW55KHN3aXBlci5wYXJhbXMub25BbnkpO1xuICAgIH0gLy8gU2F2ZSBEb20gbGliXG5cblxuICAgIHN3aXBlci4kID0gJDsgLy8gRXh0ZW5kIFN3aXBlclxuXG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgIGVuYWJsZWQ6IHN3aXBlci5wYXJhbXMuZW5hYmxlZCxcbiAgICAgIGVsLFxuICAgICAgLy8gQ2xhc3Nlc1xuICAgICAgY2xhc3NOYW1lczogW10sXG4gICAgICAvLyBTbGlkZXNcbiAgICAgIHNsaWRlczogJCgpLFxuICAgICAgc2xpZGVzR3JpZDogW10sXG4gICAgICBzbmFwR3JpZDogW10sXG4gICAgICBzbGlkZXNTaXplc0dyaWQ6IFtdLFxuXG4gICAgICAvLyBpc0RpcmVjdGlvblxuICAgICAgaXNIb3Jpem9udGFsKCkge1xuICAgICAgICByZXR1cm4gc3dpcGVyLnBhcmFtcy5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgIH0sXG5cbiAgICAgIGlzVmVydGljYWwoKSB7XG4gICAgICAgIHJldHVybiBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJztcbiAgICAgIH0sXG5cbiAgICAgIC8vIEluZGV4ZXNcbiAgICAgIGFjdGl2ZUluZGV4OiAwLFxuICAgICAgcmVhbEluZGV4OiAwLFxuICAgICAgLy9cbiAgICAgIGlzQmVnaW5uaW5nOiB0cnVlLFxuICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgLy8gUHJvcHNcbiAgICAgIHRyYW5zbGF0ZTogMCxcbiAgICAgIHByZXZpb3VzVHJhbnNsYXRlOiAwLFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICB2ZWxvY2l0eTogMCxcbiAgICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgICAvLyBMb2Nrc1xuICAgICAgYWxsb3dTbGlkZU5leHQ6IHN3aXBlci5wYXJhbXMuYWxsb3dTbGlkZU5leHQsXG4gICAgICBhbGxvd1NsaWRlUHJldjogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlUHJldixcbiAgICAgIC8vIFRvdWNoIEV2ZW50c1xuICAgICAgdG91Y2hFdmVudHM6IGZ1bmN0aW9uIHRvdWNoRXZlbnRzKCkge1xuICAgICAgICBjb25zdCB0b3VjaCA9IFsndG91Y2hzdGFydCcsICd0b3VjaG1vdmUnLCAndG91Y2hlbmQnLCAndG91Y2hjYW5jZWwnXTtcbiAgICAgICAgY29uc3QgZGVza3RvcCA9IFsncG9pbnRlcmRvd24nLCAncG9pbnRlcm1vdmUnLCAncG9pbnRlcnVwJ107XG4gICAgICAgIHN3aXBlci50b3VjaEV2ZW50c1RvdWNoID0ge1xuICAgICAgICAgIHN0YXJ0OiB0b3VjaFswXSxcbiAgICAgICAgICBtb3ZlOiB0b3VjaFsxXSxcbiAgICAgICAgICBlbmQ6IHRvdWNoWzJdLFxuICAgICAgICAgIGNhbmNlbDogdG91Y2hbM11cbiAgICAgICAgfTtcbiAgICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGVza3RvcCA9IHtcbiAgICAgICAgICBzdGFydDogZGVza3RvcFswXSxcbiAgICAgICAgICBtb3ZlOiBkZXNrdG9wWzFdLFxuICAgICAgICAgIGVuZDogZGVza3RvcFsyXVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc3dpcGVyLnN1cHBvcnQudG91Y2ggfHwgIXN3aXBlci5wYXJhbXMuc2ltdWxhdGVUb3VjaCA/IHN3aXBlci50b3VjaEV2ZW50c1RvdWNoIDogc3dpcGVyLnRvdWNoRXZlbnRzRGVza3RvcDtcbiAgICAgIH0oKSxcbiAgICAgIHRvdWNoRXZlbnRzRGF0YToge1xuICAgICAgICBpc1RvdWNoZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNNb3ZlZDogdW5kZWZpbmVkLFxuICAgICAgICBhbGxvd1RvdWNoQ2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgIHRvdWNoU3RhcnRUaW1lOiB1bmRlZmluZWQsXG4gICAgICAgIGlzU2Nyb2xsaW5nOiB1bmRlZmluZWQsXG4gICAgICAgIGN1cnJlbnRUcmFuc2xhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhcnRUcmFuc2xhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgYWxsb3dUaHJlc2hvbGRNb3ZlOiB1bmRlZmluZWQsXG4gICAgICAgIC8vIEZvcm0gZWxlbWVudHMgdG8gbWF0Y2hcbiAgICAgICAgZm9jdXNhYmxlRWxlbWVudHM6IHN3aXBlci5wYXJhbXMuZm9jdXNhYmxlRWxlbWVudHMsXG4gICAgICAgIC8vIExhc3QgY2xpY2sgdGltZVxuICAgICAgICBsYXN0Q2xpY2tUaW1lOiBub3coKSxcbiAgICAgICAgY2xpY2tUaW1lb3V0OiB1bmRlZmluZWQsXG4gICAgICAgIC8vIFZlbG9jaXRpZXNcbiAgICAgICAgdmVsb2NpdGllczogW10sXG4gICAgICAgIGFsbG93TW9tZW50dW1Cb3VuY2U6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNUb3VjaEV2ZW50OiB1bmRlZmluZWQsXG4gICAgICAgIHN0YXJ0TW92aW5nOiB1bmRlZmluZWRcbiAgICAgIH0sXG4gICAgICAvLyBDbGlja3NcbiAgICAgIGFsbG93Q2xpY2s6IHRydWUsXG4gICAgICAvLyBUb3VjaGVzXG4gICAgICBhbGxvd1RvdWNoTW92ZTogc3dpcGVyLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICAgIHRvdWNoZXM6IHtcbiAgICAgICAgc3RhcnRYOiAwLFxuICAgICAgICBzdGFydFk6IDAsXG4gICAgICAgIGN1cnJlbnRYOiAwLFxuICAgICAgICBjdXJyZW50WTogMCxcbiAgICAgICAgZGlmZjogMFxuICAgICAgfSxcbiAgICAgIC8vIEltYWdlc1xuICAgICAgaW1hZ2VzVG9Mb2FkOiBbXSxcbiAgICAgIGltYWdlc0xvYWRlZDogMFxuICAgIH0pO1xuICAgIHN3aXBlci5lbWl0KCdfc3dpcGVyJyk7IC8vIEluaXRcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmluaXQpIHtcbiAgICAgIHN3aXBlci5pbml0KCk7XG4gICAgfSAvLyBSZXR1cm4gYXBwIGluc3RhbmNlXG5cblxuICAgIHJldHVybiBzd2lwZXI7XG4gIH1cblxuICBlbmFibGUoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICBzd2lwZXIuZW5hYmxlZCA9IHRydWU7XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yKSB7XG4gICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcigpO1xuICAgIH1cblxuICAgIHN3aXBlci5lbWl0KCdlbmFibGUnKTtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgc3dpcGVyLmVuYWJsZWQgPSBmYWxzZTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmdyYWJDdXJzb3IpIHtcbiAgICAgIHN3aXBlci51bnNldEdyYWJDdXJzb3IoKTtcbiAgICB9XG5cbiAgICBzd2lwZXIuZW1pdCgnZGlzYWJsZScpO1xuICB9XG5cbiAgc2V0UHJvZ3Jlc3MocHJvZ3Jlc3MsIHNwZWVkKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBwcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSk7XG4gICAgY29uc3QgbWluID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgIGNvbnN0IG1heCA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICBjb25zdCBjdXJyZW50ID0gKG1heCAtIG1pbikgKiBwcm9ncmVzcyArIG1pbjtcbiAgICBzd2lwZXIudHJhbnNsYXRlVG8oY3VycmVudCwgdHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJyA/IDAgOiBzcGVlZCk7XG4gICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgfVxuXG4gIGVtaXRDb250YWluZXJDbGFzc2VzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLl9lbWl0Q2xhc3NlcyB8fCAhc3dpcGVyLmVsKSByZXR1cm47XG4gICAgY29uc3QgY2xzID0gc3dpcGVyLmVsLmNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihjbGFzc05hbWUgPT4ge1xuICAgICAgcmV0dXJuIGNsYXNzTmFtZS5pbmRleE9mKCdzd2lwZXInKSA9PT0gMCB8fCBjbGFzc05hbWUuaW5kZXhPZihzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MpID09PSAwO1xuICAgIH0pO1xuICAgIHN3aXBlci5lbWl0KCdfY29udGFpbmVyQ2xhc3NlcycsIGNscy5qb2luKCcgJykpO1xuICB9XG5cbiAgZ2V0U2xpZGVDbGFzc2VzKHNsaWRlRWwpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIHJldHVybiBzbGlkZUVsLmNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihjbGFzc05hbWUgPT4ge1xuICAgICAgcmV0dXJuIGNsYXNzTmFtZS5pbmRleE9mKCdzd2lwZXItc2xpZGUnKSA9PT0gMCB8fCBjbGFzc05hbWUuaW5kZXhPZihzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3MpID09PSAwO1xuICAgIH0pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIGVtaXRTbGlkZXNDbGFzc2VzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLl9lbWl0Q2xhc3NlcyB8fCAhc3dpcGVyLmVsKSByZXR1cm47XG4gICAgY29uc3QgdXBkYXRlcyA9IFtdO1xuICAgIHN3aXBlci5zbGlkZXMuZWFjaChzbGlkZUVsID0+IHtcbiAgICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBzd2lwZXIuZ2V0U2xpZGVDbGFzc2VzKHNsaWRlRWwpO1xuICAgICAgdXBkYXRlcy5wdXNoKHtcbiAgICAgICAgc2xpZGVFbCxcbiAgICAgICAgY2xhc3NOYW1lc1xuICAgICAgfSk7XG4gICAgICBzd2lwZXIuZW1pdCgnX3NsaWRlQ2xhc3MnLCBzbGlkZUVsLCBjbGFzc05hbWVzKTtcbiAgICB9KTtcbiAgICBzd2lwZXIuZW1pdCgnX3NsaWRlQ2xhc3NlcycsIHVwZGF0ZXMpO1xuICB9XG5cbiAgc2xpZGVzUGVyVmlld0R5bmFtaWModmlldywgZXhhY3QpIHtcbiAgICBpZiAodmlldyA9PT0gdm9pZCAwKSB7XG4gICAgICB2aWV3ID0gJ2N1cnJlbnQnO1xuICAgIH1cblxuICAgIGlmIChleGFjdCA9PT0gdm9pZCAwKSB7XG4gICAgICBleGFjdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgc2xpZGVzLFxuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIHNsaWRlc1NpemVzR3JpZCxcbiAgICAgIHNpemU6IHN3aXBlclNpemUsXG4gICAgICBhY3RpdmVJbmRleFxuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IHNwdiA9IDE7XG5cbiAgICBpZiAocGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICBsZXQgc2xpZGVTaXplID0gc2xpZGVzW2FjdGl2ZUluZGV4XS5zd2lwZXJTbGlkZVNpemU7XG4gICAgICBsZXQgYnJlYWtMb29wO1xuXG4gICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggKyAxOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0gJiYgIWJyZWFrTG9vcCkge1xuICAgICAgICAgIHNsaWRlU2l6ZSArPSBzbGlkZXNbaV0uc3dpcGVyU2xpZGVTaXplO1xuICAgICAgICAgIHNwdiArPSAxO1xuICAgICAgICAgIGlmIChzbGlkZVNpemUgPiBzd2lwZXJTaXplKSBicmVha0xvb3AgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSBhY3RpdmVJbmRleCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0gJiYgIWJyZWFrTG9vcCkge1xuICAgICAgICAgIHNsaWRlU2l6ZSArPSBzbGlkZXNbaV0uc3dpcGVyU2xpZGVTaXplO1xuICAgICAgICAgIHNwdiArPSAxO1xuICAgICAgICAgIGlmIChzbGlkZVNpemUgPiBzd2lwZXJTaXplKSBicmVha0xvb3AgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgaWYgKHZpZXcgPT09ICdjdXJyZW50Jykge1xuICAgICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggKyAxOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJblZpZXcgPSBleGFjdCA/IHNsaWRlc0dyaWRbaV0gKyBzbGlkZXNTaXplc0dyaWRbaV0gLSBzbGlkZXNHcmlkW2FjdGl2ZUluZGV4XSA8IHN3aXBlclNpemUgOiBzbGlkZXNHcmlkW2ldIC0gc2xpZGVzR3JpZFthY3RpdmVJbmRleF0gPCBzd2lwZXJTaXplO1xuXG4gICAgICAgICAgaWYgKHNsaWRlSW5WaWV3KSB7XG4gICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHByZXZpb3VzXG4gICAgICAgIGZvciAobGV0IGkgPSBhY3RpdmVJbmRleCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJblZpZXcgPSBzbGlkZXNHcmlkW2FjdGl2ZUluZGV4XSAtIHNsaWRlc0dyaWRbaV0gPCBzd2lwZXJTaXplO1xuXG4gICAgICAgICAgaWYgKHNsaWRlSW5WaWV3KSB7XG4gICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3B2O1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgIGNvbnN0IHtcbiAgICAgIHNuYXBHcmlkLFxuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjsgLy8gQnJlYWtwb2ludHNcblxuICAgIGlmIChwYXJhbXMuYnJlYWtwb2ludHMpIHtcbiAgICAgIHN3aXBlci5zZXRCcmVha3BvaW50KCk7XG4gICAgfVxuXG4gICAgc3dpcGVyLnVwZGF0ZVNpemUoKTtcbiAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcblxuICAgIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZVZhbHVlID0gc3dpcGVyLnJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgKiAtMSA6IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICBjb25zdCBuZXdUcmFuc2xhdGUgPSBNYXRoLm1pbihNYXRoLm1heCh0cmFuc2xhdGVWYWx1ZSwgc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSwgc3dpcGVyLm1pblRyYW5zbGF0ZSgpKTtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUobmV3VHJhbnNsYXRlKTtcbiAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICB9XG5cbiAgICBsZXQgdHJhbnNsYXRlZDtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmZyZWVNb2RlICYmIHN3aXBlci5wYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCkge1xuICAgICAgc2V0VHJhbnNsYXRlKCk7XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9IZWlnaHQpIHtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyB8fCBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxKSAmJiBzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgdHJhbnNsYXRlZCA9IHN3aXBlci5zbGlkZVRvKHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNsYXRlZCA9IHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRyYW5zbGF0ZWQpIHtcbiAgICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHNuYXBHcmlkICE9PSBzd2lwZXIuc25hcEdyaWQpIHtcbiAgICAgIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgfVxuXG4gICAgc3dpcGVyLmVtaXQoJ3VwZGF0ZScpO1xuICB9XG5cbiAgY2hhbmdlRGlyZWN0aW9uKG5ld0RpcmVjdGlvbiwgbmVlZFVwZGF0ZSkge1xuICAgIGlmIChuZWVkVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgIG5lZWRVcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3QgY3VycmVudERpcmVjdGlvbiA9IHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uO1xuXG4gICAgaWYgKCFuZXdEaXJlY3Rpb24pIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgbmV3RGlyZWN0aW9uID0gY3VycmVudERpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICB9XG5cbiAgICBpZiAobmV3RGlyZWN0aW9uID09PSBjdXJyZW50RGlyZWN0aW9uIHx8IG5ld0RpcmVjdGlvbiAhPT0gJ2hvcml6b250YWwnICYmIG5ld0RpcmVjdGlvbiAhPT0gJ3ZlcnRpY2FsJykge1xuICAgICAgcmV0dXJuIHN3aXBlcjtcbiAgICB9XG5cbiAgICBzd2lwZXIuJGVsLnJlbW92ZUNsYXNzKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30ke2N1cnJlbnREaXJlY3Rpb259YCkuYWRkQ2xhc3MoYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfSR7bmV3RGlyZWN0aW9ufWApO1xuICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgIHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID0gbmV3RGlyZWN0aW9uO1xuICAgIHN3aXBlci5zbGlkZXMuZWFjaChzbGlkZUVsID0+IHtcbiAgICAgIGlmIChuZXdEaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgc2xpZGVFbC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVFbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzd2lwZXIuZW1pdCgnY2hhbmdlRGlyZWN0aW9uJyk7XG4gICAgaWYgKG5lZWRVcGRhdGUpIHN3aXBlci51cGRhdGUoKTtcbiAgICByZXR1cm4gc3dpcGVyO1xuICB9XG5cbiAgbW91bnQoZWwpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIubW91bnRlZCkgcmV0dXJuIHRydWU7IC8vIEZpbmQgZWxcblxuICAgIGNvbnN0ICRlbCA9ICQoZWwgfHwgc3dpcGVyLnBhcmFtcy5lbCk7XG4gICAgZWwgPSAkZWxbMF07XG5cbiAgICBpZiAoIWVsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZWwuc3dpcGVyID0gc3dpcGVyO1xuXG4gICAgY29uc3QgZ2V0V3JhcHBlclNlbGVjdG9yID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIGAuJHsoc3dpcGVyLnBhcmFtcy53cmFwcGVyQ2xhc3MgfHwgJycpLnRyaW0oKS5zcGxpdCgnICcpLmpvaW4oJy4nKX1gO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRXcmFwcGVyID0gKCkgPT4ge1xuICAgICAgaWYgKGVsICYmIGVsLnNoYWRvd1Jvb3QgJiYgZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9ICQoZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGdldFdyYXBwZXJTZWxlY3RvcigpKSk7IC8vIENoaWxkcmVuIG5lZWRzIHRvIHJldHVybiBzbG90IGl0ZW1zXG5cbiAgICAgICAgcmVzLmNoaWxkcmVuID0gb3B0aW9ucyA9PiAkZWwuY2hpbGRyZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICRlbC5jaGlsZHJlbihnZXRXcmFwcGVyU2VsZWN0b3IoKSk7XG4gICAgfTsgLy8gRmluZCBXcmFwcGVyXG5cblxuICAgIGxldCAkd3JhcHBlckVsID0gZ2V0V3JhcHBlcigpO1xuXG4gICAgaWYgKCR3cmFwcGVyRWwubGVuZ3RoID09PSAwICYmIHN3aXBlci5wYXJhbXMuY3JlYXRlRWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICR3cmFwcGVyRWwgPSAkKHdyYXBwZXIpO1xuICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBzd2lwZXIucGFyYW1zLndyYXBwZXJDbGFzcztcbiAgICAgICRlbC5hcHBlbmQod3JhcHBlcik7XG4gICAgICAkZWwuY2hpbGRyZW4oYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gKS5lYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAkd3JhcHBlckVsLmFwcGVuZChzbGlkZUVsKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICAkZWwsXG4gICAgICBlbCxcbiAgICAgICR3cmFwcGVyRWwsXG4gICAgICB3cmFwcGVyRWw6ICR3cmFwcGVyRWxbMF0sXG4gICAgICBtb3VudGVkOiB0cnVlLFxuICAgICAgLy8gUlRMXG4gICAgICBydGw6IGVsLmRpci50b0xvd2VyQ2FzZSgpID09PSAncnRsJyB8fCAkZWwuY3NzKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcsXG4gICAgICBydGxUcmFuc2xhdGU6IHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgJiYgKGVsLmRpci50b0xvd2VyQ2FzZSgpID09PSAncnRsJyB8fCAkZWwuY3NzKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpLFxuICAgICAgd3JvbmdSVEw6ICR3cmFwcGVyRWwuY3NzKCdkaXNwbGF5JykgPT09ICctd2Via2l0LWJveCdcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGluaXQoZWwpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIuaW5pdGlhbGl6ZWQpIHJldHVybiBzd2lwZXI7XG4gICAgY29uc3QgbW91bnRlZCA9IHN3aXBlci5tb3VudChlbCk7XG4gICAgaWYgKG1vdW50ZWQgPT09IGZhbHNlKSByZXR1cm4gc3dpcGVyO1xuICAgIHN3aXBlci5lbWl0KCdiZWZvcmVJbml0Jyk7IC8vIFNldCBicmVha3BvaW50XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5icmVha3BvaW50cykge1xuICAgICAgc3dpcGVyLnNldEJyZWFrcG9pbnQoKTtcbiAgICB9IC8vIEFkZCBDbGFzc2VzXG5cblxuICAgIHN3aXBlci5hZGRDbGFzc2VzKCk7IC8vIENyZWF0ZSBsb29wXG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIH0gLy8gVXBkYXRlIHNpemVcblxuXG4gICAgc3dpcGVyLnVwZGF0ZVNpemUoKTsgLy8gVXBkYXRlIHNsaWRlc1xuXG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlcygpO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMud2F0Y2hPdmVyZmxvdykge1xuICAgICAgc3dpcGVyLmNoZWNrT3ZlcmZsb3coKTtcbiAgICB9IC8vIFNldCBHcmFiIEN1cnNvclxuXG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yICYmIHN3aXBlci5lbmFibGVkKSB7XG4gICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcigpO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnByZWxvYWRJbWFnZXMpIHtcbiAgICAgIHN3aXBlci5wcmVsb2FkSW1hZ2VzKCk7XG4gICAgfSAvLyBTbGlkZSBUbyBJbml0aWFsIFNsaWRlXG5cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5wYXJhbXMuaW5pdGlhbFNsaWRlICsgc3dpcGVyLmxvb3BlZFNsaWRlcywgMCwgc3dpcGVyLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsIGZhbHNlLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnBhcmFtcy5pbml0aWFsU2xpZGUsIDAsIHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCBmYWxzZSwgdHJ1ZSk7XG4gICAgfSAvLyBBdHRhY2ggZXZlbnRzXG5cblxuICAgIHN3aXBlci5hdHRhY2hFdmVudHMoKTsgLy8gSW5pdCBGbGFnXG5cbiAgICBzd2lwZXIuaW5pdGlhbGl6ZWQgPSB0cnVlOyAvLyBFbWl0XG5cbiAgICBzd2lwZXIuZW1pdCgnaW5pdCcpO1xuICAgIHN3aXBlci5lbWl0KCdhZnRlckluaXQnKTtcbiAgICByZXR1cm4gc3dpcGVyO1xuICB9XG5cbiAgZGVzdHJveShkZWxldGVJbnN0YW5jZSwgY2xlYW5TdHlsZXMpIHtcbiAgICBpZiAoZGVsZXRlSW5zdGFuY2UgPT09IHZvaWQgMCkge1xuICAgICAgZGVsZXRlSW5zdGFuY2UgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjbGVhblN0eWxlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBjbGVhblN0eWxlcyA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICAkZWwsXG4gICAgICAkd3JhcHBlckVsLFxuICAgICAgc2xpZGVzXG4gICAgfSA9IHN3aXBlcjtcblxuICAgIGlmICh0eXBlb2Ygc3dpcGVyLnBhcmFtcyA9PT0gJ3VuZGVmaW5lZCcgfHwgc3dpcGVyLmRlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3dpcGVyLmVtaXQoJ2JlZm9yZURlc3Ryb3knKTsgLy8gSW5pdCBGbGFnXG5cbiAgICBzd2lwZXIuaW5pdGlhbGl6ZWQgPSBmYWxzZTsgLy8gRGV0YWNoIGV2ZW50c1xuXG4gICAgc3dpcGVyLmRldGFjaEV2ZW50cygpOyAvLyBEZXN0cm95IGxvb3BcblxuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgfSAvLyBDbGVhbnVwIHN0eWxlc1xuXG5cbiAgICBpZiAoY2xlYW5TdHlsZXMpIHtcbiAgICAgIHN3aXBlci5yZW1vdmVDbGFzc2VzKCk7XG4gICAgICAkZWwucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICR3cmFwcGVyRWwucmVtb3ZlQXR0cignc3R5bGUnKTtcblxuICAgICAgaWYgKHNsaWRlcyAmJiBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgIHNsaWRlcy5yZW1vdmVDbGFzcyhbcGFyYW1zLnNsaWRlVmlzaWJsZUNsYXNzLCBwYXJhbXMuc2xpZGVBY3RpdmVDbGFzcywgcGFyYW1zLnNsaWRlTmV4dENsYXNzLCBwYXJhbXMuc2xpZGVQcmV2Q2xhc3NdLmpvaW4oJyAnKSkucmVtb3ZlQXR0cignc3R5bGUnKS5yZW1vdmVBdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXBlci5lbWl0KCdkZXN0cm95Jyk7IC8vIERldGFjaCBlbWl0dGVyIGV2ZW50c1xuXG4gICAgT2JqZWN0LmtleXMoc3dpcGVyLmV2ZW50c0xpc3RlbmVycykuZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgc3dpcGVyLm9mZihldmVudE5hbWUpO1xuICAgIH0pO1xuXG4gICAgaWYgKGRlbGV0ZUluc3RhbmNlICE9PSBmYWxzZSkge1xuICAgICAgc3dpcGVyLiRlbFswXS5zd2lwZXIgPSBudWxsO1xuICAgICAgZGVsZXRlUHJvcHMoc3dpcGVyKTtcbiAgICB9XG5cbiAgICBzd2lwZXIuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBleHRlbmREZWZhdWx0cyhuZXdEZWZhdWx0cykge1xuICAgIGV4dGVuZChleHRlbmRlZERlZmF1bHRzLCBuZXdEZWZhdWx0cyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGV4dGVuZGVkRGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIGV4dGVuZGVkRGVmYXVsdHM7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRzKCkge1xuICAgIHJldHVybiBkZWZhdWx0cztcbiAgfVxuXG4gIHN0YXRpYyBpbnN0YWxsTW9kdWxlKG1vZCkge1xuICAgIGlmICghU3dpcGVyLnByb3RvdHlwZS5fX21vZHVsZXNfXykgU3dpcGVyLnByb3RvdHlwZS5fX21vZHVsZXNfXyA9IFtdO1xuICAgIGNvbnN0IG1vZHVsZXMgPSBTd2lwZXIucHJvdG90eXBlLl9fbW9kdWxlc19fO1xuXG4gICAgaWYgKHR5cGVvZiBtb2QgPT09ICdmdW5jdGlvbicgJiYgbW9kdWxlcy5pbmRleE9mKG1vZCkgPCAwKSB7XG4gICAgICBtb2R1bGVzLnB1c2gobW9kKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdXNlKG1vZHVsZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG1vZHVsZSkpIHtcbiAgICAgIG1vZHVsZS5mb3JFYWNoKG0gPT4gU3dpcGVyLmluc3RhbGxNb2R1bGUobSkpO1xuICAgICAgcmV0dXJuIFN3aXBlcjtcbiAgICB9XG5cbiAgICBTd2lwZXIuaW5zdGFsbE1vZHVsZShtb2R1bGUpO1xuICAgIHJldHVybiBTd2lwZXI7XG4gIH1cblxufVxuXG5PYmplY3Qua2V5cyhwcm90b3R5cGVzKS5mb3JFYWNoKHByb3RvdHlwZUdyb3VwID0+IHtcbiAgT2JqZWN0LmtleXMocHJvdG90eXBlc1twcm90b3R5cGVHcm91cF0pLmZvckVhY2gocHJvdG9NZXRob2QgPT4ge1xuICAgIFN3aXBlci5wcm90b3R5cGVbcHJvdG9NZXRob2RdID0gcHJvdG90eXBlc1twcm90b3R5cGVHcm91cF1bcHJvdG9NZXRob2RdO1xuICB9KTtcbn0pO1xuU3dpcGVyLnVzZShbUmVzaXplLCBPYnNlcnZlcl0pO1xuZXhwb3J0IGRlZmF1bHQgU3dpcGVyOyIsICIvKipcbiAqIFNTUiBXaW5kb3cgNC4wLjJcbiAqIEJldHRlciBoYW5kbGluZyBmb3Igd2luZG93IG9iamVjdCBpbiBTU1IgZW52aXJvbm1lbnRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2xpbWl0czR3ZWIvc3NyLXdpbmRvd1xuICpcbiAqIENvcHlyaWdodCAyMDIxLCBWbGFkaW1pciBLaGFybGFtcGlkaVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVFxuICpcbiAqIFJlbGVhc2VkIG9uOiBEZWNlbWJlciAxMywgMjAyMVxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIChvYmogIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2NvbnN0cnVjdG9yJyBpbiBvYmogJiZcbiAgICAgICAgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpO1xufVxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCA9IHt9LCBzcmMgPSB7fSkge1xuICAgIE9iamVjdC5rZXlzKHNyYykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0W2tleV0gPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtcbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3Qoc3JjW2tleV0pICYmXG4gICAgICAgICAgICBpc09iamVjdCh0YXJnZXRba2V5XSkgJiZcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNyY1trZXldKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBleHRlbmQodGFyZ2V0W2tleV0sIHNyY1trZXldKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5jb25zdCBzc3JEb2N1bWVudCA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBhZGRFdmVudExpc3RlbmVyKCkgeyB9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7IH0sXG4gICAgYWN0aXZlRWxlbWVudDoge1xuICAgICAgICBibHVyKCkgeyB9LFxuICAgICAgICBub2RlTmFtZTogJycsXG4gICAgfSxcbiAgICBxdWVyeVNlbGVjdG9yKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHF1ZXJ5U2VsZWN0b3JBbGwoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICAgIGdldEVsZW1lbnRCeUlkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGNyZWF0ZUV2ZW50KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdEV2ZW50KCkgeyB9LFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgY3JlYXRlRWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgIGNoaWxkTm9kZXM6IFtdLFxuICAgICAgICAgICAgc3R5bGU6IHt9LFxuICAgICAgICAgICAgc2V0QXR0cmlidXRlKCkgeyB9LFxuICAgICAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnROUygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgaW1wb3J0Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgICBoYXNoOiAnJyxcbiAgICAgICAgaG9zdDogJycsXG4gICAgICAgIGhvc3RuYW1lOiAnJyxcbiAgICAgICAgaHJlZjogJycsXG4gICAgICAgIG9yaWdpbjogJycsXG4gICAgICAgIHBhdGhuYW1lOiAnJyxcbiAgICAgICAgcHJvdG9jb2w6ICcnLFxuICAgICAgICBzZWFyY2g6ICcnLFxuICAgIH0sXG59O1xuZnVuY3Rpb24gZ2V0RG9jdW1lbnQoKSB7XG4gICAgY29uc3QgZG9jID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDoge307XG4gICAgZXh0ZW5kKGRvYywgc3NyRG9jdW1lbnQpO1xuICAgIHJldHVybiBkb2M7XG59XG5cbmNvbnN0IHNzcldpbmRvdyA9IHtcbiAgICBkb2N1bWVudDogc3NyRG9jdW1lbnQsXG4gICAgbmF2aWdhdG9yOiB7XG4gICAgICAgIHVzZXJBZ2VudDogJycsXG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgICBoYXNoOiAnJyxcbiAgICAgICAgaG9zdDogJycsXG4gICAgICAgIGhvc3RuYW1lOiAnJyxcbiAgICAgICAgaHJlZjogJycsXG4gICAgICAgIG9yaWdpbjogJycsXG4gICAgICAgIHBhdGhuYW1lOiAnJyxcbiAgICAgICAgcHJvdG9jb2w6ICcnLFxuICAgICAgICBzZWFyY2g6ICcnLFxuICAgIH0sXG4gICAgaGlzdG9yeToge1xuICAgICAgICByZXBsYWNlU3RhdGUoKSB7IH0sXG4gICAgICAgIHB1c2hTdGF0ZSgpIHsgfSxcbiAgICAgICAgZ28oKSB7IH0sXG4gICAgICAgIGJhY2soKSB7IH0sXG4gICAgfSxcbiAgICBDdXN0b21FdmVudDogZnVuY3Rpb24gQ3VzdG9tRXZlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHsgfSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKCkgeyB9LFxuICAgIGdldENvbXB1dGVkU3R5bGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRQcm9wZXJ0eVZhbHVlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBJbWFnZSgpIHsgfSxcbiAgICBEYXRlKCkgeyB9LFxuICAgIHNjcmVlbjoge30sXG4gICAgc2V0VGltZW91dCgpIHsgfSxcbiAgICBjbGVhclRpbWVvdXQoKSB7IH0sXG4gICAgbWF0Y2hNZWRpYSgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMCk7XG4gICAgfSxcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGdldFdpbmRvdygpIHtcbiAgICBjb25zdCB3aW4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHt9O1xuICAgIGV4dGVuZCh3aW4sIHNzcldpbmRvdyk7XG4gICAgcmV0dXJuIHdpbjtcbn1cblxuZXhwb3J0IHsgZXh0ZW5kLCBnZXREb2N1bWVudCwgZ2V0V2luZG93LCBzc3JEb2N1bWVudCwgc3NyV2luZG93IH07XG4iLCAiaW1wb3J0IHsgJCwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBoYXNDbGFzcywgdG9nZ2xlQ2xhc3MsIGF0dHIsIHJlbW92ZUF0dHIsIHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgb24sIG9mZiwgdHJpZ2dlciwgdHJhbnNpdGlvbkVuZCwgb3V0ZXJXaWR0aCwgb3V0ZXJIZWlnaHQsIHN0eWxlcywgb2Zmc2V0LCBjc3MsIGVhY2gsIGh0bWwsIHRleHQsIGlzLCBpbmRleCwgZXEsIGFwcGVuZCwgcHJlcGVuZCwgbmV4dCwgbmV4dEFsbCwgcHJldiwgcHJldkFsbCwgcGFyZW50LCBwYXJlbnRzLCBjbG9zZXN0LCBmaW5kLCBjaGlsZHJlbiwgZmlsdGVyLCByZW1vdmUgfSBmcm9tICdkb203JztcbmNvbnN0IE1ldGhvZHMgPSB7XG4gIGFkZENsYXNzLFxuICByZW1vdmVDbGFzcyxcbiAgaGFzQ2xhc3MsXG4gIHRvZ2dsZUNsYXNzLFxuICBhdHRyLFxuICByZW1vdmVBdHRyLFxuICB0cmFuc2Zvcm0sXG4gIHRyYW5zaXRpb24sXG4gIG9uLFxuICBvZmYsXG4gIHRyaWdnZXIsXG4gIHRyYW5zaXRpb25FbmQsXG4gIG91dGVyV2lkdGgsXG4gIG91dGVySGVpZ2h0LFxuICBzdHlsZXMsXG4gIG9mZnNldCxcbiAgY3NzLFxuICBlYWNoLFxuICBodG1sLFxuICB0ZXh0LFxuICBpcyxcbiAgaW5kZXgsXG4gIGVxLFxuICBhcHBlbmQsXG4gIHByZXBlbmQsXG4gIG5leHQsXG4gIG5leHRBbGwsXG4gIHByZXYsXG4gIHByZXZBbGwsXG4gIHBhcmVudCxcbiAgcGFyZW50cyxcbiAgY2xvc2VzdCxcbiAgZmluZCxcbiAgY2hpbGRyZW4sXG4gIGZpbHRlcixcbiAgcmVtb3ZlXG59O1xuT2JqZWN0LmtleXMoTWV0aG9kcykuZm9yRWFjaChtZXRob2ROYW1lID0+IHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCQuZm4sIG1ldGhvZE5hbWUsIHtcbiAgICB2YWx1ZTogTWV0aG9kc1ttZXRob2ROYW1lXSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgJDsiLCAiLyoqXG4gKiBEb203IDQuMC40XG4gKiBNaW5pbWFsaXN0aWMgSmF2YVNjcmlwdCBsaWJyYXJ5IGZvciBET00gbWFuaXB1bGF0aW9uLCB3aXRoIGEgalF1ZXJ5LWNvbXBhdGlibGUgQVBJXG4gKiBodHRwczovL2ZyYW1ld29yazcuaW8vZG9jcy9kb203Lmh0bWxcbiAqXG4gKiBDb3B5cmlnaHQgMjAyMiwgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciBNSVRcbiAqXG4gKiBSZWxlYXNlZCBvbjogSmFudWFyeSAxMSwgMjAyMlxuICovXG5pbXBvcnQgeyBnZXRXaW5kb3csIGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5mdW5jdGlvbiBtYWtlUmVhY3RpdmUob2JqKSB7XG4gIGNvbnN0IHByb3RvID0gb2JqLl9fcHJvdG9fXztcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19fcHJvdG9fXycsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gcHJvdG87XG4gICAgfSxcblxuICAgIHNldCh2YWx1ZSkge1xuICAgICAgcHJvdG8uX19wcm90b19fID0gdmFsdWU7XG4gICAgfVxuXG4gIH0pO1xufVxuXG5jbGFzcyBEb203IGV4dGVuZHMgQXJyYXkge1xuICBjb25zdHJ1Y3RvcihpdGVtcykge1xuICAgIGlmICh0eXBlb2YgaXRlbXMgPT09ICdudW1iZXInKSB7XG4gICAgICBzdXBlcihpdGVtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyKC4uLihpdGVtcyB8fCBbXSkpO1xuICAgICAgbWFrZVJlYWN0aXZlKHRoaXMpO1xuICAgIH1cbiAgfVxuXG59XG5cbmZ1bmN0aW9uIGFycmF5RmxhdChhcnIgPSBbXSkge1xuICBjb25zdCByZXMgPSBbXTtcbiAgYXJyLmZvckVhY2goZWwgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVsKSkge1xuICAgICAgcmVzLnB1c2goLi4uYXJyYXlGbGF0KGVsKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5wdXNoKGVsKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gYXJyYXlGaWx0ZXIoYXJyLCBjYWxsYmFjaykge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGFyciwgY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gYXJyYXlVbmlxdWUoYXJyKSB7XG4gIGNvbnN0IHVuaXF1ZUFycmF5ID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAodW5pcXVlQXJyYXkuaW5kZXhPZihhcnJbaV0pID09PSAtMSkgdW5pcXVlQXJyYXkucHVzaChhcnJbaV0pO1xuICB9XG5cbiAgcmV0dXJuIHVuaXF1ZUFycmF5O1xufVxuZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8tKC4pL2csIChtYXRjaCwgZ3JvdXApID0+IGdyb3VwLnRvVXBwZXJDYXNlKCkpO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuZnVuY3Rpb24gcXNhKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFtzZWxlY3Rvcl07XG4gIH1cblxuICBjb25zdCBhID0gW107XG4gIGNvbnN0IHJlcyA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBhLnB1c2gocmVzW2ldKTtcbiAgfVxuXG4gIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiAkKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gIGxldCBhcnIgPSBbXTtcblxuICBpZiAoIWNvbnRleHQgJiYgc2VsZWN0b3IgaW5zdGFuY2VvZiBEb203KSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9XG5cbiAgaWYgKCFzZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgRG9tNyhhcnIpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBodG1sID0gc2VsZWN0b3IudHJpbSgpO1xuXG4gICAgaWYgKGh0bWwuaW5kZXhPZignPCcpID49IDAgJiYgaHRtbC5pbmRleE9mKCc+JykgPj0gMCkge1xuICAgICAgbGV0IHRvQ3JlYXRlID0gJ2Rpdic7XG4gICAgICBpZiAoaHRtbC5pbmRleE9mKCc8bGknKSA9PT0gMCkgdG9DcmVhdGUgPSAndWwnO1xuICAgICAgaWYgKGh0bWwuaW5kZXhPZignPHRyJykgPT09IDApIHRvQ3JlYXRlID0gJ3Rib2R5JztcbiAgICAgIGlmIChodG1sLmluZGV4T2YoJzx0ZCcpID09PSAwIHx8IGh0bWwuaW5kZXhPZignPHRoJykgPT09IDApIHRvQ3JlYXRlID0gJ3RyJztcbiAgICAgIGlmIChodG1sLmluZGV4T2YoJzx0Ym9keScpID09PSAwKSB0b0NyZWF0ZSA9ICd0YWJsZSc7XG4gICAgICBpZiAoaHRtbC5pbmRleE9mKCc8b3B0aW9uJykgPT09IDApIHRvQ3JlYXRlID0gJ3NlbGVjdCc7XG4gICAgICBjb25zdCB0ZW1wUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0b0NyZWF0ZSk7XG4gICAgICB0ZW1wUGFyZW50LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcFBhcmVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFyci5wdXNoKHRlbXBQYXJlbnQuY2hpbGROb2Rlc1tpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyciA9IHFzYShzZWxlY3Rvci50cmltKCksIGNvbnRleHQgfHwgZG9jdW1lbnQpO1xuICAgIH0gLy8gYXJyID0gcXNhKHNlbGVjdG9yLCBkb2N1bWVudCk7XG5cbiAgfSBlbHNlIGlmIChzZWxlY3Rvci5ub2RlVHlwZSB8fCBzZWxlY3RvciA9PT0gd2luZG93IHx8IHNlbGVjdG9yID09PSBkb2N1bWVudCkge1xuICAgIGFyci5wdXNoKHNlbGVjdG9yKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdG9yKSkge1xuICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIERvbTcpIHJldHVybiBzZWxlY3RvcjtcbiAgICBhcnIgPSBzZWxlY3RvcjtcbiAgfVxuXG4gIHJldHVybiBuZXcgRG9tNyhhcnJheVVuaXF1ZShhcnIpKTtcbn1cblxuJC5mbiA9IERvbTcucHJvdG90eXBlO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuZnVuY3Rpb24gYWRkQ2xhc3MoLi4uY2xhc3Nlcykge1xuICBjb25zdCBjbGFzc05hbWVzID0gYXJyYXlGbGF0KGNsYXNzZXMubWFwKGMgPT4gYy5zcGxpdCgnICcpKSk7XG4gIHRoaXMuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWVzKTtcbiAgfSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyguLi5jbGFzc2VzKSB7XG4gIGNvbnN0IGNsYXNzTmFtZXMgPSBhcnJheUZsYXQoY2xhc3Nlcy5tYXAoYyA9PiBjLnNwbGl0KCcgJykpKTtcbiAgdGhpcy5mb3JFYWNoKGVsID0+IHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICB9KTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKC4uLmNsYXNzZXMpIHtcbiAgY29uc3QgY2xhc3NOYW1lcyA9IGFycmF5RmxhdChjbGFzc2VzLm1hcChjID0+IGMuc3BsaXQoJyAnKSkpO1xuICB0aGlzLmZvckVhY2goZWwgPT4ge1xuICAgIGNsYXNzTmFtZXMuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFzQ2xhc3MoLi4uY2xhc3Nlcykge1xuICBjb25zdCBjbGFzc05hbWVzID0gYXJyYXlGbGF0KGNsYXNzZXMubWFwKGMgPT4gYy5zcGxpdCgnICcpKSk7XG4gIHJldHVybiBhcnJheUZpbHRlcih0aGlzLCBlbCA9PiB7XG4gICAgcmV0dXJuIGNsYXNzTmFtZXMuZmlsdGVyKGNsYXNzTmFtZSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkubGVuZ3RoID4gMDtcbiAgfSkubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gYXR0cihhdHRycywgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGF0dHJzID09PSAnc3RyaW5nJykge1xuICAgIC8vIEdldCBhdHRyXG4gICAgaWYgKHRoaXNbMF0pIHJldHVybiB0aGlzWzBdLmdldEF0dHJpYnV0ZShhdHRycyk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSAvLyBTZXQgYXR0cnNcblxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAvLyBTdHJpbmdcbiAgICAgIHRoaXNbaV0uc2V0QXR0cmlidXRlKGF0dHJzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9iamVjdFxuICAgICAgZm9yIChjb25zdCBhdHRyTmFtZSBpbiBhdHRycykge1xuICAgICAgICB0aGlzW2ldW2F0dHJOYW1lXSA9IGF0dHJzW2F0dHJOYW1lXTtcbiAgICAgICAgdGhpc1tpXS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUF0dHIoYXR0cikge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGlzW2ldLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBwcm9wKHByb3BzLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgcHJvcHMgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gR2V0IHByb3BcbiAgICBpZiAodGhpc1swXSkgcmV0dXJuIHRoaXNbMF1bcHJvcHNdO1xuICB9IGVsc2Uge1xuICAgIC8vIFNldCBwcm9wc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgLy8gU3RyaW5nXG4gICAgICAgIHRoaXNbaV1bcHJvcHNdID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPYmplY3RcbiAgICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgICAgICAgIHRoaXNbaV1bcHJvcE5hbWVdID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gZGF0YShrZXksIHZhbHVlKSB7XG4gIGxldCBlbDtcblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgIGVsID0gdGhpc1swXTtcbiAgICBpZiAoIWVsKSByZXR1cm4gdW5kZWZpbmVkOyAvLyBHZXQgdmFsdWVcblxuICAgIGlmIChlbC5kb203RWxlbWVudERhdGFTdG9yYWdlICYmIGtleSBpbiBlbC5kb203RWxlbWVudERhdGFTdG9yYWdlKSB7XG4gICAgICByZXR1cm4gZWwuZG9tN0VsZW1lbnREYXRhU3RvcmFnZVtrZXldO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGFLZXkgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtJHtrZXl9YCk7XG5cbiAgICBpZiAoZGF0YUtleSkge1xuICAgICAgcmV0dXJuIGRhdGFLZXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSAvLyBTZXQgdmFsdWVcblxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGVsID0gdGhpc1tpXTtcbiAgICBpZiAoIWVsLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2UpIGVsLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2UgPSB7fTtcbiAgICBlbC5kb203RWxlbWVudERhdGFTdG9yYWdlW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiByZW1vdmVEYXRhKGtleSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBlbCA9IHRoaXNbaV07XG5cbiAgICBpZiAoZWwuZG9tN0VsZW1lbnREYXRhU3RvcmFnZSAmJiBlbC5kb203RWxlbWVudERhdGFTdG9yYWdlW2tleV0pIHtcbiAgICAgIGVsLmRvbTdFbGVtZW50RGF0YVN0b3JhZ2Vba2V5XSA9IG51bGw7XG4gICAgICBkZWxldGUgZWwuZG9tN0VsZW1lbnREYXRhU3RvcmFnZVtrZXldO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXRhc2V0KCkge1xuICBjb25zdCBlbCA9IHRoaXNbMF07XG4gIGlmICghZWwpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IGRhdGFzZXQgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIGlmIChlbC5kYXRhc2V0KSB7XG4gICAgZm9yIChjb25zdCBkYXRhS2V5IGluIGVsLmRhdGFzZXQpIHtcbiAgICAgIGRhdGFzZXRbZGF0YUtleV0gPSBlbC5kYXRhc2V0W2RhdGFLZXldO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGF0dHIgPSBlbC5hdHRyaWJ1dGVzW2ldO1xuXG4gICAgICBpZiAoYXR0ci5uYW1lLmluZGV4T2YoJ2RhdGEtJykgPj0gMCkge1xuICAgICAgICBkYXRhc2V0W3RvQ2FtZWxDYXNlKGF0dHIubmFtZS5zcGxpdCgnZGF0YS0nKVsxXSldID0gYXR0ci52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhc2V0KSB7XG4gICAgaWYgKGRhdGFzZXRba2V5XSA9PT0gJ2ZhbHNlJykgZGF0YXNldFtrZXldID0gZmFsc2U7ZWxzZSBpZiAoZGF0YXNldFtrZXldID09PSAndHJ1ZScpIGRhdGFzZXRba2V5XSA9IHRydWU7ZWxzZSBpZiAocGFyc2VGbG9hdChkYXRhc2V0W2tleV0pID09PSBkYXRhc2V0W2tleV0gKiAxKSBkYXRhc2V0W2tleV0gKj0gMTtcbiAgfVxuXG4gIHJldHVybiBkYXRhc2V0O1xufVxuXG5mdW5jdGlvbiB2YWwodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBnZXQgdmFsdWVcbiAgICBjb25zdCBlbCA9IHRoaXNbMF07XG4gICAgaWYgKCFlbCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIGlmIChlbC5tdWx0aXBsZSAmJiBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2VsZWN0Jykge1xuICAgICAgY29uc3QgdmFsdWVzID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWwuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKGVsLnNlbGVjdGVkT3B0aW9uc1tpXS52YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsLnZhbHVlO1xuICB9IC8vIHNldCB2YWx1ZVxuXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzW2ldO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIGVsLm11bHRpcGxlICYmIGVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzZWxlY3QnKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsLm9wdGlvbnMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgZWwub3B0aW9uc1tqXS5zZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YoZWwub3B0aW9uc1tqXS52YWx1ZSkgPj0gMDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gdmFsdWUodmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMudmFsKHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtKHRyYW5zZm9ybSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGlzW2ldLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB0cmFuc2l0aW9uKGR1cmF0aW9uKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoaXNbaV0uc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gdHlwZW9mIGR1cmF0aW9uICE9PSAnc3RyaW5nJyA/IGAke2R1cmF0aW9ufW1zYCA6IGR1cmF0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIG9uKC4uLmFyZ3MpIHtcbiAgbGV0IFtldmVudFR5cGUsIHRhcmdldFNlbGVjdG9yLCBsaXN0ZW5lciwgY2FwdHVyZV0gPSBhcmdzO1xuXG4gIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFtldmVudFR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlXSA9IGFyZ3M7XG4gICAgdGFyZ2V0U2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoIWNhcHR1cmUpIGNhcHR1cmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBoYW5kbGVMaXZlRXZlbnQoZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG4gICAgY29uc3QgZXZlbnREYXRhID0gZS50YXJnZXQuZG9tN0V2ZW50RGF0YSB8fCBbXTtcblxuICAgIGlmIChldmVudERhdGEuaW5kZXhPZihlKSA8IDApIHtcbiAgICAgIGV2ZW50RGF0YS51bnNoaWZ0KGUpO1xuICAgIH1cblxuICAgIGlmICgkKHRhcmdldCkuaXModGFyZ2V0U2VsZWN0b3IpKSBsaXN0ZW5lci5hcHBseSh0YXJnZXQsIGV2ZW50RGF0YSk7ZWxzZSB7XG4gICAgICBjb25zdCBwYXJlbnRzID0gJCh0YXJnZXQpLnBhcmVudHMoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IHBhcmVudHMubGVuZ3RoOyBrICs9IDEpIHtcbiAgICAgICAgaWYgKCQocGFyZW50c1trXSkuaXModGFyZ2V0U2VsZWN0b3IpKSBsaXN0ZW5lci5hcHBseShwYXJlbnRzW2tdLCBldmVudERhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGUpIHtcbiAgICBjb25zdCBldmVudERhdGEgPSBlICYmIGUudGFyZ2V0ID8gZS50YXJnZXQuZG9tN0V2ZW50RGF0YSB8fCBbXSA6IFtdO1xuXG4gICAgaWYgKGV2ZW50RGF0YS5pbmRleE9mKGUpIDwgMCkge1xuICAgICAgZXZlbnREYXRhLnVuc2hpZnQoZSk7XG4gICAgfVxuXG4gICAgbGlzdGVuZXIuYXBwbHkodGhpcywgZXZlbnREYXRhKTtcbiAgfVxuXG4gIGNvbnN0IGV2ZW50cyA9IGV2ZW50VHlwZS5zcGxpdCgnICcpO1xuICBsZXQgajtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBlbCA9IHRoaXNbaV07XG5cbiAgICBpZiAoIXRhcmdldFNlbGVjdG9yKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgZXZlbnRzLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzW2pdO1xuICAgICAgICBpZiAoIWVsLmRvbTdMaXN0ZW5lcnMpIGVsLmRvbTdMaXN0ZW5lcnMgPSB7fTtcbiAgICAgICAgaWYgKCFlbC5kb203TGlzdGVuZXJzW2V2ZW50XSkgZWwuZG9tN0xpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgZWwuZG9tN0xpc3RlbmVyc1tldmVudF0ucHVzaCh7XG4gICAgICAgICAgbGlzdGVuZXIsXG4gICAgICAgICAgcHJveHlMaXN0ZW5lcjogaGFuZGxlRXZlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZUV2ZW50LCBjYXB0dXJlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGl2ZSBldmVudHNcbiAgICAgIGZvciAoaiA9IDA7IGogPCBldmVudHMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudHNbal07XG4gICAgICAgIGlmICghZWwuZG9tN0xpdmVMaXN0ZW5lcnMpIGVsLmRvbTdMaXZlTGlzdGVuZXJzID0ge307XG4gICAgICAgIGlmICghZWwuZG9tN0xpdmVMaXN0ZW5lcnNbZXZlbnRdKSBlbC5kb203TGl2ZUxpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgZWwuZG9tN0xpdmVMaXN0ZW5lcnNbZXZlbnRdLnB1c2goe1xuICAgICAgICAgIGxpc3RlbmVyLFxuICAgICAgICAgIHByb3h5TGlzdGVuZXI6IGhhbmRsZUxpdmVFdmVudFxuICAgICAgICB9KTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlTGl2ZUV2ZW50LCBjYXB0dXJlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gb2ZmKC4uLmFyZ3MpIHtcbiAgbGV0IFtldmVudFR5cGUsIHRhcmdldFNlbGVjdG9yLCBsaXN0ZW5lciwgY2FwdHVyZV0gPSBhcmdzO1xuXG4gIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFtldmVudFR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlXSA9IGFyZ3M7XG4gICAgdGFyZ2V0U2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoIWNhcHR1cmUpIGNhcHR1cmUgPSBmYWxzZTtcbiAgY29uc3QgZXZlbnRzID0gZXZlbnRUeXBlLnNwbGl0KCcgJyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBldmVudCA9IGV2ZW50c1tpXTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgY29uc3QgZWwgPSB0aGlzW2pdO1xuICAgICAgbGV0IGhhbmRsZXJzO1xuXG4gICAgICBpZiAoIXRhcmdldFNlbGVjdG9yICYmIGVsLmRvbTdMaXN0ZW5lcnMpIHtcbiAgICAgICAgaGFuZGxlcnMgPSBlbC5kb203TGlzdGVuZXJzW2V2ZW50XTtcbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0U2VsZWN0b3IgJiYgZWwuZG9tN0xpdmVMaXN0ZW5lcnMpIHtcbiAgICAgICAgaGFuZGxlcnMgPSBlbC5kb203TGl2ZUxpc3RlbmVyc1tldmVudF07XG4gICAgICB9XG5cbiAgICAgIGlmIChoYW5kbGVycyAmJiBoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgayA9IGhhbmRsZXJzLmxlbmd0aCAtIDE7IGsgPj0gMDsgayAtPSAxKSB7XG4gICAgICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW2tdO1xuXG4gICAgICAgICAgaWYgKGxpc3RlbmVyICYmIGhhbmRsZXIubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLnByb3h5TGlzdGVuZXIsIGNhcHR1cmUpO1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGssIDEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobGlzdGVuZXIgJiYgaGFuZGxlci5saXN0ZW5lciAmJiBoYW5kbGVyLmxpc3RlbmVyLmRvbTdwcm94eSAmJiBoYW5kbGVyLmxpc3RlbmVyLmRvbTdwcm94eSA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIucHJveHlMaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgfSBlbHNlIGlmICghbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIucHJveHlMaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIG9uY2UoLi4uYXJncykge1xuICBjb25zdCBkb20gPSB0aGlzO1xuICBsZXQgW2V2ZW50TmFtZSwgdGFyZ2V0U2VsZWN0b3IsIGxpc3RlbmVyLCBjYXB0dXJlXSA9IGFyZ3M7XG5cbiAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgW2V2ZW50TmFtZSwgbGlzdGVuZXIsIGNhcHR1cmVdID0gYXJncztcbiAgICB0YXJnZXRTZWxlY3RvciA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uY2VIYW5kbGVyKC4uLmV2ZW50QXJncykge1xuICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGV2ZW50QXJncyk7XG4gICAgZG9tLm9mZihldmVudE5hbWUsIHRhcmdldFNlbGVjdG9yLCBvbmNlSGFuZGxlciwgY2FwdHVyZSk7XG5cbiAgICBpZiAob25jZUhhbmRsZXIuZG9tN3Byb3h5KSB7XG4gICAgICBkZWxldGUgb25jZUhhbmRsZXIuZG9tN3Byb3h5O1xuICAgIH1cbiAgfVxuXG4gIG9uY2VIYW5kbGVyLmRvbTdwcm94eSA9IGxpc3RlbmVyO1xuICByZXR1cm4gZG9tLm9uKGV2ZW50TmFtZSwgdGFyZ2V0U2VsZWN0b3IsIG9uY2VIYW5kbGVyLCBjYXB0dXJlKTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlciguLi5hcmdzKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBjb25zdCBldmVudHMgPSBhcmdzWzBdLnNwbGl0KCcgJyk7XG4gIGNvbnN0IGV2ZW50RGF0YSA9IGFyZ3NbMV07XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBldmVudCA9IGV2ZW50c1tpXTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgY29uc3QgZWwgPSB0aGlzW2pdO1xuXG4gICAgICBpZiAod2luZG93LkN1c3RvbUV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGV2dCA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoZXZlbnQsIHtcbiAgICAgICAgICBkZXRhaWw6IGV2ZW50RGF0YSxcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGVsLmRvbTdFdmVudERhdGEgPSBhcmdzLmZpbHRlcigoZGF0YSwgZGF0YUluZGV4KSA9PiBkYXRhSW5kZXggPiAwKTtcbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgICBlbC5kb203RXZlbnREYXRhID0gW107XG4gICAgICAgIGRlbGV0ZSBlbC5kb203RXZlbnREYXRhO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB0cmFuc2l0aW9uRW5kKGNhbGxiYWNrKSB7XG4gIGNvbnN0IGRvbSA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gZmlyZUNhbGxCYWNrKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMpIHJldHVybjtcbiAgICBjYWxsYmFjay5jYWxsKHRoaXMsIGUpO1xuICAgIGRvbS5vZmYoJ3RyYW5zaXRpb25lbmQnLCBmaXJlQ2FsbEJhY2spO1xuICB9XG5cbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgZG9tLm9uKCd0cmFuc2l0aW9uZW5kJywgZmlyZUNhbGxCYWNrKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBhbmltYXRpb25FbmQoY2FsbGJhY2spIHtcbiAgY29uc3QgZG9tID0gdGhpcztcblxuICBmdW5jdGlvbiBmaXJlQ2FsbEJhY2soZSkge1xuICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcykgcmV0dXJuO1xuICAgIGNhbGxiYWNrLmNhbGwodGhpcywgZSk7XG4gICAgZG9tLm9mZignYW5pbWF0aW9uZW5kJywgZmlyZUNhbGxCYWNrKTtcbiAgfVxuXG4gIGlmIChjYWxsYmFjaykge1xuICAgIGRvbS5vbignYW5pbWF0aW9uZW5kJywgZmlyZUNhbGxCYWNrKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB3aWR0aCgpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG5cbiAgaWYgKHRoaXNbMF0gPT09IHdpbmRvdykge1xuICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgfVxuXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdCh0aGlzLmNzcygnd2lkdGgnKSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gb3V0ZXJXaWR0aChpbmNsdWRlTWFyZ2lucykge1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKGluY2x1ZGVNYXJnaW5zKSB7XG4gICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLnN0eWxlcygpO1xuICAgICAgcmV0dXJuIHRoaXNbMF0ub2Zmc2V0V2lkdGggKyBwYXJzZUZsb2F0KHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdtYXJnaW4tcmlnaHQnKSkgKyBwYXJzZUZsb2F0KHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdtYXJnaW4tbGVmdCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1swXS5vZmZzZXRXaWR0aDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBoZWlnaHQoKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuXG4gIGlmICh0aGlzWzBdID09PSB3aW5kb3cpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICB9XG5cbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHRoaXMuY3NzKCdoZWlnaHQnKSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gb3V0ZXJIZWlnaHQoaW5jbHVkZU1hcmdpbnMpIHtcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIGlmIChpbmNsdWRlTWFyZ2lucykge1xuICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5zdHlsZXMoKTtcbiAgICAgIHJldHVybiB0aGlzWzBdLm9mZnNldEhlaWdodCArIHBhcnNlRmxvYXQoc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ21hcmdpbi10b3AnKSkgKyBwYXJzZUZsb2F0KHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdtYXJnaW4tYm90dG9tJykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzWzBdLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBvZmZzZXQoKSB7XG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3QgZWwgPSB0aGlzWzBdO1xuICAgIGNvbnN0IGJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIGNvbnN0IGNsaWVudFRvcCA9IGVsLmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwO1xuICAgIGNvbnN0IGNsaWVudExlZnQgPSBlbC5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwO1xuICAgIGNvbnN0IHNjcm9sbFRvcCA9IGVsID09PSB3aW5kb3cgPyB3aW5kb3cuc2Nyb2xsWSA6IGVsLnNjcm9sbFRvcDtcbiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gZWwgPT09IHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxYIDogZWwuc2Nyb2xsTGVmdDtcbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBib3gudG9wICsgc2Nyb2xsVG9wIC0gY2xpZW50VG9wLFxuICAgICAgbGVmdDogYm94LmxlZnQgKyBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gaGlkZSgpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhpc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHNob3coKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGVsID0gdGhpc1tpXTtcblxuICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG5cbiAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7XG4gICAgICAvLyBTdGlsbCBub3QgdmlzaWJsZVxuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHN0eWxlcygpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGlmICh0aGlzWzBdKSByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpc1swXSwgbnVsbCk7XG4gIHJldHVybiB7fTtcbn1cblxuZnVuY3Rpb24gY3NzKHByb3BzLCB2YWx1ZSkge1xuICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgbGV0IGk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBpZiAodHlwZW9mIHByb3BzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gLmNzcygnd2lkdGgnKVxuICAgICAgaWYgKHRoaXNbMF0pIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLmNzcyh7IHdpZHRoOiAnMTAwcHgnIH0pXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgICB0aGlzW2ldLnN0eWxlW3Byb3BdID0gcHJvcHNbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIHByb3BzID09PSAnc3RyaW5nJykge1xuICAgIC8vIC5jc3MoJ3dpZHRoJywgJzEwMHB4JylcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdGhpc1tpXS5zdHlsZVtwcm9wc10gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBlYWNoKGNhbGxiYWNrKSB7XG4gIGlmICghY2FsbGJhY2spIHJldHVybiB0aGlzO1xuICB0aGlzLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgIGNhbGxiYWNrLmFwcGx5KGVsLCBbZWwsIGluZGV4XSk7XG4gIH0pO1xuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGFycmF5RmlsdGVyKHRoaXMsIGNhbGxiYWNrKTtcbiAgcmV0dXJuICQocmVzdWx0KTtcbn1cblxuZnVuY3Rpb24gaHRtbChodG1sKSB7XG4gIGlmICh0eXBlb2YgaHRtbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdGhpc1swXSA/IHRoaXNbMF0uaW5uZXJIVE1MIDogbnVsbDtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoaXNbaV0uaW5uZXJIVE1MID0gaHRtbDtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB0ZXh0KHRleHQpIHtcbiAgaWYgKHR5cGVvZiB0ZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB0aGlzWzBdID8gdGhpc1swXS50ZXh0Q29udGVudC50cmltKCkgOiBudWxsO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhpc1tpXS50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gaXMoc2VsZWN0b3IpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgY29uc3QgZWwgPSB0aGlzWzBdO1xuICBsZXQgY29tcGFyZVdpdGg7XG4gIGxldCBpO1xuICBpZiAoIWVsIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgIGlmIChlbC5tYXRjaGVzKSByZXR1cm4gZWwubWF0Y2hlcyhzZWxlY3Rvcik7XG4gICAgaWYgKGVsLndlYmtpdE1hdGNoZXNTZWxlY3RvcikgcmV0dXJuIGVsLndlYmtpdE1hdGNoZXNTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgaWYgKGVsLm1zTWF0Y2hlc1NlbGVjdG9yKSByZXR1cm4gZWwubXNNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIGNvbXBhcmVXaXRoID0gJChzZWxlY3Rvcik7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgY29tcGFyZVdpdGgubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChjb21wYXJlV2l0aFtpXSA9PT0gZWwpIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChzZWxlY3RvciA9PT0gZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZWwgPT09IGRvY3VtZW50O1xuICB9XG5cbiAgaWYgKHNlbGVjdG9yID09PSB3aW5kb3cpIHtcbiAgICByZXR1cm4gZWwgPT09IHdpbmRvdztcbiAgfVxuXG4gIGlmIChzZWxlY3Rvci5ub2RlVHlwZSB8fCBzZWxlY3RvciBpbnN0YW5jZW9mIERvbTcpIHtcbiAgICBjb21wYXJlV2l0aCA9IHNlbGVjdG9yLm5vZGVUeXBlID8gW3NlbGVjdG9yXSA6IHNlbGVjdG9yO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGNvbXBhcmVXaXRoLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAoY29tcGFyZVdpdGhbaV0gPT09IGVsKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGluZGV4KCkge1xuICBsZXQgY2hpbGQgPSB0aGlzWzBdO1xuICBsZXQgaTtcblxuICBpZiAoY2hpbGQpIHtcbiAgICBpID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cbiAgICB3aGlsZSAoKGNoaWxkID0gY2hpbGQucHJldmlvdXNTaWJsaW5nKSAhPT0gbnVsbCkge1xuICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAxKSBpICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGk7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBlcShpbmRleCkge1xuICBpZiAodHlwZW9mIGluZGV4ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXM7XG4gIGNvbnN0IGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuXG4gIGlmIChpbmRleCA+IGxlbmd0aCAtIDEpIHtcbiAgICByZXR1cm4gJChbXSk7XG4gIH1cblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgY29uc3QgcmV0dXJuSW5kZXggPSBsZW5ndGggKyBpbmRleDtcbiAgICBpZiAocmV0dXJuSW5kZXggPCAwKSByZXR1cm4gJChbXSk7XG4gICAgcmV0dXJuICQoW3RoaXNbcmV0dXJuSW5kZXhdXSk7XG4gIH1cblxuICByZXR1cm4gJChbdGhpc1tpbmRleF1dKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kKC4uLmVscykge1xuICBsZXQgbmV3Q2hpbGQ7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcblxuICBmb3IgKGxldCBrID0gMDsgayA8IGVscy5sZW5ndGg7IGsgKz0gMSkge1xuICAgIG5ld0NoaWxkID0gZWxzW2tdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodHlwZW9mIG5ld0NoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gbmV3Q2hpbGQ7XG5cbiAgICAgICAgd2hpbGUgKHRlbXBEaXYuZmlyc3RDaGlsZCkge1xuICAgICAgICAgIHRoaXNbaV0uYXBwZW5kQ2hpbGQodGVtcERpdi5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChuZXdDaGlsZCBpbnN0YW5jZW9mIERvbTcpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBuZXdDaGlsZC5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICAgIHRoaXNbaV0uYXBwZW5kQ2hpbGQobmV3Q2hpbGRbal0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW2ldLmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gYXBwZW5kVG8ocGFyZW50KSB7XG4gICQocGFyZW50KS5hcHBlbmQodGhpcyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBwcmVwZW5kKG5ld0NoaWxkKSB7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgbGV0IGk7XG4gIGxldCBqO1xuXG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHR5cGVvZiBuZXdDaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHRlbXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gbmV3Q2hpbGQ7XG5cbiAgICAgIGZvciAoaiA9IHRlbXBEaXYuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkge1xuICAgICAgICB0aGlzW2ldLmluc2VydEJlZm9yZSh0ZW1wRGl2LmNoaWxkTm9kZXNbal0sIHRoaXNbaV0uY2hpbGROb2Rlc1swXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuZXdDaGlsZCBpbnN0YW5jZW9mIERvbTcpIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCBuZXdDaGlsZC5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICB0aGlzW2ldLmluc2VydEJlZm9yZShuZXdDaGlsZFtqXSwgdGhpc1tpXS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpc1tpXS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIHRoaXNbaV0uY2hpbGROb2Rlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHByZXBlbmRUbyhwYXJlbnQpIHtcbiAgJChwYXJlbnQpLnByZXBlbmQodGhpcyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRCZWZvcmUoc2VsZWN0b3IpIHtcbiAgY29uc3QgYmVmb3JlID0gJChzZWxlY3Rvcik7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGJlZm9yZS5sZW5ndGggPT09IDEpIHtcbiAgICAgIGJlZm9yZVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLCBiZWZvcmVbMF0pO1xuICAgIH0gZWxzZSBpZiAoYmVmb3JlLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmVmb3JlLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgIGJlZm9yZVtqXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLmNsb25lTm9kZSh0cnVlKSwgYmVmb3JlW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoc2VsZWN0b3IpIHtcbiAgY29uc3QgYWZ0ZXIgPSAkKHNlbGVjdG9yKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoYWZ0ZXIubGVuZ3RoID09PSAxKSB7XG4gICAgICBhZnRlclswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLCBhZnRlclswXS5uZXh0U2libGluZyk7XG4gICAgfSBlbHNlIGlmIChhZnRlci5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFmdGVyLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgIGFmdGVyW2pdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXNbaV0uY2xvbmVOb2RlKHRydWUpLCBhZnRlcltqXS5uZXh0U2libGluZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG5leHQoc2VsZWN0b3IpIHtcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgaWYgKHRoaXNbMF0ubmV4dEVsZW1lbnRTaWJsaW5nICYmICQodGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gJChbdGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmddKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICQoW10pO1xuICAgIH1cblxuICAgIGlmICh0aGlzWzBdLm5leHRFbGVtZW50U2libGluZykgcmV0dXJuICQoW3RoaXNbMF0ubmV4dEVsZW1lbnRTaWJsaW5nXSk7XG4gICAgcmV0dXJuICQoW10pO1xuICB9XG5cbiAgcmV0dXJuICQoW10pO1xufVxuXG5mdW5jdGlvbiBuZXh0QWxsKHNlbGVjdG9yKSB7XG4gIGNvbnN0IG5leHRFbHMgPSBbXTtcbiAgbGV0IGVsID0gdGhpc1swXTtcbiAgaWYgKCFlbCkgcmV0dXJuICQoW10pO1xuXG4gIHdoaWxlIChlbC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICBjb25zdCBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICgkKG5leHQpLmlzKHNlbGVjdG9yKSkgbmV4dEVscy5wdXNoKG5leHQpO1xuICAgIH0gZWxzZSBuZXh0RWxzLnB1c2gobmV4dCk7XG5cbiAgICBlbCA9IG5leHQ7XG4gIH1cblxuICByZXR1cm4gJChuZXh0RWxzKTtcbn1cblxuZnVuY3Rpb24gcHJldihzZWxlY3Rvcikge1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzWzBdO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBpZiAoZWwucHJldmlvdXNFbGVtZW50U2libGluZyAmJiAkKGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gJChbZWwucHJldmlvdXNFbGVtZW50U2libGluZ10pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJChbXSk7XG4gICAgfVxuXG4gICAgaWYgKGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHJldHVybiAkKFtlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXSk7XG4gICAgcmV0dXJuICQoW10pO1xuICB9XG5cbiAgcmV0dXJuICQoW10pO1xufVxuXG5mdW5jdGlvbiBwcmV2QWxsKHNlbGVjdG9yKSB7XG4gIGNvbnN0IHByZXZFbHMgPSBbXTtcbiAgbGV0IGVsID0gdGhpc1swXTtcbiAgaWYgKCFlbCkgcmV0dXJuICQoW10pO1xuXG4gIHdoaWxlIChlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgY29uc3QgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCQocHJldikuaXMoc2VsZWN0b3IpKSBwcmV2RWxzLnB1c2gocHJldik7XG4gICAgfSBlbHNlIHByZXZFbHMucHVzaChwcmV2KTtcblxuICAgIGVsID0gcHJldjtcbiAgfVxuXG4gIHJldHVybiAkKHByZXZFbHMpO1xufVxuXG5mdW5jdGlvbiBzaWJsaW5ncyhzZWxlY3Rvcikge1xuICByZXR1cm4gdGhpcy5uZXh0QWxsKHNlbGVjdG9yKS5hZGQodGhpcy5wcmV2QWxsKHNlbGVjdG9yKSk7XG59XG5cbmZ1bmN0aW9uIHBhcmVudChzZWxlY3Rvcikge1xuICBjb25zdCBwYXJlbnRzID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAodGhpc1tpXS5wYXJlbnROb2RlICE9PSBudWxsKSB7XG4gICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKCQodGhpc1tpXS5wYXJlbnROb2RlKS5pcyhzZWxlY3RvcikpIHBhcmVudHMucHVzaCh0aGlzW2ldLnBhcmVudE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKHRoaXNbaV0ucGFyZW50Tm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICQocGFyZW50cyk7XG59XG5cbmZ1bmN0aW9uIHBhcmVudHMoc2VsZWN0b3IpIHtcbiAgY29uc3QgcGFyZW50cyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgbGV0IHBhcmVudCA9IHRoaXNbaV0ucGFyZW50Tm9kZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmICgkKHBhcmVudCkuaXMoc2VsZWN0b3IpKSBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJChwYXJlbnRzKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VzdChzZWxlY3Rvcikge1xuICBsZXQgY2xvc2VzdCA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiAkKFtdKTtcbiAgfVxuXG4gIGlmICghY2xvc2VzdC5pcyhzZWxlY3RvcikpIHtcbiAgICBjbG9zZXN0ID0gY2xvc2VzdC5wYXJlbnRzKHNlbGVjdG9yKS5lcSgwKTtcbiAgfVxuXG4gIHJldHVybiBjbG9zZXN0O1xufVxuXG5mdW5jdGlvbiBmaW5kKHNlbGVjdG9yKSB7XG4gIGNvbnN0IGZvdW5kRWxlbWVudHMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBmb3VuZCA9IHRoaXNbaV0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZvdW5kLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICBmb3VuZEVsZW1lbnRzLnB1c2goZm91bmRbal0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAkKGZvdW5kRWxlbWVudHMpO1xufVxuXG5mdW5jdGlvbiBjaGlsZHJlbihzZWxlY3Rvcikge1xuICBjb25zdCBjaGlsZHJlbiA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXNbaV0uY2hpbGRyZW47XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkTm9kZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgIGlmICghc2VsZWN0b3IgfHwgJChjaGlsZE5vZGVzW2pdKS5pcyhzZWxlY3RvcikpIHtcbiAgICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZE5vZGVzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gJChjaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHRoaXNbaV0ucGFyZW50Tm9kZSkgdGhpc1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXNbaV0pO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgcmV0dXJuIHRoaXMucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIGFkZCguLi5lbHMpIHtcbiAgY29uc3QgZG9tID0gdGhpcztcbiAgbGV0IGk7XG4gIGxldCBqO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCB0b0FkZCA9ICQoZWxzW2ldKTtcblxuICAgIGZvciAoaiA9IDA7IGogPCB0b0FkZC5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgZG9tLnB1c2godG9BZGRbal0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkb207XG59XG5cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBlbCA9IHRoaXNbaV07XG5cbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZWwuY2hpbGROb2Rlcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICBpZiAoZWwuY2hpbGROb2Rlc1tqXS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgZWwuY2hpbGROb2Rlc1tqXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsLmNoaWxkTm9kZXNbal0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGVsLnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG5mdW5jdGlvbiBzY3JvbGxUbyguLi5hcmdzKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBsZXQgW2xlZnQsIHRvcCwgZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2tdID0gYXJncztcblxuICBpZiAoYXJncy5sZW5ndGggPT09IDQgJiYgdHlwZW9mIGVhc2luZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gZWFzaW5nO1xuICAgIFtsZWZ0LCB0b3AsIGR1cmF0aW9uLCBjYWxsYmFjaywgZWFzaW5nXSA9IGFyZ3M7XG4gIH1cblxuICBpZiAodHlwZW9mIGVhc2luZyA9PT0gJ3VuZGVmaW5lZCcpIGVhc2luZyA9ICdzd2luZyc7XG4gIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICBjb25zdCBlbCA9IHRoaXM7XG4gICAgbGV0IGN1cnJlbnRUb3A7XG4gICAgbGV0IGN1cnJlbnRMZWZ0O1xuICAgIGxldCBtYXhUb3A7XG4gICAgbGV0IG1heExlZnQ7XG4gICAgbGV0IG5ld1RvcDtcbiAgICBsZXQgbmV3TGVmdDtcbiAgICBsZXQgc2Nyb2xsVG9wOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBsZXQgc2Nyb2xsTGVmdDsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgbGV0IGFuaW1hdGVUb3AgPSB0b3AgPiAwIHx8IHRvcCA9PT0gMDtcbiAgICBsZXQgYW5pbWF0ZUxlZnQgPSBsZWZ0ID4gMCB8fCBsZWZ0ID09PSAwO1xuXG4gICAgaWYgKHR5cGVvZiBlYXNpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlYXNpbmcgPSAnc3dpbmcnO1xuICAgIH1cblxuICAgIGlmIChhbmltYXRlVG9wKSB7XG4gICAgICBjdXJyZW50VG9wID0gZWwuc2Nyb2xsVG9wO1xuXG4gICAgICBpZiAoIWR1cmF0aW9uKSB7XG4gICAgICAgIGVsLnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYW5pbWF0ZUxlZnQpIHtcbiAgICAgIGN1cnJlbnRMZWZ0ID0gZWwuc2Nyb2xsTGVmdDtcblxuICAgICAgaWYgKCFkdXJhdGlvbikge1xuICAgICAgICBlbC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWR1cmF0aW9uKSByZXR1cm47XG5cbiAgICBpZiAoYW5pbWF0ZVRvcCkge1xuICAgICAgbWF4VG9wID0gZWwuc2Nyb2xsSGVpZ2h0IC0gZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgbmV3VG9wID0gTWF0aC5tYXgoTWF0aC5taW4odG9wLCBtYXhUb3ApLCAwKTtcbiAgICB9XG5cbiAgICBpZiAoYW5pbWF0ZUxlZnQpIHtcbiAgICAgIG1heExlZnQgPSBlbC5zY3JvbGxXaWR0aCAtIGVsLm9mZnNldFdpZHRoO1xuICAgICAgbmV3TGVmdCA9IE1hdGgubWF4KE1hdGgubWluKGxlZnQsIG1heExlZnQpLCAwKTtcbiAgICB9XG5cbiAgICBsZXQgc3RhcnRUaW1lID0gbnVsbDtcbiAgICBpZiAoYW5pbWF0ZVRvcCAmJiBuZXdUb3AgPT09IGN1cnJlbnRUb3ApIGFuaW1hdGVUb3AgPSBmYWxzZTtcbiAgICBpZiAoYW5pbWF0ZUxlZnQgJiYgbmV3TGVmdCA9PT0gY3VycmVudExlZnQpIGFuaW1hdGVMZWZ0ID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiByZW5kZXIodGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7XG4gICAgICBpZiAoc3RhcnRUaW1lID09PSBudWxsKSB7XG4gICAgICAgIHN0YXJ0VGltZSA9IHRpbWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oKHRpbWUgLSBzdGFydFRpbWUpIC8gZHVyYXRpb24sIDEpLCAwKTtcbiAgICAgIGNvbnN0IGVhc2VQcm9ncmVzcyA9IGVhc2luZyA9PT0gJ2xpbmVhcicgPyBwcm9ncmVzcyA6IDAuNSAtIE1hdGguY29zKHByb2dyZXNzICogTWF0aC5QSSkgLyAyO1xuICAgICAgbGV0IGRvbmU7XG4gICAgICBpZiAoYW5pbWF0ZVRvcCkgc2Nyb2xsVG9wID0gY3VycmVudFRvcCArIGVhc2VQcm9ncmVzcyAqIChuZXdUb3AgLSBjdXJyZW50VG9wKTtcbiAgICAgIGlmIChhbmltYXRlTGVmdCkgc2Nyb2xsTGVmdCA9IGN1cnJlbnRMZWZ0ICsgZWFzZVByb2dyZXNzICogKG5ld0xlZnQgLSBjdXJyZW50TGVmdCk7XG5cbiAgICAgIGlmIChhbmltYXRlVG9wICYmIG5ld1RvcCA+IGN1cnJlbnRUb3AgJiYgc2Nyb2xsVG9wID49IG5ld1RvcCkge1xuICAgICAgICBlbC5zY3JvbGxUb3AgPSBuZXdUb3A7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYW5pbWF0ZVRvcCAmJiBuZXdUb3AgPCBjdXJyZW50VG9wICYmIHNjcm9sbFRvcCA8PSBuZXdUb3ApIHtcbiAgICAgICAgZWwuc2Nyb2xsVG9wID0gbmV3VG9wO1xuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFuaW1hdGVMZWZ0ICYmIG5ld0xlZnQgPiBjdXJyZW50TGVmdCAmJiBzY3JvbGxMZWZ0ID49IG5ld0xlZnQpIHtcbiAgICAgICAgZWwuc2Nyb2xsTGVmdCA9IG5ld0xlZnQ7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYW5pbWF0ZUxlZnQgJiYgbmV3TGVmdCA8IGN1cnJlbnRMZWZ0ICYmIHNjcm9sbExlZnQgPD0gbmV3TGVmdCkge1xuICAgICAgICBlbC5zY3JvbGxMZWZ0ID0gbmV3TGVmdDtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChkb25lKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoYW5pbWF0ZVRvcCkgZWwuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgaWYgKGFuaW1hdGVMZWZ0KSBlbC5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgICB9XG5cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gIH0pO1xufSAvLyBzY3JvbGxUb3AodG9wLCBkdXJhdGlvbiwgZWFzaW5nLCBjYWxsYmFjaykge1xuXG5cbmZ1bmN0aW9uIHNjcm9sbFRvcCguLi5hcmdzKSB7XG4gIGxldCBbdG9wLCBkdXJhdGlvbiwgZWFzaW5nLCBjYWxsYmFja10gPSBhcmdzO1xuXG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgZWFzaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgW3RvcCwgZHVyYXRpb24sIGNhbGxiYWNrLCBlYXNpbmddID0gYXJncztcbiAgfVxuXG4gIGNvbnN0IGRvbSA9IHRoaXM7XG5cbiAgaWYgKHR5cGVvZiB0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKGRvbS5sZW5ndGggPiAwKSByZXR1cm4gZG9tWzBdLnNjcm9sbFRvcDtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBkb20uc2Nyb2xsVG8odW5kZWZpbmVkLCB0b3AsIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsTGVmdCguLi5hcmdzKSB7XG4gIGxldCBbbGVmdCwgZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2tdID0gYXJncztcblxuICBpZiAoYXJncy5sZW5ndGggPT09IDMgJiYgdHlwZW9mIGVhc2luZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFtsZWZ0LCBkdXJhdGlvbiwgY2FsbGJhY2ssIGVhc2luZ10gPSBhcmdzO1xuICB9XG5cbiAgY29uc3QgZG9tID0gdGhpcztcblxuICBpZiAodHlwZW9mIGxlZnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKGRvbS5sZW5ndGggPiAwKSByZXR1cm4gZG9tWzBdLnNjcm9sbExlZnQ7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZG9tLnNjcm9sbFRvKGxlZnQsIHVuZGVmaW5lZCwgZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2spO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuZnVuY3Rpb24gYW5pbWF0ZShpbml0aWFsUHJvcHMsIGluaXRpYWxQYXJhbXMpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGNvbnN0IGVscyA9IHRoaXM7XG4gIGNvbnN0IGEgPSB7XG4gICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oe30sIGluaXRpYWxQcm9wcyksXG4gICAgcGFyYW1zOiBPYmplY3QuYXNzaWduKHtcbiAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICBlYXNpbmc6ICdzd2luZycgLy8gb3IgJ2xpbmVhcidcblxuICAgICAgLyogQ2FsbGJhY2tzXG4gICAgICBiZWdpbihlbGVtZW50cylcbiAgICAgIGNvbXBsZXRlKGVsZW1lbnRzKVxuICAgICAgcHJvZ3Jlc3MoZWxlbWVudHMsIGNvbXBsZXRlLCByZW1haW5pbmcsIHN0YXJ0LCB0d2VlblZhbHVlKVxuICAgICAgKi9cblxuICAgIH0sIGluaXRpYWxQYXJhbXMpLFxuICAgIGVsZW1lbnRzOiBlbHMsXG4gICAgYW5pbWF0aW5nOiBmYWxzZSxcbiAgICBxdWU6IFtdLFxuXG4gICAgZWFzaW5nUHJvZ3Jlc3MoZWFzaW5nLCBwcm9ncmVzcykge1xuICAgICAgaWYgKGVhc2luZyA9PT0gJ3N3aW5nJykge1xuICAgICAgICByZXR1cm4gMC41IC0gTWF0aC5jb3MocHJvZ3Jlc3MgKiBNYXRoLlBJKSAvIDI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZWFzaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBlYXNpbmcocHJvZ3Jlc3MpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvZ3Jlc3M7XG4gICAgfSxcblxuICAgIHN0b3AoKSB7XG4gICAgICBpZiAoYS5mcmFtZUlkKSB7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShhLmZyYW1lSWQpO1xuICAgICAgfVxuXG4gICAgICBhLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgYS5lbGVtZW50cy5lYWNoKGVsID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsO1xuICAgICAgICBkZWxldGUgZWxlbWVudC5kb203QW5pbWF0ZUluc3RhbmNlO1xuICAgICAgfSk7XG4gICAgICBhLnF1ZSA9IFtdO1xuICAgIH0sXG5cbiAgICBkb25lKGNvbXBsZXRlKSB7XG4gICAgICBhLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgYS5lbGVtZW50cy5lYWNoKGVsID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsO1xuICAgICAgICBkZWxldGUgZWxlbWVudC5kb203QW5pbWF0ZUluc3RhbmNlO1xuICAgICAgfSk7XG4gICAgICBpZiAoY29tcGxldGUpIGNvbXBsZXRlKGVscyk7XG5cbiAgICAgIGlmIChhLnF1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHF1ZSA9IGEucXVlLnNoaWZ0KCk7XG4gICAgICAgIGEuYW5pbWF0ZShxdWVbMF0sIHF1ZVsxXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFuaW1hdGUocHJvcHMsIHBhcmFtcykge1xuICAgICAgaWYgKGEuYW5pbWF0aW5nKSB7XG4gICAgICAgIGEucXVlLnB1c2goW3Byb3BzLCBwYXJhbXNdKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107IC8vIERlZmluZSAmIENhY2hlIEluaXRpYWxzICYgVW5pdHNcblxuICAgICAgYS5lbGVtZW50cy5lYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGluaXRpYWxGdWxsVmFsdWU7XG4gICAgICAgIGxldCBpbml0aWFsVmFsdWU7XG4gICAgICAgIGxldCB1bml0O1xuICAgICAgICBsZXQgZmluYWxWYWx1ZTtcbiAgICAgICAgbGV0IGZpbmFsRnVsbFZhbHVlO1xuICAgICAgICBpZiAoIWVsLmRvbTdBbmltYXRlSW5zdGFuY2UpIGEuZWxlbWVudHNbaW5kZXhdLmRvbTdBbmltYXRlSW5zdGFuY2UgPSBhO1xuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSB7XG4gICAgICAgICAgY29udGFpbmVyOiBlbFxuICAgICAgICB9O1xuICAgICAgICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICBpbml0aWFsRnVsbFZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCkucmVwbGFjZSgnLCcsICcuJyk7XG4gICAgICAgICAgaW5pdGlhbFZhbHVlID0gcGFyc2VGbG9hdChpbml0aWFsRnVsbFZhbHVlKTtcbiAgICAgICAgICB1bml0ID0gaW5pdGlhbEZ1bGxWYWx1ZS5yZXBsYWNlKGluaXRpYWxWYWx1ZSwgJycpO1xuICAgICAgICAgIGZpbmFsVmFsdWUgPSBwYXJzZUZsb2F0KHByb3BzW3Byb3BdKTtcbiAgICAgICAgICBmaW5hbEZ1bGxWYWx1ZSA9IHByb3BzW3Byb3BdICsgdW5pdDtcbiAgICAgICAgICBlbGVtZW50c1tpbmRleF1bcHJvcF0gPSB7XG4gICAgICAgICAgICBpbml0aWFsRnVsbFZhbHVlLFxuICAgICAgICAgICAgaW5pdGlhbFZhbHVlLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGZpbmFsVmFsdWUsXG4gICAgICAgICAgICBmaW5hbEZ1bGxWYWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZTogaW5pdGlhbFZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGxldCBzdGFydFRpbWUgPSBudWxsO1xuICAgICAgbGV0IHRpbWU7XG4gICAgICBsZXQgZWxlbWVudHNEb25lID0gMDtcbiAgICAgIGxldCBwcm9wc0RvbmUgPSAwO1xuICAgICAgbGV0IGRvbmU7XG4gICAgICBsZXQgYmVnYW4gPSBmYWxzZTtcbiAgICAgIGEuYW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCBwcm9ncmVzcztcbiAgICAgICAgbGV0IGVhc2VQcm9ncmVzczsgLy8gbGV0IGVsO1xuXG4gICAgICAgIGlmICghYmVnYW4pIHtcbiAgICAgICAgICBiZWdhbiA9IHRydWU7XG4gICAgICAgICAgaWYgKHBhcmFtcy5iZWdpbikgcGFyYW1zLmJlZ2luKGVscyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhcnRUaW1lID09PSBudWxsKSB7XG4gICAgICAgICAgc3RhcnRUaW1lID0gdGltZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJhbXMucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICBwYXJhbXMucHJvZ3Jlc3MoZWxzLCBNYXRoLm1heChNYXRoLm1pbigodGltZSAtIHN0YXJ0VGltZSkgLyBwYXJhbXMuZHVyYXRpb24sIDEpLCAwKSwgc3RhcnRUaW1lICsgcGFyYW1zLmR1cmF0aW9uIC0gdGltZSA8IDAgPyAwIDogc3RhcnRUaW1lICsgcGFyYW1zLmR1cmF0aW9uIC0gdGltZSwgc3RhcnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgY29uc3QgZWwgPSBlbGVtZW50O1xuICAgICAgICAgIGlmIChkb25lIHx8IGVsLmRvbmUpIHJldHVybjtcbiAgICAgICAgICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgIGlmIChkb25lIHx8IGVsLmRvbmUpIHJldHVybjtcbiAgICAgICAgICAgIHByb2dyZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oKHRpbWUgLSBzdGFydFRpbWUpIC8gcGFyYW1zLmR1cmF0aW9uLCAxKSwgMCk7XG4gICAgICAgICAgICBlYXNlUHJvZ3Jlc3MgPSBhLmVhc2luZ1Byb2dyZXNzKHBhcmFtcy5lYXNpbmcsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlLFxuICAgICAgICAgICAgICBmaW5hbFZhbHVlLFxuICAgICAgICAgICAgICB1bml0XG4gICAgICAgICAgICB9ID0gZWxbcHJvcF07XG4gICAgICAgICAgICBlbFtwcm9wXS5jdXJyZW50VmFsdWUgPSBpbml0aWFsVmFsdWUgKyBlYXNlUHJvZ3Jlc3MgKiAoZmluYWxWYWx1ZSAtIGluaXRpYWxWYWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBlbFtwcm9wXS5jdXJyZW50VmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChmaW5hbFZhbHVlID4gaW5pdGlhbFZhbHVlICYmIGN1cnJlbnRWYWx1ZSA+PSBmaW5hbFZhbHVlIHx8IGZpbmFsVmFsdWUgPCBpbml0aWFsVmFsdWUgJiYgY3VycmVudFZhbHVlIDw9IGZpbmFsVmFsdWUpIHtcbiAgICAgICAgICAgICAgZWwuY29udGFpbmVyLnN0eWxlW3Byb3BdID0gZmluYWxWYWx1ZSArIHVuaXQ7XG4gICAgICAgICAgICAgIHByb3BzRG9uZSArPSAxO1xuXG4gICAgICAgICAgICAgIGlmIChwcm9wc0RvbmUgPT09IE9iamVjdC5rZXlzKHByb3BzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbC5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c0RvbmUgKz0gMTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbGVtZW50c0RvbmUgPT09IGVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgIGEuZG9uZShwYXJhbXMuY29tcGxldGUpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsLmNvbnRhaW5lci5zdHlsZVtwcm9wXSA9IGN1cnJlbnRWYWx1ZSArIHVuaXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZG9uZSkgcmV0dXJuOyAvLyBUaGVuIGNhbGxcblxuICAgICAgICBhLmZyYW1lSWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICB9XG5cbiAgICAgIGEuZnJhbWVJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICB9O1xuXG4gIGlmIChhLmVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBlbHM7XG4gIH1cblxuICBsZXQgYW5pbWF0ZUluc3RhbmNlO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5lbGVtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChhLmVsZW1lbnRzW2ldLmRvbTdBbmltYXRlSW5zdGFuY2UpIHtcbiAgICAgIGFuaW1hdGVJbnN0YW5jZSA9IGEuZWxlbWVudHNbaV0uZG9tN0FuaW1hdGVJbnN0YW5jZTtcbiAgICB9IGVsc2UgYS5lbGVtZW50c1tpXS5kb203QW5pbWF0ZUluc3RhbmNlID0gYTtcbiAgfVxuXG4gIGlmICghYW5pbWF0ZUluc3RhbmNlKSB7XG4gICAgYW5pbWF0ZUluc3RhbmNlID0gYTtcbiAgfVxuXG4gIGlmIChpbml0aWFsUHJvcHMgPT09ICdzdG9wJykge1xuICAgIGFuaW1hdGVJbnN0YW5jZS5zdG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgYW5pbWF0ZUluc3RhbmNlLmFuaW1hdGUoYS5wcm9wcywgYS5wYXJhbXMpO1xuICB9XG5cbiAgcmV0dXJuIGVscztcbn1cblxuZnVuY3Rpb24gc3RvcCgpIHtcbiAgY29uc3QgZWxzID0gdGhpcztcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChlbHNbaV0uZG9tN0FuaW1hdGVJbnN0YW5jZSkge1xuICAgICAgZWxzW2ldLmRvbTdBbmltYXRlSW5zdGFuY2Uuc3RvcCgpO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBub1RyaWdnZXIgPSAncmVzaXplIHNjcm9sbCcuc3BsaXQoJyAnKTtcblxuZnVuY3Rpb24gc2hvcnRjdXQobmFtZSkge1xuICBmdW5jdGlvbiBldmVudEhhbmRsZXIoLi4uYXJncykge1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAobm9UcmlnZ2VyLmluZGV4T2YobmFtZSkgPCAwKSB7XG4gICAgICAgICAgaWYgKG5hbWUgaW4gdGhpc1tpXSkgdGhpc1tpXVtuYW1lXSgpO2Vsc2Uge1xuICAgICAgICAgICAgJCh0aGlzW2ldKS50cmlnZ2VyKG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5vbihuYW1lLCAuLi5hcmdzKTtcbiAgfVxuXG4gIHJldHVybiBldmVudEhhbmRsZXI7XG59XG5cbmNvbnN0IGNsaWNrID0gc2hvcnRjdXQoJ2NsaWNrJyk7XG5jb25zdCBibHVyID0gc2hvcnRjdXQoJ2JsdXInKTtcbmNvbnN0IGZvY3VzID0gc2hvcnRjdXQoJ2ZvY3VzJyk7XG5jb25zdCBmb2N1c2luID0gc2hvcnRjdXQoJ2ZvY3VzaW4nKTtcbmNvbnN0IGZvY3Vzb3V0ID0gc2hvcnRjdXQoJ2ZvY3Vzb3V0Jyk7XG5jb25zdCBrZXl1cCA9IHNob3J0Y3V0KCdrZXl1cCcpO1xuY29uc3Qga2V5ZG93biA9IHNob3J0Y3V0KCdrZXlkb3duJyk7XG5jb25zdCBrZXlwcmVzcyA9IHNob3J0Y3V0KCdrZXlwcmVzcycpO1xuY29uc3Qgc3VibWl0ID0gc2hvcnRjdXQoJ3N1Ym1pdCcpO1xuY29uc3QgY2hhbmdlID0gc2hvcnRjdXQoJ2NoYW5nZScpO1xuY29uc3QgbW91c2Vkb3duID0gc2hvcnRjdXQoJ21vdXNlZG93bicpO1xuY29uc3QgbW91c2Vtb3ZlID0gc2hvcnRjdXQoJ21vdXNlbW92ZScpO1xuY29uc3QgbW91c2V1cCA9IHNob3J0Y3V0KCdtb3VzZXVwJyk7XG5jb25zdCBtb3VzZWVudGVyID0gc2hvcnRjdXQoJ21vdXNlZW50ZXInKTtcbmNvbnN0IG1vdXNlbGVhdmUgPSBzaG9ydGN1dCgnbW91c2VsZWF2ZScpO1xuY29uc3QgbW91c2VvdXQgPSBzaG9ydGN1dCgnbW91c2VvdXQnKTtcbmNvbnN0IG1vdXNlb3ZlciA9IHNob3J0Y3V0KCdtb3VzZW92ZXInKTtcbmNvbnN0IHRvdWNoc3RhcnQgPSBzaG9ydGN1dCgndG91Y2hzdGFydCcpO1xuY29uc3QgdG91Y2hlbmQgPSBzaG9ydGN1dCgndG91Y2hlbmQnKTtcbmNvbnN0IHRvdWNobW92ZSA9IHNob3J0Y3V0KCd0b3VjaG1vdmUnKTtcbmNvbnN0IHJlc2l6ZSA9IHNob3J0Y3V0KCdyZXNpemUnKTtcbmNvbnN0IHNjcm9sbCA9IHNob3J0Y3V0KCdzY3JvbGwnKTtcblxuZXhwb3J0IGRlZmF1bHQgJDtcbmV4cG9ydCB7ICQsIGFkZCwgYWRkQ2xhc3MsIGFuaW1hdGUsIGFuaW1hdGlvbkVuZCwgYXBwZW5kLCBhcHBlbmRUbywgYXR0ciwgYmx1ciwgY2hhbmdlLCBjaGlsZHJlbiwgY2xpY2ssIGNsb3Nlc3QsIGNzcywgZGF0YSwgZGF0YXNldCwgZGV0YWNoLCBlYWNoLCBlbXB0eSwgZXEsIGZpbHRlciwgZmluZCwgZm9jdXMsIGZvY3VzaW4sIGZvY3Vzb3V0LCBoYXNDbGFzcywgaGVpZ2h0LCBoaWRlLCBodG1sLCBpbmRleCwgaW5zZXJ0QWZ0ZXIsIGluc2VydEJlZm9yZSwgaXMsIGtleWRvd24sIGtleXByZXNzLCBrZXl1cCwgbW91c2Vkb3duLCBtb3VzZWVudGVyLCBtb3VzZWxlYXZlLCBtb3VzZW1vdmUsIG1vdXNlb3V0LCBtb3VzZW92ZXIsIG1vdXNldXAsIG5leHQsIG5leHRBbGwsIG9mZiwgb2Zmc2V0LCBvbiwgb25jZSwgb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGgsIHBhcmVudCwgcGFyZW50cywgcHJlcGVuZCwgcHJlcGVuZFRvLCBwcmV2LCBwcmV2QWxsLCBwcm9wLCByZW1vdmUsIHJlbW92ZUF0dHIsIHJlbW92ZUNsYXNzLCByZW1vdmVEYXRhLCByZXNpemUsIHNjcm9sbCwgc2Nyb2xsTGVmdCwgc2Nyb2xsVG8sIHNjcm9sbFRvcCwgc2hvdywgc2libGluZ3MsIHN0b3AsIHN0eWxlcywgc3VibWl0LCB0ZXh0LCB0b2dnbGVDbGFzcywgdG91Y2hlbmQsIHRvdWNobW92ZSwgdG91Y2hzdGFydCwgdHJhbnNmb3JtLCB0cmFuc2l0aW9uLCB0cmFuc2l0aW9uRW5kLCB0cmlnZ2VyLCB2YWwsIHZhbHVlLCB3aWR0aCB9O1xuIiwgImltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xuXG5mdW5jdGlvbiBkZWxldGVQcm9wcyhvYmopIHtcbiAgY29uc3Qgb2JqZWN0ID0gb2JqO1xuICBPYmplY3Qua2V5cyhvYmplY3QpLmZvckVhY2goa2V5ID0+IHtcbiAgICB0cnkge1xuICAgICAgb2JqZWN0W2tleV0gPSBudWxsO1xuICAgIH0gY2F0Y2ggKGUpIHsvLyBubyBnZXR0ZXIgZm9yIG9iamVjdFxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBkZWxldGUgb2JqZWN0W2tleV07XG4gICAgfSBjYXRjaCAoZSkgey8vIHNvbWV0aGluZyBnb3Qgd3JvbmdcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBuZXh0VGljayhjYWxsYmFjaywgZGVsYXkpIHtcbiAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICBkZWxheSA9IDA7XG4gIH1cblxuICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgZGVsYXkpO1xufVxuXG5mdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufVxuXG5mdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBsZXQgc3R5bGU7XG5cbiAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSB7XG4gICAgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCk7XG4gIH1cblxuICBpZiAoIXN0eWxlICYmIGVsLmN1cnJlbnRTdHlsZSkge1xuICAgIHN0eWxlID0gZWwuY3VycmVudFN0eWxlO1xuICB9XG5cbiAgaWYgKCFzdHlsZSkge1xuICAgIHN0eWxlID0gZWwuc3R5bGU7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zbGF0ZShlbCwgYXhpcykge1xuICBpZiAoYXhpcyA9PT0gdm9pZCAwKSB7XG4gICAgYXhpcyA9ICd4JztcbiAgfVxuXG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBsZXQgbWF0cml4O1xuICBsZXQgY3VyVHJhbnNmb3JtO1xuICBsZXQgdHJhbnNmb3JtTWF0cml4O1xuICBjb25zdCBjdXJTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xuXG4gIGlmICh3aW5kb3cuV2ViS2l0Q1NTTWF0cml4KSB7XG4gICAgY3VyVHJhbnNmb3JtID0gY3VyU3R5bGUudHJhbnNmb3JtIHx8IGN1clN0eWxlLndlYmtpdFRyYW5zZm9ybTtcblxuICAgIGlmIChjdXJUcmFuc2Zvcm0uc3BsaXQoJywnKS5sZW5ndGggPiA2KSB7XG4gICAgICBjdXJUcmFuc2Zvcm0gPSBjdXJUcmFuc2Zvcm0uc3BsaXQoJywgJykubWFwKGEgPT4gYS5yZXBsYWNlKCcsJywgJy4nKSkuam9pbignLCAnKTtcbiAgICB9IC8vIFNvbWUgb2xkIHZlcnNpb25zIG9mIFdlYmtpdCBjaG9rZSB3aGVuICdub25lJyBpcyBwYXNzZWQ7IHBhc3NcbiAgICAvLyBlbXB0eSBzdHJpbmcgaW5zdGVhZCBpbiB0aGlzIGNhc2VcblxuXG4gICAgdHJhbnNmb3JtTWF0cml4ID0gbmV3IHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgoY3VyVHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IGN1clRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgdHJhbnNmb3JtTWF0cml4ID0gY3VyU3R5bGUuTW96VHJhbnNmb3JtIHx8IGN1clN0eWxlLk9UcmFuc2Zvcm0gfHwgY3VyU3R5bGUuTXNUcmFuc2Zvcm0gfHwgY3VyU3R5bGUubXNUcmFuc2Zvcm0gfHwgY3VyU3R5bGUudHJhbnNmb3JtIHx8IGN1clN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpLnJlcGxhY2UoJ3RyYW5zbGF0ZSgnLCAnbWF0cml4KDEsIDAsIDAsIDEsJyk7XG4gICAgbWF0cml4ID0gdHJhbnNmb3JtTWF0cml4LnRvU3RyaW5nKCkuc3BsaXQoJywnKTtcbiAgfVxuXG4gIGlmIChheGlzID09PSAneCcpIHtcbiAgICAvLyBMYXRlc3QgQ2hyb21lIGFuZCB3ZWJraXRzIEZpeFxuICAgIGlmICh3aW5kb3cuV2ViS2l0Q1NTTWF0cml4KSBjdXJUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1NYXRyaXgubTQxOyAvLyBDcmF6eSBJRTEwIE1hdHJpeFxuICAgIGVsc2UgaWYgKG1hdHJpeC5sZW5ndGggPT09IDE2KSBjdXJUcmFuc2Zvcm0gPSBwYXJzZUZsb2F0KG1hdHJpeFsxMl0pOyAvLyBOb3JtYWwgQnJvd3NlcnNcbiAgICBlbHNlIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzRdKTtcbiAgfVxuXG4gIGlmIChheGlzID09PSAneScpIHtcbiAgICAvLyBMYXRlc3QgQ2hyb21lIGFuZCB3ZWJraXRzIEZpeFxuICAgIGlmICh3aW5kb3cuV2ViS2l0Q1NTTWF0cml4KSBjdXJUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1NYXRyaXgubTQyOyAvLyBDcmF6eSBJRTEwIE1hdHJpeFxuICAgIGVsc2UgaWYgKG1hdHJpeC5sZW5ndGggPT09IDE2KSBjdXJUcmFuc2Zvcm0gPSBwYXJzZUZsb2F0KG1hdHJpeFsxM10pOyAvLyBOb3JtYWwgQnJvd3NlcnNcbiAgICBlbHNlIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzVdKTtcbiAgfVxuXG4gIHJldHVybiBjdXJUcmFuc2Zvcm0gfHwgMDtcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIG8gIT09IG51bGwgJiYgby5jb25zdHJ1Y3RvciAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpID09PSAnT2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaXNOb2RlKG5vZGUpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LkhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMSB8fCBub2RlLm5vZGVUeXBlID09PSAxMSk7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgY29uc3QgdG8gPSBPYmplY3QoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdKTtcbiAgY29uc3Qgbm9FeHRlbmQgPSBbJ19fcHJvdG9fXycsICdjb25zdHJ1Y3RvcicsICdwcm90b3R5cGUnXTtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IG5leHRTb3VyY2UgPSBpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV07XG5cbiAgICBpZiAobmV4dFNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIG5leHRTb3VyY2UgIT09IG51bGwgJiYgIWlzTm9kZShuZXh0U291cmNlKSkge1xuICAgICAgY29uc3Qga2V5c0FycmF5ID0gT2JqZWN0LmtleXMoT2JqZWN0KG5leHRTb3VyY2UpKS5maWx0ZXIoa2V5ID0+IG5vRXh0ZW5kLmluZGV4T2Yoa2V5KSA8IDApO1xuXG4gICAgICBmb3IgKGxldCBuZXh0SW5kZXggPSAwLCBsZW4gPSBrZXlzQXJyYXkubGVuZ3RoOyBuZXh0SW5kZXggPCBsZW47IG5leHRJbmRleCArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5leHRLZXkgPSBrZXlzQXJyYXlbbmV4dEluZGV4XTtcbiAgICAgICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSwgbmV4dEtleSk7XG5cbiAgICAgICAgaWYgKGRlc2MgIT09IHVuZGVmaW5lZCAmJiBkZXNjLmVudW1lcmFibGUpIHtcbiAgICAgICAgICBpZiAoaXNPYmplY3QodG9bbmV4dEtleV0pICYmIGlzT2JqZWN0KG5leHRTb3VyY2VbbmV4dEtleV0pKSB7XG4gICAgICAgICAgICBpZiAobmV4dFNvdXJjZVtuZXh0S2V5XS5fX3N3aXBlcl9fKSB7XG4gICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGV4dGVuZCh0b1tuZXh0S2V5XSwgbmV4dFNvdXJjZVtuZXh0S2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNPYmplY3QodG9bbmV4dEtleV0pICYmIGlzT2JqZWN0KG5leHRTb3VyY2VbbmV4dEtleV0pKSB7XG4gICAgICAgICAgICB0b1tuZXh0S2V5XSA9IHt9O1xuXG4gICAgICAgICAgICBpZiAobmV4dFNvdXJjZVtuZXh0S2V5XS5fX3N3aXBlcl9fKSB7XG4gICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGV4dGVuZCh0b1tuZXh0S2V5XSwgbmV4dFNvdXJjZVtuZXh0S2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG87XG59XG5cbmZ1bmN0aW9uIHNldENTU1Byb3BlcnR5KGVsLCB2YXJOYW1lLCB2YXJWYWx1ZSkge1xuICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSh2YXJOYW1lLCB2YXJWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGFuaW1hdGVDU1NNb2RlU2Nyb2xsKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgdGFyZ2V0UG9zaXRpb24sXG4gICAgc2lkZVxuICB9ID0gX3JlZjtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGNvbnN0IHN0YXJ0UG9zaXRpb24gPSAtc3dpcGVyLnRyYW5zbGF0ZTtcbiAgbGV0IHN0YXJ0VGltZSA9IG51bGw7XG4gIGxldCB0aW1lO1xuICBjb25zdCBkdXJhdGlvbiA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gIHN3aXBlci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSAnbm9uZSc7XG4gIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShzd2lwZXIuY3NzTW9kZUZyYW1lSUQpO1xuICBjb25zdCBkaXIgPSB0YXJnZXRQb3NpdGlvbiA+IHN0YXJ0UG9zaXRpb24gPyAnbmV4dCcgOiAncHJldic7XG5cbiAgY29uc3QgaXNPdXRPZkJvdW5kID0gKGN1cnJlbnQsIHRhcmdldCkgPT4ge1xuICAgIHJldHVybiBkaXIgPT09ICduZXh0JyAmJiBjdXJyZW50ID49IHRhcmdldCB8fCBkaXIgPT09ICdwcmV2JyAmJiBjdXJyZW50IDw9IHRhcmdldDtcbiAgfTtcblxuICBjb25zdCBhbmltYXRlID0gKCkgPT4ge1xuICAgIHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIGlmIChzdGFydFRpbWUgPT09IG51bGwpIHtcbiAgICAgIHN0YXJ0VGltZSA9IHRpbWU7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1heChNYXRoLm1pbigodGltZSAtIHN0YXJ0VGltZSkgLyBkdXJhdGlvbiwgMSksIDApO1xuICAgIGNvbnN0IGVhc2VQcm9ncmVzcyA9IDAuNSAtIE1hdGguY29zKHByb2dyZXNzICogTWF0aC5QSSkgLyAyO1xuICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSBzdGFydFBvc2l0aW9uICsgZWFzZVByb2dyZXNzICogKHRhcmdldFBvc2l0aW9uIC0gc3RhcnRQb3NpdGlvbik7XG5cbiAgICBpZiAoaXNPdXRPZkJvdW5kKGN1cnJlbnRQb3NpdGlvbiwgdGFyZ2V0UG9zaXRpb24pKSB7XG4gICAgICBjdXJyZW50UG9zaXRpb24gPSB0YXJnZXRQb3NpdGlvbjtcbiAgICB9XG5cbiAgICBzd2lwZXIud3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgIFtzaWRlXTogY3VycmVudFBvc2l0aW9uXG4gICAgfSk7XG5cbiAgICBpZiAoaXNPdXRPZkJvdW5kKGN1cnJlbnRQb3NpdGlvbiwgdGFyZ2V0UG9zaXRpb24pKSB7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gJyc7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgICAgICBbc2lkZV06IGN1cnJlbnRQb3NpdGlvblxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHN3aXBlci5jc3NNb2RlRnJhbWVJRCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpcGVyLmNzc01vZGVGcmFtZUlEID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgfTtcblxuICBhbmltYXRlKCk7XG59XG5cbmV4cG9ydCB7IGFuaW1hdGVDU1NNb2RlU2Nyb2xsLCBkZWxldGVQcm9wcywgbmV4dFRpY2ssIG5vdywgZ2V0VHJhbnNsYXRlLCBpc09iamVjdCwgZXh0ZW5kLCBnZXRDb21wdXRlZFN0eWxlLCBzZXRDU1NQcm9wZXJ0eSB9OyIsICJpbXBvcnQgeyBnZXRXaW5kb3csIGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5sZXQgc3VwcG9ydDtcblxuZnVuY3Rpb24gY2FsY1N1cHBvcnQoKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gIHJldHVybiB7XG4gICAgc21vb3RoU2Nyb2xsOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgJ3Njcm9sbEJlaGF2aW9yJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUsXG4gICAgdG91Y2g6ICEhKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIHdpbmRvdy5Eb2N1bWVudFRvdWNoKSxcbiAgICBwYXNzaXZlTGlzdGVuZXI6IGZ1bmN0aW9uIGNoZWNrUGFzc2l2ZUxpc3RlbmVyKCkge1xuICAgICAgbGV0IHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3RQYXNzaXZlTGlzdGVuZXInLCBudWxsLCBvcHRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsvLyBObyBzdXBwb3J0XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XG4gICAgfSgpLFxuICAgIGdlc3R1cmVzOiBmdW5jdGlvbiBjaGVja0dlc3R1cmVzKCkge1xuICAgICAgcmV0dXJuICdvbmdlc3R1cmVzdGFydCcgaW4gd2luZG93O1xuICAgIH0oKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTdXBwb3J0KCkge1xuICBpZiAoIXN1cHBvcnQpIHtcbiAgICBzdXBwb3J0ID0gY2FsY1N1cHBvcnQoKTtcbiAgfVxuXG4gIHJldHVybiBzdXBwb3J0O1xufVxuXG5leHBvcnQgeyBnZXRTdXBwb3J0IH07IiwgImltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xuaW1wb3J0IHsgZ2V0U3VwcG9ydCB9IGZyb20gJy4vZ2V0LXN1cHBvcnQuanMnO1xubGV0IGRldmljZUNhY2hlZDtcblxuZnVuY3Rpb24gY2FsY0RldmljZShfdGVtcCkge1xuICBsZXQge1xuICAgIHVzZXJBZ2VudFxuICB9ID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA7XG4gIGNvbnN0IHN1cHBvcnQgPSBnZXRTdXBwb3J0KCk7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBjb25zdCBwbGF0Zm9ybSA9IHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm07XG4gIGNvbnN0IHVhID0gdXNlckFnZW50IHx8IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICBjb25zdCBkZXZpY2UgPSB7XG4gICAgaW9zOiBmYWxzZSxcbiAgICBhbmRyb2lkOiBmYWxzZVxuICB9O1xuICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5zY3JlZW4ud2lkdGg7XG4gIGNvbnN0IHNjcmVlbkhlaWdodCA9IHdpbmRvdy5zY3JlZW4uaGVpZ2h0O1xuICBjb25zdCBhbmRyb2lkID0gdWEubWF0Y2goLyhBbmRyb2lkKTs/W1xcc1xcL10rKFtcXGQuXSspPy8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgbGV0IGlwYWQgPSB1YS5tYXRjaCgvKGlQYWQpLipPU1xccyhbXFxkX10rKS8pO1xuICBjb25zdCBpcG9kID0gdWEubWF0Y2goLyhpUG9kKSguKk9TXFxzKFtcXGRfXSspKT8vKTtcbiAgY29uc3QgaXBob25lID0gIWlwYWQgJiYgdWEubWF0Y2goLyhpUGhvbmVcXHNPU3xpT1MpXFxzKFtcXGRfXSspLyk7XG4gIGNvbnN0IHdpbmRvd3MgPSBwbGF0Zm9ybSA9PT0gJ1dpbjMyJztcbiAgbGV0IG1hY29zID0gcGxhdGZvcm0gPT09ICdNYWNJbnRlbCc7IC8vIGlQYWRPcyAxMyBmaXhcblxuICBjb25zdCBpUGFkU2NyZWVucyA9IFsnMTAyNHgxMzY2JywgJzEzNjZ4MTAyNCcsICc4MzR4MTE5NCcsICcxMTk0eDgzNCcsICc4MzR4MTExMicsICcxMTEyeDgzNCcsICc3Njh4MTAyNCcsICcxMDI0eDc2OCcsICc4MjB4MTE4MCcsICcxMTgweDgyMCcsICc4MTB4MTA4MCcsICcxMDgweDgxMCddO1xuXG4gIGlmICghaXBhZCAmJiBtYWNvcyAmJiBzdXBwb3J0LnRvdWNoICYmIGlQYWRTY3JlZW5zLmluZGV4T2YoYCR7c2NyZWVuV2lkdGh9eCR7c2NyZWVuSGVpZ2h0fWApID49IDApIHtcbiAgICBpcGFkID0gdWEubWF0Y2goLyhWZXJzaW9uKVxcLyhbXFxkLl0rKS8pO1xuICAgIGlmICghaXBhZCkgaXBhZCA9IFswLCAxLCAnMTNfMF8wJ107XG4gICAgbWFjb3MgPSBmYWxzZTtcbiAgfSAvLyBBbmRyb2lkXG5cblxuICBpZiAoYW5kcm9pZCAmJiAhd2luZG93cykge1xuICAgIGRldmljZS5vcyA9ICdhbmRyb2lkJztcbiAgICBkZXZpY2UuYW5kcm9pZCA9IHRydWU7XG4gIH1cblxuICBpZiAoaXBhZCB8fCBpcGhvbmUgfHwgaXBvZCkge1xuICAgIGRldmljZS5vcyA9ICdpb3MnO1xuICAgIGRldmljZS5pb3MgPSB0cnVlO1xuICB9IC8vIEV4cG9ydCBvYmplY3RcblxuXG4gIHJldHVybiBkZXZpY2U7XG59XG5cbmZ1bmN0aW9uIGdldERldmljZShvdmVycmlkZXMpIHtcbiAgaWYgKG92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7XG4gICAgb3ZlcnJpZGVzID0ge307XG4gIH1cblxuICBpZiAoIWRldmljZUNhY2hlZCkge1xuICAgIGRldmljZUNhY2hlZCA9IGNhbGNEZXZpY2Uob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIHJldHVybiBkZXZpY2VDYWNoZWQ7XG59XG5cbmV4cG9ydCB7IGdldERldmljZSB9OyIsICJpbXBvcnQgeyBnZXRXaW5kb3cgfSBmcm9tICdzc3Itd2luZG93JztcbmxldCBicm93c2VyO1xuXG5mdW5jdGlvbiBjYWxjQnJvd3NlcigpIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG5cbiAgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgY29uc3QgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiB1YS5pbmRleE9mKCdzYWZhcmknKSA+PSAwICYmIHVhLmluZGV4T2YoJ2Nocm9tZScpIDwgMCAmJiB1YS5pbmRleE9mKCdhbmRyb2lkJykgPCAwO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc1NhZmFyaTogaXNTYWZhcmkoKSxcbiAgICBpc1dlYlZpZXc6IC8oaVBob25lfGlQb2R8aVBhZCkuKkFwcGxlV2ViS2l0KD8hLipTYWZhcmkpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0QnJvd3NlcigpIHtcbiAgaWYgKCFicm93c2VyKSB7XG4gICAgYnJvd3NlciA9IGNhbGNCcm93c2VyKCk7XG4gIH1cblxuICByZXR1cm4gYnJvd3Nlcjtcbn1cblxuZXhwb3J0IHsgZ2V0QnJvd3NlciB9OyIsICJpbXBvcnQgeyBnZXRXaW5kb3cgfSBmcm9tICdzc3Itd2luZG93JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc2l6ZShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIG9uLFxuICAgIGVtaXRcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBsZXQgb2JzZXJ2ZXIgPSBudWxsO1xuICBsZXQgYW5pbWF0aW9uRnJhbWUgPSBudWxsO1xuXG4gIGNvbnN0IHJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgZW1pdCgnYmVmb3JlUmVzaXplJyk7XG4gICAgZW1pdCgncmVzaXplJyk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlT2JzZXJ2ZXIgPSAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgICBhbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgIH0gPSBzd2lwZXI7XG4gICAgICAgIGxldCBuZXdXaWR0aCA9IHdpZHRoO1xuICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICBjb250ZW50Qm94U2l6ZSxcbiAgICAgICAgICAgIGNvbnRlbnRSZWN0LFxuICAgICAgICAgICAgdGFyZ2V0XG4gICAgICAgICAgfSA9IF9yZWYyO1xuICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0ICE9PSBzd2lwZXIuZWwpIHJldHVybjtcbiAgICAgICAgICBuZXdXaWR0aCA9IGNvbnRlbnRSZWN0ID8gY29udGVudFJlY3Qud2lkdGggOiAoY29udGVudEJveFNpemVbMF0gfHwgY29udGVudEJveFNpemUpLmlubGluZVNpemU7XG4gICAgICAgICAgbmV3SGVpZ2h0ID0gY29udGVudFJlY3QgPyBjb250ZW50UmVjdC5oZWlnaHQgOiAoY29udGVudEJveFNpemVbMF0gfHwgY29udGVudEJveFNpemUpLmJsb2NrU2l6ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG5ld1dpZHRoICE9PSB3aWR0aCB8fCBuZXdIZWlnaHQgIT09IGhlaWdodCkge1xuICAgICAgICAgIHJlc2l6ZUhhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShzd2lwZXIuZWwpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZU9ic2VydmVyID0gKCkgPT4ge1xuICAgIGlmIChhbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lKTtcbiAgICB9XG5cbiAgICBpZiAob2JzZXJ2ZXIgJiYgb2JzZXJ2ZXIudW5vYnNlcnZlICYmIHN3aXBlci5lbCkge1xuICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKHN3aXBlci5lbCk7XG4gICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9yaWVudGF0aW9uQ2hhbmdlSGFuZGxlciA9ICgpID0+IHtcbiAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICBlbWl0KCdvcmllbnRhdGlvbmNoYW5nZScpO1xuICB9O1xuXG4gIG9uKCdpbml0JywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnJlc2l6ZU9ic2VydmVyICYmIHR5cGVvZiB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjcmVhdGVPYnNlcnZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBvcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIpO1xuICB9KTtcbiAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgcmVtb3ZlT2JzZXJ2ZXIoKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlcik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgb3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyKTtcbiAgfSk7XG59IiwgImltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gT2JzZXJ2ZXIoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb24sXG4gICAgZW1pdFxuICB9ID0gX3JlZjtcbiAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuXG4gIGNvbnN0IGF0dGFjaCA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgY29uc3QgT2JzZXJ2ZXJGdW5jID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYmtpdE11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgT2JzZXJ2ZXJGdW5jKG11dGF0aW9ucyA9PiB7XG4gICAgICAvLyBUaGUgb2JzZXJ2ZXJVcGRhdGUgZXZlbnQgc2hvdWxkIG9ubHkgYmUgdHJpZ2dlcmVkXG4gICAgICAvLyBvbmNlIGRlc3BpdGUgdGhlIG51bWJlciBvZiBtdXRhdGlvbnMuICBBZGRpdGlvbmFsXG4gICAgICAvLyB0cmlnZ2VycyBhcmUgcmVkdW5kYW50IGFuZCBhcmUgdmVyeSBjb3N0bHlcbiAgICAgIGlmIChtdXRhdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGVtaXQoJ29ic2VydmVyVXBkYXRlJywgbXV0YXRpb25zWzBdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvYnNlcnZlclVwZGF0ZSA9IGZ1bmN0aW9uIG9ic2VydmVyVXBkYXRlKCkge1xuICAgICAgICBlbWl0KCdvYnNlcnZlclVwZGF0ZScsIG11dGF0aW9uc1swXSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKG9ic2VydmVyVXBkYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KG9ic2VydmVyVXBkYXRlLCAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwge1xuICAgICAgYXR0cmlidXRlczogdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcyA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy5hdHRyaWJ1dGVzLFxuICAgICAgY2hpbGRMaXN0OiB0eXBlb2Ygb3B0aW9ucy5jaGlsZExpc3QgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMuY2hpbGRMaXN0LFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHlwZW9mIG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy5jaGFyYWN0ZXJEYXRhXG4gICAgfSk7XG4gICAgb2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLm9ic2VydmVyKSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5vYnNlcnZlUGFyZW50cykge1xuICAgICAgY29uc3QgY29udGFpbmVyUGFyZW50cyA9IHN3aXBlci4kZWwucGFyZW50cygpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lclBhcmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXR0YWNoKGNvbnRhaW5lclBhcmVudHNbaV0pO1xuICAgICAgfVxuICAgIH0gLy8gT2JzZXJ2ZSBjb250YWluZXJcblxuXG4gICAgYXR0YWNoKHN3aXBlci4kZWxbMF0sIHtcbiAgICAgIGNoaWxkTGlzdDogc3dpcGVyLnBhcmFtcy5vYnNlcnZlU2xpZGVDaGlsZHJlblxuICAgIH0pOyAvLyBPYnNlcnZlIHdyYXBwZXJcblxuICAgIGF0dGFjaChzd2lwZXIuJHdyYXBwZXJFbFswXSwge1xuICAgICAgYXR0cmlidXRlczogZmFsc2VcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgIG9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IHtcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9KTtcbiAgICBvYnNlcnZlcnMuc3BsaWNlKDAsIG9ic2VydmVycy5sZW5ndGgpO1xuICB9O1xuXG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgb2JzZXJ2ZXI6IGZhbHNlLFxuICAgIG9ic2VydmVQYXJlbnRzOiBmYWxzZSxcbiAgICBvYnNlcnZlU2xpZGVDaGlsZHJlbjogZmFsc2VcbiAgfSk7XG4gIG9uKCdpbml0JywgaW5pdCk7XG4gIG9uKCdkZXN0cm95JywgZGVzdHJveSk7XG59IiwgIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIG9uKGV2ZW50cywgaGFuZGxlciwgcHJpb3JpdHkpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybiBzZWxmO1xuICAgIGNvbnN0IG1ldGhvZCA9IHByaW9yaXR5ID8gJ3Vuc2hpZnQnIDogJ3B1c2gnO1xuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0pIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgICAgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdW21ldGhvZF0oaGFuZGxlcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH0sXG5cbiAgb25jZShldmVudHMsIGhhbmRsZXIsIHByaW9yaXR5KSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gc2VsZjtcblxuICAgIGZ1bmN0aW9uIG9uY2VIYW5kbGVyKCkge1xuICAgICAgc2VsZi5vZmYoZXZlbnRzLCBvbmNlSGFuZGxlcik7XG5cbiAgICAgIGlmIChvbmNlSGFuZGxlci5fX2VtaXR0ZXJQcm94eSkge1xuICAgICAgICBkZWxldGUgb25jZUhhbmRsZXIuX19lbWl0dGVyUHJveHk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICBoYW5kbGVyLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH1cblxuICAgIG9uY2VIYW5kbGVyLl9fZW1pdHRlclByb3h5ID0gaGFuZGxlcjtcbiAgICByZXR1cm4gc2VsZi5vbihldmVudHMsIG9uY2VIYW5kbGVyLCBwcmlvcml0eSk7XG4gIH0sXG5cbiAgb25BbnkoaGFuZGxlciwgcHJpb3JpdHkpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybiBzZWxmO1xuICAgIGNvbnN0IG1ldGhvZCA9IHByaW9yaXR5ID8gJ3Vuc2hpZnQnIDogJ3B1c2gnO1xuXG4gICAgaWYgKHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLmluZGV4T2YoaGFuZGxlcikgPCAwKSB7XG4gICAgICBzZWxmLmV2ZW50c0FueUxpc3RlbmVyc1ttZXRob2RdKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9LFxuXG4gIG9mZkFueShoYW5kbGVyKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCFzZWxmLmV2ZW50c0FueUxpc3RlbmVycykgcmV0dXJuIHNlbGY7XG4gICAgY29uc3QgaW5kZXggPSBzZWxmLmV2ZW50c0FueUxpc3RlbmVycy5pbmRleE9mKGhhbmRsZXIpO1xuXG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH0sXG5cbiAgb2ZmKGV2ZW50cywgaGFuZGxlcikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMpIHJldHVybiBzZWxmO1xuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKChldmVudEhhbmRsZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGV2ZW50SGFuZGxlciA9PT0gaGFuZGxlciB8fCBldmVudEhhbmRsZXIuX19lbWl0dGVyUHJveHkgJiYgZXZlbnRIYW5kbGVyLl9fZW1pdHRlclByb3h5ID09PSBoYW5kbGVyKSB7XG4gICAgICAgICAgICBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzZWxmO1xuICB9LFxuXG4gIGVtaXQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycykgcmV0dXJuIHNlbGY7XG4gICAgbGV0IGV2ZW50cztcbiAgICBsZXQgZGF0YTtcbiAgICBsZXQgY29udGV4dDtcblxuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgZXZlbnRzID0gYXJnc1swXTtcbiAgICAgIGRhdGEgPSBhcmdzLnNsaWNlKDEsIGFyZ3MubGVuZ3RoKTtcbiAgICAgIGNvbnRleHQgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmVudHMgPSBhcmdzWzBdLmV2ZW50cztcbiAgICAgIGRhdGEgPSBhcmdzWzBdLmRhdGE7XG4gICAgICBjb250ZXh0ID0gYXJnc1swXS5jb250ZXh0IHx8IHNlbGY7XG4gICAgfVxuXG4gICAgZGF0YS51bnNoaWZ0KGNvbnRleHQpO1xuICAgIGNvbnN0IGV2ZW50c0FycmF5ID0gQXJyYXkuaXNBcnJheShldmVudHMpID8gZXZlbnRzIDogZXZlbnRzLnNwbGl0KCcgJyk7XG4gICAgZXZlbnRzQXJyYXkuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICBpZiAoc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMgJiYgc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgIHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLmZvckVhY2goZXZlbnRIYW5kbGVyID0+IHtcbiAgICAgICAgICBldmVudEhhbmRsZXIuYXBwbHkoY29udGV4dCwgW2V2ZW50LCAuLi5kYXRhXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5ldmVudHNMaXN0ZW5lcnMgJiYgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKGV2ZW50SGFuZGxlciA9PiB7XG4gICAgICAgICAgZXZlbnRIYW5kbGVyLmFwcGx5KGNvbnRleHQsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG59OyIsICJpbXBvcnQgdXBkYXRlU2l6ZSBmcm9tICcuL3VwZGF0ZVNpemUuanMnO1xuaW1wb3J0IHVwZGF0ZVNsaWRlcyBmcm9tICcuL3VwZGF0ZVNsaWRlcy5qcyc7XG5pbXBvcnQgdXBkYXRlQXV0b0hlaWdodCBmcm9tICcuL3VwZGF0ZUF1dG9IZWlnaHQuanMnO1xuaW1wb3J0IHVwZGF0ZVNsaWRlc09mZnNldCBmcm9tICcuL3VwZGF0ZVNsaWRlc09mZnNldC5qcyc7XG5pbXBvcnQgdXBkYXRlU2xpZGVzUHJvZ3Jlc3MgZnJvbSAnLi91cGRhdGVTbGlkZXNQcm9ncmVzcy5qcyc7XG5pbXBvcnQgdXBkYXRlUHJvZ3Jlc3MgZnJvbSAnLi91cGRhdGVQcm9ncmVzcy5qcyc7XG5pbXBvcnQgdXBkYXRlU2xpZGVzQ2xhc3NlcyBmcm9tICcuL3VwZGF0ZVNsaWRlc0NsYXNzZXMuanMnO1xuaW1wb3J0IHVwZGF0ZUFjdGl2ZUluZGV4IGZyb20gJy4vdXBkYXRlQWN0aXZlSW5kZXguanMnO1xuaW1wb3J0IHVwZGF0ZUNsaWNrZWRTbGlkZSBmcm9tICcuL3VwZGF0ZUNsaWNrZWRTbGlkZS5qcyc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHVwZGF0ZVNpemUsXG4gIHVwZGF0ZVNsaWRlcyxcbiAgdXBkYXRlQXV0b0hlaWdodCxcbiAgdXBkYXRlU2xpZGVzT2Zmc2V0LFxuICB1cGRhdGVTbGlkZXNQcm9ncmVzcyxcbiAgdXBkYXRlUHJvZ3Jlc3MsXG4gIHVwZGF0ZVNsaWRlc0NsYXNzZXMsXG4gIHVwZGF0ZUFjdGl2ZUluZGV4LFxuICB1cGRhdGVDbGlja2VkU2xpZGVcbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZVNpemUoKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGxldCB3aWR0aDtcbiAgbGV0IGhlaWdodDtcbiAgY29uc3QgJGVsID0gc3dpcGVyLiRlbDtcblxuICBpZiAodHlwZW9mIHN3aXBlci5wYXJhbXMud2lkdGggIT09ICd1bmRlZmluZWQnICYmIHN3aXBlci5wYXJhbXMud2lkdGggIT09IG51bGwpIHtcbiAgICB3aWR0aCA9IHN3aXBlci5wYXJhbXMud2lkdGg7XG4gIH0gZWxzZSB7XG4gICAgd2lkdGggPSAkZWxbMF0uY2xpZW50V2lkdGg7XG4gIH1cblxuICBpZiAodHlwZW9mIHN3aXBlci5wYXJhbXMuaGVpZ2h0ICE9PSAndW5kZWZpbmVkJyAmJiBzd2lwZXIucGFyYW1zLmhlaWdodCAhPT0gbnVsbCkge1xuICAgIGhlaWdodCA9IHN3aXBlci5wYXJhbXMuaGVpZ2h0O1xuICB9IGVsc2Uge1xuICAgIGhlaWdodCA9ICRlbFswXS5jbGllbnRIZWlnaHQ7XG4gIH1cblxuICBpZiAod2lkdGggPT09IDAgJiYgc3dpcGVyLmlzSG9yaXpvbnRhbCgpIHx8IGhlaWdodCA9PT0gMCAmJiBzd2lwZXIuaXNWZXJ0aWNhbCgpKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIFN1YnRyYWN0IHBhZGRpbmdzXG5cblxuICB3aWR0aCA9IHdpZHRoIC0gcGFyc2VJbnQoJGVsLmNzcygncGFkZGluZy1sZWZ0JykgfHwgMCwgMTApIC0gcGFyc2VJbnQoJGVsLmNzcygncGFkZGluZy1yaWdodCcpIHx8IDAsIDEwKTtcbiAgaGVpZ2h0ID0gaGVpZ2h0IC0gcGFyc2VJbnQoJGVsLmNzcygncGFkZGluZy10b3AnKSB8fCAwLCAxMCkgLSBwYXJzZUludCgkZWwuY3NzKCdwYWRkaW5nLWJvdHRvbScpIHx8IDAsIDEwKTtcbiAgaWYgKE51bWJlci5pc05hTih3aWR0aCkpIHdpZHRoID0gMDtcbiAgaWYgKE51bWJlci5pc05hTihoZWlnaHQpKSBoZWlnaHQgPSAwO1xuICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBzaXplOiBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB3aWR0aCA6IGhlaWdodFxuICB9KTtcbn0iLCAiaW1wb3J0IHsgc2V0Q1NTUHJvcGVydHkgfSBmcm9tICcuLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlU2xpZGVzKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGlvbkxhYmVsKHByb3BlcnR5KSB7XG4gICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5O1xuICAgIH0gLy8gcHJldHRpZXItaWdub3JlXG5cblxuICAgIHJldHVybiB7XG4gICAgICAnd2lkdGgnOiAnaGVpZ2h0JyxcbiAgICAgICdtYXJnaW4tdG9wJzogJ21hcmdpbi1sZWZ0JyxcbiAgICAgICdtYXJnaW4tYm90dG9tICc6ICdtYXJnaW4tcmlnaHQnLFxuICAgICAgJ21hcmdpbi1sZWZ0JzogJ21hcmdpbi10b3AnLFxuICAgICAgJ21hcmdpbi1yaWdodCc6ICdtYXJnaW4tYm90dG9tJyxcbiAgICAgICdwYWRkaW5nLWxlZnQnOiAncGFkZGluZy10b3AnLFxuICAgICAgJ3BhZGRpbmctcmlnaHQnOiAncGFkZGluZy1ib3R0b20nLFxuICAgICAgJ21hcmdpblJpZ2h0JzogJ21hcmdpbkJvdHRvbSdcbiAgICB9W3Byb3BlcnR5XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUobm9kZSwgbGFiZWwpIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLmdldFByb3BlcnR5VmFsdWUoZ2V0RGlyZWN0aW9uTGFiZWwobGFiZWwpKSB8fCAwKTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gIGNvbnN0IHtcbiAgICAkd3JhcHBlckVsLFxuICAgIHNpemU6IHN3aXBlclNpemUsXG4gICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgd3JvbmdSVExcbiAgfSA9IHN3aXBlcjtcbiAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgcGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgY29uc3QgcHJldmlvdXNTbGlkZXNMZW5ndGggPSBpc1ZpcnR1YWwgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gIGNvbnN0IHNsaWRlcyA9ICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gKTtcbiAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gaXNWaXJ0dWFsID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHNsaWRlcy5sZW5ndGg7XG4gIGxldCBzbmFwR3JpZCA9IFtdO1xuICBjb25zdCBzbGlkZXNHcmlkID0gW107XG4gIGNvbnN0IHNsaWRlc1NpemVzR3JpZCA9IFtdO1xuICBsZXQgb2Zmc2V0QmVmb3JlID0gcGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZTtcblxuICBpZiAodHlwZW9mIG9mZnNldEJlZm9yZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9mZnNldEJlZm9yZSA9IHBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmUuY2FsbChzd2lwZXIpO1xuICB9XG5cbiAgbGV0IG9mZnNldEFmdGVyID0gcGFyYW1zLnNsaWRlc09mZnNldEFmdGVyO1xuXG4gIGlmICh0eXBlb2Ygb2Zmc2V0QWZ0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvZmZzZXRBZnRlciA9IHBhcmFtcy5zbGlkZXNPZmZzZXRBZnRlci5jYWxsKHN3aXBlcik7XG4gIH1cblxuICBjb25zdCBwcmV2aW91c1NuYXBHcmlkTGVuZ3RoID0gc3dpcGVyLnNuYXBHcmlkLmxlbmd0aDtcbiAgY29uc3QgcHJldmlvdXNTbGlkZXNHcmlkTGVuZ3RoID0gc3dpcGVyLnNsaWRlc0dyaWQubGVuZ3RoO1xuICBsZXQgc3BhY2VCZXR3ZWVuID0gcGFyYW1zLnNwYWNlQmV0d2VlbjtcbiAgbGV0IHNsaWRlUG9zaXRpb24gPSAtb2Zmc2V0QmVmb3JlO1xuICBsZXQgcHJldlNsaWRlU2l6ZSA9IDA7XG4gIGxldCBpbmRleCA9IDA7XG5cbiAgaWYgKHR5cGVvZiBzd2lwZXJTaXplID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygc3BhY2VCZXR3ZWVuID09PSAnc3RyaW5nJyAmJiBzcGFjZUJldHdlZW4uaW5kZXhPZignJScpID49IDApIHtcbiAgICBzcGFjZUJldHdlZW4gPSBwYXJzZUZsb2F0KHNwYWNlQmV0d2Vlbi5yZXBsYWNlKCclJywgJycpKSAvIDEwMCAqIHN3aXBlclNpemU7XG4gIH1cblxuICBzd2lwZXIudmlydHVhbFNpemUgPSAtc3BhY2VCZXR3ZWVuOyAvLyByZXNldCBtYXJnaW5zXG5cbiAgaWYgKHJ0bCkgc2xpZGVzLmNzcyh7XG4gICAgbWFyZ2luTGVmdDogJycsXG4gICAgbWFyZ2luQm90dG9tOiAnJyxcbiAgICBtYXJnaW5Ub3A6ICcnXG4gIH0pO2Vsc2Ugc2xpZGVzLmNzcyh7XG4gICAgbWFyZ2luUmlnaHQ6ICcnLFxuICAgIG1hcmdpbkJvdHRvbTogJycsXG4gICAgbWFyZ2luVG9wOiAnJ1xuICB9KTsgLy8gcmVzZXQgY3NzTW9kZSBvZmZzZXRzXG5cbiAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuY3NzTW9kZSkge1xuICAgIHNldENTU1Byb3BlcnR5KHN3aXBlci53cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlJywgJycpO1xuICAgIHNldENTU1Byb3BlcnR5KHN3aXBlci53cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXInLCAnJyk7XG4gIH1cblxuICBjb25zdCBncmlkRW5hYmxlZCA9IHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxICYmIHN3aXBlci5ncmlkO1xuXG4gIGlmIChncmlkRW5hYmxlZCkge1xuICAgIHN3aXBlci5ncmlkLmluaXRTbGlkZXMoc2xpZGVzTGVuZ3RoKTtcbiAgfSAvLyBDYWxjIHNsaWRlc1xuXG5cbiAgbGV0IHNsaWRlU2l6ZTtcbiAgY29uc3Qgc2hvdWxkUmVzZXRTbGlkZVNpemUgPSBwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nICYmIHBhcmFtcy5icmVha3BvaW50cyAmJiBPYmplY3Qua2V5cyhwYXJhbXMuYnJlYWtwb2ludHMpLmZpbHRlcihrZXkgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgcGFyYW1zLmJyZWFrcG9pbnRzW2tleV0uc2xpZGVzUGVyVmlldyAhPT0gJ3VuZGVmaW5lZCc7XG4gIH0pLmxlbmd0aCA+IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNMZW5ndGg7IGkgKz0gMSkge1xuICAgIHNsaWRlU2l6ZSA9IDA7XG4gICAgY29uc3Qgc2xpZGUgPSBzbGlkZXMuZXEoaSk7XG5cbiAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgIHN3aXBlci5ncmlkLnVwZGF0ZVNsaWRlKGksIHNsaWRlLCBzbGlkZXNMZW5ndGgsIGdldERpcmVjdGlvbkxhYmVsKTtcbiAgICB9XG5cbiAgICBpZiAoc2xpZGUuY3NzKCdkaXNwbGF5JykgPT09ICdub25lJykgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nKSB7XG4gICAgICBpZiAoc2hvdWxkUmVzZXRTbGlkZVNpemUpIHtcbiAgICAgICAgc2xpZGVzW2ldLnN0eWxlW2dldERpcmVjdGlvbkxhYmVsKCd3aWR0aCcpXSA9IGBgO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzbGlkZVN0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUoc2xpZGVbMF0pO1xuICAgICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IHNsaWRlWzBdLnN0eWxlLnRyYW5zZm9ybTtcbiAgICAgIGNvbnN0IGN1cnJlbnRXZWJLaXRUcmFuc2Zvcm0gPSBzbGlkZVswXS5zdHlsZS53ZWJraXRUcmFuc2Zvcm07XG5cbiAgICAgIGlmIChjdXJyZW50VHJhbnNmb3JtKSB7XG4gICAgICAgIHNsaWRlWzBdLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRXZWJLaXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgc2xpZGVbMF0uc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ25vbmUnO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykge1xuICAgICAgICBzbGlkZVNpemUgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBzbGlkZS5vdXRlcldpZHRoKHRydWUpIDogc2xpZGUub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc3Qgd2lkdGggPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAnd2lkdGgnKTtcbiAgICAgICAgY29uc3QgcGFkZGluZ0xlZnQgPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAncGFkZGluZy1sZWZ0Jyk7XG4gICAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUoc2xpZGVTdHlsZXMsICdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgIGNvbnN0IG1hcmdpbkxlZnQgPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAnbWFyZ2luLWxlZnQnKTtcbiAgICAgICAgY29uc3QgbWFyZ2luUmlnaHQgPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAnbWFyZ2luLXJpZ2h0Jyk7XG4gICAgICAgIGNvbnN0IGJveFNpemluZyA9IHNsaWRlU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2JveC1zaXppbmcnKTtcblxuICAgICAgICBpZiAoYm94U2l6aW5nICYmIGJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnKSB7XG4gICAgICAgICAgc2xpZGVTaXplID0gd2lkdGggKyBtYXJnaW5MZWZ0ICsgbWFyZ2luUmlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBvZmZzZXRXaWR0aFxuICAgICAgICAgIH0gPSBzbGlkZVswXTtcbiAgICAgICAgICBzbGlkZVNpemUgPSB3aWR0aCArIHBhZGRpbmdMZWZ0ICsgcGFkZGluZ1JpZ2h0ICsgbWFyZ2luTGVmdCArIG1hcmdpblJpZ2h0ICsgKG9mZnNldFdpZHRoIC0gY2xpZW50V2lkdGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50VHJhbnNmb3JtKSB7XG4gICAgICAgIHNsaWRlWzBdLnN0eWxlLnRyYW5zZm9ybSA9IGN1cnJlbnRUcmFuc2Zvcm07XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50V2ViS2l0VHJhbnNmb3JtKSB7XG4gICAgICAgIHNsaWRlWzBdLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IGN1cnJlbnRXZWJLaXRUcmFuc2Zvcm07XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJhbXMucm91bmRMZW5ndGhzKSBzbGlkZVNpemUgPSBNYXRoLmZsb29yKHNsaWRlU2l6ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlU2l6ZSA9IChzd2lwZXJTaXplIC0gKHBhcmFtcy5zbGlkZXNQZXJWaWV3IC0gMSkgKiBzcGFjZUJldHdlZW4pIC8gcGFyYW1zLnNsaWRlc1BlclZpZXc7XG4gICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVTaXplID0gTWF0aC5mbG9vcihzbGlkZVNpemUpO1xuXG4gICAgICBpZiAoc2xpZGVzW2ldKSB7XG4gICAgICAgIHNsaWRlc1tpXS5zdHlsZVtnZXREaXJlY3Rpb25MYWJlbCgnd2lkdGgnKV0gPSBgJHtzbGlkZVNpemV9cHhgO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzbGlkZXNbaV0pIHtcbiAgICAgIHNsaWRlc1tpXS5zd2lwZXJTbGlkZVNpemUgPSBzbGlkZVNpemU7XG4gICAgfVxuXG4gICAgc2xpZGVzU2l6ZXNHcmlkLnB1c2goc2xpZGVTaXplKTtcblxuICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgIHNsaWRlUG9zaXRpb24gPSBzbGlkZVBvc2l0aW9uICsgc2xpZGVTaXplIC8gMiArIHByZXZTbGlkZVNpemUgLyAyICsgc3BhY2VCZXR3ZWVuO1xuICAgICAgaWYgKHByZXZTbGlkZVNpemUgPT09IDAgJiYgaSAhPT0gMCkgc2xpZGVQb3NpdGlvbiA9IHNsaWRlUG9zaXRpb24gLSBzd2lwZXJTaXplIC8gMiAtIHNwYWNlQmV0d2VlbjtcbiAgICAgIGlmIChpID09PSAwKSBzbGlkZVBvc2l0aW9uID0gc2xpZGVQb3NpdGlvbiAtIHN3aXBlclNpemUgLyAyIC0gc3BhY2VCZXR3ZWVuO1xuICAgICAgaWYgKE1hdGguYWJzKHNsaWRlUG9zaXRpb24pIDwgMSAvIDEwMDApIHNsaWRlUG9zaXRpb24gPSAwO1xuICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHNsaWRlUG9zaXRpb24gPSBNYXRoLmZsb29yKHNsaWRlUG9zaXRpb24pO1xuICAgICAgaWYgKGluZGV4ICUgcGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAwKSBzbmFwR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgc2xpZGVzR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVQb3NpdGlvbiA9IE1hdGguZmxvb3Ioc2xpZGVQb3NpdGlvbik7XG4gICAgICBpZiAoKGluZGV4IC0gTWF0aC5taW4oc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIGluZGV4KSkgJSBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAwKSBzbmFwR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgc2xpZGVzR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgc2xpZGVQb3NpdGlvbiA9IHNsaWRlUG9zaXRpb24gKyBzbGlkZVNpemUgKyBzcGFjZUJldHdlZW47XG4gICAgfVxuXG4gICAgc3dpcGVyLnZpcnR1YWxTaXplICs9IHNsaWRlU2l6ZSArIHNwYWNlQmV0d2VlbjtcbiAgICBwcmV2U2xpZGVTaXplID0gc2xpZGVTaXplO1xuICAgIGluZGV4ICs9IDE7XG4gIH1cblxuICBzd2lwZXIudmlydHVhbFNpemUgPSBNYXRoLm1heChzd2lwZXIudmlydHVhbFNpemUsIHN3aXBlclNpemUpICsgb2Zmc2V0QWZ0ZXI7XG5cbiAgaWYgKHJ0bCAmJiB3cm9uZ1JUTCAmJiAocGFyYW1zLmVmZmVjdCA9PT0gJ3NsaWRlJyB8fCBwYXJhbXMuZWZmZWN0ID09PSAnY292ZXJmbG93JykpIHtcbiAgICAkd3JhcHBlckVsLmNzcyh7XG4gICAgICB3aWR0aDogYCR7c3dpcGVyLnZpcnR1YWxTaXplICsgcGFyYW1zLnNwYWNlQmV0d2Vlbn1weGBcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChwYXJhbXMuc2V0V3JhcHBlclNpemUpIHtcbiAgICAkd3JhcHBlckVsLmNzcyh7XG4gICAgICBbZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldOiBgJHtzd2lwZXIudmlydHVhbFNpemUgKyBwYXJhbXMuc3BhY2VCZXR3ZWVufXB4YFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgc3dpcGVyLmdyaWQudXBkYXRlV3JhcHBlclNpemUoc2xpZGVTaXplLCBzbmFwR3JpZCwgZ2V0RGlyZWN0aW9uTGFiZWwpO1xuICB9IC8vIFJlbW92ZSBsYXN0IGdyaWQgZWxlbWVudHMgZGVwZW5kaW5nIG9uIHdpZHRoXG5cblxuICBpZiAoIXBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgIGNvbnN0IG5ld1NsaWRlc0dyaWQgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc25hcEdyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGxldCBzbGlkZXNHcmlkSXRlbSA9IHNuYXBHcmlkW2ldO1xuICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHNsaWRlc0dyaWRJdGVtID0gTWF0aC5mbG9vcihzbGlkZXNHcmlkSXRlbSk7XG5cbiAgICAgIGlmIChzbmFwR3JpZFtpXSA8PSBzd2lwZXIudmlydHVhbFNpemUgLSBzd2lwZXJTaXplKSB7XG4gICAgICAgIG5ld1NsaWRlc0dyaWQucHVzaChzbGlkZXNHcmlkSXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc25hcEdyaWQgPSBuZXdTbGlkZXNHcmlkO1xuXG4gICAgaWYgKE1hdGguZmxvb3Ioc3dpcGVyLnZpcnR1YWxTaXplIC0gc3dpcGVyU2l6ZSkgLSBNYXRoLmZsb29yKHNuYXBHcmlkW3NuYXBHcmlkLmxlbmd0aCAtIDFdKSA+IDEpIHtcbiAgICAgIHNuYXBHcmlkLnB1c2goc3dpcGVyLnZpcnR1YWxTaXplIC0gc3dpcGVyU2l6ZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNuYXBHcmlkLmxlbmd0aCA9PT0gMCkgc25hcEdyaWQgPSBbMF07XG5cbiAgaWYgKHBhcmFtcy5zcGFjZUJldHdlZW4gIT09IDApIHtcbiAgICBjb25zdCBrZXkgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgJiYgcnRsID8gJ21hcmdpbkxlZnQnIDogZ2V0RGlyZWN0aW9uTGFiZWwoJ21hcmdpblJpZ2h0Jyk7XG4gICAgc2xpZGVzLmZpbHRlcigoXywgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgaWYgKCFwYXJhbXMuY3NzTW9kZSkgcmV0dXJuIHRydWU7XG5cbiAgICAgIGlmIChzbGlkZUluZGV4ID09PSBzbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pLmNzcyh7XG4gICAgICBba2V5XTogYCR7c3BhY2VCZXR3ZWVufXB4YFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXNCb3VuZHMpIHtcbiAgICBsZXQgYWxsU2xpZGVzU2l6ZSA9IDA7XG4gICAgc2xpZGVzU2l6ZXNHcmlkLmZvckVhY2goc2xpZGVTaXplVmFsdWUgPT4ge1xuICAgICAgYWxsU2xpZGVzU2l6ZSArPSBzbGlkZVNpemVWYWx1ZSArIChwYXJhbXMuc3BhY2VCZXR3ZWVuID8gcGFyYW1zLnNwYWNlQmV0d2VlbiA6IDApO1xuICAgIH0pO1xuICAgIGFsbFNsaWRlc1NpemUgLT0gcGFyYW1zLnNwYWNlQmV0d2VlbjtcbiAgICBjb25zdCBtYXhTbmFwID0gYWxsU2xpZGVzU2l6ZSAtIHN3aXBlclNpemU7XG4gICAgc25hcEdyaWQgPSBzbmFwR3JpZC5tYXAoc25hcCA9PiB7XG4gICAgICBpZiAoc25hcCA8IDApIHJldHVybiAtb2Zmc2V0QmVmb3JlO1xuICAgICAgaWYgKHNuYXAgPiBtYXhTbmFwKSByZXR1cm4gbWF4U25hcCArIG9mZnNldEFmdGVyO1xuICAgICAgcmV0dXJuIHNuYXA7XG4gICAgfSk7XG4gIH1cblxuICBpZiAocGFyYW1zLmNlbnRlckluc3VmZmljaWVudFNsaWRlcykge1xuICAgIGxldCBhbGxTbGlkZXNTaXplID0gMDtcbiAgICBzbGlkZXNTaXplc0dyaWQuZm9yRWFjaChzbGlkZVNpemVWYWx1ZSA9PiB7XG4gICAgICBhbGxTbGlkZXNTaXplICs9IHNsaWRlU2l6ZVZhbHVlICsgKHBhcmFtcy5zcGFjZUJldHdlZW4gPyBwYXJhbXMuc3BhY2VCZXR3ZWVuIDogMCk7XG4gICAgfSk7XG4gICAgYWxsU2xpZGVzU2l6ZSAtPSBwYXJhbXMuc3BhY2VCZXR3ZWVuO1xuXG4gICAgaWYgKGFsbFNsaWRlc1NpemUgPCBzd2lwZXJTaXplKSB7XG4gICAgICBjb25zdCBhbGxTbGlkZXNPZmZzZXQgPSAoc3dpcGVyU2l6ZSAtIGFsbFNsaWRlc1NpemUpIC8gMjtcbiAgICAgIHNuYXBHcmlkLmZvckVhY2goKHNuYXAsIHNuYXBJbmRleCkgPT4ge1xuICAgICAgICBzbmFwR3JpZFtzbmFwSW5kZXhdID0gc25hcCAtIGFsbFNsaWRlc09mZnNldDtcbiAgICAgIH0pO1xuICAgICAgc2xpZGVzR3JpZC5mb3JFYWNoKChzbmFwLCBzbmFwSW5kZXgpID0+IHtcbiAgICAgICAgc2xpZGVzR3JpZFtzbmFwSW5kZXhdID0gc25hcCArIGFsbFNsaWRlc09mZnNldDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgc2xpZGVzLFxuICAgIHNuYXBHcmlkLFxuICAgIHNsaWRlc0dyaWQsXG4gICAgc2xpZGVzU2l6ZXNHcmlkXG4gIH0pO1xuXG4gIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgcGFyYW1zLmNzc01vZGUgJiYgIXBhcmFtcy5jZW50ZXJlZFNsaWRlc0JvdW5kcykge1xuICAgIHNldENTU1Byb3BlcnR5KHN3aXBlci53cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlJywgYCR7LXNuYXBHcmlkWzBdfXB4YCk7XG4gICAgc2V0Q1NTUHJvcGVydHkoc3dpcGVyLndyYXBwZXJFbCwgJy0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1hZnRlcicsIGAke3N3aXBlci5zaXplIC8gMiAtIHNsaWRlc1NpemVzR3JpZFtzbGlkZXNTaXplc0dyaWQubGVuZ3RoIC0gMV0gLyAyfXB4YCk7XG4gICAgY29uc3QgYWRkVG9TbmFwR3JpZCA9IC1zd2lwZXIuc25hcEdyaWRbMF07XG4gICAgY29uc3QgYWRkVG9TbGlkZXNHcmlkID0gLXN3aXBlci5zbGlkZXNHcmlkWzBdO1xuICAgIHN3aXBlci5zbmFwR3JpZCA9IHN3aXBlci5zbmFwR3JpZC5tYXAodiA9PiB2ICsgYWRkVG9TbmFwR3JpZCk7XG4gICAgc3dpcGVyLnNsaWRlc0dyaWQgPSBzd2lwZXIuc2xpZGVzR3JpZC5tYXAodiA9PiB2ICsgYWRkVG9TbGlkZXNHcmlkKTtcbiAgfVxuXG4gIGlmIChzbGlkZXNMZW5ndGggIT09IHByZXZpb3VzU2xpZGVzTGVuZ3RoKSB7XG4gICAgc3dpcGVyLmVtaXQoJ3NsaWRlc0xlbmd0aENoYW5nZScpO1xuICB9XG5cbiAgaWYgKHNuYXBHcmlkLmxlbmd0aCAhPT0gcHJldmlvdXNTbmFwR3JpZExlbmd0aCkge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cpIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgc3dpcGVyLmVtaXQoJ3NuYXBHcmlkTGVuZ3RoQ2hhbmdlJyk7XG4gIH1cblxuICBpZiAoc2xpZGVzR3JpZC5sZW5ndGggIT09IHByZXZpb3VzU2xpZGVzR3JpZExlbmd0aCkge1xuICAgIHN3aXBlci5lbWl0KCdzbGlkZXNHcmlkTGVuZ3RoQ2hhbmdlJyk7XG4gIH1cblxuICBpZiAocGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MpIHtcbiAgICBzd2lwZXIudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gIH1cblxuICBpZiAoIWlzVmlydHVhbCAmJiAhcGFyYW1zLmNzc01vZGUgJiYgKHBhcmFtcy5lZmZlY3QgPT09ICdzbGlkZScgfHwgcGFyYW1zLmVmZmVjdCA9PT0gJ2ZhZGUnKSkge1xuICAgIGNvbnN0IGJhY2tGYWNlSGlkZGVuQ2xhc3MgPSBgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31iYWNrZmFjZS1oaWRkZW5gO1xuICAgIGNvbnN0IGhhc0NsYXNzQmFja2ZhY2VDbGFzc0FkZGVkID0gc3dpcGVyLiRlbC5oYXNDbGFzcyhiYWNrRmFjZUhpZGRlbkNsYXNzKTtcblxuICAgIGlmIChzbGlkZXNMZW5ndGggPD0gcGFyYW1zLm1heEJhY2tmYWNlSGlkZGVuU2xpZGVzKSB7XG4gICAgICBpZiAoIWhhc0NsYXNzQmFja2ZhY2VDbGFzc0FkZGVkKSBzd2lwZXIuJGVsLmFkZENsYXNzKGJhY2tGYWNlSGlkZGVuQ2xhc3MpO1xuICAgIH0gZWxzZSBpZiAoaGFzQ2xhc3NCYWNrZmFjZUNsYXNzQWRkZWQpIHtcbiAgICAgIHN3aXBlci4kZWwucmVtb3ZlQ2xhc3MoYmFja0ZhY2VIaWRkZW5DbGFzcyk7XG4gICAgfVxuICB9XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZUF1dG9IZWlnaHQoc3BlZWQpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3QgYWN0aXZlU2xpZGVzID0gW107XG4gIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICBsZXQgbmV3SGVpZ2h0ID0gMDtcbiAgbGV0IGk7XG5cbiAgaWYgKHR5cGVvZiBzcGVlZCA9PT0gJ251bWJlcicpIHtcbiAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihzcGVlZCk7XG4gIH0gZWxzZSBpZiAoc3BlZWQgPT09IHRydWUpIHtcbiAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihzd2lwZXIucGFyYW1zLnNwZWVkKTtcbiAgfVxuXG4gIGNvbnN0IGdldFNsaWRlQnlJbmRleCA9IGluZGV4ID0+IHtcbiAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICByZXR1cm4gc3dpcGVyLnNsaWRlcy5maWx0ZXIoZWwgPT4gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCkgPT09IGluZGV4KVswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3dpcGVyLnNsaWRlcy5lcShpbmRleClbMF07XG4gIH07IC8vIEZpbmQgc2xpZGVzIGN1cnJlbnRseSBpbiB2aWV3XG5cblxuICBpZiAoc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ICE9PSAnYXV0bycgJiYgc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID4gMSkge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICBzd2lwZXIudmlzaWJsZVNsaWRlcy5lYWNoKHNsaWRlID0+IHtcbiAgICAgICAgYWN0aXZlU2xpZGVzLnB1c2goc2xpZGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXRoLmNlaWwoc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3KTsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4ICsgaTtcbiAgICAgICAgaWYgKGluZGV4ID4gc3dpcGVyLnNsaWRlcy5sZW5ndGggJiYgIWlzVmlydHVhbCkgYnJlYWs7XG4gICAgICAgIGFjdGl2ZVNsaWRlcy5wdXNoKGdldFNsaWRlQnlJbmRleChpbmRleCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBhY3RpdmVTbGlkZXMucHVzaChnZXRTbGlkZUJ5SW5kZXgoc3dpcGVyLmFjdGl2ZUluZGV4KSk7XG4gIH0gLy8gRmluZCBuZXcgaGVpZ2h0IGZyb20gaGlnaGVzdCBzbGlkZSBpbiB2aWV3XG5cblxuICBmb3IgKGkgPSAwOyBpIDwgYWN0aXZlU2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHR5cGVvZiBhY3RpdmVTbGlkZXNbaV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBoZWlnaHQgPSBhY3RpdmVTbGlkZXNbaV0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgbmV3SGVpZ2h0ID0gaGVpZ2h0ID4gbmV3SGVpZ2h0ID8gaGVpZ2h0IDogbmV3SGVpZ2h0O1xuICAgIH1cbiAgfSAvLyBVcGRhdGUgSGVpZ2h0XG5cblxuICBpZiAobmV3SGVpZ2h0IHx8IG5ld0hlaWdodCA9PT0gMCkgc3dpcGVyLiR3cmFwcGVyRWwuY3NzKCdoZWlnaHQnLCBgJHtuZXdIZWlnaHR9cHhgKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlU2xpZGVzT2Zmc2V0KCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCBzbGlkZXMgPSBzd2lwZXIuc2xpZGVzO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgc2xpZGVzW2ldLnN3aXBlclNsaWRlT2Zmc2V0ID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gc2xpZGVzW2ldLm9mZnNldExlZnQgOiBzbGlkZXNbaV0ub2Zmc2V0VG9wO1xuICB9XG59IiwgImltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlU2xpZGVzUHJvZ3Jlc3ModHJhbnNsYXRlKSB7XG4gIGlmICh0cmFuc2xhdGUgPT09IHZvaWQgMCkge1xuICAgIHRyYW5zbGF0ZSA9IHRoaXMgJiYgdGhpcy50cmFuc2xhdGUgfHwgMDtcbiAgfVxuXG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gIGNvbnN0IHtcbiAgICBzbGlkZXMsXG4gICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgc25hcEdyaWRcbiAgfSA9IHN3aXBlcjtcbiAgaWYgKHNsaWRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgaWYgKHR5cGVvZiBzbGlkZXNbMF0uc3dpcGVyU2xpZGVPZmZzZXQgPT09ICd1bmRlZmluZWQnKSBzd2lwZXIudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gIGxldCBvZmZzZXRDZW50ZXIgPSAtdHJhbnNsYXRlO1xuICBpZiAocnRsKSBvZmZzZXRDZW50ZXIgPSB0cmFuc2xhdGU7IC8vIFZpc2libGUgU2xpZGVzXG5cbiAgc2xpZGVzLnJlbW92ZUNsYXNzKHBhcmFtcy5zbGlkZVZpc2libGVDbGFzcyk7XG4gIHN3aXBlci52aXNpYmxlU2xpZGVzSW5kZXhlcyA9IFtdO1xuICBzd2lwZXIudmlzaWJsZVNsaWRlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3Qgc2xpZGUgPSBzbGlkZXNbaV07XG4gICAgbGV0IHNsaWRlT2Zmc2V0ID0gc2xpZGUuc3dpcGVyU2xpZGVPZmZzZXQ7XG5cbiAgICBpZiAocGFyYW1zLmNzc01vZGUgJiYgcGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICBzbGlkZU9mZnNldCAtPSBzbGlkZXNbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgfVxuXG4gICAgY29uc3Qgc2xpZGVQcm9ncmVzcyA9IChvZmZzZXRDZW50ZXIgKyAocGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gc3dpcGVyLm1pblRyYW5zbGF0ZSgpIDogMCkgLSBzbGlkZU9mZnNldCkgLyAoc2xpZGUuc3dpcGVyU2xpZGVTaXplICsgcGFyYW1zLnNwYWNlQmV0d2Vlbik7XG4gICAgY29uc3Qgb3JpZ2luYWxTbGlkZVByb2dyZXNzID0gKG9mZnNldENlbnRlciAtIHNuYXBHcmlkWzBdICsgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHN3aXBlci5taW5UcmFuc2xhdGUoKSA6IDApIC0gc2xpZGVPZmZzZXQpIC8gKHNsaWRlLnN3aXBlclNsaWRlU2l6ZSArIHBhcmFtcy5zcGFjZUJldHdlZW4pO1xuICAgIGNvbnN0IHNsaWRlQmVmb3JlID0gLShvZmZzZXRDZW50ZXIgLSBzbGlkZU9mZnNldCk7XG4gICAgY29uc3Qgc2xpZGVBZnRlciA9IHNsaWRlQmVmb3JlICsgc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtpXTtcbiAgICBjb25zdCBpc1Zpc2libGUgPSBzbGlkZUJlZm9yZSA+PSAwICYmIHNsaWRlQmVmb3JlIDwgc3dpcGVyLnNpemUgLSAxIHx8IHNsaWRlQWZ0ZXIgPiAxICYmIHNsaWRlQWZ0ZXIgPD0gc3dpcGVyLnNpemUgfHwgc2xpZGVCZWZvcmUgPD0gMCAmJiBzbGlkZUFmdGVyID49IHN3aXBlci5zaXplO1xuXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgc3dpcGVyLnZpc2libGVTbGlkZXMucHVzaChzbGlkZSk7XG4gICAgICBzd2lwZXIudmlzaWJsZVNsaWRlc0luZGV4ZXMucHVzaChpKTtcbiAgICAgIHNsaWRlcy5lcShpKS5hZGRDbGFzcyhwYXJhbXMuc2xpZGVWaXNpYmxlQ2xhc3MpO1xuICAgIH1cblxuICAgIHNsaWRlLnByb2dyZXNzID0gcnRsID8gLXNsaWRlUHJvZ3Jlc3MgOiBzbGlkZVByb2dyZXNzO1xuICAgIHNsaWRlLm9yaWdpbmFsUHJvZ3Jlc3MgPSBydGwgPyAtb3JpZ2luYWxTbGlkZVByb2dyZXNzIDogb3JpZ2luYWxTbGlkZVByb2dyZXNzO1xuICB9XG5cbiAgc3dpcGVyLnZpc2libGVTbGlkZXMgPSAkKHN3aXBlci52aXNpYmxlU2xpZGVzKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3ModHJhbnNsYXRlKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG5cbiAgaWYgKHR5cGVvZiB0cmFuc2xhdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgbXVsdGlwbGllciA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtMSA6IDE7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG4gICAgdHJhbnNsYXRlID0gc3dpcGVyICYmIHN3aXBlci50cmFuc2xhdGUgJiYgc3dpcGVyLnRyYW5zbGF0ZSAqIG11bHRpcGxpZXIgfHwgMDtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gIGNvbnN0IHRyYW5zbGF0ZXNEaWZmID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICBsZXQge1xuICAgIHByb2dyZXNzLFxuICAgIGlzQmVnaW5uaW5nLFxuICAgIGlzRW5kXG4gIH0gPSBzd2lwZXI7XG4gIGNvbnN0IHdhc0JlZ2lubmluZyA9IGlzQmVnaW5uaW5nO1xuICBjb25zdCB3YXNFbmQgPSBpc0VuZDtcblxuICBpZiAodHJhbnNsYXRlc0RpZmYgPT09IDApIHtcbiAgICBwcm9ncmVzcyA9IDA7XG4gICAgaXNCZWdpbm5pbmcgPSB0cnVlO1xuICAgIGlzRW5kID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9ncmVzcyA9ICh0cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIC8gdHJhbnNsYXRlc0RpZmY7XG4gICAgaXNCZWdpbm5pbmcgPSBwcm9ncmVzcyA8PSAwO1xuICAgIGlzRW5kID0gcHJvZ3Jlc3MgPj0gMTtcbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgcHJvZ3Jlc3MsXG4gICAgaXNCZWdpbm5pbmcsXG4gICAgaXNFbmRcbiAgfSk7XG4gIGlmIChwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyB8fCBwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgcGFyYW1zLmF1dG9IZWlnaHQpIHN3aXBlci51cGRhdGVTbGlkZXNQcm9ncmVzcyh0cmFuc2xhdGUpO1xuXG4gIGlmIChpc0JlZ2lubmluZyAmJiAhd2FzQmVnaW5uaW5nKSB7XG4gICAgc3dpcGVyLmVtaXQoJ3JlYWNoQmVnaW5uaW5nIHRvRWRnZScpO1xuICB9XG5cbiAgaWYgKGlzRW5kICYmICF3YXNFbmQpIHtcbiAgICBzd2lwZXIuZW1pdCgncmVhY2hFbmQgdG9FZGdlJyk7XG4gIH1cblxuICBpZiAod2FzQmVnaW5uaW5nICYmICFpc0JlZ2lubmluZyB8fCB3YXNFbmQgJiYgIWlzRW5kKSB7XG4gICAgc3dpcGVyLmVtaXQoJ2Zyb21FZGdlJyk7XG4gIH1cblxuICBzd2lwZXIuZW1pdCgncHJvZ3Jlc3MnLCBwcm9ncmVzcyk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc0NsYXNzZXMoKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICBzbGlkZXMsXG4gICAgcGFyYW1zLFxuICAgICR3cmFwcGVyRWwsXG4gICAgYWN0aXZlSW5kZXgsXG4gICAgcmVhbEluZGV4XG4gIH0gPSBzd2lwZXI7XG4gIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gIHNsaWRlcy5yZW1vdmVDbGFzcyhgJHtwYXJhbXMuc2xpZGVBY3RpdmVDbGFzc30gJHtwYXJhbXMuc2xpZGVOZXh0Q2xhc3N9ICR7cGFyYW1zLnNsaWRlUHJldkNsYXNzfSAke3BhcmFtcy5zbGlkZUR1cGxpY2F0ZUFjdGl2ZUNsYXNzfSAke3BhcmFtcy5zbGlkZUR1cGxpY2F0ZU5leHRDbGFzc30gJHtwYXJhbXMuc2xpZGVEdXBsaWNhdGVQcmV2Q2xhc3N9YCk7XG4gIGxldCBhY3RpdmVTbGlkZTtcblxuICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgYWN0aXZlU2xpZGUgPSBzd2lwZXIuJHdyYXBwZXJFbC5maW5kKGAuJHtwYXJhbXMuc2xpZGVDbGFzc31bZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke2FjdGl2ZUluZGV4fVwiXWApO1xuICB9IGVsc2Uge1xuICAgIGFjdGl2ZVNsaWRlID0gc2xpZGVzLmVxKGFjdGl2ZUluZGV4KTtcbiAgfSAvLyBBY3RpdmUgY2xhc3Nlc1xuXG5cbiAgYWN0aXZlU2xpZGUuYWRkQ2xhc3MocGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpO1xuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIC8vIER1cGxpY2F0ZSB0byBhbGwgbG9vcGVkIHNsaWRlc1xuICAgIGlmIChhY3RpdmVTbGlkZS5oYXNDbGFzcyhwYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykpIHtcbiAgICAgICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3BhcmFtcy5zbGlkZUNsYXNzfTpub3QoLiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9KVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7cmVhbEluZGV4fVwiXWApLmFkZENsYXNzKHBhcmFtcy5zbGlkZUR1cGxpY2F0ZUFjdGl2ZUNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtyZWFsSW5kZXh9XCJdYCkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlRHVwbGljYXRlQWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgfSAvLyBOZXh0IFNsaWRlXG5cblxuICBsZXQgbmV4dFNsaWRlID0gYWN0aXZlU2xpZGUubmV4dEFsbChgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9YCkuZXEoMCkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlTmV4dENsYXNzKTtcblxuICBpZiAocGFyYW1zLmxvb3AgJiYgbmV4dFNsaWRlLmxlbmd0aCA9PT0gMCkge1xuICAgIG5leHRTbGlkZSA9IHNsaWRlcy5lcSgwKTtcbiAgICBuZXh0U2xpZGUuYWRkQ2xhc3MocGFyYW1zLnNsaWRlTmV4dENsYXNzKTtcbiAgfSAvLyBQcmV2IFNsaWRlXG5cblxuICBsZXQgcHJldlNsaWRlID0gYWN0aXZlU2xpZGUucHJldkFsbChgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9YCkuZXEoMCkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlUHJldkNsYXNzKTtcblxuICBpZiAocGFyYW1zLmxvb3AgJiYgcHJldlNsaWRlLmxlbmd0aCA9PT0gMCkge1xuICAgIHByZXZTbGlkZSA9IHNsaWRlcy5lcSgtMSk7XG4gICAgcHJldlNsaWRlLmFkZENsYXNzKHBhcmFtcy5zbGlkZVByZXZDbGFzcyk7XG4gIH1cblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAvLyBEdXBsaWNhdGUgdG8gYWxsIGxvb3BlZCBzbGlkZXNcbiAgICBpZiAobmV4dFNsaWRlLmhhc0NsYXNzKHBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSkge1xuICAgICAgJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9Om5vdCguJHtwYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzc30pW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtuZXh0U2xpZGUuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKX1cIl1gKS5hZGRDbGFzcyhwYXJhbXMuc2xpZGVEdXBsaWNhdGVOZXh0Q2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtwYXJhbXMuc2xpZGVDbGFzc30uJHtwYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzc31bZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke25leHRTbGlkZS5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpfVwiXWApLmFkZENsYXNzKHBhcmFtcy5zbGlkZUR1cGxpY2F0ZU5leHRDbGFzcyk7XG4gICAgfVxuXG4gICAgaWYgKHByZXZTbGlkZS5oYXNDbGFzcyhwYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykpIHtcbiAgICAgICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3BhcmFtcy5zbGlkZUNsYXNzfTpub3QoLiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9KVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7cHJldlNsaWRlLmF0dHIoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jyl9XCJdYCkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlRHVwbGljYXRlUHJldkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtwcmV2U2xpZGUuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKX1cIl1gKS5hZGRDbGFzcyhwYXJhbXMuc2xpZGVEdXBsaWNhdGVQcmV2Q2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIHN3aXBlci5lbWl0U2xpZGVzQ2xhc3NlcygpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGRhdGVBY3RpdmVJbmRleChuZXdBY3RpdmVJbmRleCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB0cmFuc2xhdGUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuICBjb25zdCB7XG4gICAgc2xpZGVzR3JpZCxcbiAgICBzbmFwR3JpZCxcbiAgICBwYXJhbXMsXG4gICAgYWN0aXZlSW5kZXg6IHByZXZpb3VzSW5kZXgsXG4gICAgcmVhbEluZGV4OiBwcmV2aW91c1JlYWxJbmRleCxcbiAgICBzbmFwSW5kZXg6IHByZXZpb3VzU25hcEluZGV4XG4gIH0gPSBzd2lwZXI7XG4gIGxldCBhY3RpdmVJbmRleCA9IG5ld0FjdGl2ZUluZGV4O1xuICBsZXQgc25hcEluZGV4O1xuXG4gIGlmICh0eXBlb2YgYWN0aXZlSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNHcmlkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlc0dyaWRbaSArIDFdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHJhbnNsYXRlID49IHNsaWRlc0dyaWRbaV0gJiYgdHJhbnNsYXRlIDwgc2xpZGVzR3JpZFtpICsgMV0gLSAoc2xpZGVzR3JpZFtpICsgMV0gLSBzbGlkZXNHcmlkW2ldKSAvIDIpIHtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRlID49IHNsaWRlc0dyaWRbaV0gJiYgdHJhbnNsYXRlIDwgc2xpZGVzR3JpZFtpICsgMV0pIHtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IGkgKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0ZSA+PSBzbGlkZXNHcmlkW2ldKSB7XG4gICAgICAgIGFjdGl2ZUluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9IC8vIE5vcm1hbGl6ZSBzbGlkZUluZGV4XG5cblxuICAgIGlmIChwYXJhbXMubm9ybWFsaXplU2xpZGVJbmRleCkge1xuICAgICAgaWYgKGFjdGl2ZUluZGV4IDwgMCB8fCB0eXBlb2YgYWN0aXZlSW5kZXggPT09ICd1bmRlZmluZWQnKSBhY3RpdmVJbmRleCA9IDA7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNuYXBHcmlkLmluZGV4T2YodHJhbnNsYXRlKSA+PSAwKSB7XG4gICAgc25hcEluZGV4ID0gc25hcEdyaWQuaW5kZXhPZih0cmFuc2xhdGUpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNraXAgPSBNYXRoLm1pbihwYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwLCBhY3RpdmVJbmRleCk7XG4gICAgc25hcEluZGV4ID0gc2tpcCArIE1hdGguZmxvb3IoKGFjdGl2ZUluZGV4IC0gc2tpcCkgLyBwYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICB9XG5cbiAgaWYgKHNuYXBJbmRleCA+PSBzbmFwR3JpZC5sZW5ndGgpIHNuYXBJbmRleCA9IHNuYXBHcmlkLmxlbmd0aCAtIDE7XG5cbiAgaWYgKGFjdGl2ZUluZGV4ID09PSBwcmV2aW91c0luZGV4KSB7XG4gICAgaWYgKHNuYXBJbmRleCAhPT0gcHJldmlvdXNTbmFwSW5kZXgpIHtcbiAgICAgIHN3aXBlci5zbmFwSW5kZXggPSBzbmFwSW5kZXg7XG4gICAgICBzd2lwZXIuZW1pdCgnc25hcEluZGV4Q2hhbmdlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9IC8vIEdldCByZWFsIGluZGV4XG5cblxuICBjb25zdCByZWFsSW5kZXggPSBwYXJzZUludChzd2lwZXIuc2xpZGVzLmVxKGFjdGl2ZUluZGV4KS5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpIHx8IGFjdGl2ZUluZGV4LCAxMCk7XG4gIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgc25hcEluZGV4LFxuICAgIHJlYWxJbmRleCxcbiAgICBwcmV2aW91c0luZGV4LFxuICAgIGFjdGl2ZUluZGV4XG4gIH0pO1xuICBzd2lwZXIuZW1pdCgnYWN0aXZlSW5kZXhDaGFuZ2UnKTtcbiAgc3dpcGVyLmVtaXQoJ3NuYXBJbmRleENoYW5nZScpO1xuXG4gIGlmIChwcmV2aW91c1JlYWxJbmRleCAhPT0gcmVhbEluZGV4KSB7XG4gICAgc3dpcGVyLmVtaXQoJ3JlYWxJbmRleENoYW5nZScpO1xuICB9XG5cbiAgaWYgKHN3aXBlci5pbml0aWFsaXplZCB8fCBzd2lwZXIucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCkge1xuICAgIHN3aXBlci5lbWl0KCdzbGlkZUNoYW5nZScpO1xuICB9XG59IiwgImltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlQ2xpY2tlZFNsaWRlKGUpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcztcbiAgY29uc3Qgc2xpZGUgPSAkKGUpLmNsb3Nlc3QoYC4ke3BhcmFtcy5zbGlkZUNsYXNzfWApWzBdO1xuICBsZXQgc2xpZGVGb3VuZCA9IGZhbHNlO1xuICBsZXQgc2xpZGVJbmRleDtcblxuICBpZiAoc2xpZGUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3aXBlci5zbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChzd2lwZXIuc2xpZGVzW2ldID09PSBzbGlkZSkge1xuICAgICAgICBzbGlkZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgc2xpZGVJbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzbGlkZSAmJiBzbGlkZUZvdW5kKSB7XG4gICAgc3dpcGVyLmNsaWNrZWRTbGlkZSA9IHNsaWRlO1xuXG4gICAgaWYgKHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICBzd2lwZXIuY2xpY2tlZEluZGV4ID0gcGFyc2VJbnQoJChzbGlkZSkuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuY2xpY2tlZEluZGV4ID0gc2xpZGVJbmRleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3dpcGVyLmNsaWNrZWRTbGlkZSA9IHVuZGVmaW5lZDtcbiAgICBzd2lwZXIuY2xpY2tlZEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwYXJhbXMuc2xpZGVUb0NsaWNrZWRTbGlkZSAmJiBzd2lwZXIuY2xpY2tlZEluZGV4ICE9PSB1bmRlZmluZWQgJiYgc3dpcGVyLmNsaWNrZWRJbmRleCAhPT0gc3dpcGVyLmFjdGl2ZUluZGV4KSB7XG4gICAgc3dpcGVyLnNsaWRlVG9DbGlja2VkU2xpZGUoKTtcbiAgfVxufSIsICJpbXBvcnQgZ2V0VHJhbnNsYXRlIGZyb20gJy4vZ2V0VHJhbnNsYXRlLmpzJztcbmltcG9ydCBzZXRUcmFuc2xhdGUgZnJvbSAnLi9zZXRUcmFuc2xhdGUuanMnO1xuaW1wb3J0IG1pblRyYW5zbGF0ZSBmcm9tICcuL21pblRyYW5zbGF0ZS5qcyc7XG5pbXBvcnQgbWF4VHJhbnNsYXRlIGZyb20gJy4vbWF4VHJhbnNsYXRlLmpzJztcbmltcG9ydCB0cmFuc2xhdGVUbyBmcm9tICcuL3RyYW5zbGF0ZVRvLmpzJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0VHJhbnNsYXRlLFxuICBzZXRUcmFuc2xhdGUsXG4gIG1pblRyYW5zbGF0ZSxcbiAgbWF4VHJhbnNsYXRlLFxuICB0cmFuc2xhdGVUb1xufTsiLCAiaW1wb3J0IHsgZ2V0VHJhbnNsYXRlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFN3aXBlclRyYW5zbGF0ZShheGlzKSB7XG4gIGlmIChheGlzID09PSB2b2lkIDApIHtcbiAgICBheGlzID0gdGhpcy5pc0hvcml6b250YWwoKSA/ICd4JyA6ICd5JztcbiAgfVxuXG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXMsXG4gICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgdHJhbnNsYXRlLFxuICAgICR3cmFwcGVyRWxcbiAgfSA9IHN3aXBlcjtcblxuICBpZiAocGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUpIHtcbiAgICByZXR1cm4gcnRsID8gLXRyYW5zbGF0ZSA6IHRyYW5zbGF0ZTtcbiAgfVxuXG4gIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgIHJldHVybiB0cmFuc2xhdGU7XG4gIH1cblxuICBsZXQgY3VycmVudFRyYW5zbGF0ZSA9IGdldFRyYW5zbGF0ZSgkd3JhcHBlckVsWzBdLCBheGlzKTtcbiAgaWYgKHJ0bCkgY3VycmVudFRyYW5zbGF0ZSA9IC1jdXJyZW50VHJhbnNsYXRlO1xuICByZXR1cm4gY3VycmVudFRyYW5zbGF0ZSB8fCAwO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRUcmFuc2xhdGUodHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgIHBhcmFtcyxcbiAgICAkd3JhcHBlckVsLFxuICAgIHdyYXBwZXJFbCxcbiAgICBwcm9ncmVzc1xuICB9ID0gc3dpcGVyO1xuICBsZXQgeCA9IDA7XG4gIGxldCB5ID0gMDtcbiAgY29uc3QgeiA9IDA7XG5cbiAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgIHggPSBydGwgPyAtdHJhbnNsYXRlIDogdHJhbnNsYXRlO1xuICB9IGVsc2Uge1xuICAgIHkgPSB0cmFuc2xhdGU7XG4gIH1cblxuICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykge1xuICAgIHggPSBNYXRoLmZsb29yKHgpO1xuICAgIHkgPSBNYXRoLmZsb29yKHkpO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgd3JhcHBlckVsW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnXSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IC14IDogLXk7XG4gIH0gZWxzZSBpZiAoIXBhcmFtcy52aXJ0dWFsVHJhbnNsYXRlKSB7XG4gICAgJHdyYXBwZXJFbC50cmFuc2Zvcm0oYHRyYW5zbGF0ZTNkKCR7eH1weCwgJHt5fXB4LCAke3p9cHgpYCk7XG4gIH1cblxuICBzd2lwZXIucHJldmlvdXNUcmFuc2xhdGUgPSBzd2lwZXIudHJhbnNsYXRlO1xuICBzd2lwZXIudHJhbnNsYXRlID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8geCA6IHk7IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdXBkYXRlIHByb2dyZXNzXG5cbiAgbGV0IG5ld1Byb2dyZXNzO1xuICBjb25zdCB0cmFuc2xhdGVzRGlmZiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKTtcblxuICBpZiAodHJhbnNsYXRlc0RpZmYgPT09IDApIHtcbiAgICBuZXdQcm9ncmVzcyA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbmV3UHJvZ3Jlc3MgPSAodHJhbnNsYXRlIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSAvIHRyYW5zbGF0ZXNEaWZmO1xuICB9XG5cbiAgaWYgKG5ld1Byb2dyZXNzICE9PSBwcm9ncmVzcykge1xuICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyh0cmFuc2xhdGUpO1xuICB9XG5cbiAgc3dpcGVyLmVtaXQoJ3NldFRyYW5zbGF0ZScsIHN3aXBlci50cmFuc2xhdGUsIGJ5Q29udHJvbGxlcik7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pblRyYW5zbGF0ZSgpIHtcbiAgcmV0dXJuIC10aGlzLnNuYXBHcmlkWzBdO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXhUcmFuc2xhdGUoKSB7XG4gIHJldHVybiAtdGhpcy5zbmFwR3JpZFt0aGlzLnNuYXBHcmlkLmxlbmd0aCAtIDFdO1xufSIsICJpbXBvcnQgeyBhbmltYXRlQ1NTTW9kZVNjcm9sbCB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2xhdGVUbyh0cmFuc2xhdGUsIHNwZWVkLCBydW5DYWxsYmFja3MsIHRyYW5zbGF0ZUJvdW5kcywgaW50ZXJuYWwpIHtcbiAgaWYgKHRyYW5zbGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgdHJhbnNsYXRlID0gMDtcbiAgfVxuXG4gIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgfVxuXG4gIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gIH1cblxuICBpZiAodHJhbnNsYXRlQm91bmRzID09PSB2b2lkIDApIHtcbiAgICB0cmFuc2xhdGVCb3VuZHMgPSB0cnVlO1xuICB9XG5cbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICB3cmFwcGVyRWxcbiAgfSA9IHN3aXBlcjtcblxuICBpZiAoc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgbWluVHJhbnNsYXRlID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICBjb25zdCBtYXhUcmFuc2xhdGUgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCk7XG4gIGxldCBuZXdUcmFuc2xhdGU7XG4gIGlmICh0cmFuc2xhdGVCb3VuZHMgJiYgdHJhbnNsYXRlID4gbWluVHJhbnNsYXRlKSBuZXdUcmFuc2xhdGUgPSBtaW5UcmFuc2xhdGU7ZWxzZSBpZiAodHJhbnNsYXRlQm91bmRzICYmIHRyYW5zbGF0ZSA8IG1heFRyYW5zbGF0ZSkgbmV3VHJhbnNsYXRlID0gbWF4VHJhbnNsYXRlO2Vsc2UgbmV3VHJhbnNsYXRlID0gdHJhbnNsYXRlOyAvLyBVcGRhdGUgcHJvZ3Jlc3NcblxuICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MobmV3VHJhbnNsYXRlKTtcblxuICBpZiAocGFyYW1zLmNzc01vZGUpIHtcbiAgICBjb25zdCBpc0ggPSBzd2lwZXIuaXNIb3Jpem9udGFsKCk7XG5cbiAgICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICAgIHdyYXBwZXJFbFtpc0ggPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJ10gPSAtbmV3VHJhbnNsYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXN3aXBlci5zdXBwb3J0LnNtb290aFNjcm9sbCkge1xuICAgICAgICBhbmltYXRlQ1NTTW9kZVNjcm9sbCh7XG4gICAgICAgICAgc3dpcGVyLFxuICAgICAgICAgIHRhcmdldFBvc2l0aW9uOiAtbmV3VHJhbnNsYXRlLFxuICAgICAgICAgIHNpZGU6IGlzSCA/ICdsZWZ0JyA6ICd0b3AnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgd3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgICAgW2lzSCA/ICdsZWZ0JyA6ICd0b3AnXTogLW5ld1RyYW5zbGF0ZSxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChzcGVlZCA9PT0gMCkge1xuICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKDApO1xuICAgIHN3aXBlci5zZXRUcmFuc2xhdGUobmV3VHJhbnNsYXRlKTtcblxuICAgIGlmIChydW5DYWxsYmFja3MpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCBzcGVlZCwgaW50ZXJuYWwpO1xuICAgICAgc3dpcGVyLmVtaXQoJ3RyYW5zaXRpb25FbmQnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3dpcGVyLnNldFRyYW5zaXRpb24oc3BlZWQpO1xuICAgIHN3aXBlci5zZXRUcmFuc2xhdGUobmV3VHJhbnNsYXRlKTtcblxuICAgIGlmIChydW5DYWxsYmFja3MpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCBzcGVlZCwgaW50ZXJuYWwpO1xuICAgICAgc3dpcGVyLmVtaXQoJ3RyYW5zaXRpb25TdGFydCcpO1xuICAgIH1cblxuICAgIGlmICghc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgIGlmICghc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkge1xuICAgICAgICBzd2lwZXIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gdHJhbnNpdGlvbkVuZChlKSB7XG4gICAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcykgcmV0dXJuO1xuICAgICAgICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBzd2lwZXIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICBzd2lwZXIuJHdyYXBwZXJFbFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJraXRUcmFuc2l0aW9uRW5kJywgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgICAgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IG51bGw7XG4gICAgICAgICAgZGVsZXRlIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQ7XG5cbiAgICAgICAgICBpZiAocnVuQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBzd2lwZXIuZW1pdCgndHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgc3dpcGVyLiR3cmFwcGVyRWxbMF0uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgICAgc3dpcGVyLiR3cmFwcGVyRWxbMF0uYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0VHJhbnNpdGlvbkVuZCcsIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufSIsICJpbXBvcnQgc2V0VHJhbnNpdGlvbiBmcm9tICcuL3NldFRyYW5zaXRpb24uanMnO1xuaW1wb3J0IHRyYW5zaXRpb25TdGFydCBmcm9tICcuL3RyYW5zaXRpb25TdGFydC5qcyc7XG5pbXBvcnQgdHJhbnNpdGlvbkVuZCBmcm9tICcuL3RyYW5zaXRpb25FbmQuanMnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBzZXRUcmFuc2l0aW9uLFxuICB0cmFuc2l0aW9uU3RhcnQsXG4gIHRyYW5zaXRpb25FbmRcbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZHVyYXRpb24sIGJ5Q29udHJvbGxlcikge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuXG4gIGlmICghc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgc3dpcGVyLiR3cmFwcGVyRWwudHJhbnNpdGlvbihkdXJhdGlvbik7XG4gIH1cblxuICBzd2lwZXIuZW1pdCgnc2V0VHJhbnNpdGlvbicsIGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpO1xufSIsICJpbXBvcnQgdHJhbnNpdGlvbkVtaXQgZnJvbSAnLi90cmFuc2l0aW9uRW1pdC5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2l0aW9uU3RhcnQocnVuQ2FsbGJhY2tzLCBkaXJlY3Rpb24pIHtcbiAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXNcbiAgfSA9IHN3aXBlcjtcbiAgaWYgKHBhcmFtcy5jc3NNb2RlKSByZXR1cm47XG5cbiAgaWYgKHBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgfVxuXG4gIHRyYW5zaXRpb25FbWl0KHtcbiAgICBzd2lwZXIsXG4gICAgcnVuQ2FsbGJhY2tzLFxuICAgIGRpcmVjdGlvbixcbiAgICBzdGVwOiAnU3RhcnQnXG4gIH0pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2l0aW9uRW1pdChfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIHJ1bkNhbGxiYWNrcyxcbiAgICBkaXJlY3Rpb24sXG4gICAgc3RlcFxuICB9ID0gX3JlZjtcbiAgY29uc3Qge1xuICAgIGFjdGl2ZUluZGV4LFxuICAgIHByZXZpb3VzSW5kZXhcbiAgfSA9IHN3aXBlcjtcbiAgbGV0IGRpciA9IGRpcmVjdGlvbjtcblxuICBpZiAoIWRpcikge1xuICAgIGlmIChhY3RpdmVJbmRleCA+IHByZXZpb3VzSW5kZXgpIGRpciA9ICduZXh0JztlbHNlIGlmIChhY3RpdmVJbmRleCA8IHByZXZpb3VzSW5kZXgpIGRpciA9ICdwcmV2JztlbHNlIGRpciA9ICdyZXNldCc7XG4gIH1cblxuICBzd2lwZXIuZW1pdChgdHJhbnNpdGlvbiR7c3RlcH1gKTtcblxuICBpZiAocnVuQ2FsbGJhY2tzICYmIGFjdGl2ZUluZGV4ICE9PSBwcmV2aW91c0luZGV4KSB7XG4gICAgaWYgKGRpciA9PT0gJ3Jlc2V0Jykge1xuICAgICAgc3dpcGVyLmVtaXQoYHNsaWRlUmVzZXRUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXBlci5lbWl0KGBzbGlkZUNoYW5nZVRyYW5zaXRpb24ke3N0ZXB9YCk7XG5cbiAgICBpZiAoZGlyID09PSAnbmV4dCcpIHtcbiAgICAgIHN3aXBlci5lbWl0KGBzbGlkZU5leHRUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuZW1pdChgc2xpZGVQcmV2VHJhbnNpdGlvbiR7c3RlcH1gKTtcbiAgICB9XG4gIH1cbn0iLCAiaW1wb3J0IHRyYW5zaXRpb25FbWl0IGZyb20gJy4vdHJhbnNpdGlvbkVtaXQuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbikge1xuICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICB9XG5cbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIHBhcmFtc1xuICB9ID0gc3dpcGVyO1xuICBzd2lwZXIuYW5pbWF0aW5nID0gZmFsc2U7XG4gIGlmIChwYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcbiAgdHJhbnNpdGlvbkVtaXQoe1xuICAgIHN3aXBlcixcbiAgICBydW5DYWxsYmFja3MsXG4gICAgZGlyZWN0aW9uLFxuICAgIHN0ZXA6ICdFbmQnXG4gIH0pO1xufSIsICJpbXBvcnQgc2xpZGVUbyBmcm9tICcuL3NsaWRlVG8uanMnO1xuaW1wb3J0IHNsaWRlVG9Mb29wIGZyb20gJy4vc2xpZGVUb0xvb3AuanMnO1xuaW1wb3J0IHNsaWRlTmV4dCBmcm9tICcuL3NsaWRlTmV4dC5qcyc7XG5pbXBvcnQgc2xpZGVQcmV2IGZyb20gJy4vc2xpZGVQcmV2LmpzJztcbmltcG9ydCBzbGlkZVJlc2V0IGZyb20gJy4vc2xpZGVSZXNldC5qcyc7XG5pbXBvcnQgc2xpZGVUb0Nsb3Nlc3QgZnJvbSAnLi9zbGlkZVRvQ2xvc2VzdC5qcyc7XG5pbXBvcnQgc2xpZGVUb0NsaWNrZWRTbGlkZSBmcm9tICcuL3NsaWRlVG9DbGlja2VkU2xpZGUuanMnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBzbGlkZVRvLFxuICBzbGlkZVRvTG9vcCxcbiAgc2xpZGVOZXh0LFxuICBzbGlkZVByZXYsXG4gIHNsaWRlUmVzZXQsXG4gIHNsaWRlVG9DbG9zZXN0LFxuICBzbGlkZVRvQ2xpY2tlZFNsaWRlXG59OyIsICJpbXBvcnQgeyBhbmltYXRlQ1NTTW9kZVNjcm9sbCB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzbGlkZVRvKGluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCwgaW5pdGlhbCkge1xuICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgIGluZGV4ID0gMDtcbiAgfVxuXG4gIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgfVxuXG4gIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gIH1cblxuICBpZiAodHlwZW9mIGluZGV4ICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgaW5kZXggIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgJ2luZGV4JyBhcmd1bWVudCBjYW5ub3QgaGF2ZSB0eXBlIG90aGVyIHRoYW4gJ251bWJlcicgb3IgJ3N0cmluZycuIFske3R5cGVvZiBpbmRleH1dIGdpdmVuLmApO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3N0cmluZycpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYGluZGV4YCBhcmd1bWVudCBjb252ZXJ0ZWQgZnJvbSBgc3RyaW5nYCB0byBgbnVtYmVyYC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNvbnN0IGluZGV4QXNOdW1iZXIgPSBwYXJzZUludChpbmRleCwgMTApO1xuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgYGluZGV4YCBhcmd1bWVudCBpcyBhIHZhbGlkIGBudW1iZXJgXG4gICAgICogYWZ0ZXIgYmVpbmcgY29udmVydGVkIGZyb20gdGhlIGBzdHJpbmdgIHR5cGUuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG5cbiAgICBjb25zdCBpc1ZhbGlkTnVtYmVyID0gaXNGaW5pdGUoaW5kZXhBc051bWJlcik7XG5cbiAgICBpZiAoIWlzVmFsaWROdW1iZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHBhc3NlZC1pbiAnaW5kZXgnIChzdHJpbmcpIGNvdWxkbid0IGJlIGNvbnZlcnRlZCB0byAnbnVtYmVyJy4gWyR7aW5kZXh9XSBnaXZlbi5gKTtcbiAgICB9IC8vIEtub3dpbmcgdGhhdCB0aGUgY29udmVydGVkIGBpbmRleGAgaXMgYSB2YWxpZCBudW1iZXIsXG4gICAgLy8gd2UgY2FuIHVwZGF0ZSB0aGUgb3JpZ2luYWwgYXJndW1lbnQncyB2YWx1ZS5cblxuXG4gICAgaW5kZXggPSBpbmRleEFzTnVtYmVyO1xuICB9XG5cbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgbGV0IHNsaWRlSW5kZXggPSBpbmRleDtcbiAgaWYgKHNsaWRlSW5kZXggPCAwKSBzbGlkZUluZGV4ID0gMDtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICBzbmFwR3JpZCxcbiAgICBzbGlkZXNHcmlkLFxuICAgIHByZXZpb3VzSW5kZXgsXG4gICAgYWN0aXZlSW5kZXgsXG4gICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgd3JhcHBlckVsLFxuICAgIGVuYWJsZWRcbiAgfSA9IHN3aXBlcjtcblxuICBpZiAoc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uIHx8ICFlbmFibGVkICYmICFpbnRlcm5hbCAmJiAhaW5pdGlhbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IHNraXAgPSBNYXRoLm1pbihzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCwgc2xpZGVJbmRleCk7XG4gIGxldCBzbmFwSW5kZXggPSBza2lwICsgTWF0aC5mbG9vcigoc2xpZGVJbmRleCAtIHNraXApIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCk7XG4gIGlmIChzbmFwSW5kZXggPj0gc25hcEdyaWQubGVuZ3RoKSBzbmFwSW5kZXggPSBzbmFwR3JpZC5sZW5ndGggLSAxO1xuXG4gIGlmICgoYWN0aXZlSW5kZXggfHwgcGFyYW1zLmluaXRpYWxTbGlkZSB8fCAwKSA9PT0gKHByZXZpb3VzSW5kZXggfHwgMCkgJiYgcnVuQ2FsbGJhY2tzKSB7XG4gICAgc3dpcGVyLmVtaXQoJ2JlZm9yZVNsaWRlQ2hhbmdlU3RhcnQnKTtcbiAgfVxuXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IC1zbmFwR3JpZFtzbmFwSW5kZXhdOyAvLyBVcGRhdGUgcHJvZ3Jlc3NcblxuICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3ModHJhbnNsYXRlKTsgLy8gTm9ybWFsaXplIHNsaWRlSW5kZXhcblxuICBpZiAocGFyYW1zLm5vcm1hbGl6ZVNsaWRlSW5kZXgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0dyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRUcmFuc2xhdGUgPSAtTWF0aC5mbG9vcih0cmFuc2xhdGUgKiAxMDApO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEdyaWQgPSBNYXRoLmZsb29yKHNsaWRlc0dyaWRbaV0gKiAxMDApO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEdyaWROZXh0ID0gTWF0aC5mbG9vcihzbGlkZXNHcmlkW2kgKyAxXSAqIDEwMCk7XG5cbiAgICAgIGlmICh0eXBlb2Ygc2xpZGVzR3JpZFtpICsgMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChub3JtYWxpemVkVHJhbnNsYXRlID49IG5vcm1hbGl6ZWRHcmlkICYmIG5vcm1hbGl6ZWRUcmFuc2xhdGUgPCBub3JtYWxpemVkR3JpZE5leHQgLSAobm9ybWFsaXplZEdyaWROZXh0IC0gbm9ybWFsaXplZEdyaWQpIC8gMikge1xuICAgICAgICAgIHNsaWRlSW5kZXggPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRUcmFuc2xhdGUgPj0gbm9ybWFsaXplZEdyaWQgJiYgbm9ybWFsaXplZFRyYW5zbGF0ZSA8IG5vcm1hbGl6ZWRHcmlkTmV4dCkge1xuICAgICAgICAgIHNsaWRlSW5kZXggPSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub3JtYWxpemVkVHJhbnNsYXRlID49IG5vcm1hbGl6ZWRHcmlkKSB7XG4gICAgICAgIHNsaWRlSW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgfSAvLyBEaXJlY3Rpb25zIGxvY2tzXG5cblxuICBpZiAoc3dpcGVyLmluaXRpYWxpemVkICYmIHNsaWRlSW5kZXggIT09IGFjdGl2ZUluZGV4KSB7XG4gICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZU5leHQgJiYgdHJhbnNsYXRlIDwgc3dpcGVyLnRyYW5zbGF0ZSAmJiB0cmFuc2xhdGUgPCBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiB0cmFuc2xhdGUgPiBzd2lwZXIudHJhbnNsYXRlICYmIHRyYW5zbGF0ZSA+IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkge1xuICAgICAgaWYgKChhY3RpdmVJbmRleCB8fCAwKSAhPT0gc2xpZGVJbmRleCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGxldCBkaXJlY3Rpb247XG4gIGlmIChzbGlkZUluZGV4ID4gYWN0aXZlSW5kZXgpIGRpcmVjdGlvbiA9ICduZXh0JztlbHNlIGlmIChzbGlkZUluZGV4IDwgYWN0aXZlSW5kZXgpIGRpcmVjdGlvbiA9ICdwcmV2JztlbHNlIGRpcmVjdGlvbiA9ICdyZXNldCc7IC8vIFVwZGF0ZSBJbmRleFxuXG4gIGlmIChydGwgJiYgLXRyYW5zbGF0ZSA9PT0gc3dpcGVyLnRyYW5zbGF0ZSB8fCAhcnRsICYmIHRyYW5zbGF0ZSA9PT0gc3dpcGVyLnRyYW5zbGF0ZSkge1xuICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleChzbGlkZUluZGV4KTsgLy8gVXBkYXRlIEhlaWdodFxuXG4gICAgaWYgKHBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgICBzd2lwZXIudXBkYXRlQXV0b0hlaWdodCgpO1xuICAgIH1cblxuICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG5cbiAgICBpZiAocGFyYW1zLmVmZmVjdCAhPT0gJ3NsaWRlJykge1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZSh0cmFuc2xhdGUpO1xuICAgIH1cblxuICAgIGlmIChkaXJlY3Rpb24gIT09ICdyZXNldCcpIHtcbiAgICAgIHN3aXBlci50cmFuc2l0aW9uU3RhcnQocnVuQ2FsbGJhY2tzLCBkaXJlY3Rpb24pO1xuICAgICAgc3dpcGVyLnRyYW5zaXRpb25FbmQocnVuQ2FsbGJhY2tzLCBkaXJlY3Rpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgIGNvbnN0IGlzSCA9IHN3aXBlci5pc0hvcml6b250YWwoKTtcbiAgICBjb25zdCB0ID0gcnRsID8gdHJhbnNsYXRlIDogLXRyYW5zbGF0ZTtcblxuICAgIGlmIChzcGVlZCA9PT0gMCkge1xuICAgICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG5cbiAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5zY3JvbGxTbmFwVHlwZSA9ICdub25lJztcbiAgICAgICAgc3dpcGVyLl9pbW1lZGlhdGVWaXJ0dWFsID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgd3JhcHBlckVsW2lzSCA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnXSA9IHQ7XG5cbiAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gJyc7XG4gICAgICAgICAgc3dpcGVyLl9zd2lwZXJJbW1lZGlhdGVWaXJ0dWFsID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXN3aXBlci5zdXBwb3J0LnNtb290aFNjcm9sbCkge1xuICAgICAgICBhbmltYXRlQ1NTTW9kZVNjcm9sbCh7XG4gICAgICAgICAgc3dpcGVyLFxuICAgICAgICAgIHRhcmdldFBvc2l0aW9uOiB0LFxuICAgICAgICAgIHNpZGU6IGlzSCA/ICdsZWZ0JyA6ICd0b3AnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgd3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgICAgW2lzSCA/ICdsZWZ0JyA6ICd0b3AnXTogdCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHN3aXBlci5zZXRUcmFuc2l0aW9uKHNwZWVkKTtcbiAgc3dpcGVyLnNldFRyYW5zbGF0ZSh0cmFuc2xhdGUpO1xuICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoc2xpZGVJbmRleCk7XG4gIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gIHN3aXBlci5lbWl0KCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCBzcGVlZCwgaW50ZXJuYWwpO1xuICBzd2lwZXIudHJhbnNpdGlvblN0YXJ0KHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKTtcblxuICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICBzd2lwZXIudHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gIH0gZWxzZSBpZiAoIXN3aXBlci5hbmltYXRpbmcpIHtcbiAgICBzd2lwZXIuYW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgIGlmICghc3dpcGVyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKSB7XG4gICAgICBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKGUpIHtcbiAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMpIHJldHVybjtcbiAgICAgICAgc3dpcGVyLiR3cmFwcGVyRWxbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHN3aXBlci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgICAgICBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBudWxsO1xuICAgICAgICBkZWxldGUgc3dpcGVyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kO1xuICAgICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNsaWRlVG9Mb29wKGluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCkge1xuICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgIGluZGV4ID0gMDtcbiAgfVxuXG4gIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgfVxuXG4gIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gIH1cblxuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBsZXQgbmV3SW5kZXggPSBpbmRleDtcblxuICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgbmV3SW5kZXggKz0gc3dpcGVyLmxvb3BlZFNsaWRlcztcbiAgfVxuXG4gIHJldHVybiBzd2lwZXIuc2xpZGVUbyhuZXdJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xufSIsICIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNsaWRlTmV4dChzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCkge1xuICBpZiAoc3BlZWQgPT09IHZvaWQgMCkge1xuICAgIHNwZWVkID0gdGhpcy5wYXJhbXMuc3BlZWQ7XG4gIH1cblxuICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICB9XG5cbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIGFuaW1hdGluZyxcbiAgICBlbmFibGVkLFxuICAgIHBhcmFtc1xuICB9ID0gc3dpcGVyO1xuICBpZiAoIWVuYWJsZWQpIHJldHVybiBzd2lwZXI7XG4gIGxldCBwZXJHcm91cCA9IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcblxuICBpZiAocGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyAmJiBwYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDEgJiYgcGFyYW1zLnNsaWRlc1Blckdyb3VwQXV0bykge1xuICAgIHBlckdyb3VwID0gTWF0aC5tYXgoc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCdjdXJyZW50JywgdHJ1ZSksIDEpO1xuICB9XG5cbiAgY29uc3QgaW5jcmVtZW50ID0gc3dpcGVyLmFjdGl2ZUluZGV4IDwgcGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCA/IDEgOiBwZXJHcm91cDtcblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBpZiAoYW5pbWF0aW5nICYmIHBhcmFtcy5sb29wUHJldmVudHNTbGlkZSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXBlci5sb29wRml4KCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG4gICAgc3dpcGVyLl9jbGllbnRMZWZ0ID0gc3dpcGVyLiR3cmFwcGVyRWxbMF0uY2xpZW50TGVmdDtcbiAgfVxuXG4gIGlmIChwYXJhbXMucmV3aW5kICYmIHN3aXBlci5pc0VuZCkge1xuICAgIHJldHVybiBzd2lwZXIuc2xpZGVUbygwLCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gIH1cblxuICByZXR1cm4gc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4ICsgaW5jcmVtZW50LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG59IiwgIi8qIGVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2xpZGVQcmV2KHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKSB7XG4gIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgfVxuXG4gIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gIH1cblxuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgcGFyYW1zLFxuICAgIGFuaW1hdGluZyxcbiAgICBzbmFwR3JpZCxcbiAgICBzbGlkZXNHcmlkLFxuICAgIHJ0bFRyYW5zbGF0ZSxcbiAgICBlbmFibGVkXG4gIH0gPSBzd2lwZXI7XG4gIGlmICghZW5hYmxlZCkgcmV0dXJuIHN3aXBlcjtcblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBpZiAoYW5pbWF0aW5nICYmIHBhcmFtcy5sb29wUHJldmVudHNTbGlkZSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXBlci5sb29wRml4KCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG4gICAgc3dpcGVyLl9jbGllbnRMZWZ0ID0gc3dpcGVyLiR3cmFwcGVyRWxbMF0uY2xpZW50TGVmdDtcbiAgfVxuXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IHJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZTtcblxuICBmdW5jdGlvbiBub3JtYWxpemUodmFsKSB7XG4gICAgaWYgKHZhbCA8IDApIHJldHVybiAtTWF0aC5mbG9vcihNYXRoLmFicyh2YWwpKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih2YWwpO1xuICB9XG5cbiAgY29uc3Qgbm9ybWFsaXplZFRyYW5zbGF0ZSA9IG5vcm1hbGl6ZSh0cmFuc2xhdGUpO1xuICBjb25zdCBub3JtYWxpemVkU25hcEdyaWQgPSBzbmFwR3JpZC5tYXAodmFsID0+IG5vcm1hbGl6ZSh2YWwpKTtcbiAgbGV0IHByZXZTbmFwID0gc25hcEdyaWRbbm9ybWFsaXplZFNuYXBHcmlkLmluZGV4T2Yobm9ybWFsaXplZFRyYW5zbGF0ZSkgLSAxXTtcblxuICBpZiAodHlwZW9mIHByZXZTbmFwID09PSAndW5kZWZpbmVkJyAmJiBwYXJhbXMuY3NzTW9kZSkge1xuICAgIGxldCBwcmV2U25hcEluZGV4O1xuICAgIHNuYXBHcmlkLmZvckVhY2goKHNuYXAsIHNuYXBJbmRleCkgPT4ge1xuICAgICAgaWYgKG5vcm1hbGl6ZWRUcmFuc2xhdGUgPj0gc25hcCkge1xuICAgICAgICAvLyBwcmV2U25hcCA9IHNuYXA7XG4gICAgICAgIHByZXZTbmFwSW5kZXggPSBzbmFwSW5kZXg7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodHlwZW9mIHByZXZTbmFwSW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBwcmV2U25hcCA9IHNuYXBHcmlkW3ByZXZTbmFwSW5kZXggPiAwID8gcHJldlNuYXBJbmRleCAtIDEgOiBwcmV2U25hcEluZGV4XTtcbiAgICB9XG4gIH1cblxuICBsZXQgcHJldkluZGV4ID0gMDtcblxuICBpZiAodHlwZW9mIHByZXZTbmFwICE9PSAndW5kZWZpbmVkJykge1xuICAgIHByZXZJbmRleCA9IHNsaWRlc0dyaWQuaW5kZXhPZihwcmV2U25hcCk7XG4gICAgaWYgKHByZXZJbmRleCA8IDApIHByZXZJbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleCAtIDE7XG5cbiAgICBpZiAocGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyAmJiBwYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDEgJiYgcGFyYW1zLnNsaWRlc1Blckdyb3VwQXV0bykge1xuICAgICAgcHJldkluZGV4ID0gcHJldkluZGV4IC0gc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCdwcmV2aW91cycsIHRydWUpICsgMTtcbiAgICAgIHByZXZJbmRleCA9IE1hdGgubWF4KHByZXZJbmRleCwgMCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhcmFtcy5yZXdpbmQgJiYgc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHN3aXBlci52aXJ0dWFsID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAtIDEgOiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKGxhc3RJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICB9XG5cbiAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKHByZXZJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xufSIsICIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNsaWRlUmVzZXQoc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpIHtcbiAgaWYgKHNwZWVkID09PSB2b2lkIDApIHtcbiAgICBzcGVlZCA9IHRoaXMucGFyYW1zLnNwZWVkO1xuICB9XG5cbiAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIHJldHVybiBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKTtcbn0iLCAiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBcIm9mZlwiICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzbGlkZVRvQ2xvc2VzdChzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCwgdGhyZXNob2xkKSB7XG4gIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgfVxuXG4gIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gIH1cblxuICBpZiAodGhyZXNob2xkID09PSB2b2lkIDApIHtcbiAgICB0aHJlc2hvbGQgPSAwLjU7XG4gIH1cblxuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBsZXQgaW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gIGNvbnN0IHNraXAgPSBNYXRoLm1pbihzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCwgaW5kZXgpO1xuICBjb25zdCBzbmFwSW5kZXggPSBza2lwICsgTWF0aC5mbG9vcigoaW5kZXggLSBza2lwKSAvIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICBjb25zdCB0cmFuc2xhdGUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuXG4gIGlmICh0cmFuc2xhdGUgPj0gc3dpcGVyLnNuYXBHcmlkW3NuYXBJbmRleF0pIHtcbiAgICAvLyBUaGUgY3VycmVudCB0cmFuc2xhdGUgaXMgb24gb3IgYWZ0ZXIgdGhlIGN1cnJlbnQgc25hcCBpbmRleCwgc28gdGhlIGNob2ljZVxuICAgIC8vIGlzIGJldHdlZW4gdGhlIGN1cnJlbnQgaW5kZXggYW5kIHRoZSBvbmUgYWZ0ZXIgaXQuXG4gICAgY29uc3QgY3VycmVudFNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4XTtcbiAgICBjb25zdCBuZXh0U25hcCA9IHN3aXBlci5zbmFwR3JpZFtzbmFwSW5kZXggKyAxXTtcblxuICAgIGlmICh0cmFuc2xhdGUgLSBjdXJyZW50U25hcCA+IChuZXh0U25hcCAtIGN1cnJlbnRTbmFwKSAqIHRocmVzaG9sZCkge1xuICAgICAgaW5kZXggKz0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgdHJhbnNsYXRlIGlzIGJlZm9yZSB0aGUgY3VycmVudCBzbmFwIGluZGV4LCBzbyB0aGUgY2hvaWNlXG4gICAgLy8gaXMgYmV0d2VlbiB0aGUgY3VycmVudCBpbmRleCBhbmQgdGhlIG9uZSBiZWZvcmUgaXQuXG4gICAgY29uc3QgcHJldlNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4IC0gMV07XG4gICAgY29uc3QgY3VycmVudFNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4XTtcblxuICAgIGlmICh0cmFuc2xhdGUgLSBwcmV2U25hcCA8PSAoY3VycmVudFNuYXAgLSBwcmV2U25hcCkgKiB0aHJlc2hvbGQpIHtcbiAgICAgIGluZGV4IC09IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgfVxuICB9XG5cbiAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgMCk7XG4gIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHN3aXBlci5zbGlkZXNHcmlkLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gc3dpcGVyLnNsaWRlVG8oaW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKTtcbn0iLCAiaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5pbXBvcnQgeyBuZXh0VGljayB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzbGlkZVRvQ2xpY2tlZFNsaWRlKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgcGFyYW1zLFxuICAgICR3cmFwcGVyRWxcbiAgfSA9IHN3aXBlcjtcbiAgY29uc3Qgc2xpZGVzUGVyVmlldyA9IHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IHBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICBsZXQgc2xpZGVUb0luZGV4ID0gc3dpcGVyLmNsaWNrZWRJbmRleDtcbiAgbGV0IHJlYWxJbmRleDtcblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBpZiAoc3dpcGVyLmFuaW1hdGluZykgcmV0dXJuO1xuICAgIHJlYWxJbmRleCA9IHBhcnNlSW50KCQoc3dpcGVyLmNsaWNrZWRTbGlkZSkuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApO1xuXG4gICAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgaWYgKHNsaWRlVG9JbmRleCA8IHN3aXBlci5sb29wZWRTbGlkZXMgLSBzbGlkZXNQZXJWaWV3IC8gMiB8fCBzbGlkZVRvSW5kZXggPiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIHN3aXBlci5sb29wZWRTbGlkZXMgKyBzbGlkZXNQZXJWaWV3IC8gMikge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICBzbGlkZVRvSW5kZXggPSAkd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtwYXJhbXMuc2xpZGVDbGFzc31bZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3JlYWxJbmRleH1cIl06bm90KC4ke3BhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzfSlgKS5lcSgwKS5pbmRleCgpO1xuICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2xpZGVUb0luZGV4ID4gc3dpcGVyLnNsaWRlcy5sZW5ndGggLSBzbGlkZXNQZXJWaWV3KSB7XG4gICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgc2xpZGVUb0luZGV4ID0gJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtyZWFsSW5kZXh9XCJdOm5vdCguJHtwYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzc30pYCkuZXEoMCkuaW5kZXgoKTtcbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICB9XG59IiwgImltcG9ydCBsb29wQ3JlYXRlIGZyb20gJy4vbG9vcENyZWF0ZS5qcyc7XG5pbXBvcnQgbG9vcEZpeCBmcm9tICcuL2xvb3BGaXguanMnO1xuaW1wb3J0IGxvb3BEZXN0cm95IGZyb20gJy4vbG9vcERlc3Ryb3kuanMnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBsb29wQ3JlYXRlLFxuICBsb29wRml4LFxuICBsb29wRGVzdHJveVxufTsiLCAiaW1wb3J0IHsgZ2V0RG9jdW1lbnQgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbG9vcENyZWF0ZSgpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICBjb25zdCB7XG4gICAgcGFyYW1zLFxuICAgICR3cmFwcGVyRWxcbiAgfSA9IHN3aXBlcjsgLy8gUmVtb3ZlIGR1cGxpY2F0ZWQgc2xpZGVzXG5cbiAgY29uc3QgJHNlbGVjdG9yID0gJHdyYXBwZXJFbC5jaGlsZHJlbigpLmxlbmd0aCA+IDAgPyAkKCR3cmFwcGVyRWwuY2hpbGRyZW4oKVswXS5wYXJlbnROb2RlKSA6ICR3cmFwcGVyRWw7XG4gICRzZWxlY3Rvci5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9YCkucmVtb3ZlKCk7XG4gIGxldCBzbGlkZXMgPSAkc2VsZWN0b3IuY2hpbGRyZW4oYC4ke3BhcmFtcy5zbGlkZUNsYXNzfWApO1xuXG4gIGlmIChwYXJhbXMubG9vcEZpbGxHcm91cFdpdGhCbGFuaykge1xuICAgIGNvbnN0IGJsYW5rU2xpZGVzTnVtID0gcGFyYW1zLnNsaWRlc1Blckdyb3VwIC0gc2xpZGVzLmxlbmd0aCAlIHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcblxuICAgIGlmIChibGFua1NsaWRlc051bSAhPT0gcGFyYW1zLnNsaWRlc1Blckdyb3VwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsYW5rU2xpZGVzTnVtOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgYmxhbmtOb2RlID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSkuYWRkQ2xhc3MoYCR7cGFyYW1zLnNsaWRlQ2xhc3N9ICR7cGFyYW1zLnNsaWRlQmxhbmtDbGFzc31gKTtcbiAgICAgICAgJHNlbGVjdG9yLmFwcGVuZChibGFua05vZGUpO1xuICAgICAgfVxuXG4gICAgICBzbGlkZXMgPSAkc2VsZWN0b3IuY2hpbGRyZW4oYC4ke3BhcmFtcy5zbGlkZUNsYXNzfWApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nICYmICFwYXJhbXMubG9vcGVkU2xpZGVzKSBwYXJhbXMubG9vcGVkU2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcbiAgc3dpcGVyLmxvb3BlZFNsaWRlcyA9IE1hdGguY2VpbChwYXJzZUZsb2F0KHBhcmFtcy5sb29wZWRTbGlkZXMgfHwgcGFyYW1zLnNsaWRlc1BlclZpZXcsIDEwKSk7XG4gIHN3aXBlci5sb29wZWRTbGlkZXMgKz0gcGFyYW1zLmxvb3BBZGRpdGlvbmFsU2xpZGVzO1xuXG4gIGlmIChzd2lwZXIubG9vcGVkU2xpZGVzID4gc2xpZGVzLmxlbmd0aCkge1xuICAgIHN3aXBlci5sb29wZWRTbGlkZXMgPSBzbGlkZXMubGVuZ3RoO1xuICB9XG5cbiAgY29uc3QgcHJlcGVuZFNsaWRlcyA9IFtdO1xuICBjb25zdCBhcHBlbmRTbGlkZXMgPSBbXTtcbiAgc2xpZGVzLmVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHNsaWRlID0gJChlbCk7XG5cbiAgICBpZiAoaW5kZXggPCBzd2lwZXIubG9vcGVkU2xpZGVzKSB7XG4gICAgICBhcHBlbmRTbGlkZXMucHVzaChlbCk7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4IDwgc2xpZGVzLmxlbmd0aCAmJiBpbmRleCA+PSBzbGlkZXMubGVuZ3RoIC0gc3dpcGVyLmxvb3BlZFNsaWRlcykge1xuICAgICAgcHJlcGVuZFNsaWRlcy5wdXNoKGVsKTtcbiAgICB9XG5cbiAgICBzbGlkZS5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGluZGV4KTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBlbmRTbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAkc2VsZWN0b3IuYXBwZW5kKCQoYXBwZW5kU2xpZGVzW2ldLmNsb25lTm9kZSh0cnVlKSkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSBwcmVwZW5kU2xpZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgJHNlbGVjdG9yLnByZXBlbmQoJChwcmVwZW5kU2xpZGVzW2ldLmNsb25lTm9kZSh0cnVlKSkuYWRkQ2xhc3MocGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKTtcbiAgfVxufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb29wRml4KCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBzd2lwZXIuZW1pdCgnYmVmb3JlTG9vcEZpeCcpO1xuICBjb25zdCB7XG4gICAgYWN0aXZlSW5kZXgsXG4gICAgc2xpZGVzLFxuICAgIGxvb3BlZFNsaWRlcyxcbiAgICBhbGxvd1NsaWRlUHJldixcbiAgICBhbGxvd1NsaWRlTmV4dCxcbiAgICBzbmFwR3JpZCxcbiAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICB9ID0gc3dpcGVyO1xuICBsZXQgbmV3SW5kZXg7XG4gIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IHRydWU7XG4gIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IHRydWU7XG4gIGNvbnN0IHNuYXBUcmFuc2xhdGUgPSAtc25hcEdyaWRbYWN0aXZlSW5kZXhdO1xuICBjb25zdCBkaWZmID0gc25hcFRyYW5zbGF0ZSAtIHN3aXBlci5nZXRUcmFuc2xhdGUoKTsgLy8gRml4IEZvciBOZWdhdGl2ZSBPdmVyc2xpZGluZ1xuXG4gIGlmIChhY3RpdmVJbmRleCA8IGxvb3BlZFNsaWRlcykge1xuICAgIG5ld0luZGV4ID0gc2xpZGVzLmxlbmd0aCAtIGxvb3BlZFNsaWRlcyAqIDMgKyBhY3RpdmVJbmRleDtcbiAgICBuZXdJbmRleCArPSBsb29wZWRTbGlkZXM7XG4gICAgY29uc3Qgc2xpZGVDaGFuZ2VkID0gc3dpcGVyLnNsaWRlVG8obmV3SW5kZXgsIDAsIGZhbHNlLCB0cnVlKTtcblxuICAgIGlmIChzbGlkZUNoYW5nZWQgJiYgZGlmZiAhPT0gMCkge1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZSgocnRsID8gLXN3aXBlci50cmFuc2xhdGUgOiBzd2lwZXIudHJhbnNsYXRlKSAtIGRpZmYpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChhY3RpdmVJbmRleCA+PSBzbGlkZXMubGVuZ3RoIC0gbG9vcGVkU2xpZGVzKSB7XG4gICAgLy8gRml4IEZvciBQb3NpdGl2ZSBPdmVyc2xpZGluZ1xuICAgIG5ld0luZGV4ID0gLXNsaWRlcy5sZW5ndGggKyBhY3RpdmVJbmRleCArIGxvb3BlZFNsaWRlcztcbiAgICBuZXdJbmRleCArPSBsb29wZWRTbGlkZXM7XG4gICAgY29uc3Qgc2xpZGVDaGFuZ2VkID0gc3dpcGVyLnNsaWRlVG8obmV3SW5kZXgsIDAsIGZhbHNlLCB0cnVlKTtcblxuICAgIGlmIChzbGlkZUNoYW5nZWQgJiYgZGlmZiAhPT0gMCkge1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZSgocnRsID8gLXN3aXBlci50cmFuc2xhdGUgOiBzd2lwZXIudHJhbnNsYXRlKSAtIGRpZmYpO1xuICAgIH1cbiAgfVxuXG4gIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IGFsbG93U2xpZGVQcmV2O1xuICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSBhbGxvd1NsaWRlTmV4dDtcbiAgc3dpcGVyLmVtaXQoJ2xvb3BGaXgnKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbG9vcERlc3Ryb3koKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICAkd3JhcHBlckVsLFxuICAgIHBhcmFtcyxcbiAgICBzbGlkZXNcbiAgfSA9IHN3aXBlcjtcbiAgJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LiR7cGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9LC4ke3BhcmFtcy5zbGlkZUNsYXNzfS4ke3BhcmFtcy5zbGlkZUJsYW5rQ2xhc3N9YCkucmVtb3ZlKCk7XG4gIHNsaWRlcy5yZW1vdmVBdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpO1xufSIsICJpbXBvcnQgc2V0R3JhYkN1cnNvciBmcm9tICcuL3NldEdyYWJDdXJzb3IuanMnO1xuaW1wb3J0IHVuc2V0R3JhYkN1cnNvciBmcm9tICcuL3Vuc2V0R3JhYkN1cnNvci5qcyc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHNldEdyYWJDdXJzb3IsXG4gIHVuc2V0R3JhYkN1cnNvclxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0R3JhYkN1cnNvcihtb3ZpbmcpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgaWYgKHN3aXBlci5zdXBwb3J0LnRvdWNoIHx8ICFzd2lwZXIucGFyYW1zLnNpbXVsYXRlVG91Y2ggfHwgc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5pc0xvY2tlZCB8fCBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgY29uc3QgZWwgPSBzd2lwZXIucGFyYW1zLnRvdWNoRXZlbnRzVGFyZ2V0ID09PSAnY29udGFpbmVyJyA/IHN3aXBlci5lbCA6IHN3aXBlci53cmFwcGVyRWw7XG4gIGVsLnN0eWxlLmN1cnNvciA9ICdtb3ZlJztcbiAgZWwuc3R5bGUuY3Vyc29yID0gbW92aW5nID8gJy13ZWJraXQtZ3JhYmJpbmcnIDogJy13ZWJraXQtZ3JhYic7XG4gIGVsLnN0eWxlLmN1cnNvciA9IG1vdmluZyA/ICctbW96LWdyYWJiaW4nIDogJy1tb3otZ3JhYic7XG4gIGVsLnN0eWxlLmN1cnNvciA9IG1vdmluZyA/ICdncmFiYmluZycgOiAnZ3JhYic7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVuc2V0R3JhYkN1cnNvcigpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcblxuICBpZiAoc3dpcGVyLnN1cHBvcnQudG91Y2ggfHwgc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5pc0xvY2tlZCB8fCBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2lwZXJbc3dpcGVyLnBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA9PT0gJ2NvbnRhaW5lcicgPyAnZWwnIDogJ3dyYXBwZXJFbCddLnN0eWxlLmN1cnNvciA9ICcnO1xufSIsICJpbXBvcnQgeyBnZXREb2N1bWVudCB9IGZyb20gJ3Nzci13aW5kb3cnO1xuaW1wb3J0IG9uVG91Y2hTdGFydCBmcm9tICcuL29uVG91Y2hTdGFydC5qcyc7XG5pbXBvcnQgb25Ub3VjaE1vdmUgZnJvbSAnLi9vblRvdWNoTW92ZS5qcyc7XG5pbXBvcnQgb25Ub3VjaEVuZCBmcm9tICcuL29uVG91Y2hFbmQuanMnO1xuaW1wb3J0IG9uUmVzaXplIGZyb20gJy4vb25SZXNpemUuanMnO1xuaW1wb3J0IG9uQ2xpY2sgZnJvbSAnLi9vbkNsaWNrLmpzJztcbmltcG9ydCBvblNjcm9sbCBmcm9tICcuL29uU2Nyb2xsLmpzJztcbmxldCBkdW1teUV2ZW50QXR0YWNoZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gZHVtbXlFdmVudExpc3RlbmVyKCkge31cblxuY29uc3QgZXZlbnRzID0gKHN3aXBlciwgbWV0aG9kKSA9PiB7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICB0b3VjaEV2ZW50cyxcbiAgICBlbCxcbiAgICB3cmFwcGVyRWwsXG4gICAgZGV2aWNlLFxuICAgIHN1cHBvcnRcbiAgfSA9IHN3aXBlcjtcbiAgY29uc3QgY2FwdHVyZSA9ICEhcGFyYW1zLm5lc3RlZDtcbiAgY29uc3QgZG9tTWV0aG9kID0gbWV0aG9kID09PSAnb24nID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuICBjb25zdCBzd2lwZXJNZXRob2QgPSBtZXRob2Q7IC8vIFRvdWNoIEV2ZW50c1xuXG4gIGlmICghc3VwcG9ydC50b3VjaCkge1xuICAgIGVsW2RvbU1ldGhvZF0odG91Y2hFdmVudHMuc3RhcnQsIHN3aXBlci5vblRvdWNoU3RhcnQsIGZhbHNlKTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKHRvdWNoRXZlbnRzLm1vdmUsIHN3aXBlci5vblRvdWNoTW92ZSwgY2FwdHVyZSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSh0b3VjaEV2ZW50cy5lbmQsIHN3aXBlci5vblRvdWNoRW5kLCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcGFzc2l2ZUxpc3RlbmVyID0gdG91Y2hFdmVudHMuc3RhcnQgPT09ICd0b3VjaHN0YXJ0JyAmJiBzdXBwb3J0LnBhc3NpdmVMaXN0ZW5lciAmJiBwYXJhbXMucGFzc2l2ZUxpc3RlbmVycyA/IHtcbiAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICBjYXB0dXJlOiBmYWxzZVxuICAgIH0gOiBmYWxzZTtcbiAgICBlbFtkb21NZXRob2RdKHRvdWNoRXZlbnRzLnN0YXJ0LCBzd2lwZXIub25Ub3VjaFN0YXJ0LCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgIGVsW2RvbU1ldGhvZF0odG91Y2hFdmVudHMubW92ZSwgc3dpcGVyLm9uVG91Y2hNb3ZlLCBzdXBwb3J0LnBhc3NpdmVMaXN0ZW5lciA/IHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgY2FwdHVyZVxuICAgIH0gOiBjYXB0dXJlKTtcbiAgICBlbFtkb21NZXRob2RdKHRvdWNoRXZlbnRzLmVuZCwgc3dpcGVyLm9uVG91Y2hFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG5cbiAgICBpZiAodG91Y2hFdmVudHMuY2FuY2VsKSB7XG4gICAgICBlbFtkb21NZXRob2RdKHRvdWNoRXZlbnRzLmNhbmNlbCwgc3dpcGVyLm9uVG91Y2hFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgfVxuICB9IC8vIFByZXZlbnQgTGlua3MgQ2xpY2tzXG5cblxuICBpZiAocGFyYW1zLnByZXZlbnRDbGlja3MgfHwgcGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbikge1xuICAgIGVsW2RvbU1ldGhvZF0oJ2NsaWNrJywgc3dpcGVyLm9uQ2xpY2ssIHRydWUpO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgd3JhcHBlckVsW2RvbU1ldGhvZF0oJ3Njcm9sbCcsIHN3aXBlci5vblNjcm9sbCk7XG4gIH0gLy8gUmVzaXplIGhhbmRsZXJcblxuXG4gIGlmIChwYXJhbXMudXBkYXRlT25XaW5kb3dSZXNpemUpIHtcbiAgICBzd2lwZXJbc3dpcGVyTWV0aG9kXShkZXZpY2UuaW9zIHx8IGRldmljZS5hbmRyb2lkID8gJ3Jlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZSBvYnNlcnZlclVwZGF0ZScgOiAncmVzaXplIG9ic2VydmVyVXBkYXRlJywgb25SZXNpemUsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN3aXBlcltzd2lwZXJNZXRob2RdKCdvYnNlcnZlclVwZGF0ZScsIG9uUmVzaXplLCB0cnVlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gYXR0YWNoRXZlbnRzKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXMsXG4gICAgc3VwcG9ydFxuICB9ID0gc3dpcGVyO1xuICBzd2lwZXIub25Ub3VjaFN0YXJ0ID0gb25Ub3VjaFN0YXJ0LmJpbmQoc3dpcGVyKTtcbiAgc3dpcGVyLm9uVG91Y2hNb3ZlID0gb25Ub3VjaE1vdmUuYmluZChzd2lwZXIpO1xuICBzd2lwZXIub25Ub3VjaEVuZCA9IG9uVG91Y2hFbmQuYmluZChzd2lwZXIpO1xuXG4gIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgIHN3aXBlci5vblNjcm9sbCA9IG9uU2Nyb2xsLmJpbmQoc3dpcGVyKTtcbiAgfVxuXG4gIHN3aXBlci5vbkNsaWNrID0gb25DbGljay5iaW5kKHN3aXBlcik7XG5cbiAgaWYgKHN1cHBvcnQudG91Y2ggJiYgIWR1bW15RXZlbnRBdHRhY2hlZCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkdW1teUV2ZW50TGlzdGVuZXIpO1xuICAgIGR1bW15RXZlbnRBdHRhY2hlZCA9IHRydWU7XG4gIH1cblxuICBldmVudHMoc3dpcGVyLCAnb24nKTtcbn1cblxuZnVuY3Rpb24gZGV0YWNoRXZlbnRzKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBldmVudHMoc3dpcGVyLCAnb2ZmJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYXR0YWNoRXZlbnRzLFxuICBkZXRhY2hFdmVudHNcbn07IiwgImltcG9ydCB7IGdldFdpbmRvdywgZ2V0RG9jdW1lbnQgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuaW1wb3J0IHsgbm93IH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJzsgLy8gTW9kaWZpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NDUyMDU1NC9jdXN0b20tZWxlbWVudC1nZXRyb290bm9kZS1jbG9zZXN0LWZ1bmN0aW9uLWNyb3NzaW5nLW11bHRpcGxlLXBhcmVudC1zaGFkb3dkXG5cbmZ1bmN0aW9uIGNsb3Nlc3RFbGVtZW50KHNlbGVjdG9yLCBiYXNlKSB7XG4gIGlmIChiYXNlID09PSB2b2lkIDApIHtcbiAgICBiYXNlID0gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9fY2xvc2VzdEZyb20oZWwpIHtcbiAgICBpZiAoIWVsIHx8IGVsID09PSBnZXREb2N1bWVudCgpIHx8IGVsID09PSBnZXRXaW5kb3coKSkgcmV0dXJuIG51bGw7XG4gICAgaWYgKGVsLmFzc2lnbmVkU2xvdCkgZWwgPSBlbC5hc3NpZ25lZFNsb3Q7XG4gICAgY29uc3QgZm91bmQgPSBlbC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICByZXR1cm4gZm91bmQgfHwgX19jbG9zZXN0RnJvbShlbC5nZXRSb290Tm9kZSgpLmhvc3QpO1xuICB9XG5cbiAgcmV0dXJuIF9fY2xvc2VzdEZyb20oYmFzZSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBjb25zdCBkYXRhID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YTtcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICB0b3VjaGVzLFxuICAgIGVuYWJsZWRcbiAgfSA9IHN3aXBlcjtcbiAgaWYgKCFlbmFibGVkKSByZXR1cm47XG5cbiAgaWYgKHN3aXBlci5hbmltYXRpbmcgJiYgcGFyYW1zLnByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMuY3NzTW9kZSAmJiBwYXJhbXMubG9vcCkge1xuICAgIHN3aXBlci5sb29wRml4KCk7XG4gIH1cblxuICBsZXQgZSA9IGV2ZW50O1xuICBpZiAoZS5vcmlnaW5hbEV2ZW50KSBlID0gZS5vcmlnaW5hbEV2ZW50O1xuICBsZXQgJHRhcmdldEVsID0gJChlLnRhcmdldCk7XG5cbiAgaWYgKHBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA9PT0gJ3dyYXBwZXInKSB7XG4gICAgaWYgKCEkdGFyZ2V0RWwuY2xvc2VzdChzd2lwZXIud3JhcHBlckVsKS5sZW5ndGgpIHJldHVybjtcbiAgfVxuXG4gIGRhdGEuaXNUb3VjaEV2ZW50ID0gZS50eXBlID09PSAndG91Y2hzdGFydCc7XG4gIGlmICghZGF0YS5pc1RvdWNoRXZlbnQgJiYgJ3doaWNoJyBpbiBlICYmIGUud2hpY2ggPT09IDMpIHJldHVybjtcbiAgaWYgKCFkYXRhLmlzVG91Y2hFdmVudCAmJiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uID4gMCkgcmV0dXJuO1xuICBpZiAoZGF0YS5pc1RvdWNoZWQgJiYgZGF0YS5pc01vdmVkKSByZXR1cm47IC8vIGNoYW5nZSB0YXJnZXQgZWwgZm9yIHNoYWRvdyByb290IGNvbXBvbmVudFxuXG4gIGNvbnN0IHN3aXBpbmdDbGFzc0hhc1ZhbHVlID0gISFwYXJhbXMubm9Td2lwaW5nQ2xhc3MgJiYgcGFyYW1zLm5vU3dpcGluZ0NsYXNzICE9PSAnJztcblxuICBpZiAoc3dpcGluZ0NsYXNzSGFzVmFsdWUgJiYgZS50YXJnZXQgJiYgZS50YXJnZXQuc2hhZG93Um9vdCAmJiBldmVudC5wYXRoICYmIGV2ZW50LnBhdGhbMF0pIHtcbiAgICAkdGFyZ2V0RWwgPSAkKGV2ZW50LnBhdGhbMF0pO1xuICB9XG5cbiAgY29uc3Qgbm9Td2lwaW5nU2VsZWN0b3IgPSBwYXJhbXMubm9Td2lwaW5nU2VsZWN0b3IgPyBwYXJhbXMubm9Td2lwaW5nU2VsZWN0b3IgOiBgLiR7cGFyYW1zLm5vU3dpcGluZ0NsYXNzfWA7XG4gIGNvbnN0IGlzVGFyZ2V0U2hhZG93ID0gISEoZS50YXJnZXQgJiYgZS50YXJnZXQuc2hhZG93Um9vdCk7IC8vIHVzZSBjbG9zZXN0RWxlbWVudCBmb3Igc2hhZG93IHJvb3QgZWxlbWVudCB0byBnZXQgdGhlIGFjdHVhbCBjbG9zZXN0IGZvciBuZXN0ZWQgc2hhZG93IHJvb3QgZWxlbWVudFxuXG4gIGlmIChwYXJhbXMubm9Td2lwaW5nICYmIChpc1RhcmdldFNoYWRvdyA/IGNsb3Nlc3RFbGVtZW50KG5vU3dpcGluZ1NlbGVjdG9yLCBlLnRhcmdldCkgOiAkdGFyZ2V0RWwuY2xvc2VzdChub1N3aXBpbmdTZWxlY3RvcilbMF0pKSB7XG4gICAgc3dpcGVyLmFsbG93Q2xpY2sgPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwYXJhbXMuc3dpcGVIYW5kbGVyKSB7XG4gICAgaWYgKCEkdGFyZ2V0RWwuY2xvc2VzdChwYXJhbXMuc3dpcGVIYW5kbGVyKVswXSkgcmV0dXJuO1xuICB9XG5cbiAgdG91Y2hlcy5jdXJyZW50WCA9IGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnID8gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWDtcbiAgdG91Y2hlcy5jdXJyZW50WSA9IGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnID8gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIDogZS5wYWdlWTtcbiAgY29uc3Qgc3RhcnRYID0gdG91Y2hlcy5jdXJyZW50WDtcbiAgY29uc3Qgc3RhcnRZID0gdG91Y2hlcy5jdXJyZW50WTsgLy8gRG8gTk9UIHN0YXJ0IGlmIGlPUyBlZGdlIHN3aXBlIGlzIGRldGVjdGVkLiBPdGhlcndpc2UgaU9TIGFwcCBjYW5ub3Qgc3dpcGUtdG8tZ28tYmFjayBhbnltb3JlXG5cbiAgY29uc3QgZWRnZVN3aXBlRGV0ZWN0aW9uID0gcGFyYW1zLmVkZ2VTd2lwZURldGVjdGlvbiB8fCBwYXJhbXMuaU9TRWRnZVN3aXBlRGV0ZWN0aW9uO1xuICBjb25zdCBlZGdlU3dpcGVUaHJlc2hvbGQgPSBwYXJhbXMuZWRnZVN3aXBlVGhyZXNob2xkIHx8IHBhcmFtcy5pT1NFZGdlU3dpcGVUaHJlc2hvbGQ7XG5cbiAgaWYgKGVkZ2VTd2lwZURldGVjdGlvbiAmJiAoc3RhcnRYIDw9IGVkZ2VTd2lwZVRocmVzaG9sZCB8fCBzdGFydFggPj0gd2luZG93LmlubmVyV2lkdGggLSBlZGdlU3dpcGVUaHJlc2hvbGQpKSB7XG4gICAgaWYgKGVkZ2VTd2lwZURldGVjdGlvbiA9PT0gJ3ByZXZlbnQnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgaXNUb3VjaGVkOiB0cnVlLFxuICAgIGlzTW92ZWQ6IGZhbHNlLFxuICAgIGFsbG93VG91Y2hDYWxsYmFja3M6IHRydWUsXG4gICAgaXNTY3JvbGxpbmc6IHVuZGVmaW5lZCxcbiAgICBzdGFydE1vdmluZzogdW5kZWZpbmVkXG4gIH0pO1xuICB0b3VjaGVzLnN0YXJ0WCA9IHN0YXJ0WDtcbiAgdG91Y2hlcy5zdGFydFkgPSBzdGFydFk7XG4gIGRhdGEudG91Y2hTdGFydFRpbWUgPSBub3coKTtcbiAgc3dpcGVyLmFsbG93Q2xpY2sgPSB0cnVlO1xuICBzd2lwZXIudXBkYXRlU2l6ZSgpO1xuICBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPSB1bmRlZmluZWQ7XG4gIGlmIChwYXJhbXMudGhyZXNob2xkID4gMCkgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUgPSBmYWxzZTtcblxuICBpZiAoZS50eXBlICE9PSAndG91Y2hzdGFydCcpIHtcbiAgICBsZXQgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuXG4gICAgaWYgKCR0YXJnZXRFbC5pcyhkYXRhLmZvY3VzYWJsZUVsZW1lbnRzKSkge1xuICAgICAgcHJldmVudERlZmF1bHQgPSBmYWxzZTtcblxuICAgICAgaWYgKCR0YXJnZXRFbFswXS5ub2RlTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmlzKGRhdGEuZm9jdXNhYmxlRWxlbWVudHMpICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09ICR0YXJnZXRFbFswXSkge1xuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkUHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdCAmJiBzd2lwZXIuYWxsb3dUb3VjaE1vdmUgJiYgcGFyYW1zLnRvdWNoU3RhcnRQcmV2ZW50RGVmYXVsdDtcblxuICAgIGlmICgocGFyYW1zLnRvdWNoU3RhcnRGb3JjZVByZXZlbnREZWZhdWx0IHx8IHNob3VsZFByZXZlbnREZWZhdWx0KSAmJiAhJHRhcmdldEVsWzBdLmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN3aXBlci5wYXJhbXMuZnJlZU1vZGUgJiYgc3dpcGVyLnBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIHN3aXBlci5mcmVlTW9kZSAmJiBzd2lwZXIuYW5pbWF0aW5nICYmICFwYXJhbXMuY3NzTW9kZSkge1xuICAgIHN3aXBlci5mcmVlTW9kZS5vblRvdWNoU3RhcnQoKTtcbiAgfVxuXG4gIHN3aXBlci5lbWl0KCd0b3VjaFN0YXJ0JywgZSk7XG59IiwgImltcG9ydCB7IGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5pbXBvcnQgJCBmcm9tICcuLi8uLi9zaGFyZWQvZG9tLmpzJztcbmltcG9ydCB7IG5vdyB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkge1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IGRhdGEgPSBzd2lwZXIudG91Y2hFdmVudHNEYXRhO1xuICBjb25zdCB7XG4gICAgcGFyYW1zLFxuICAgIHRvdWNoZXMsXG4gICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgZW5hYmxlZFxuICB9ID0gc3dpcGVyO1xuICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgbGV0IGUgPSBldmVudDtcbiAgaWYgKGUub3JpZ2luYWxFdmVudCkgZSA9IGUub3JpZ2luYWxFdmVudDtcblxuICBpZiAoIWRhdGEuaXNUb3VjaGVkKSB7XG4gICAgaWYgKGRhdGEuc3RhcnRNb3ZpbmcgJiYgZGF0YS5pc1Njcm9sbGluZykge1xuICAgICAgc3dpcGVyLmVtaXQoJ3RvdWNoTW92ZU9wcG9zaXRlJywgZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGRhdGEuaXNUb3VjaEV2ZW50ICYmIGUudHlwZSAhPT0gJ3RvdWNobW92ZScpIHJldHVybjtcbiAgY29uc3QgdGFyZ2V0VG91Y2ggPSBlLnR5cGUgPT09ICd0b3VjaG1vdmUnICYmIGUudGFyZ2V0VG91Y2hlcyAmJiAoZS50YXJnZXRUb3VjaGVzWzBdIHx8IGUuY2hhbmdlZFRvdWNoZXNbMF0pO1xuICBjb25zdCBwYWdlWCA9IGUudHlwZSA9PT0gJ3RvdWNobW92ZScgPyB0YXJnZXRUb3VjaC5wYWdlWCA6IGUucGFnZVg7XG4gIGNvbnN0IHBhZ2VZID0gZS50eXBlID09PSAndG91Y2htb3ZlJyA/IHRhcmdldFRvdWNoLnBhZ2VZIDogZS5wYWdlWTtcblxuICBpZiAoZS5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlcikge1xuICAgIHRvdWNoZXMuc3RhcnRYID0gcGFnZVg7XG4gICAgdG91Y2hlcy5zdGFydFkgPSBwYWdlWTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXN3aXBlci5hbGxvd1RvdWNoTW92ZSkge1xuICAgIGlmICghJChlLnRhcmdldCkuaXMoZGF0YS5mb2N1c2FibGVFbGVtZW50cykpIHtcbiAgICAgIHN3aXBlci5hbGxvd0NsaWNrID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuaXNUb3VjaGVkKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRvdWNoZXMsIHtcbiAgICAgICAgc3RhcnRYOiBwYWdlWCxcbiAgICAgICAgc3RhcnRZOiBwYWdlWSxcbiAgICAgICAgY3VycmVudFg6IHBhZ2VYLFxuICAgICAgICBjdXJyZW50WTogcGFnZVlcbiAgICAgIH0pO1xuICAgICAgZGF0YS50b3VjaFN0YXJ0VGltZSA9IG5vdygpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkYXRhLmlzVG91Y2hFdmVudCAmJiBwYXJhbXMudG91Y2hSZWxlYXNlT25FZGdlcyAmJiAhcGFyYW1zLmxvb3ApIHtcbiAgICBpZiAoc3dpcGVyLmlzVmVydGljYWwoKSkge1xuICAgICAgLy8gVmVydGljYWxcbiAgICAgIGlmIChwYWdlWSA8IHRvdWNoZXMuc3RhcnRZICYmIHN3aXBlci50cmFuc2xhdGUgPD0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpIHx8IHBhZ2VZID4gdG91Y2hlcy5zdGFydFkgJiYgc3dpcGVyLnRyYW5zbGF0ZSA+PSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgZGF0YS5pc01vdmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhZ2VYIDwgdG91Y2hlcy5zdGFydFggJiYgc3dpcGVyLnRyYW5zbGF0ZSA8PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgfHwgcGFnZVggPiB0b3VjaGVzLnN0YXJ0WCAmJiBzd2lwZXIudHJhbnNsYXRlID49IHN3aXBlci5taW5UcmFuc2xhdGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkYXRhLmlzVG91Y2hFdmVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICQoZS50YXJnZXQpLmlzKGRhdGEuZm9jdXNhYmxlRWxlbWVudHMpKSB7XG4gICAgICBkYXRhLmlzTW92ZWQgPSB0cnVlO1xuICAgICAgc3dpcGVyLmFsbG93Q2xpY2sgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoZGF0YS5hbGxvd1RvdWNoQ2FsbGJhY2tzKSB7XG4gICAgc3dpcGVyLmVtaXQoJ3RvdWNoTW92ZScsIGUpO1xuICB9XG5cbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkgcmV0dXJuO1xuICB0b3VjaGVzLmN1cnJlbnRYID0gcGFnZVg7XG4gIHRvdWNoZXMuY3VycmVudFkgPSBwYWdlWTtcbiAgY29uc3QgZGlmZlggPSB0b3VjaGVzLmN1cnJlbnRYIC0gdG91Y2hlcy5zdGFydFg7XG4gIGNvbnN0IGRpZmZZID0gdG91Y2hlcy5jdXJyZW50WSAtIHRvdWNoZXMuc3RhcnRZO1xuICBpZiAoc3dpcGVyLnBhcmFtcy50aHJlc2hvbGQgJiYgTWF0aC5zcXJ0KGRpZmZYICoqIDIgKyBkaWZmWSAqKiAyKSA8IHN3aXBlci5wYXJhbXMudGhyZXNob2xkKSByZXR1cm47XG5cbiAgaWYgKHR5cGVvZiBkYXRhLmlzU2Nyb2xsaW5nID09PSAndW5kZWZpbmVkJykge1xuICAgIGxldCB0b3VjaEFuZ2xlO1xuXG4gICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiB0b3VjaGVzLmN1cnJlbnRZID09PSB0b3VjaGVzLnN0YXJ0WSB8fCBzd2lwZXIuaXNWZXJ0aWNhbCgpICYmIHRvdWNoZXMuY3VycmVudFggPT09IHRvdWNoZXMuc3RhcnRYKSB7XG4gICAgICBkYXRhLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgaWYgKGRpZmZYICogZGlmZlggKyBkaWZmWSAqIGRpZmZZID49IDI1KSB7XG4gICAgICAgIHRvdWNoQW5nbGUgPSBNYXRoLmF0YW4yKE1hdGguYWJzKGRpZmZZKSwgTWF0aC5hYnMoZGlmZlgpKSAqIDE4MCAvIE1hdGguUEk7XG4gICAgICAgIGRhdGEuaXNTY3JvbGxpbmcgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB0b3VjaEFuZ2xlID4gcGFyYW1zLnRvdWNoQW5nbGUgOiA5MCAtIHRvdWNoQW5nbGUgPiBwYXJhbXMudG91Y2hBbmdsZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGF0YS5pc1Njcm9sbGluZykge1xuICAgIHN3aXBlci5lbWl0KCd0b3VjaE1vdmVPcHBvc2l0ZScsIGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBkYXRhLnN0YXJ0TW92aW5nID09PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0b3VjaGVzLmN1cnJlbnRYICE9PSB0b3VjaGVzLnN0YXJ0WCB8fCB0b3VjaGVzLmN1cnJlbnRZICE9PSB0b3VjaGVzLnN0YXJ0WSkge1xuICAgICAgZGF0YS5zdGFydE1vdmluZyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGEuaXNTY3JvbGxpbmcpIHtcbiAgICBkYXRhLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghZGF0YS5zdGFydE1vdmluZykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXBlci5hbGxvd0NsaWNrID0gZmFsc2U7XG5cbiAgaWYgKCFwYXJhbXMuY3NzTW9kZSAmJiBlLmNhbmNlbGFibGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBpZiAocGFyYW1zLnRvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbiAmJiAhcGFyYW1zLm5lc3RlZCkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBpZiAoIWRhdGEuaXNNb3ZlZCkge1xuICAgIGlmIChwYXJhbXMubG9vcCAmJiAhcGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHN3aXBlci5sb29wRml4KCk7XG4gICAgfVxuXG4gICAgZGF0YS5zdGFydFRyYW5zbGF0ZSA9IHN3aXBlci5nZXRUcmFuc2xhdGUoKTtcbiAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcblxuICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC50cmlnZ2VyKCd3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnKTtcbiAgICB9XG5cbiAgICBkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UgPSBmYWxzZTsgLy8gR3JhYiBDdXJzb3JcblxuICAgIGlmIChwYXJhbXMuZ3JhYkN1cnNvciAmJiAoc3dpcGVyLmFsbG93U2xpZGVOZXh0ID09PSB0cnVlIHx8IHN3aXBlci5hbGxvd1NsaWRlUHJldiA9PT0gdHJ1ZSkpIHtcbiAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKHRydWUpO1xuICAgIH1cblxuICAgIHN3aXBlci5lbWl0KCdzbGlkZXJGaXJzdE1vdmUnLCBlKTtcbiAgfVxuXG4gIHN3aXBlci5lbWl0KCdzbGlkZXJNb3ZlJywgZSk7XG4gIGRhdGEuaXNNb3ZlZCA9IHRydWU7XG4gIGxldCBkaWZmID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gZGlmZlggOiBkaWZmWTtcbiAgdG91Y2hlcy5kaWZmID0gZGlmZjtcbiAgZGlmZiAqPSBwYXJhbXMudG91Y2hSYXRpbztcbiAgaWYgKHJ0bCkgZGlmZiA9IC1kaWZmO1xuICBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPSBkaWZmID4gMCA/ICdwcmV2JyA6ICduZXh0JztcbiAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGlmZiArIGRhdGEuc3RhcnRUcmFuc2xhdGU7XG4gIGxldCBkaXNhYmxlUGFyZW50U3dpcGVyID0gdHJ1ZTtcbiAgbGV0IHJlc2lzdGFuY2VSYXRpbyA9IHBhcmFtcy5yZXNpc3RhbmNlUmF0aW87XG5cbiAgaWYgKHBhcmFtcy50b3VjaFJlbGVhc2VPbkVkZ2VzKSB7XG4gICAgcmVzaXN0YW5jZVJhdGlvID0gMDtcbiAgfVxuXG4gIGlmIChkaWZmID4gMCAmJiBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPiBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICBkaXNhYmxlUGFyZW50U3dpcGVyID0gZmFsc2U7XG4gICAgaWYgKHBhcmFtcy5yZXNpc3RhbmNlKSBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBzd2lwZXIubWluVHJhbnNsYXRlKCkgLSAxICsgKC1zd2lwZXIubWluVHJhbnNsYXRlKCkgKyBkYXRhLnN0YXJ0VHJhbnNsYXRlICsgZGlmZikgKiogcmVzaXN0YW5jZVJhdGlvO1xuICB9IGVsc2UgaWYgKGRpZmYgPCAwICYmIGRhdGEuY3VycmVudFRyYW5zbGF0ZSA8IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkge1xuICAgIGRpc2FibGVQYXJlbnRTd2lwZXIgPSBmYWxzZTtcbiAgICBpZiAocGFyYW1zLnJlc2lzdGFuY2UpIGRhdGEuY3VycmVudFRyYW5zbGF0ZSA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSArIDEgLSAoc3dpcGVyLm1heFRyYW5zbGF0ZSgpIC0gZGF0YS5zdGFydFRyYW5zbGF0ZSAtIGRpZmYpICoqIHJlc2lzdGFuY2VSYXRpbztcbiAgfVxuXG4gIGlmIChkaXNhYmxlUGFyZW50U3dpcGVyKSB7XG4gICAgZS5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlciA9IHRydWU7XG4gIH0gLy8gRGlyZWN0aW9ucyBsb2Nrc1xuXG5cbiAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZU5leHQgJiYgc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAnbmV4dCcgJiYgZGF0YS5jdXJyZW50VHJhbnNsYXRlIDwgZGF0YS5zdGFydFRyYW5zbGF0ZSkge1xuICAgIGRhdGEuY3VycmVudFRyYW5zbGF0ZSA9IGRhdGEuc3RhcnRUcmFuc2xhdGU7XG4gIH1cblxuICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICdwcmV2JyAmJiBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPiBkYXRhLnN0YXJ0VHJhbnNsYXRlKSB7XG4gICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgfVxuXG4gIGlmICghc3dpcGVyLmFsbG93U2xpZGVQcmV2ICYmICFzd2lwZXIuYWxsb3dTbGlkZU5leHQpIHtcbiAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICB9IC8vIFRocmVzaG9sZFxuXG5cbiAgaWYgKHBhcmFtcy50aHJlc2hvbGQgPiAwKSB7XG4gICAgaWYgKE1hdGguYWJzKGRpZmYpID4gcGFyYW1zLnRocmVzaG9sZCB8fCBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSkge1xuICAgICAgaWYgKCFkYXRhLmFsbG93VGhyZXNob2xkTW92ZSkge1xuICAgICAgICBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSA9IHRydWU7XG4gICAgICAgIHRvdWNoZXMuc3RhcnRYID0gdG91Y2hlcy5jdXJyZW50WDtcbiAgICAgICAgdG91Y2hlcy5zdGFydFkgPSB0b3VjaGVzLmN1cnJlbnRZO1xuICAgICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICAgICAgICB0b3VjaGVzLmRpZmYgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB0b3VjaGVzLmN1cnJlbnRYIC0gdG91Y2hlcy5zdGFydFggOiB0b3VjaGVzLmN1cnJlbnRZIC0gdG91Y2hlcy5zdGFydFk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoIXBhcmFtcy5mb2xsb3dGaW5nZXIgfHwgcGFyYW1zLmNzc01vZGUpIHJldHVybjsgLy8gVXBkYXRlIGFjdGl2ZSBpbmRleCBpbiBmcmVlIG1vZGVcblxuICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIHN3aXBlci5mcmVlTW9kZSB8fCBwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcykge1xuICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gIH1cblxuICBpZiAoc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSAmJiBwYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCAmJiBzd2lwZXIuZnJlZU1vZGUpIHtcbiAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaE1vdmUoKTtcbiAgfSAvLyBVcGRhdGUgcHJvZ3Jlc3NcblxuXG4gIHN3aXBlci51cGRhdGVQcm9ncmVzcyhkYXRhLmN1cnJlbnRUcmFuc2xhdGUpOyAvLyBVcGRhdGUgdHJhbnNsYXRlXG5cbiAgc3dpcGVyLnNldFRyYW5zbGF0ZShkYXRhLmN1cnJlbnRUcmFuc2xhdGUpO1xufSIsICJpbXBvcnQgeyBub3csIG5leHRUaWNrIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9uVG91Y2hFbmQoZXZlbnQpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3QgZGF0YSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGE7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXMsXG4gICAgdG91Y2hlcyxcbiAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICBzbGlkZXNHcmlkLFxuICAgIGVuYWJsZWRcbiAgfSA9IHN3aXBlcjtcbiAgaWYgKCFlbmFibGVkKSByZXR1cm47XG4gIGxldCBlID0gZXZlbnQ7XG4gIGlmIChlLm9yaWdpbmFsRXZlbnQpIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cbiAgaWYgKGRhdGEuYWxsb3dUb3VjaENhbGxiYWNrcykge1xuICAgIHN3aXBlci5lbWl0KCd0b3VjaEVuZCcsIGUpO1xuICB9XG5cbiAgZGF0YS5hbGxvd1RvdWNoQ2FsbGJhY2tzID0gZmFsc2U7XG5cbiAgaWYgKCFkYXRhLmlzVG91Y2hlZCkge1xuICAgIGlmIChkYXRhLmlzTW92ZWQgJiYgcGFyYW1zLmdyYWJDdXJzb3IpIHtcbiAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKGZhbHNlKTtcbiAgICB9XG5cbiAgICBkYXRhLmlzTW92ZWQgPSBmYWxzZTtcbiAgICBkYXRhLnN0YXJ0TW92aW5nID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9IC8vIFJldHVybiBHcmFiIEN1cnNvclxuXG5cbiAgaWYgKHBhcmFtcy5ncmFiQ3Vyc29yICYmIGRhdGEuaXNNb3ZlZCAmJiBkYXRhLmlzVG91Y2hlZCAmJiAoc3dpcGVyLmFsbG93U2xpZGVOZXh0ID09PSB0cnVlIHx8IHN3aXBlci5hbGxvd1NsaWRlUHJldiA9PT0gdHJ1ZSkpIHtcbiAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcihmYWxzZSk7XG4gIH0gLy8gVGltZSBkaWZmXG5cblxuICBjb25zdCB0b3VjaEVuZFRpbWUgPSBub3coKTtcbiAgY29uc3QgdGltZURpZmYgPSB0b3VjaEVuZFRpbWUgLSBkYXRhLnRvdWNoU3RhcnRUaW1lOyAvLyBUYXAsIGRvdWJsZVRhcCwgQ2xpY2tcblxuICBpZiAoc3dpcGVyLmFsbG93Q2xpY2spIHtcbiAgICBjb25zdCBwYXRoVHJlZSA9IGUucGF0aCB8fCBlLmNvbXBvc2VkUGF0aCAmJiBlLmNvbXBvc2VkUGF0aCgpO1xuICAgIHN3aXBlci51cGRhdGVDbGlja2VkU2xpZGUocGF0aFRyZWUgJiYgcGF0aFRyZWVbMF0gfHwgZS50YXJnZXQpO1xuICAgIHN3aXBlci5lbWl0KCd0YXAgY2xpY2snLCBlKTtcblxuICAgIGlmICh0aW1lRGlmZiA8IDMwMCAmJiB0b3VjaEVuZFRpbWUgLSBkYXRhLmxhc3RDbGlja1RpbWUgPCAzMDApIHtcbiAgICAgIHN3aXBlci5lbWl0KCdkb3VibGVUYXAgZG91YmxlQ2xpY2snLCBlKTtcbiAgICB9XG4gIH1cblxuICBkYXRhLmxhc3RDbGlja1RpbWUgPSBub3coKTtcbiAgbmV4dFRpY2soKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLmRlc3Ryb3llZCkgc3dpcGVyLmFsbG93Q2xpY2sgPSB0cnVlO1xuICB9KTtcblxuICBpZiAoIWRhdGEuaXNUb3VjaGVkIHx8ICFkYXRhLmlzTW92ZWQgfHwgIXN3aXBlci5zd2lwZURpcmVjdGlvbiB8fCB0b3VjaGVzLmRpZmYgPT09IDAgfHwgZGF0YS5jdXJyZW50VHJhbnNsYXRlID09PSBkYXRhLnN0YXJ0VHJhbnNsYXRlKSB7XG4gICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICBkYXRhLmlzTW92ZWQgPSBmYWxzZTtcbiAgICBkYXRhLnN0YXJ0TW92aW5nID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgZGF0YS5pc01vdmVkID0gZmFsc2U7XG4gIGRhdGEuc3RhcnRNb3ZpbmcgPSBmYWxzZTtcbiAgbGV0IGN1cnJlbnRQb3M7XG5cbiAgaWYgKHBhcmFtcy5mb2xsb3dGaW5nZXIpIHtcbiAgICBjdXJyZW50UG9zID0gcnRsID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuICB9IGVsc2Uge1xuICAgIGN1cnJlbnRQb3MgPSAtZGF0YS5jdXJyZW50VHJhbnNsYXRlO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHN3aXBlci5wYXJhbXMuZnJlZU1vZGUgJiYgcGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQpIHtcbiAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaEVuZCh7XG4gICAgICBjdXJyZW50UG9zXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9IC8vIEZpbmQgY3VycmVudCBzbGlkZVxuXG5cbiAgbGV0IHN0b3BJbmRleCA9IDA7XG4gIGxldCBncm91cFNpemUgPSBzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkWzBdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzR3JpZC5sZW5ndGg7IGkgKz0gaSA8IHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAgPyAxIDogcGFyYW1zLnNsaWRlc1Blckdyb3VwKSB7XG4gICAgY29uc3QgaW5jcmVtZW50ID0gaSA8IHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAgLSAxID8gMSA6IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcblxuICAgIGlmICh0eXBlb2Ygc2xpZGVzR3JpZFtpICsgaW5jcmVtZW50XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjdXJyZW50UG9zID49IHNsaWRlc0dyaWRbaV0gJiYgY3VycmVudFBvcyA8IHNsaWRlc0dyaWRbaSArIGluY3JlbWVudF0pIHtcbiAgICAgICAgc3RvcEluZGV4ID0gaTtcbiAgICAgICAgZ3JvdXBTaXplID0gc2xpZGVzR3JpZFtpICsgaW5jcmVtZW50XSAtIHNsaWRlc0dyaWRbaV07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjdXJyZW50UG9zID49IHNsaWRlc0dyaWRbaV0pIHtcbiAgICAgIHN0b3BJbmRleCA9IGk7XG4gICAgICBncm91cFNpemUgPSBzbGlkZXNHcmlkW3NsaWRlc0dyaWQubGVuZ3RoIC0gMV0gLSBzbGlkZXNHcmlkW3NsaWRlc0dyaWQubGVuZ3RoIC0gMl07XG4gICAgfVxuICB9XG5cbiAgbGV0IHJld2luZEZpcnN0SW5kZXggPSBudWxsO1xuICBsZXQgcmV3aW5kTGFzdEluZGV4ID0gbnVsbDtcblxuICBpZiAocGFyYW1zLnJld2luZCkge1xuICAgIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcpIHtcbiAgICAgIHJld2luZExhc3RJbmRleCA9IHN3aXBlci5wYXJhbXMudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiBzd2lwZXIudmlydHVhbCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggLSAxIDogc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxO1xuICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzRW5kKSB7XG4gICAgICByZXdpbmRGaXJzdEluZGV4ID0gMDtcbiAgICB9XG4gIH0gLy8gRmluZCBjdXJyZW50IHNsaWRlIHNpemVcblxuXG4gIGNvbnN0IHJhdGlvID0gKGN1cnJlbnRQb3MgLSBzbGlkZXNHcmlkW3N0b3BJbmRleF0pIC8gZ3JvdXBTaXplO1xuICBjb25zdCBpbmNyZW1lbnQgPSBzdG9wSW5kZXggPCBwYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwIC0gMSA/IDEgOiBwYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG5cbiAgaWYgKHRpbWVEaWZmID4gcGFyYW1zLmxvbmdTd2lwZXNNcykge1xuICAgIC8vIExvbmcgdG91Y2hlc1xuICAgIGlmICghcGFyYW1zLmxvbmdTd2lwZXMpIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5zd2lwZURpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICBpZiAocmF0aW8gPj0gcGFyYW1zLmxvbmdTd2lwZXNSYXRpbykgc3dpcGVyLnNsaWRlVG8ocGFyYW1zLnJld2luZCAmJiBzd2lwZXIuaXNFbmQgPyByZXdpbmRGaXJzdEluZGV4IDogc3RvcEluZGV4ICsgaW5jcmVtZW50KTtlbHNlIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCk7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5zd2lwZURpcmVjdGlvbiA9PT0gJ3ByZXYnKSB7XG4gICAgICBpZiAocmF0aW8gPiAxIC0gcGFyYW1zLmxvbmdTd2lwZXNSYXRpbykge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzdG9wSW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgfSBlbHNlIGlmIChyZXdpbmRMYXN0SW5kZXggIT09IG51bGwgJiYgcmF0aW8gPCAwICYmIE1hdGguYWJzKHJhdGlvKSA+IHBhcmFtcy5sb25nU3dpcGVzUmF0aW8pIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8ocmV3aW5kTGFzdEluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFNob3J0IHN3aXBlc1xuICAgIGlmICghcGFyYW1zLnNob3J0U3dpcGVzKSB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzTmF2QnV0dG9uVGFyZ2V0ID0gc3dpcGVyLm5hdmlnYXRpb24gJiYgKGUudGFyZ2V0ID09PSBzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwgfHwgZS50YXJnZXQgPT09IHN3aXBlci5uYXZpZ2F0aW9uLnByZXZFbCk7XG5cbiAgICBpZiAoIWlzTmF2QnV0dG9uVGFyZ2V0KSB7XG4gICAgICBpZiAoc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8ocmV3aW5kRmlyc3RJbmRleCAhPT0gbnVsbCA/IHJld2luZEZpcnN0SW5kZXggOiBzdG9wSW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAncHJldicpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8ocmV3aW5kTGFzdEluZGV4ICE9PSBudWxsID8gcmV3aW5kTGFzdEluZGV4IDogc3RvcEluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwpIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCArIGluY3JlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCk7XG4gICAgfVxuICB9XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgcGFyYW1zLFxuICAgIGVsXG4gIH0gPSBzd2lwZXI7XG4gIGlmIChlbCAmJiBlbC5vZmZzZXRXaWR0aCA9PT0gMCkgcmV0dXJuOyAvLyBCcmVha3BvaW50c1xuXG4gIGlmIChwYXJhbXMuYnJlYWtwb2ludHMpIHtcbiAgICBzd2lwZXIuc2V0QnJlYWtwb2ludCgpO1xuICB9IC8vIFNhdmUgbG9ja3NcblxuXG4gIGNvbnN0IHtcbiAgICBhbGxvd1NsaWRlTmV4dCxcbiAgICBhbGxvd1NsaWRlUHJldixcbiAgICBzbmFwR3JpZFxuICB9ID0gc3dpcGVyOyAvLyBEaXNhYmxlIGxvY2tzIG9uIHJlc2l6ZVxuXG4gIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IHRydWU7XG4gIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IHRydWU7XG4gIHN3aXBlci51cGRhdGVTaXplKCk7XG4gIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcblxuICBpZiAoKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgfHwgcGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxKSAmJiBzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5pc0JlZ2lubmluZyAmJiAhc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSwgMCwgZmFsc2UsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCwgMCwgZmFsc2UsIHRydWUpO1xuICB9XG5cbiAgaWYgKHN3aXBlci5hdXRvcGxheSAmJiBzd2lwZXIuYXV0b3BsYXkucnVubmluZyAmJiBzd2lwZXIuYXV0b3BsYXkucGF1c2VkKSB7XG4gICAgc3dpcGVyLmF1dG9wbGF5LnJ1bigpO1xuICB9IC8vIFJldHVybiBsb2NrcyBhZnRlciByZXNpemVcblxuXG4gIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IGFsbG93U2xpZGVQcmV2O1xuICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSBhbGxvd1NsaWRlTmV4dDtcblxuICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHNuYXBHcmlkICE9PSBzd2lwZXIuc25hcEdyaWQpIHtcbiAgICBzd2lwZXIuY2hlY2tPdmVyZmxvdygpO1xuICB9XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG5cbiAgaWYgKCFzd2lwZXIuYWxsb3dDbGljaykge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnByZXZlbnRDbGlja3MpIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbiAmJiBzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb25TY3JvbGwoKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICB3cmFwcGVyRWwsXG4gICAgcnRsVHJhbnNsYXRlLFxuICAgIGVuYWJsZWRcbiAgfSA9IHN3aXBlcjtcbiAgaWYgKCFlbmFibGVkKSByZXR1cm47XG4gIHN3aXBlci5wcmV2aW91c1RyYW5zbGF0ZSA9IHN3aXBlci50cmFuc2xhdGU7XG5cbiAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgIHN3aXBlci50cmFuc2xhdGUgPSAtd3JhcHBlckVsLnNjcm9sbExlZnQ7XG4gIH0gZWxzZSB7XG4gICAgc3dpcGVyLnRyYW5zbGF0ZSA9IC13cmFwcGVyRWwuc2Nyb2xsVG9wO1xuICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG5cbiAgaWYgKHN3aXBlci50cmFuc2xhdGUgPT09IC0wKSBzd2lwZXIudHJhbnNsYXRlID0gMDtcbiAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gIGxldCBuZXdQcm9ncmVzcztcbiAgY29uc3QgdHJhbnNsYXRlc0RpZmYgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG5cbiAgaWYgKHRyYW5zbGF0ZXNEaWZmID09PSAwKSB7XG4gICAgbmV3UHJvZ3Jlc3MgPSAwO1xuICB9IGVsc2Uge1xuICAgIG5ld1Byb2dyZXNzID0gKHN3aXBlci50cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIC8gdHJhbnNsYXRlc0RpZmY7XG4gIH1cblxuICBpZiAobmV3UHJvZ3Jlc3MgIT09IHN3aXBlci5wcm9ncmVzcykge1xuICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhydGxUcmFuc2xhdGUgPyAtc3dpcGVyLnRyYW5zbGF0ZSA6IHN3aXBlci50cmFuc2xhdGUpO1xuICB9XG5cbiAgc3dpcGVyLmVtaXQoJ3NldFRyYW5zbGF0ZScsIHN3aXBlci50cmFuc2xhdGUsIGZhbHNlKTtcbn0iLCAiaW1wb3J0IHNldEJyZWFrcG9pbnQgZnJvbSAnLi9zZXRCcmVha3BvaW50LmpzJztcbmltcG9ydCBnZXRCcmVha3BvaW50IGZyb20gJy4vZ2V0QnJlYWtwb2ludC5qcyc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHNldEJyZWFrcG9pbnQsXG4gIGdldEJyZWFrcG9pbnRcbn07IiwgImltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5cbmNvbnN0IGlzR3JpZEVuYWJsZWQgPSAoc3dpcGVyLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIHN3aXBlci5ncmlkICYmIHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0QnJlYWtwb2ludCgpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIGFjdGl2ZUluZGV4LFxuICAgIGluaXRpYWxpemVkLFxuICAgIGxvb3BlZFNsaWRlcyA9IDAsXG4gICAgcGFyYW1zLFxuICAgICRlbFxuICB9ID0gc3dpcGVyO1xuICBjb25zdCBicmVha3BvaW50cyA9IHBhcmFtcy5icmVha3BvaW50cztcbiAgaWYgKCFicmVha3BvaW50cyB8fCBicmVha3BvaW50cyAmJiBPYmplY3Qua2V5cyhicmVha3BvaW50cykubGVuZ3RoID09PSAwKSByZXR1cm47IC8vIEdldCBicmVha3BvaW50IGZvciB3aW5kb3cgd2lkdGggYW5kIHVwZGF0ZSBwYXJhbWV0ZXJzXG5cbiAgY29uc3QgYnJlYWtwb2ludCA9IHN3aXBlci5nZXRCcmVha3BvaW50KGJyZWFrcG9pbnRzLCBzd2lwZXIucGFyYW1zLmJyZWFrcG9pbnRzQmFzZSwgc3dpcGVyLmVsKTtcbiAgaWYgKCFicmVha3BvaW50IHx8IHN3aXBlci5jdXJyZW50QnJlYWtwb2ludCA9PT0gYnJlYWtwb2ludCkgcmV0dXJuO1xuICBjb25zdCBicmVha3BvaW50T25seVBhcmFtcyA9IGJyZWFrcG9pbnQgaW4gYnJlYWtwb2ludHMgPyBicmVha3BvaW50c1ticmVha3BvaW50XSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgYnJlYWtwb2ludFBhcmFtcyA9IGJyZWFrcG9pbnRPbmx5UGFyYW1zIHx8IHN3aXBlci5vcmlnaW5hbFBhcmFtcztcbiAgY29uc3Qgd2FzTXVsdGlSb3cgPSBpc0dyaWRFbmFibGVkKHN3aXBlciwgcGFyYW1zKTtcbiAgY29uc3QgaXNNdWx0aVJvdyA9IGlzR3JpZEVuYWJsZWQoc3dpcGVyLCBicmVha3BvaW50UGFyYW1zKTtcbiAgY29uc3Qgd2FzRW5hYmxlZCA9IHBhcmFtcy5lbmFibGVkO1xuXG4gIGlmICh3YXNNdWx0aVJvdyAmJiAhaXNNdWx0aVJvdykge1xuICAgICRlbC5yZW1vdmVDbGFzcyhgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkICR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9Z3JpZC1jb2x1bW5gKTtcbiAgICBzd2lwZXIuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgfSBlbHNlIGlmICghd2FzTXVsdGlSb3cgJiYgaXNNdWx0aVJvdykge1xuICAgICRlbC5hZGRDbGFzcyhgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkYCk7XG5cbiAgICBpZiAoYnJlYWtwb2ludFBhcmFtcy5ncmlkLmZpbGwgJiYgYnJlYWtwb2ludFBhcmFtcy5ncmlkLmZpbGwgPT09ICdjb2x1bW4nIHx8ICFicmVha3BvaW50UGFyYW1zLmdyaWQuZmlsbCAmJiBwYXJhbXMuZ3JpZC5maWxsID09PSAnY29sdW1uJykge1xuICAgICAgJGVsLmFkZENsYXNzKGAke3BhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfWdyaWQtY29sdW1uYCk7XG4gICAgfVxuXG4gICAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gIH1cblxuICBjb25zdCBkaXJlY3Rpb25DaGFuZ2VkID0gYnJlYWtwb2ludFBhcmFtcy5kaXJlY3Rpb24gJiYgYnJlYWtwb2ludFBhcmFtcy5kaXJlY3Rpb24gIT09IHBhcmFtcy5kaXJlY3Rpb247XG4gIGNvbnN0IG5lZWRzUmVMb29wID0gcGFyYW1zLmxvb3AgJiYgKGJyZWFrcG9pbnRQYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gcGFyYW1zLnNsaWRlc1BlclZpZXcgfHwgZGlyZWN0aW9uQ2hhbmdlZCk7XG5cbiAgaWYgKGRpcmVjdGlvbkNoYW5nZWQgJiYgaW5pdGlhbGl6ZWQpIHtcbiAgICBzd2lwZXIuY2hhbmdlRGlyZWN0aW9uKCk7XG4gIH1cblxuICBleHRlbmQoc3dpcGVyLnBhcmFtcywgYnJlYWtwb2ludFBhcmFtcyk7XG4gIGNvbnN0IGlzRW5hYmxlZCA9IHN3aXBlci5wYXJhbXMuZW5hYmxlZDtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICBhbGxvd1RvdWNoTW92ZTogc3dpcGVyLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICBhbGxvd1NsaWRlTmV4dDogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlTmV4dCxcbiAgICBhbGxvd1NsaWRlUHJldjogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlUHJldlxuICB9KTtcblxuICBpZiAod2FzRW5hYmxlZCAmJiAhaXNFbmFibGVkKSB7XG4gICAgc3dpcGVyLmRpc2FibGUoKTtcbiAgfSBlbHNlIGlmICghd2FzRW5hYmxlZCAmJiBpc0VuYWJsZWQpIHtcbiAgICBzd2lwZXIuZW5hYmxlKCk7XG4gIH1cblxuICBzd2lwZXIuY3VycmVudEJyZWFrcG9pbnQgPSBicmVha3BvaW50O1xuICBzd2lwZXIuZW1pdCgnX2JlZm9yZUJyZWFrcG9pbnQnLCBicmVha3BvaW50UGFyYW1zKTtcblxuICBpZiAobmVlZHNSZUxvb3AgJiYgaW5pdGlhbGl6ZWQpIHtcbiAgICBzd2lwZXIubG9vcERlc3Ryb3koKTtcbiAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICBzd2lwZXIuc2xpZGVUbyhhY3RpdmVJbmRleCAtIGxvb3BlZFNsaWRlcyArIHN3aXBlci5sb29wZWRTbGlkZXMsIDAsIGZhbHNlKTtcbiAgfVxuXG4gIHN3aXBlci5lbWl0KCdicmVha3BvaW50JywgYnJlYWtwb2ludFBhcmFtcyk7XG59IiwgImltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QnJlYWtwb2ludChicmVha3BvaW50cywgYmFzZSwgY29udGFpbmVyRWwpIHtcbiAgaWYgKGJhc2UgPT09IHZvaWQgMCkge1xuICAgIGJhc2UgPSAnd2luZG93JztcbiAgfVxuXG4gIGlmICghYnJlYWtwb2ludHMgfHwgYmFzZSA9PT0gJ2NvbnRhaW5lcicgJiYgIWNvbnRhaW5lckVsKSByZXR1cm4gdW5kZWZpbmVkO1xuICBsZXQgYnJlYWtwb2ludCA9IGZhbHNlO1xuICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgY29uc3QgY3VycmVudEhlaWdodCA9IGJhc2UgPT09ICd3aW5kb3cnID8gd2luZG93LmlubmVySGVpZ2h0IDogY29udGFpbmVyRWwuY2xpZW50SGVpZ2h0O1xuICBjb25zdCBwb2ludHMgPSBPYmplY3Qua2V5cyhicmVha3BvaW50cykubWFwKHBvaW50ID0+IHtcbiAgICBpZiAodHlwZW9mIHBvaW50ID09PSAnc3RyaW5nJyAmJiBwb2ludC5pbmRleE9mKCdAJykgPT09IDApIHtcbiAgICAgIGNvbnN0IG1pblJhdGlvID0gcGFyc2VGbG9hdChwb2ludC5zdWJzdHIoMSkpO1xuICAgICAgY29uc3QgdmFsdWUgPSBjdXJyZW50SGVpZ2h0ICogbWluUmF0aW87XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgcG9pbnRcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBwb2ludCxcbiAgICAgIHBvaW50XG4gICAgfTtcbiAgfSk7XG4gIHBvaW50cy5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhLnZhbHVlLCAxMCkgLSBwYXJzZUludChiLnZhbHVlLCAxMCkpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3Qge1xuICAgICAgcG9pbnQsXG4gICAgICB2YWx1ZVxuICAgIH0gPSBwb2ludHNbaV07XG5cbiAgICBpZiAoYmFzZSA9PT0gJ3dpbmRvdycpIHtcbiAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShgKG1pbi13aWR0aDogJHt2YWx1ZX1weClgKS5tYXRjaGVzKSB7XG4gICAgICAgIGJyZWFrcG9pbnQgPSBwb2ludDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhbHVlIDw9IGNvbnRhaW5lckVsLmNsaWVudFdpZHRoKSB7XG4gICAgICBicmVha3BvaW50ID0gcG9pbnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJyZWFrcG9pbnQgfHwgJ21heCc7XG59IiwgImltcG9ydCBhZGRDbGFzc2VzIGZyb20gJy4vYWRkQ2xhc3Nlcy5qcyc7XG5pbXBvcnQgcmVtb3ZlQ2xhc3NlcyBmcm9tICcuL3JlbW92ZUNsYXNzZXMuanMnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBhZGRDbGFzc2VzLFxuICByZW1vdmVDbGFzc2VzXG59OyIsICJmdW5jdGlvbiBwcmVwYXJlQ2xhc3NlcyhlbnRyaWVzLCBwcmVmaXgpIHtcbiAgY29uc3QgcmVzdWx0Q2xhc3NlcyA9IFtdO1xuICBlbnRyaWVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgT2JqZWN0LmtleXMoaXRlbSkuZm9yRWFjaChjbGFzc05hbWVzID0+IHtcbiAgICAgICAgaWYgKGl0ZW1bY2xhc3NOYW1lc10pIHtcbiAgICAgICAgICByZXN1bHRDbGFzc2VzLnB1c2gocHJlZml4ICsgY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXN1bHRDbGFzc2VzLnB1c2gocHJlZml4ICsgaXRlbSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdENsYXNzZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZENsYXNzZXMoKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICBjbGFzc05hbWVzLFxuICAgIHBhcmFtcyxcbiAgICBydGwsXG4gICAgJGVsLFxuICAgIGRldmljZSxcbiAgICBzdXBwb3J0XG4gIH0gPSBzd2lwZXI7IC8vIHByZXR0aWVyLWlnbm9yZVxuXG4gIGNvbnN0IHN1ZmZpeGVzID0gcHJlcGFyZUNsYXNzZXMoWydpbml0aWFsaXplZCcsIHBhcmFtcy5kaXJlY3Rpb24sIHtcbiAgICAncG9pbnRlci1ldmVudHMnOiAhc3VwcG9ydC50b3VjaFxuICB9LCB7XG4gICAgJ2ZyZWUtbW9kZSc6IHN3aXBlci5wYXJhbXMuZnJlZU1vZGUgJiYgcGFyYW1zLmZyZWVNb2RlLmVuYWJsZWRcbiAgfSwge1xuICAgICdhdXRvaGVpZ2h0JzogcGFyYW1zLmF1dG9IZWlnaHRcbiAgfSwge1xuICAgICdydGwnOiBydGxcbiAgfSwge1xuICAgICdncmlkJzogcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDFcbiAgfSwge1xuICAgICdncmlkLWNvbHVtbic6IHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxICYmIHBhcmFtcy5ncmlkLmZpbGwgPT09ICdjb2x1bW4nXG4gIH0sIHtcbiAgICAnYW5kcm9pZCc6IGRldmljZS5hbmRyb2lkXG4gIH0sIHtcbiAgICAnaW9zJzogZGV2aWNlLmlvc1xuICB9LCB7XG4gICAgJ2Nzcy1tb2RlJzogcGFyYW1zLmNzc01vZGVcbiAgfSwge1xuICAgICdjZW50ZXJlZCc6IHBhcmFtcy5jc3NNb2RlICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlc1xuICB9XSwgcGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MpO1xuICBjbGFzc05hbWVzLnB1c2goLi4uc3VmZml4ZXMpO1xuICAkZWwuYWRkQ2xhc3MoWy4uLmNsYXNzTmFtZXNdLmpvaW4oJyAnKSk7XG4gIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgJGVsLFxuICAgIGNsYXNzTmFtZXNcbiAgfSA9IHN3aXBlcjtcbiAgJGVsLnJlbW92ZUNsYXNzKGNsYXNzTmFtZXMuam9pbignICcpKTtcbiAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG59IiwgImltcG9ydCBsb2FkSW1hZ2UgZnJvbSAnLi9sb2FkSW1hZ2UuanMnO1xuaW1wb3J0IHByZWxvYWRJbWFnZXMgZnJvbSAnLi9wcmVsb2FkSW1hZ2VzLmpzJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgbG9hZEltYWdlLFxuICBwcmVsb2FkSW1hZ2VzXG59OyIsICJpbXBvcnQgeyBnZXRXaW5kb3cgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbG9hZEltYWdlKGltYWdlRWwsIHNyYywgc3Jjc2V0LCBzaXplcywgY2hlY2tGb3JDb21wbGV0ZSwgY2FsbGJhY2spIHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGxldCBpbWFnZTtcblxuICBmdW5jdGlvbiBvblJlYWR5KCkge1xuICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgfVxuXG4gIGNvbnN0IGlzUGljdHVyZSA9ICQoaW1hZ2VFbCkucGFyZW50KCdwaWN0dXJlJylbMF07XG5cbiAgaWYgKCFpc1BpY3R1cmUgJiYgKCFpbWFnZUVsLmNvbXBsZXRlIHx8ICFjaGVja0ZvckNvbXBsZXRlKSkge1xuICAgIGlmIChzcmMpIHtcbiAgICAgIGltYWdlID0gbmV3IHdpbmRvdy5JbWFnZSgpO1xuICAgICAgaW1hZ2Uub25sb2FkID0gb25SZWFkeTtcbiAgICAgIGltYWdlLm9uZXJyb3IgPSBvblJlYWR5O1xuXG4gICAgICBpZiAoc2l6ZXMpIHtcbiAgICAgICAgaW1hZ2Uuc2l6ZXMgPSBzaXplcztcbiAgICAgIH1cblxuICAgICAgaWYgKHNyY3NldCkge1xuICAgICAgICBpbWFnZS5zcmNzZXQgPSBzcmNzZXQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgaW1hZ2Uuc3JjID0gc3JjO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvblJlYWR5KCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGltYWdlIGFscmVhZHkgbG9hZGVkLi4uXG4gICAgb25SZWFkeSgpO1xuICB9XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByZWxvYWRJbWFnZXMoKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIHN3aXBlci5pbWFnZXNUb0xvYWQgPSBzd2lwZXIuJGVsLmZpbmQoJ2ltZycpO1xuXG4gIGZ1bmN0aW9uIG9uUmVhZHkoKSB7XG4gICAgaWYgKHR5cGVvZiBzd2lwZXIgPT09ICd1bmRlZmluZWQnIHx8IHN3aXBlciA9PT0gbnVsbCB8fCAhc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICBpZiAoc3dpcGVyLmltYWdlc0xvYWRlZCAhPT0gdW5kZWZpbmVkKSBzd2lwZXIuaW1hZ2VzTG9hZGVkICs9IDE7XG5cbiAgICBpZiAoc3dpcGVyLmltYWdlc0xvYWRlZCA9PT0gc3dpcGVyLmltYWdlc1RvTG9hZC5sZW5ndGgpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnVwZGF0ZU9uSW1hZ2VzUmVhZHkpIHN3aXBlci51cGRhdGUoKTtcbiAgICAgIHN3aXBlci5lbWl0KCdpbWFnZXNSZWFkeScpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyLmltYWdlc1RvTG9hZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGltYWdlRWwgPSBzd2lwZXIuaW1hZ2VzVG9Mb2FkW2ldO1xuICAgIHN3aXBlci5sb2FkSW1hZ2UoaW1hZ2VFbCwgaW1hZ2VFbC5jdXJyZW50U3JjIHx8IGltYWdlRWwuZ2V0QXR0cmlidXRlKCdzcmMnKSwgaW1hZ2VFbC5zcmNzZXQgfHwgaW1hZ2VFbC5nZXRBdHRyaWJ1dGUoJ3NyY3NldCcpLCBpbWFnZUVsLnNpemVzIHx8IGltYWdlRWwuZ2V0QXR0cmlidXRlKCdzaXplcycpLCB0cnVlLCBvblJlYWR5KTtcbiAgfVxufSIsICJmdW5jdGlvbiBjaGVja092ZXJmbG93KCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgaXNMb2NrZWQ6IHdhc0xvY2tlZCxcbiAgICBwYXJhbXNcbiAgfSA9IHN3aXBlcjtcbiAgY29uc3Qge1xuICAgIHNsaWRlc09mZnNldEJlZm9yZVxuICB9ID0gcGFyYW1zO1xuXG4gIGlmIChzbGlkZXNPZmZzZXRCZWZvcmUpIHtcbiAgICBjb25zdCBsYXN0U2xpZGVJbmRleCA9IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsYXN0U2xpZGVSaWdodEVkZ2UgPSBzd2lwZXIuc2xpZGVzR3JpZFtsYXN0U2xpZGVJbmRleF0gKyBzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkW2xhc3RTbGlkZUluZGV4XSArIHNsaWRlc09mZnNldEJlZm9yZSAqIDI7XG4gICAgc3dpcGVyLmlzTG9ja2VkID0gc3dpcGVyLnNpemUgPiBsYXN0U2xpZGVSaWdodEVkZ2U7XG4gIH0gZWxzZSB7XG4gICAgc3dpcGVyLmlzTG9ja2VkID0gc3dpcGVyLnNuYXBHcmlkLmxlbmd0aCA9PT0gMTtcbiAgfVxuXG4gIGlmIChwYXJhbXMuYWxsb3dTbGlkZU5leHQgPT09IHRydWUpIHtcbiAgICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSAhc3dpcGVyLmlzTG9ja2VkO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5hbGxvd1NsaWRlUHJldiA9PT0gdHJ1ZSkge1xuICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9ICFzd2lwZXIuaXNMb2NrZWQ7XG4gIH1cblxuICBpZiAod2FzTG9ja2VkICYmIHdhc0xvY2tlZCAhPT0gc3dpcGVyLmlzTG9ja2VkKSB7XG4gICAgc3dpcGVyLmlzRW5kID0gZmFsc2U7XG4gIH1cblxuICBpZiAod2FzTG9ja2VkICE9PSBzd2lwZXIuaXNMb2NrZWQpIHtcbiAgICBzd2lwZXIuZW1pdChzd2lwZXIuaXNMb2NrZWQgPyAnbG9jaycgOiAndW5sb2NrJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBjaGVja092ZXJmbG93XG59OyIsICJleHBvcnQgZGVmYXVsdCB7XG4gIGluaXQ6IHRydWUsXG4gIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICB0b3VjaEV2ZW50c1RhcmdldDogJ3dyYXBwZXInLFxuICBpbml0aWFsU2xpZGU6IDAsXG4gIHNwZWVkOiAzMDAsXG4gIGNzc01vZGU6IGZhbHNlLFxuICB1cGRhdGVPbldpbmRvd1Jlc2l6ZTogdHJ1ZSxcbiAgcmVzaXplT2JzZXJ2ZXI6IHRydWUsXG4gIG5lc3RlZDogZmFsc2UsXG4gIGNyZWF0ZUVsZW1lbnRzOiBmYWxzZSxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgZm9jdXNhYmxlRWxlbWVudHM6ICdpbnB1dCwgc2VsZWN0LCBvcHRpb24sIHRleHRhcmVhLCBidXR0b24sIHZpZGVvLCBsYWJlbCcsXG4gIC8vIE92ZXJyaWRlc1xuICB3aWR0aDogbnVsbCxcbiAgaGVpZ2h0OiBudWxsLFxuICAvL1xuICBwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb246IGZhbHNlLFxuICAvLyBzc3JcbiAgdXNlckFnZW50OiBudWxsLFxuICB1cmw6IG51bGwsXG4gIC8vIFRvIHN1cHBvcnQgaU9TJ3Mgc3dpcGUtdG8tZ28tYmFjayBnZXN0dXJlICh3aGVuIGJlaW5nIHVzZWQgaW4tYXBwKS5cbiAgZWRnZVN3aXBlRGV0ZWN0aW9uOiBmYWxzZSxcbiAgZWRnZVN3aXBlVGhyZXNob2xkOiAyMCxcbiAgLy8gQXV0b2hlaWdodFxuICBhdXRvSGVpZ2h0OiBmYWxzZSxcbiAgLy8gU2V0IHdyYXBwZXIgd2lkdGhcbiAgc2V0V3JhcHBlclNpemU6IGZhbHNlLFxuICAvLyBWaXJ0dWFsIFRyYW5zbGF0ZVxuICB2aXJ0dWFsVHJhbnNsYXRlOiBmYWxzZSxcbiAgLy8gRWZmZWN0c1xuICBlZmZlY3Q6ICdzbGlkZScsXG4gIC8vICdzbGlkZScgb3IgJ2ZhZGUnIG9yICdjdWJlJyBvciAnY292ZXJmbG93JyBvciAnZmxpcCdcbiAgLy8gQnJlYWtwb2ludHNcbiAgYnJlYWtwb2ludHM6IHVuZGVmaW5lZCxcbiAgYnJlYWtwb2ludHNCYXNlOiAnd2luZG93JyxcbiAgLy8gU2xpZGVzIGdyaWRcbiAgc3BhY2VCZXR3ZWVuOiAwLFxuICBzbGlkZXNQZXJWaWV3OiAxLFxuICBzbGlkZXNQZXJHcm91cDogMSxcbiAgc2xpZGVzUGVyR3JvdXBTa2lwOiAwLFxuICBzbGlkZXNQZXJHcm91cEF1dG86IGZhbHNlLFxuICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXG4gIGNlbnRlcmVkU2xpZGVzQm91bmRzOiBmYWxzZSxcbiAgc2xpZGVzT2Zmc2V0QmVmb3JlOiAwLFxuICAvLyBpbiBweFxuICBzbGlkZXNPZmZzZXRBZnRlcjogMCxcbiAgLy8gaW4gcHhcbiAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcbiAgY2VudGVySW5zdWZmaWNpZW50U2xpZGVzOiBmYWxzZSxcbiAgLy8gRGlzYWJsZSBzd2lwZXIgYW5kIGhpZGUgbmF2aWdhdGlvbiB3aGVuIGNvbnRhaW5lciBub3Qgb3ZlcmZsb3dcbiAgd2F0Y2hPdmVyZmxvdzogdHJ1ZSxcbiAgLy8gUm91bmQgbGVuZ3RoXG4gIHJvdW5kTGVuZ3RoczogZmFsc2UsXG4gIC8vIFRvdWNoZXNcbiAgdG91Y2hSYXRpbzogMSxcbiAgdG91Y2hBbmdsZTogNDUsXG4gIHNpbXVsYXRlVG91Y2g6IHRydWUsXG4gIHNob3J0U3dpcGVzOiB0cnVlLFxuICBsb25nU3dpcGVzOiB0cnVlLFxuICBsb25nU3dpcGVzUmF0aW86IDAuNSxcbiAgbG9uZ1N3aXBlc01zOiAzMDAsXG4gIGZvbGxvd0ZpbmdlcjogdHJ1ZSxcbiAgYWxsb3dUb3VjaE1vdmU6IHRydWUsXG4gIHRocmVzaG9sZDogMCxcbiAgdG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgdG91Y2hTdGFydFByZXZlbnREZWZhdWx0OiB0cnVlLFxuICB0b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdDogZmFsc2UsXG4gIHRvdWNoUmVsZWFzZU9uRWRnZXM6IGZhbHNlLFxuICAvLyBVbmlxdWUgTmF2aWdhdGlvbiBFbGVtZW50c1xuICB1bmlxdWVOYXZFbGVtZW50czogdHJ1ZSxcbiAgLy8gUmVzaXN0YW5jZVxuICByZXNpc3RhbmNlOiB0cnVlLFxuICByZXNpc3RhbmNlUmF0aW86IDAuODUsXG4gIC8vIFByb2dyZXNzXG4gIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IGZhbHNlLFxuICAvLyBDdXJzb3JcbiAgZ3JhYkN1cnNvcjogZmFsc2UsXG4gIC8vIENsaWNrc1xuICBwcmV2ZW50Q2xpY2tzOiB0cnVlLFxuICBwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb246IHRydWUsXG4gIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZhbHNlLFxuICAvLyBJbWFnZXNcbiAgcHJlbG9hZEltYWdlczogdHJ1ZSxcbiAgdXBkYXRlT25JbWFnZXNSZWFkeTogdHJ1ZSxcbiAgLy8gbG9vcFxuICBsb29wOiBmYWxzZSxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDAsXG4gIGxvb3BlZFNsaWRlczogbnVsbCxcbiAgbG9vcEZpbGxHcm91cFdpdGhCbGFuazogZmFsc2UsXG4gIGxvb3BQcmV2ZW50c1NsaWRlOiB0cnVlLFxuICAvLyByZXdpbmRcbiAgcmV3aW5kOiBmYWxzZSxcbiAgLy8gU3dpcGluZy9ubyBzd2lwaW5nXG4gIGFsbG93U2xpZGVQcmV2OiB0cnVlLFxuICBhbGxvd1NsaWRlTmV4dDogdHJ1ZSxcbiAgc3dpcGVIYW5kbGVyOiBudWxsLFxuICAvLyAnLnN3aXBlLWhhbmRsZXInLFxuICBub1N3aXBpbmc6IHRydWUsXG4gIG5vU3dpcGluZ0NsYXNzOiAnc3dpcGVyLW5vLXN3aXBpbmcnLFxuICBub1N3aXBpbmdTZWxlY3RvcjogbnVsbCxcbiAgLy8gUGFzc2l2ZSBMaXN0ZW5lcnNcbiAgcGFzc2l2ZUxpc3RlbmVyczogdHJ1ZSxcbiAgbWF4QmFja2ZhY2VIaWRkZW5TbGlkZXM6IDEwLFxuICAvLyBOU1xuICBjb250YWluZXJNb2RpZmllckNsYXNzOiAnc3dpcGVyLScsXG4gIC8vIE5FV1xuICBzbGlkZUNsYXNzOiAnc3dpcGVyLXNsaWRlJyxcbiAgc2xpZGVCbGFua0NsYXNzOiAnc3dpcGVyLXNsaWRlLWludmlzaWJsZS1ibGFuaycsXG4gIHNsaWRlQWN0aXZlQ2xhc3M6ICdzd2lwZXItc2xpZGUtYWN0aXZlJyxcbiAgc2xpZGVEdXBsaWNhdGVBY3RpdmVDbGFzczogJ3N3aXBlci1zbGlkZS1kdXBsaWNhdGUtYWN0aXZlJyxcbiAgc2xpZGVWaXNpYmxlQ2xhc3M6ICdzd2lwZXItc2xpZGUtdmlzaWJsZScsXG4gIHNsaWRlRHVwbGljYXRlQ2xhc3M6ICdzd2lwZXItc2xpZGUtZHVwbGljYXRlJyxcbiAgc2xpZGVOZXh0Q2xhc3M6ICdzd2lwZXItc2xpZGUtbmV4dCcsXG4gIHNsaWRlRHVwbGljYXRlTmV4dENsYXNzOiAnc3dpcGVyLXNsaWRlLWR1cGxpY2F0ZS1uZXh0JyxcbiAgc2xpZGVQcmV2Q2xhc3M6ICdzd2lwZXItc2xpZGUtcHJldicsXG4gIHNsaWRlRHVwbGljYXRlUHJldkNsYXNzOiAnc3dpcGVyLXNsaWRlLWR1cGxpY2F0ZS1wcmV2JyxcbiAgd3JhcHBlckNsYXNzOiAnc3dpcGVyLXdyYXBwZXInLFxuICAvLyBDYWxsYmFja3NcbiAgcnVuQ2FsbGJhY2tzT25Jbml0OiB0cnVlLFxuICAvLyBJbnRlcm5hbHNcbiAgX2VtaXRDbGFzc2VzOiBmYWxzZVxufTsiLCAiaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vZHVsZUV4dGVuZFBhcmFtcyhwYXJhbXMsIGFsbE1vZHVsZXNQYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGV4dGVuZFBhcmFtcyhvYmopIHtcbiAgICBpZiAob2JqID09PSB2b2lkIDApIHtcbiAgICAgIG9iaiA9IHt9O1xuICAgIH1cblxuICAgIGNvbnN0IG1vZHVsZVBhcmFtTmFtZSA9IE9iamVjdC5rZXlzKG9iailbMF07XG4gICAgY29uc3QgbW9kdWxlUGFyYW1zID0gb2JqW21vZHVsZVBhcmFtTmFtZV07XG5cbiAgICBpZiAodHlwZW9mIG1vZHVsZVBhcmFtcyAhPT0gJ29iamVjdCcgfHwgbW9kdWxlUGFyYW1zID09PSBudWxsKSB7XG4gICAgICBleHRlbmQoYWxsTW9kdWxlc1BhcmFtcywgb2JqKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoWyduYXZpZ2F0aW9uJywgJ3BhZ2luYXRpb24nLCAnc2Nyb2xsYmFyJ10uaW5kZXhPZihtb2R1bGVQYXJhbU5hbWUpID49IDAgJiYgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gPT09IHRydWUpIHtcbiAgICAgIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdID0ge1xuICAgICAgICBhdXRvOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKG1vZHVsZVBhcmFtTmFtZSBpbiBwYXJhbXMgJiYgJ2VuYWJsZWQnIGluIG1vZHVsZVBhcmFtcykpIHtcbiAgICAgIGV4dGVuZChhbGxNb2R1bGVzUGFyYW1zLCBvYmopO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gPSB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9PT0gJ29iamVjdCcgJiYgISgnZW5hYmxlZCcgaW4gcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0pKSB7XG4gICAgICBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXS5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIXBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdKSBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgICBleHRlbmQoYWxsTW9kdWxlc1BhcmFtcywgb2JqKTtcbiAgfTtcbn0iLCAiaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5pbXBvcnQgeyBzZXRDU1NQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWaXJ0dWFsKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uLFxuICAgIGVtaXRcbiAgfSA9IF9yZWY7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgdmlydHVhbDoge1xuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBzbGlkZXM6IFtdLFxuICAgICAgY2FjaGU6IHRydWUsXG4gICAgICByZW5kZXJTbGlkZTogbnVsbCxcbiAgICAgIHJlbmRlckV4dGVybmFsOiBudWxsLFxuICAgICAgcmVuZGVyRXh0ZXJuYWxVcGRhdGU6IHRydWUsXG4gICAgICBhZGRTbGlkZXNCZWZvcmU6IDAsXG4gICAgICBhZGRTbGlkZXNBZnRlcjogMFxuICAgIH1cbiAgfSk7XG4gIGxldCBjc3NNb2RlVGltZW91dDtcbiAgc3dpcGVyLnZpcnR1YWwgPSB7XG4gICAgY2FjaGU6IHt9LFxuICAgIGZyb206IHVuZGVmaW5lZCxcbiAgICB0bzogdW5kZWZpbmVkLFxuICAgIHNsaWRlczogW10sXG4gICAgb2Zmc2V0OiAwLFxuICAgIHNsaWRlc0dyaWQ6IFtdXG4gIH07XG5cbiAgZnVuY3Rpb24gcmVuZGVyU2xpZGUoc2xpZGUsIGluZGV4KSB7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsO1xuXG4gICAgaWYgKHBhcmFtcy5jYWNoZSAmJiBzd2lwZXIudmlydHVhbC5jYWNoZVtpbmRleF0pIHtcbiAgICAgIHJldHVybiBzd2lwZXIudmlydHVhbC5jYWNoZVtpbmRleF07XG4gICAgfVxuXG4gICAgY29uc3QgJHNsaWRlRWwgPSBwYXJhbXMucmVuZGVyU2xpZGUgPyAkKHBhcmFtcy5yZW5kZXJTbGlkZS5jYWxsKHN3aXBlciwgc2xpZGUsIGluZGV4KSkgOiAkKGA8ZGl2IGNsYXNzPVwiJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9XCIgZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke2luZGV4fVwiPiR7c2xpZGV9PC9kaXY+YCk7XG4gICAgaWYgKCEkc2xpZGVFbC5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpKSAkc2xpZGVFbC5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGluZGV4KTtcbiAgICBpZiAocGFyYW1zLmNhY2hlKSBzd2lwZXIudmlydHVhbC5jYWNoZVtpbmRleF0gPSAkc2xpZGVFbDtcbiAgICByZXR1cm4gJHNsaWRlRWw7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoZm9yY2UpIHtcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXNQZXJWaWV3LFxuICAgICAgc2xpZGVzUGVyR3JvdXAsXG4gICAgICBjZW50ZXJlZFNsaWRlc1xuICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgIGNvbnN0IHtcbiAgICAgIGFkZFNsaWRlc0JlZm9yZSxcbiAgICAgIGFkZFNsaWRlc0FmdGVyXG4gICAgfSA9IHN3aXBlci5wYXJhbXMudmlydHVhbDtcbiAgICBjb25zdCB7XG4gICAgICBmcm9tOiBwcmV2aW91c0Zyb20sXG4gICAgICB0bzogcHJldmlvdXNUbyxcbiAgICAgIHNsaWRlcyxcbiAgICAgIHNsaWRlc0dyaWQ6IHByZXZpb3VzU2xpZGVzR3JpZCxcbiAgICAgIG9mZnNldDogcHJldmlvdXNPZmZzZXRcbiAgICB9ID0gc3dpcGVyLnZpcnR1YWw7XG5cbiAgICBpZiAoIXN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXggfHwgMDtcbiAgICBsZXQgb2Zmc2V0UHJvcDtcbiAgICBpZiAoc3dpcGVyLnJ0bFRyYW5zbGF0ZSkgb2Zmc2V0UHJvcCA9ICdyaWdodCc7ZWxzZSBvZmZzZXRQcm9wID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgbGV0IHNsaWRlc0FmdGVyO1xuICAgIGxldCBzbGlkZXNCZWZvcmU7XG5cbiAgICBpZiAoY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgIHNsaWRlc0FmdGVyID0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyBzbGlkZXNQZXJHcm91cCArIGFkZFNsaWRlc0FmdGVyO1xuICAgICAgc2xpZGVzQmVmb3JlID0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyBzbGlkZXNQZXJHcm91cCArIGFkZFNsaWRlc0JlZm9yZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVzQWZ0ZXIgPSBzbGlkZXNQZXJWaWV3ICsgKHNsaWRlc1Blckdyb3VwIC0gMSkgKyBhZGRTbGlkZXNBZnRlcjtcbiAgICAgIHNsaWRlc0JlZm9yZSA9IHNsaWRlc1Blckdyb3VwICsgYWRkU2xpZGVzQmVmb3JlO1xuICAgIH1cblxuICAgIGNvbnN0IGZyb20gPSBNYXRoLm1heCgoYWN0aXZlSW5kZXggfHwgMCkgLSBzbGlkZXNCZWZvcmUsIDApO1xuICAgIGNvbnN0IHRvID0gTWF0aC5taW4oKGFjdGl2ZUluZGV4IHx8IDApICsgc2xpZGVzQWZ0ZXIsIHNsaWRlcy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBvZmZzZXQgPSAoc3dpcGVyLnNsaWRlc0dyaWRbZnJvbV0gfHwgMCkgLSAoc3dpcGVyLnNsaWRlc0dyaWRbMF0gfHwgMCk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudmlydHVhbCwge1xuICAgICAgZnJvbSxcbiAgICAgIHRvLFxuICAgICAgb2Zmc2V0LFxuICAgICAgc2xpZGVzR3JpZDogc3dpcGVyLnNsaWRlc0dyaWRcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG9uUmVuZGVyZWQoKSB7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG5cbiAgICAgIGlmIChzd2lwZXIubGF6eSAmJiBzd2lwZXIucGFyYW1zLmxhenkuZW5hYmxlZCkge1xuICAgICAgICBzd2lwZXIubGF6eS5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIGVtaXQoJ3ZpcnR1YWxVcGRhdGUnKTtcbiAgICB9XG5cbiAgICBpZiAocHJldmlvdXNGcm9tID09PSBmcm9tICYmIHByZXZpb3VzVG8gPT09IHRvICYmICFmb3JjZSkge1xuICAgICAgaWYgKHN3aXBlci5zbGlkZXNHcmlkICE9PSBwcmV2aW91c1NsaWRlc0dyaWQgJiYgb2Zmc2V0ICE9PSBwcmV2aW91c09mZnNldCkge1xuICAgICAgICBzd2lwZXIuc2xpZGVzLmNzcyhvZmZzZXRQcm9wLCBgJHtvZmZzZXR9cHhgKTtcbiAgICAgIH1cblxuICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgICBlbWl0KCd2aXJ0dWFsVXBkYXRlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbCkge1xuICAgICAgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsLmNhbGwoc3dpcGVyLCB7XG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgZnJvbSxcbiAgICAgICAgdG8sXG4gICAgICAgIHNsaWRlczogZnVuY3Rpb24gZ2V0U2xpZGVzKCkge1xuICAgICAgICAgIGNvbnN0IHNsaWRlc1RvUmVuZGVyID0gW107XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8PSB0bzsgaSArPSAxKSB7XG4gICAgICAgICAgICBzbGlkZXNUb1JlbmRlci5wdXNoKHNsaWRlc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHNsaWRlc1RvUmVuZGVyO1xuICAgICAgICB9KClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsVXBkYXRlKSB7XG4gICAgICAgIG9uUmVuZGVyZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVtaXQoJ3ZpcnR1YWxVcGRhdGUnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXBlbmRJbmRleGVzID0gW107XG4gICAgY29uc3QgYXBwZW5kSW5kZXhlcyA9IFtdO1xuXG4gICAgaWYgKGZvcmNlKSB7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC5maW5kKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9YCkucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSBwcmV2aW91c0Zyb207IGkgPD0gcHJldmlvdXNUbzsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpIDwgZnJvbSB8fCBpID4gdG8pIHtcbiAgICAgICAgICBzd2lwZXIuJHdyYXBwZXJFbC5maW5kKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtpfVwiXWApLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChpID49IGZyb20gJiYgaSA8PSB0bykge1xuICAgICAgICBpZiAodHlwZW9mIHByZXZpb3VzVG8gPT09ICd1bmRlZmluZWQnIHx8IGZvcmNlKSB7XG4gICAgICAgICAgYXBwZW5kSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpID4gcHJldmlvdXNUbykgYXBwZW5kSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgIGlmIChpIDwgcHJldmlvdXNGcm9tKSBwcmVwZW5kSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXBwZW5kSW5kZXhlcy5mb3JFYWNoKGluZGV4ID0+IHtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLmFwcGVuZChyZW5kZXJTbGlkZShzbGlkZXNbaW5kZXhdLCBpbmRleCkpO1xuICAgIH0pO1xuICAgIHByZXBlbmRJbmRleGVzLnNvcnQoKGEsIGIpID0+IGIgLSBhKS5mb3JFYWNoKGluZGV4ID0+IHtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLnByZXBlbmQocmVuZGVyU2xpZGUoc2xpZGVzW2luZGV4XSwgaW5kZXgpKTtcbiAgICB9KTtcbiAgICBzd2lwZXIuJHdyYXBwZXJFbC5jaGlsZHJlbignLnN3aXBlci1zbGlkZScpLmNzcyhvZmZzZXRQcm9wLCBgJHtvZmZzZXR9cHhgKTtcbiAgICBvblJlbmRlcmVkKCk7XG4gIH1cblxuICBmdW5jdGlvbiBhcHBlbmRTbGlkZShzbGlkZXMpIHtcbiAgICBpZiAodHlwZW9mIHNsaWRlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc2xpZGVzW2ldKSBzd2lwZXIudmlydHVhbC5zbGlkZXMucHVzaChzbGlkZXNbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMucHVzaChzbGlkZXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXBlbmRTbGlkZShzbGlkZXMpIHtcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleDtcbiAgICBsZXQgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleCArIDE7XG4gICAgbGV0IG51bWJlck9mTmV3U2xpZGVzID0gMTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KHNsaWRlcykpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0pIHN3aXBlci52aXJ0dWFsLnNsaWRlcy51bnNoaWZ0KHNsaWRlc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXggKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgbnVtYmVyT2ZOZXdTbGlkZXMgPSBzbGlkZXMubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMudW5zaGlmdChzbGlkZXMpO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwuY2FjaGUpIHtcbiAgICAgIGNvbnN0IGNhY2hlID0gc3dpcGVyLnZpcnR1YWwuY2FjaGU7XG4gICAgICBjb25zdCBuZXdDYWNoZSA9IHt9O1xuICAgICAgT2JqZWN0LmtleXMoY2FjaGUpLmZvckVhY2goY2FjaGVkSW5kZXggPT4ge1xuICAgICAgICBjb25zdCAkY2FjaGVkRWwgPSBjYWNoZVtjYWNoZWRJbmRleF07XG4gICAgICAgIGNvbnN0IGNhY2hlZEVsSW5kZXggPSAkY2FjaGVkRWwuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKTtcblxuICAgICAgICBpZiAoY2FjaGVkRWxJbmRleCkge1xuICAgICAgICAgICRjYWNoZWRFbC5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIHBhcnNlSW50KGNhY2hlZEVsSW5kZXgsIDEwKSArIG51bWJlck9mTmV3U2xpZGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld0NhY2hlW3BhcnNlSW50KGNhY2hlZEluZGV4LCAxMCkgKyBudW1iZXJPZk5ld1NsaWRlc10gPSAkY2FjaGVkRWw7XG4gICAgICB9KTtcbiAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlID0gbmV3Q2FjaGU7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRydWUpO1xuICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4LCAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVNsaWRlKHNsaWRlc0luZGV4ZXMpIHtcbiAgICBpZiAodHlwZW9mIHNsaWRlc0luZGV4ZXMgPT09ICd1bmRlZmluZWQnIHx8IHNsaWRlc0luZGV4ZXMgPT09IG51bGwpIHJldHVybjtcbiAgICBsZXQgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzbGlkZXNJbmRleGVzKSkge1xuICAgICAgZm9yIChsZXQgaSA9IHNsaWRlc0luZGV4ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzLnNwbGljZShzbGlkZXNJbmRleGVzW2ldLCAxKTtcblxuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmNhY2hlKSB7XG4gICAgICAgICAgZGVsZXRlIHN3aXBlci52aXJ0dWFsLmNhY2hlW3NsaWRlc0luZGV4ZXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNsaWRlc0luZGV4ZXNbaV0gPCBhY3RpdmVJbmRleCkgYWN0aXZlSW5kZXggLT0gMTtcbiAgICAgICAgYWN0aXZlSW5kZXggPSBNYXRoLm1heChhY3RpdmVJbmRleCwgMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcy5zcGxpY2Uoc2xpZGVzSW5kZXhlcywgMSk7XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwuY2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIHN3aXBlci52aXJ0dWFsLmNhY2hlW3NsaWRlc0luZGV4ZXNdO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2xpZGVzSW5kZXhlcyA8IGFjdGl2ZUluZGV4KSBhY3RpdmVJbmRleCAtPSAxO1xuICAgICAgYWN0aXZlSW5kZXggPSBNYXRoLm1heChhY3RpdmVJbmRleCwgMCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRydWUpO1xuICAgIHN3aXBlci5zbGlkZVRvKGFjdGl2ZUluZGV4LCAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbFNsaWRlcygpIHtcbiAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMgPSBbXTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwuY2FjaGUpIHtcbiAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlID0ge307XG4gICAgfVxuXG4gICAgdXBkYXRlKHRydWUpO1xuICAgIHN3aXBlci5zbGlkZVRvKDAsIDApO1xuICB9XG5cbiAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcyA9IHN3aXBlci5wYXJhbXMudmlydHVhbC5zbGlkZXM7XG4gICAgc3dpcGVyLmNsYXNzTmFtZXMucHVzaChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9dmlydHVhbGApO1xuICAgIHN3aXBlci5wYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gICAgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgPSB0cnVlO1xuXG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmluaXRpYWxTbGlkZSkge1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ3NldFRyYW5zbGF0ZScsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlICYmICFzd2lwZXIuX2ltbWVkaWF0ZVZpcnR1YWwpIHtcbiAgICAgIGNsZWFyVGltZW91dChjc3NNb2RlVGltZW91dCk7XG4gICAgICBjc3NNb2RlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfSk7XG4gIG9uKCdpbml0IHVwZGF0ZSByZXNpemUnLCAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc2V0Q1NTUHJvcGVydHkoc3dpcGVyLndyYXBwZXJFbCwgJy0tc3dpcGVyLXZpcnR1YWwtc2l6ZScsIGAke3N3aXBlci52aXJ0dWFsU2l6ZX1weGApO1xuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5hc3NpZ24oc3dpcGVyLnZpcnR1YWwsIHtcbiAgICBhcHBlbmRTbGlkZSxcbiAgICBwcmVwZW5kU2xpZGUsXG4gICAgcmVtb3ZlU2xpZGUsXG4gICAgcmVtb3ZlQWxsU2xpZGVzLFxuICAgIHVwZGF0ZVxuICB9KTtcbn0iLCAiLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbmltcG9ydCB7IGdldFdpbmRvdywgZ2V0RG9jdW1lbnQgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gS2V5Ym9hcmQoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb24sXG4gICAgZW1pdFxuICB9ID0gX3JlZjtcbiAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgc3dpcGVyLmtleWJvYXJkID0ge1xuICAgIGVuYWJsZWQ6IGZhbHNlXG4gIH07XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAga2V5Ym9hcmQ6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXG4gICAgICBwYWdlVXBEb3duOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgY29uc3Qge1xuICAgICAgcnRsVHJhbnNsYXRlOiBydGxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCBlID0gZXZlbnQ7XG4gICAgaWYgKGUub3JpZ2luYWxFdmVudCkgZSA9IGUub3JpZ2luYWxFdmVudDsgLy8ganF1ZXJ5IGZpeFxuXG4gICAgY29uc3Qga2MgPSBlLmtleUNvZGUgfHwgZS5jaGFyQ29kZTtcbiAgICBjb25zdCBwYWdlVXBEb3duID0gc3dpcGVyLnBhcmFtcy5rZXlib2FyZC5wYWdlVXBEb3duO1xuICAgIGNvbnN0IGlzUGFnZVVwID0gcGFnZVVwRG93biAmJiBrYyA9PT0gMzM7XG4gICAgY29uc3QgaXNQYWdlRG93biA9IHBhZ2VVcERvd24gJiYga2MgPT09IDM0O1xuICAgIGNvbnN0IGlzQXJyb3dMZWZ0ID0ga2MgPT09IDM3O1xuICAgIGNvbnN0IGlzQXJyb3dSaWdodCA9IGtjID09PSAzOTtcbiAgICBjb25zdCBpc0Fycm93VXAgPSBrYyA9PT0gMzg7XG4gICAgY29uc3QgaXNBcnJvd0Rvd24gPSBrYyA9PT0gNDA7IC8vIERpcmVjdGlvbnMgbG9ja3NcblxuICAgIGlmICghc3dpcGVyLmFsbG93U2xpZGVOZXh0ICYmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkgJiYgaXNBcnJvd1JpZ2h0IHx8IHN3aXBlci5pc1ZlcnRpY2FsKCkgJiYgaXNBcnJvd0Rvd24gfHwgaXNQYWdlRG93bikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpICYmIGlzQXJyb3dMZWZ0IHx8IHN3aXBlci5pc1ZlcnRpY2FsKCkgJiYgaXNBcnJvd1VwIHx8IGlzUGFnZVVwKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZSAmJiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RleHRhcmVhJykpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMua2V5Ym9hcmQub25seUluVmlld3BvcnQgJiYgKGlzUGFnZVVwIHx8IGlzUGFnZURvd24gfHwgaXNBcnJvd0xlZnQgfHwgaXNBcnJvd1JpZ2h0IHx8IGlzQXJyb3dVcCB8fCBpc0Fycm93RG93bikpIHtcbiAgICAgIGxldCBpblZpZXcgPSBmYWxzZTsgLy8gQ2hlY2sgdGhhdCBzd2lwZXIgc2hvdWxkIGJlIGluc2lkZSBvZiB2aXNpYmxlIGFyZWEgb2Ygd2luZG93XG5cbiAgICAgIGlmIChzd2lwZXIuJGVsLnBhcmVudHMoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gKS5sZW5ndGggPiAwICYmIHN3aXBlci4kZWwucGFyZW50cyhgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzfWApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCAkZWwgPSBzd2lwZXIuJGVsO1xuICAgICAgY29uc3Qgc3dpcGVyV2lkdGggPSAkZWxbMF0uY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCBzd2lwZXJIZWlnaHQgPSAkZWxbMF0uY2xpZW50SGVpZ2h0O1xuICAgICAgY29uc3Qgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIGNvbnN0IHN3aXBlck9mZnNldCA9IHN3aXBlci4kZWwub2Zmc2V0KCk7XG4gICAgICBpZiAocnRsKSBzd2lwZXJPZmZzZXQubGVmdCAtPSBzd2lwZXIuJGVsWzBdLnNjcm9sbExlZnQ7XG4gICAgICBjb25zdCBzd2lwZXJDb29yZCA9IFtbc3dpcGVyT2Zmc2V0LmxlZnQsIHN3aXBlck9mZnNldC50b3BdLCBbc3dpcGVyT2Zmc2V0LmxlZnQgKyBzd2lwZXJXaWR0aCwgc3dpcGVyT2Zmc2V0LnRvcF0sIFtzd2lwZXJPZmZzZXQubGVmdCwgc3dpcGVyT2Zmc2V0LnRvcCArIHN3aXBlckhlaWdodF0sIFtzd2lwZXJPZmZzZXQubGVmdCArIHN3aXBlcldpZHRoLCBzd2lwZXJPZmZzZXQudG9wICsgc3dpcGVySGVpZ2h0XV07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyQ29vcmQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBzd2lwZXJDb29yZFtpXTtcblxuICAgICAgICBpZiAocG9pbnRbMF0gPj0gMCAmJiBwb2ludFswXSA8PSB3aW5kb3dXaWR0aCAmJiBwb2ludFsxXSA+PSAwICYmIHBvaW50WzFdIDw9IHdpbmRvd0hlaWdodCkge1xuICAgICAgICAgIGlmIChwb2ludFswXSA9PT0gMCAmJiBwb2ludFsxXSA9PT0gMCkgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgICAgICAgIGluVmlldyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFpblZpZXcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgaWYgKGlzUGFnZVVwIHx8IGlzUGFnZURvd24gfHwgaXNBcnJvd0xlZnQgfHwgaXNBcnJvd1JpZ2h0KSB7XG4gICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICgoaXNQYWdlRG93biB8fCBpc0Fycm93UmlnaHQpICYmICFydGwgfHwgKGlzUGFnZVVwIHx8IGlzQXJyb3dMZWZ0KSAmJiBydGwpIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgIGlmICgoaXNQYWdlVXAgfHwgaXNBcnJvd0xlZnQpICYmICFydGwgfHwgKGlzUGFnZURvd24gfHwgaXNBcnJvd1JpZ2h0KSAmJiBydGwpIHN3aXBlci5zbGlkZVByZXYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUGFnZVVwIHx8IGlzUGFnZURvd24gfHwgaXNBcnJvd1VwIHx8IGlzQXJyb3dEb3duKSB7XG4gICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1BhZ2VEb3duIHx8IGlzQXJyb3dEb3duKSBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgICBpZiAoaXNQYWdlVXAgfHwgaXNBcnJvd1VwKSBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgfVxuXG4gICAgZW1pdCgna2V5UHJlc3MnLCBrYyk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICBpZiAoc3dpcGVyLmtleWJvYXJkLmVuYWJsZWQpIHJldHVybjtcbiAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGhhbmRsZSk7XG4gICAgc3dpcGVyLmtleWJvYXJkLmVuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBpZiAoIXN3aXBlci5rZXlib2FyZC5lbmFibGVkKSByZXR1cm47XG4gICAgJChkb2N1bWVudCkub2ZmKCdrZXlkb3duJywgaGFuZGxlKTtcbiAgICBzd2lwZXIua2V5Ym9hcmQuZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMua2V5Ym9hcmQuZW5hYmxlZCkge1xuICAgICAgZW5hYmxlKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5rZXlib2FyZC5lbmFibGVkKSB7XG4gICAgICBkaXNhYmxlKCk7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIua2V5Ym9hcmQsIHtcbiAgICBlbmFibGUsXG4gICAgZGlzYWJsZVxuICB9KTtcbn0iLCAiLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbmltcG9ydCB7IGdldFdpbmRvdyB9IGZyb20gJ3Nzci13aW5kb3cnO1xuaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5pbXBvcnQgeyBub3csIG5leHRUaWNrIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1vdXNld2hlZWwoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb24sXG4gICAgZW1pdFxuICB9ID0gX3JlZjtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgbW91c2V3aGVlbDoge1xuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICByZWxlYXNlT25FZGdlczogZmFsc2UsXG4gICAgICBpbnZlcnQ6IGZhbHNlLFxuICAgICAgZm9yY2VUb0F4aXM6IGZhbHNlLFxuICAgICAgc2Vuc2l0aXZpdHk6IDEsXG4gICAgICBldmVudHNUYXJnZXQ6ICdjb250YWluZXInLFxuICAgICAgdGhyZXNob2xkRGVsdGE6IG51bGwsXG4gICAgICB0aHJlc2hvbGRUaW1lOiBudWxsXG4gICAgfVxuICB9KTtcbiAgc3dpcGVyLm1vdXNld2hlZWwgPSB7XG4gICAgZW5hYmxlZDogZmFsc2VcbiAgfTtcbiAgbGV0IHRpbWVvdXQ7XG4gIGxldCBsYXN0U2Nyb2xsVGltZSA9IG5vdygpO1xuICBsZXQgbGFzdEV2ZW50QmVmb3JlU25hcDtcbiAgY29uc3QgcmVjZW50V2hlZWxFdmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBub3JtYWxpemUoZSkge1xuICAgIC8vIFJlYXNvbmFibGUgZGVmYXVsdHNcbiAgICBjb25zdCBQSVhFTF9TVEVQID0gMTA7XG4gICAgY29uc3QgTElORV9IRUlHSFQgPSA0MDtcbiAgICBjb25zdCBQQUdFX0hFSUdIVCA9IDgwMDtcbiAgICBsZXQgc1ggPSAwO1xuICAgIGxldCBzWSA9IDA7IC8vIHNwaW5YLCBzcGluWVxuXG4gICAgbGV0IHBYID0gMDtcbiAgICBsZXQgcFkgPSAwOyAvLyBwaXhlbFgsIHBpeGVsWVxuICAgIC8vIExlZ2FjeVxuXG4gICAgaWYgKCdkZXRhaWwnIGluIGUpIHtcbiAgICAgIHNZID0gZS5kZXRhaWw7XG4gICAgfVxuXG4gICAgaWYgKCd3aGVlbERlbHRhJyBpbiBlKSB7XG4gICAgICBzWSA9IC1lLndoZWVsRGVsdGEgLyAxMjA7XG4gICAgfVxuXG4gICAgaWYgKCd3aGVlbERlbHRhWScgaW4gZSkge1xuICAgICAgc1kgPSAtZS53aGVlbERlbHRhWSAvIDEyMDtcbiAgICB9XG5cbiAgICBpZiAoJ3doZWVsRGVsdGFYJyBpbiBlKSB7XG4gICAgICBzWCA9IC1lLndoZWVsRGVsdGFYIC8gMTIwO1xuICAgIH0gLy8gc2lkZSBzY3JvbGxpbmcgb24gRkYgd2l0aCBET01Nb3VzZVNjcm9sbFxuXG5cbiAgICBpZiAoJ2F4aXMnIGluIGUgJiYgZS5heGlzID09PSBlLkhPUklaT05UQUxfQVhJUykge1xuICAgICAgc1ggPSBzWTtcbiAgICAgIHNZID0gMDtcbiAgICB9XG5cbiAgICBwWCA9IHNYICogUElYRUxfU1RFUDtcbiAgICBwWSA9IHNZICogUElYRUxfU1RFUDtcblxuICAgIGlmICgnZGVsdGFZJyBpbiBlKSB7XG4gICAgICBwWSA9IGUuZGVsdGFZO1xuICAgIH1cblxuICAgIGlmICgnZGVsdGFYJyBpbiBlKSB7XG4gICAgICBwWCA9IGUuZGVsdGFYO1xuICAgIH1cblxuICAgIGlmIChlLnNoaWZ0S2V5ICYmICFwWCkge1xuICAgICAgLy8gaWYgdXNlciBzY3JvbGxzIHdpdGggc2hpZnQgaGUgd2FudHMgaG9yaXpvbnRhbCBzY3JvbGxcbiAgICAgIHBYID0gcFk7XG4gICAgICBwWSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKChwWCB8fCBwWSkgJiYgZS5kZWx0YU1vZGUpIHtcbiAgICAgIGlmIChlLmRlbHRhTW9kZSA9PT0gMSkge1xuICAgICAgICAvLyBkZWx0YSBpbiBMSU5FIHVuaXRzXG4gICAgICAgIHBYICo9IExJTkVfSEVJR0hUO1xuICAgICAgICBwWSAqPSBMSU5FX0hFSUdIVDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRlbHRhIGluIFBBR0UgdW5pdHNcbiAgICAgICAgcFggKj0gUEFHRV9IRUlHSFQ7XG4gICAgICAgIHBZICo9IFBBR0VfSEVJR0hUO1xuICAgICAgfVxuICAgIH0gLy8gRmFsbC1iYWNrIGlmIHNwaW4gY2Fubm90IGJlIGRldGVybWluZWRcblxuXG4gICAgaWYgKHBYICYmICFzWCkge1xuICAgICAgc1ggPSBwWCA8IDEgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgaWYgKHBZICYmICFzWSkge1xuICAgICAgc1kgPSBwWSA8IDEgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNwaW5YOiBzWCxcbiAgICAgIHNwaW5ZOiBzWSxcbiAgICAgIHBpeGVsWDogcFgsXG4gICAgICBwaXhlbFk6IHBZXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgaWYgKCFzd2lwZXIuZW5hYmxlZCkgcmV0dXJuO1xuICAgIHN3aXBlci5tb3VzZUVudGVyZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VMZWF2ZSgpIHtcbiAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgc3dpcGVyLm1vdXNlRW50ZXJlZCA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gYW5pbWF0ZVNsaWRlcihuZXdFdmVudCkge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkRGVsdGEgJiYgbmV3RXZlbnQuZGVsdGEgPCBzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkRGVsdGEpIHtcbiAgICAgIC8vIFByZXZlbnQgaWYgZGVsdGEgb2Ygd2hlZWwgc2Nyb2xsIGRlbHRhIGlzIGJlbG93IGNvbmZpZ3VyZWQgdGhyZXNob2xkXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGRUaW1lICYmIG5vdygpIC0gbGFzdFNjcm9sbFRpbWUgPCBzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkVGltZSkge1xuICAgICAgLy8gUHJldmVudCBpZiB0aW1lIGJldHdlZW4gc2Nyb2xscyBpcyBiZWxvdyBjb25maWd1cmVkIHRocmVzaG9sZFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gSWYgdGhlIG1vdmVtZW50IGlzIE5PVCBiaWcgZW5vdWdoIGFuZFxuICAgIC8vIGlmIHRoZSBsYXN0IHRpbWUgdGhlIHVzZXIgc2Nyb2xsZWQgd2FzIHRvbyBjbG9zZSB0byB0aGUgY3VycmVudCBvbmUgKGF2b2lkIGNvbnRpbnVvdXNseSB0cmlnZ2VyaW5nIHRoZSBzbGlkZXIpOlxuICAgIC8vICAgRG9uJ3QgZ28gYW55IGZ1cnRoZXIgKGF2b2lkIGluc2lnbmlmaWNhbnQgc2Nyb2xsIG1vdmVtZW50KS5cblxuXG4gICAgaWYgKG5ld0V2ZW50LmRlbHRhID49IDYgJiYgbm93KCkgLSBsYXN0U2Nyb2xsVGltZSA8IDYwKSB7XG4gICAgICAvLyBSZXR1cm4gZmFsc2UgYXMgYSBkZWZhdWx0XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IC8vIElmIHVzZXIgaXMgc2Nyb2xsaW5nIHRvd2FyZHMgdGhlIGVuZDpcbiAgICAvLyAgIElmIHRoZSBzbGlkZXIgaGFzbid0IGhpdCB0aGUgbGF0ZXN0IHNsaWRlIG9yXG4gICAgLy8gICBpZiB0aGUgc2xpZGVyIGlzIGEgbG9vcCBhbmRcbiAgICAvLyAgIGlmIHRoZSBzbGlkZXIgaXNuJ3QgbW92aW5nIHJpZ2h0IG5vdzpcbiAgICAvLyAgICAgR28gdG8gbmV4dCBzbGlkZSBhbmRcbiAgICAvLyAgICAgZW1pdCBhIHNjcm9sbCBldmVudC5cbiAgICAvLyBFbHNlICh0aGUgdXNlciBpcyBzY3JvbGxpbmcgdG93YXJkcyB0aGUgYmVnaW5uaW5nKSBhbmRcbiAgICAvLyBpZiB0aGUgc2xpZGVyIGhhc24ndCBoaXQgdGhlIGZpcnN0IHNsaWRlIG9yXG4gICAgLy8gaWYgdGhlIHNsaWRlciBpcyBhIGxvb3AgYW5kXG4gICAgLy8gaWYgdGhlIHNsaWRlciBpc24ndCBtb3ZpbmcgcmlnaHQgbm93OlxuICAgIC8vICAgR28gdG8gcHJldiBzbGlkZSBhbmRcbiAgICAvLyAgIGVtaXQgYSBzY3JvbGwgZXZlbnQuXG5cblxuICAgIGlmIChuZXdFdmVudC5kaXJlY3Rpb24gPCAwKSB7XG4gICAgICBpZiAoKCFzd2lwZXIuaXNFbmQgfHwgc3dpcGVyLnBhcmFtcy5sb29wKSAmJiAhc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgICAgIGVtaXQoJ3Njcm9sbCcsIG5ld0V2ZW50LnJhdyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoIXN3aXBlci5pc0JlZ2lubmluZyB8fCBzd2lwZXIucGFyYW1zLmxvb3ApICYmICFzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICBlbWl0KCdzY3JvbGwnLCBuZXdFdmVudC5yYXcpO1xuICAgIH0gLy8gSWYgeW91IGdvdCBoZXJlIGlzIGJlY2F1c2UgYW4gYW5pbWF0aW9uIGhhcyBiZWVuIHRyaWdnZXJlZCBzbyBzdG9yZSB0aGUgY3VycmVudCB0aW1lXG5cblxuICAgIGxhc3RTY3JvbGxUaW1lID0gbmV3IHdpbmRvdy5EYXRlKCkuZ2V0VGltZSgpOyAvLyBSZXR1cm4gZmFsc2UgYXMgYSBkZWZhdWx0XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiByZWxlYXNlU2Nyb2xsKG5ld0V2ZW50KSB7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsO1xuXG4gICAgaWYgKG5ld0V2ZW50LmRpcmVjdGlvbiA8IDApIHtcbiAgICAgIGlmIChzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiBwYXJhbXMucmVsZWFzZU9uRWRnZXMpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRydWUgdG8gYW5pbWF0ZSBzY3JvbGwgb24gZWRnZXNcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiBwYXJhbXMucmVsZWFzZU9uRWRnZXMpIHtcbiAgICAgIC8vIFJldHVybiB0cnVlIHRvIGFuaW1hdGUgc2Nyb2xsIG9uIGVkZ2VzXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICBsZXQgZSA9IGV2ZW50O1xuICAgIGxldCBkaXNhYmxlUGFyZW50U3dpcGVyID0gdHJ1ZTtcbiAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGxldCB0YXJnZXQgPSBzd2lwZXIuJGVsO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQgIT09ICdjb250YWluZXInKSB7XG4gICAgICB0YXJnZXQgPSAkKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQpO1xuICAgIH1cblxuICAgIGlmICghc3dpcGVyLm1vdXNlRW50ZXJlZCAmJiAhdGFyZ2V0WzBdLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiAhcGFyYW1zLnJlbGVhc2VPbkVkZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZS5vcmlnaW5hbEV2ZW50KSBlID0gZS5vcmlnaW5hbEV2ZW50OyAvLyBqcXVlcnkgZml4XG5cbiAgICBsZXQgZGVsdGEgPSAwO1xuICAgIGNvbnN0IHJ0bEZhY3RvciA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtMSA6IDE7XG4gICAgY29uc3QgZGF0YSA9IG5vcm1hbGl6ZShlKTtcblxuICAgIGlmIChwYXJhbXMuZm9yY2VUb0F4aXMpIHtcbiAgICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRhdGEucGl4ZWxYKSA+IE1hdGguYWJzKGRhdGEucGl4ZWxZKSkgZGVsdGEgPSAtZGF0YS5waXhlbFggKiBydGxGYWN0b3I7ZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoZGF0YS5waXhlbFkpID4gTWF0aC5hYnMoZGF0YS5waXhlbFgpKSBkZWx0YSA9IC1kYXRhLnBpeGVsWTtlbHNlIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWx0YSA9IE1hdGguYWJzKGRhdGEucGl4ZWxYKSA+IE1hdGguYWJzKGRhdGEucGl4ZWxZKSA/IC1kYXRhLnBpeGVsWCAqIHJ0bEZhY3RvciA6IC1kYXRhLnBpeGVsWTtcbiAgICB9XG5cbiAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybiB0cnVlO1xuICAgIGlmIChwYXJhbXMuaW52ZXJ0KSBkZWx0YSA9IC1kZWx0YTsgLy8gR2V0IHRoZSBzY3JvbGwgcG9zaXRpb25zXG5cbiAgICBsZXQgcG9zaXRpb25zID0gc3dpcGVyLmdldFRyYW5zbGF0ZSgpICsgZGVsdGEgKiBwYXJhbXMuc2Vuc2l0aXZpdHk7XG4gICAgaWYgKHBvc2l0aW9ucyA+PSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHBvc2l0aW9ucyA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICBpZiAocG9zaXRpb25zIDw9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkgcG9zaXRpb25zID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpOyAvLyBXaGVuIGxvb3AgaXMgdHJ1ZTpcbiAgICAvLyAgICAgdGhlIGRpc2FibGVQYXJlbnRTd2lwZXIgd2lsbCBiZSB0cnVlLlxuICAgIC8vIFdoZW4gbG9vcCBpcyBmYWxzZTpcbiAgICAvLyAgICAgaWYgdGhlIHNjcm9sbCBwb3NpdGlvbnMgaXMgbm90IG9uIGVkZ2UsXG4gICAgLy8gICAgIHRoZW4gdGhlIGRpc2FibGVQYXJlbnRTd2lwZXIgd2lsbCBiZSB0cnVlLlxuICAgIC8vICAgICBpZiB0aGUgc2Nyb2xsIG9uIGVkZ2UgcG9zaXRpb25zLFxuICAgIC8vICAgICB0aGVuIHRoZSBkaXNhYmxlUGFyZW50U3dpcGVyIHdpbGwgYmUgZmFsc2UuXG5cbiAgICBkaXNhYmxlUGFyZW50U3dpcGVyID0gc3dpcGVyLnBhcmFtcy5sb29wID8gdHJ1ZSA6ICEocG9zaXRpb25zID09PSBzd2lwZXIubWluVHJhbnNsYXRlKCkgfHwgcG9zaXRpb25zID09PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkpO1xuICAgIGlmIChkaXNhYmxlUGFyZW50U3dpcGVyICYmIHN3aXBlci5wYXJhbXMubmVzdGVkKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmZyZWVNb2RlIHx8ICFzd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQpIHtcbiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBuZXcgZXZlbnQgaW4gYSB2YXJpYWJsZSB3aGljaCBzdG9yZXMgdGhlIHJlbGV2YW50IGRhdGFcbiAgICAgIGNvbnN0IG5ld0V2ZW50ID0ge1xuICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgZGVsdGE6IE1hdGguYWJzKGRlbHRhKSxcbiAgICAgICAgZGlyZWN0aW9uOiBNYXRoLnNpZ24oZGVsdGEpLFxuICAgICAgICByYXc6IGV2ZW50XG4gICAgICB9OyAvLyBLZWVwIHRoZSBtb3N0IHJlY2VudCBldmVudHNcblxuICAgICAgaWYgKHJlY2VudFdoZWVsRXZlbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnNoaWZ0KCk7IC8vIG9ubHkgc3RvcmUgdGhlIGxhc3QgTiBldmVudHNcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJldkV2ZW50ID0gcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID8gcmVjZW50V2hlZWxFdmVudHNbcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgICByZWNlbnRXaGVlbEV2ZW50cy5wdXNoKG5ld0V2ZW50KTsgLy8gSWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHByZXZpb3VzIHJlY29yZGVkIGV2ZW50OlxuICAgICAgLy8gICBJZiBkaXJlY3Rpb24gaGFzIGNoYW5nZWQgb3JcbiAgICAgIC8vICAgaWYgdGhlIHNjcm9sbCBpcyBxdWlja2VyIHRoYW4gdGhlIHByZXZpb3VzIG9uZTpcbiAgICAgIC8vICAgICBBbmltYXRlIHRoZSBzbGlkZXIuXG4gICAgICAvLyBFbHNlICh0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoZSB3aGVlbCBpcyBtb3ZlZCk6XG4gICAgICAvLyAgICAgQW5pbWF0ZSB0aGUgc2xpZGVyLlxuXG4gICAgICBpZiAocHJldkV2ZW50KSB7XG4gICAgICAgIGlmIChuZXdFdmVudC5kaXJlY3Rpb24gIT09IHByZXZFdmVudC5kaXJlY3Rpb24gfHwgbmV3RXZlbnQuZGVsdGEgPiBwcmV2RXZlbnQuZGVsdGEgfHwgbmV3RXZlbnQudGltZSA+IHByZXZFdmVudC50aW1lICsgMTUwKSB7XG4gICAgICAgICAgYW5pbWF0ZVNsaWRlcihuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaW1hdGVTbGlkZXIobmV3RXZlbnQpO1xuICAgICAgfSAvLyBJZiBpdCdzIHRpbWUgdG8gcmVsZWFzZSB0aGUgc2Nyb2xsOlxuICAgICAgLy8gICBSZXR1cm4gbm93IHNvIHlvdSBkb24ndCBoaXQgdGhlIHByZXZlbnREZWZhdWx0LlxuXG5cbiAgICAgIGlmIChyZWxlYXNlU2Nyb2xsKG5ld0V2ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRnJlZW1vZGUgb3Igc2Nyb2xsQ29udGFpbmVyOlxuICAgICAgLy8gSWYgd2UgcmVjZW50bHkgc25hcHBlZCBhZnRlciBhIG1vbWVudHVtIHNjcm9sbCwgdGhlbiBpZ25vcmUgd2hlZWwgZXZlbnRzXG4gICAgICAvLyB0byBnaXZlIHRpbWUgZm9yIHRoZSBkZWNlbGVyYXRpb24gdG8gZmluaXNoLiBTdG9wIGlnbm9yaW5nIGFmdGVyIDUwMCBtc2Vjc1xuICAgICAgLy8gb3IgaWYgaXQncyBhIG5ldyBzY3JvbGwgKGxhcmdlciBkZWx0YSBvciBpbnZlcnNlIHNpZ24gYXMgbGFzdCBldmVudCBiZWZvcmVcbiAgICAgIC8vIGFuIGVuZC1vZi1tb21lbnR1bSBzbmFwKS5cbiAgICAgIGNvbnN0IG5ld0V2ZW50ID0ge1xuICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgZGVsdGE6IE1hdGguYWJzKGRlbHRhKSxcbiAgICAgICAgZGlyZWN0aW9uOiBNYXRoLnNpZ24oZGVsdGEpXG4gICAgICB9O1xuICAgICAgY29uc3QgaWdub3JlV2hlZWxFdmVudHMgPSBsYXN0RXZlbnRCZWZvcmVTbmFwICYmIG5ld0V2ZW50LnRpbWUgPCBsYXN0RXZlbnRCZWZvcmVTbmFwLnRpbWUgKyA1MDAgJiYgbmV3RXZlbnQuZGVsdGEgPD0gbGFzdEV2ZW50QmVmb3JlU25hcC5kZWx0YSAmJiBuZXdFdmVudC5kaXJlY3Rpb24gPT09IGxhc3RFdmVudEJlZm9yZVNuYXAuZGlyZWN0aW9uO1xuXG4gICAgICBpZiAoIWlnbm9yZVdoZWVsRXZlbnRzKSB7XG4gICAgICAgIGxhc3RFdmVudEJlZm9yZVNuYXAgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgICAgIHN3aXBlci5sb29wRml4KCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9zaXRpb24gPSBzd2lwZXIuZ2V0VHJhbnNsYXRlKCkgKyBkZWx0YSAqIHBhcmFtcy5zZW5zaXRpdml0eTtcbiAgICAgICAgY29uc3Qgd2FzQmVnaW5uaW5nID0gc3dpcGVyLmlzQmVnaW5uaW5nO1xuICAgICAgICBjb25zdCB3YXNFbmQgPSBzd2lwZXIuaXNFbmQ7XG4gICAgICAgIGlmIChwb3NpdGlvbiA+PSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHBvc2l0aW9uID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgICBpZiAocG9zaXRpb24gPD0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSBwb3NpdGlvbiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oMCk7XG4gICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUocG9zaXRpb24pO1xuICAgICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG5cbiAgICAgICAgaWYgKCF3YXNCZWdpbm5pbmcgJiYgc3dpcGVyLmlzQmVnaW5uaW5nIHx8ICF3YXNFbmQgJiYgc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgIC8vIFdoZW4gd2hlZWwgc2Nyb2xsaW5nIHN0YXJ0cyB3aXRoIHN0aWNreSAoYWthIHNuYXApIGVuYWJsZWQsIHRoZW4gZGV0ZWN0XG4gICAgICAgICAgLy8gdGhlIGVuZCBvZiBhIG1vbWVudHVtIHNjcm9sbCBieSBzdG9yaW5nIHJlY2VudCAoTj0xNT8pIHdoZWVsIGV2ZW50cy5cbiAgICAgICAgICAvLyAxLiBkbyBhbGwgTiBldmVudHMgaGF2ZSBkZWNyZWFzaW5nIG9yIHNhbWUgKGFic29sdXRlIHZhbHVlKSBkZWx0YT9cbiAgICAgICAgICAvLyAyLiBkaWQgYWxsIE4gZXZlbnRzIGFycml2ZSBpbiB0aGUgbGFzdCBNIChNPTUwMD8pIG1zZWNzP1xuICAgICAgICAgIC8vIDMuIGRvZXMgdGhlIGVhcmxpZXN0IGV2ZW50IGhhdmUgYW4gKGFic29sdXRlIHZhbHVlKSBkZWx0YSB0aGF0J3NcbiAgICAgICAgICAvLyAgICBhdCBsZWFzdCBQIChQPTE/KSBsYXJnZXIgdGhhbiB0aGUgbW9zdCByZWNlbnQgZXZlbnQncyBkZWx0YT9cbiAgICAgICAgICAvLyA0LiBkb2VzIHRoZSBsYXRlc3QgZXZlbnQgaGF2ZSBhIGRlbHRhIHRoYXQncyBzbWFsbGVyIHRoYW4gUSAoUT02PykgcGl4ZWxzP1xuICAgICAgICAgIC8vIElmIDEtNCBhcmUgXCJ5ZXNcIiB0aGVuIHdlJ3JlIG5lYXIgdGhlIGVuZCBvZiBhIG1vbWVudHVtIHNjcm9sbCBkZWNlbGVyYXRpb24uXG4gICAgICAgICAgLy8gU25hcCBpbW1lZGlhdGVseSBhbmQgaWdub3JlIHJlbWFpbmluZyB3aGVlbCBldmVudHMgaW4gdGhpcyBzY3JvbGwuXG4gICAgICAgICAgLy8gU2VlIGNvbW1lbnQgYWJvdmUgZm9yIFwicmVtYWluaW5nIHdoZWVsIGV2ZW50cyBpbiB0aGlzIHNjcm9sbFwiIGRldGVybWluYXRpb24uXG4gICAgICAgICAgLy8gSWYgMS00IGFyZW4ndCBzYXRpc2ZpZWQsIHRoZW4gd2FpdCB0byBzbmFwIHVudGlsIDUwMG1zIGFmdGVyIHRoZSBsYXN0IGV2ZW50LlxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaWYgKHJlY2VudFdoZWVsRXZlbnRzLmxlbmd0aCA+PSAxNSkge1xuICAgICAgICAgICAgcmVjZW50V2hlZWxFdmVudHMuc2hpZnQoKTsgLy8gb25seSBzdG9yZSB0aGUgbGFzdCBOIGV2ZW50c1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHByZXZFdmVudCA9IHJlY2VudFdoZWVsRXZlbnRzLmxlbmd0aCA/IHJlY2VudFdoZWVsRXZlbnRzW3JlY2VudFdoZWVsRXZlbnRzLmxlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGNvbnN0IGZpcnN0RXZlbnQgPSByZWNlbnRXaGVlbEV2ZW50c1swXTtcbiAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5wdXNoKG5ld0V2ZW50KTtcblxuICAgICAgICAgIGlmIChwcmV2RXZlbnQgJiYgKG5ld0V2ZW50LmRlbHRhID4gcHJldkV2ZW50LmRlbHRhIHx8IG5ld0V2ZW50LmRpcmVjdGlvbiAhPT0gcHJldkV2ZW50LmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIC8vIEluY3JlYXNpbmcgb3IgcmV2ZXJzZS1zaWduIGRlbHRhIG1lYW5zIHRoZSB1c2VyIHN0YXJ0ZWQgc2Nyb2xsaW5nIGFnYWluLiBDbGVhciB0aGUgd2hlZWwgZXZlbnQgbG9nLlxuICAgICAgICAgICAgcmVjZW50V2hlZWxFdmVudHMuc3BsaWNlKDApO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID49IDE1ICYmIG5ld0V2ZW50LnRpbWUgLSBmaXJzdEV2ZW50LnRpbWUgPCA1MDAgJiYgZmlyc3RFdmVudC5kZWx0YSAtIG5ld0V2ZW50LmRlbHRhID49IDEgJiYgbmV3RXZlbnQuZGVsdGEgPD0gNikge1xuICAgICAgICAgICAgLy8gV2UncmUgYXQgdGhlIGVuZCBvZiB0aGUgZGVjZWxlcmF0aW9uIG9mIGEgbW9tZW50dW0gc2Nyb2xsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgICAgICAgICAgIC8vIHRvIHdhaXQgZm9yIG1vcmUgZXZlbnRzLiBTbmFwIEFTQVAgb24gdGhlIG5leHQgdGljay5cbiAgICAgICAgICAgIC8vIEFsc28sIGJlY2F1c2UgdGhlcmUncyBzb21lIHJlbWFpbmluZyBtb21lbnR1bSB3ZSdsbCBiaWFzIHRoZSBzbmFwIGluIHRoZVxuICAgICAgICAgICAgLy8gZGlyZWN0aW9uIG9mIHRoZSBvbmdvaW5nIHNjcm9sbCBiZWNhdXNlIGl0J3MgYmV0dGVyIFVYIGZvciB0aGUgc2Nyb2xsIHRvIHNuYXBcbiAgICAgICAgICAgIC8vIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgc2Nyb2xsIGluc3RlYWQgb2YgcmV2ZXJzaW5nIHRvIHNuYXAuICBUaGVyZWZvcmUsXG4gICAgICAgICAgICAvLyBpZiBpdCdzIGFscmVhZHkgc2Nyb2xsZWQgbW9yZSB0aGFuIDIwJSBpbiB0aGUgY3VycmVudCBkaXJlY3Rpb24sIGtlZXAgZ29pbmcuXG4gICAgICAgICAgICBjb25zdCBzbmFwVG9UaHJlc2hvbGQgPSBkZWx0YSA+IDAgPyAwLjggOiAwLjI7XG4gICAgICAgICAgICBsYXN0RXZlbnRCZWZvcmVTbmFwID0gbmV3RXZlbnQ7XG4gICAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3Qoc3dpcGVyLnBhcmFtcy5zcGVlZCwgdHJ1ZSwgdW5kZWZpbmVkLCBzbmFwVG9UaHJlc2hvbGQpO1xuICAgICAgICAgICAgfSwgMCk7IC8vIG5vIGRlbGF5OyBtb3ZlIG9uIG5leHQgdGlja1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghdGltZW91dCkge1xuICAgICAgICAgICAgLy8gaWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2UgaGF2ZW4ndCBkZXRlY3RlZCB0aGUgZW5kIG9mIGEgbW9tZW50dW0gc2Nyb2xsLCBzb1xuICAgICAgICAgICAgLy8gd2UnbGwgY29uc2lkZXIgYSBzY3JvbGwgXCJjb21wbGV0ZVwiIHdoZW4gdGhlcmUgaGF2ZW4ndCBiZWVuIGFueSB3aGVlbCBldmVudHNcbiAgICAgICAgICAgIC8vIGZvciA1MDBtcy5cbiAgICAgICAgICAgIHRpbWVvdXQgPSBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHNuYXBUb1RocmVzaG9sZCA9IDAuNTtcbiAgICAgICAgICAgICAgbGFzdEV2ZW50QmVmb3JlU25hcCA9IG5ld0V2ZW50O1xuICAgICAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvQ2xvc2VzdChzd2lwZXIucGFyYW1zLnNwZWVkLCB0cnVlLCB1bmRlZmluZWQsIHNuYXBUb1RocmVzaG9sZCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBFbWl0IGV2ZW50XG5cblxuICAgICAgICBpZiAoIWlnbm9yZVdoZWVsRXZlbnRzKSBlbWl0KCdzY3JvbGwnLCBlKTsgLy8gU3RvcCBhdXRvcGxheVxuXG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5ICYmIHN3aXBlci5wYXJhbXMuYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbikgc3dpcGVyLmF1dG9wbGF5LnN0b3AoKTsgLy8gUmV0dXJuIHBhZ2Ugc2Nyb2xsIG9uIGVkZ2UgcG9zaXRpb25zXG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSBzd2lwZXIubWluVHJhbnNsYXRlKCkgfHwgcG9zaXRpb24gPT09IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMobWV0aG9kKSB7XG4gICAgbGV0IHRhcmdldCA9IHN3aXBlci4kZWw7XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgIHRhcmdldCA9ICQoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0W21ldGhvZF0oJ21vdXNlZW50ZXInLCBoYW5kbGVNb3VzZUVudGVyKTtcbiAgICB0YXJnZXRbbWV0aG9kXSgnbW91c2VsZWF2ZScsIGhhbmRsZU1vdXNlTGVhdmUpO1xuICAgIHRhcmdldFttZXRob2RdKCd3aGVlbCcsIGhhbmRsZSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIGhhbmRsZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlZCkgcmV0dXJuIGZhbHNlO1xuICAgIGV2ZW50cygnb24nKTtcbiAgICBzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgZXZlbnRzKCdvZmYnKTtcbiAgICBzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBvbignaW5pdCcsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgZGlzYWJsZSgpO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwuZW5hYmxlZCkgZW5hYmxlKCk7XG4gIH0pO1xuICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBlbmFibGUoKTtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlZCkgZGlzYWJsZSgpO1xuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIubW91c2V3aGVlbCwge1xuICAgIGVuYWJsZSxcbiAgICBkaXNhYmxlXG4gIH0pO1xufSIsICJpbXBvcnQgY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZCBmcm9tICcuLi8uLi9zaGFyZWQvY3JlYXRlLWVsZW1lbnQtaWYtbm90LWRlZmluZWQuanMnO1xuaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBOYXZpZ2F0aW9uKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uLFxuICAgIGVtaXRcbiAgfSA9IF9yZWY7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgbmV4dEVsOiBudWxsLFxuICAgICAgcHJldkVsOiBudWxsLFxuICAgICAgaGlkZU9uQ2xpY2s6IGZhbHNlLFxuICAgICAgZGlzYWJsZWRDbGFzczogJ3N3aXBlci1idXR0b24tZGlzYWJsZWQnLFxuICAgICAgaGlkZGVuQ2xhc3M6ICdzd2lwZXItYnV0dG9uLWhpZGRlbicsXG4gICAgICBsb2NrQ2xhc3M6ICdzd2lwZXItYnV0dG9uLWxvY2snXG4gICAgfVxuICB9KTtcbiAgc3dpcGVyLm5hdmlnYXRpb24gPSB7XG4gICAgbmV4dEVsOiBudWxsLFxuICAgICRuZXh0RWw6IG51bGwsXG4gICAgcHJldkVsOiBudWxsLFxuICAgICRwcmV2RWw6IG51bGxcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRFbChlbCkge1xuICAgIGxldCAkZWw7XG5cbiAgICBpZiAoZWwpIHtcbiAgICAgICRlbCA9ICQoZWwpO1xuXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyAmJiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnICYmICRlbC5sZW5ndGggPiAxICYmIHN3aXBlci4kZWwuZmluZChlbCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICRlbCA9IHN3aXBlci4kZWwuZmluZChlbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICRlbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUVsKCRlbCwgZGlzYWJsZWQpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb247XG5cbiAgICBpZiAoJGVsICYmICRlbC5sZW5ndGggPiAwKSB7XG4gICAgICAkZWxbZGlzYWJsZWQgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10ocGFyYW1zLmRpc2FibGVkQ2xhc3MpO1xuICAgICAgaWYgKCRlbFswXSAmJiAkZWxbMF0udGFnTmFtZSA9PT0gJ0JVVFRPTicpICRlbFswXS5kaXNhYmxlZCA9IGRpc2FibGVkO1xuXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5lbmFibGVkKSB7XG4gICAgICAgICRlbFtzd2lwZXIuaXNMb2NrZWQgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10ocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIC8vIFVwZGF0ZSBOYXZpZ2F0aW9uIEJ1dHRvbnNcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSByZXR1cm47XG4gICAgY29uc3Qge1xuICAgICAgJG5leHRFbCxcbiAgICAgICRwcmV2RWxcbiAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb247XG4gICAgdG9nZ2xlRWwoJHByZXZFbCwgc3dpcGVyLmlzQmVnaW5uaW5nICYmICFzd2lwZXIucGFyYW1zLnJld2luZCk7XG4gICAgdG9nZ2xlRWwoJG5leHRFbCwgc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLnJld2luZCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblByZXZDbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiAhc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHJldHVybjtcbiAgICBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbk5leHRDbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiAhc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHJldHVybjtcbiAgICBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbjtcbiAgICBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24gPSBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkKHN3aXBlciwgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLm5hdmlnYXRpb24sIHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbiwge1xuICAgICAgbmV4dEVsOiAnc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgIHByZXZFbDogJ3N3aXBlci1idXR0b24tcHJldidcbiAgICB9KTtcbiAgICBpZiAoIShwYXJhbXMubmV4dEVsIHx8IHBhcmFtcy5wcmV2RWwpKSByZXR1cm47XG4gICAgY29uc3QgJG5leHRFbCA9IGdldEVsKHBhcmFtcy5uZXh0RWwpO1xuICAgIGNvbnN0ICRwcmV2RWwgPSBnZXRFbChwYXJhbXMucHJldkVsKTtcblxuICAgIGlmICgkbmV4dEVsICYmICRuZXh0RWwubGVuZ3RoID4gMCkge1xuICAgICAgJG5leHRFbC5vbignY2xpY2snLCBvbk5leHRDbGljayk7XG4gICAgfVxuXG4gICAgaWYgKCRwcmV2RWwgJiYgJHByZXZFbC5sZW5ndGggPiAwKSB7XG4gICAgICAkcHJldkVsLm9uKCdjbGljaycsIG9uUHJldkNsaWNrKTtcbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5uYXZpZ2F0aW9uLCB7XG4gICAgICAkbmV4dEVsLFxuICAgICAgbmV4dEVsOiAkbmV4dEVsICYmICRuZXh0RWxbMF0sXG4gICAgICAkcHJldkVsLFxuICAgICAgcHJldkVsOiAkcHJldkVsICYmICRwcmV2RWxbMF1cbiAgICB9KTtcblxuICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgIGlmICgkbmV4dEVsKSAkbmV4dEVsLmFkZENsYXNzKHBhcmFtcy5sb2NrQ2xhc3MpO1xuICAgICAgaWYgKCRwcmV2RWwpICRwcmV2RWwuYWRkQ2xhc3MocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBjb25zdCB7XG4gICAgICAkbmV4dEVsLFxuICAgICAgJHByZXZFbFxuICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbjtcblxuICAgIGlmICgkbmV4dEVsICYmICRuZXh0RWwubGVuZ3RoKSB7XG4gICAgICAkbmV4dEVsLm9mZignY2xpY2snLCBvbk5leHRDbGljayk7XG4gICAgICAkbmV4dEVsLnJlbW92ZUNsYXNzKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5kaXNhYmxlZENsYXNzKTtcbiAgICB9XG5cbiAgICBpZiAoJHByZXZFbCAmJiAkcHJldkVsLmxlbmd0aCkge1xuICAgICAgJHByZXZFbC5vZmYoJ2NsaWNrJywgb25QcmV2Q2xpY2spO1xuICAgICAgJHByZXZFbC5yZW1vdmVDbGFzcyhzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uZGlzYWJsZWRDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgaW5pdCgpO1xuICAgIHVwZGF0ZSgpO1xuICB9KTtcbiAgb24oJ3RvRWRnZSBmcm9tRWRnZSBsb2NrIHVubG9jaycsICgpID0+IHtcbiAgICB1cGRhdGUoKTtcbiAgfSk7XG4gIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgIGRlc3Ryb3koKTtcbiAgfSk7XG4gIG9uKCdlbmFibGUgZGlzYWJsZScsICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAkbmV4dEVsLFxuICAgICAgJHByZXZFbFxuICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbjtcblxuICAgIGlmICgkbmV4dEVsKSB7XG4gICAgICAkbmV4dEVsW3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5sb2NrQ2xhc3MpO1xuICAgIH1cblxuICAgIGlmICgkcHJldkVsKSB7XG4gICAgICAkcHJldkVsW3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5sb2NrQ2xhc3MpO1xuICAgIH1cbiAgfSk7XG4gIG9uKCdjbGljaycsIChfcywgZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICRuZXh0RWwsXG4gICAgICAkcHJldkVsXG4gICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uO1xuICAgIGNvbnN0IHRhcmdldEVsID0gZS50YXJnZXQ7XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGVPbkNsaWNrICYmICEkKHRhcmdldEVsKS5pcygkcHJldkVsKSAmJiAhJCh0YXJnZXRFbCkuaXMoJG5leHRFbCkpIHtcbiAgICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbiAmJiBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24gJiYgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSAmJiAoc3dpcGVyLnBhZ2luYXRpb24uZWwgPT09IHRhcmdldEVsIHx8IHN3aXBlci5wYWdpbmF0aW9uLmVsLmNvbnRhaW5zKHRhcmdldEVsKSkpIHJldHVybjtcbiAgICAgIGxldCBpc0hpZGRlbjtcblxuICAgICAgaWYgKCRuZXh0RWwpIHtcbiAgICAgICAgaXNIaWRkZW4gPSAkbmV4dEVsLmhhc0NsYXNzKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICB9IGVsc2UgaWYgKCRwcmV2RWwpIHtcbiAgICAgICAgaXNIaWRkZW4gPSAkcHJldkVsLmhhc0NsYXNzKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0hpZGRlbiA9PT0gdHJ1ZSkge1xuICAgICAgICBlbWl0KCduYXZpZ2F0aW9uU2hvdycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1pdCgnbmF2aWdhdGlvbkhpZGUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCRuZXh0RWwpIHtcbiAgICAgICAgJG5leHRFbC50b2dnbGVDbGFzcyhzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJHByZXZFbCkge1xuICAgICAgICAkcHJldkVsLnRvZ2dsZUNsYXNzKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIubmF2aWdhdGlvbiwge1xuICAgIHVwZGF0ZSxcbiAgICBpbml0LFxuICAgIGRlc3Ryb3lcbiAgfSk7XG59IiwgImltcG9ydCB7IGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkKHN3aXBlciwgb3JpZ2luYWxQYXJhbXMsIHBhcmFtcywgY2hlY2tQcm9wcykge1xuICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG5cbiAgaWYgKHN3aXBlci5wYXJhbXMuY3JlYXRlRWxlbWVudHMpIHtcbiAgICBPYmplY3Qua2V5cyhjaGVja1Byb3BzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoIXBhcmFtc1trZXldICYmIHBhcmFtcy5hdXRvID09PSB0cnVlKSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gc3dpcGVyLiRlbC5jaGlsZHJlbihgLiR7Y2hlY2tQcm9wc1trZXldfWApWzBdO1xuXG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNoZWNrUHJvcHNba2V5XTtcbiAgICAgICAgICBzd2lwZXIuJGVsLmFwcGVuZChlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtc1trZXldID0gZWxlbWVudDtcbiAgICAgICAgb3JpZ2luYWxQYXJhbXNba2V5XSA9IGVsZW1lbnQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcGFyYW1zO1xufSIsICJpbXBvcnQgJCBmcm9tICcuLi8uLi9zaGFyZWQvZG9tLmpzJztcbmltcG9ydCBjbGFzc2VzVG9TZWxlY3RvciBmcm9tICcuLi8uLi9zaGFyZWQvY2xhc3Nlcy10by1zZWxlY3Rvci5qcyc7XG5pbXBvcnQgY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZCBmcm9tICcuLi8uLi9zaGFyZWQvY3JlYXRlLWVsZW1lbnQtaWYtbm90LWRlZmluZWQuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnaW5hdGlvbihfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvbixcbiAgICBlbWl0XG4gIH0gPSBfcmVmO1xuICBjb25zdCBwZnggPSAnc3dpcGVyLXBhZ2luYXRpb24nO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgYnVsbGV0RWxlbWVudDogJ3NwYW4nLFxuICAgICAgY2xpY2thYmxlOiBmYWxzZSxcbiAgICAgIGhpZGVPbkNsaWNrOiBmYWxzZSxcbiAgICAgIHJlbmRlckJ1bGxldDogbnVsbCxcbiAgICAgIHJlbmRlclByb2dyZXNzYmFyOiBudWxsLFxuICAgICAgcmVuZGVyRnJhY3Rpb246IG51bGwsXG4gICAgICByZW5kZXJDdXN0b206IG51bGwsXG4gICAgICBwcm9ncmVzc2Jhck9wcG9zaXRlOiBmYWxzZSxcbiAgICAgIHR5cGU6ICdidWxsZXRzJyxcbiAgICAgIC8vICdidWxsZXRzJyBvciAncHJvZ3Jlc3NiYXInIG9yICdmcmFjdGlvbicgb3IgJ2N1c3RvbSdcbiAgICAgIGR5bmFtaWNCdWxsZXRzOiBmYWxzZSxcbiAgICAgIGR5bmFtaWNNYWluQnVsbGV0czogMSxcbiAgICAgIGZvcm1hdEZyYWN0aW9uQ3VycmVudDogbnVtYmVyID0+IG51bWJlcixcbiAgICAgIGZvcm1hdEZyYWN0aW9uVG90YWw6IG51bWJlciA9PiBudW1iZXIsXG4gICAgICBidWxsZXRDbGFzczogYCR7cGZ4fS1idWxsZXRgLFxuICAgICAgYnVsbGV0QWN0aXZlQ2xhc3M6IGAke3BmeH0tYnVsbGV0LWFjdGl2ZWAsXG4gICAgICBtb2RpZmllckNsYXNzOiBgJHtwZnh9LWAsXG4gICAgICBjdXJyZW50Q2xhc3M6IGAke3BmeH0tY3VycmVudGAsXG4gICAgICB0b3RhbENsYXNzOiBgJHtwZnh9LXRvdGFsYCxcbiAgICAgIGhpZGRlbkNsYXNzOiBgJHtwZnh9LWhpZGRlbmAsXG4gICAgICBwcm9ncmVzc2JhckZpbGxDbGFzczogYCR7cGZ4fS1wcm9ncmVzc2Jhci1maWxsYCxcbiAgICAgIHByb2dyZXNzYmFyT3Bwb3NpdGVDbGFzczogYCR7cGZ4fS1wcm9ncmVzc2Jhci1vcHBvc2l0ZWAsXG4gICAgICBjbGlja2FibGVDbGFzczogYCR7cGZ4fS1jbGlja2FibGVgLFxuICAgICAgbG9ja0NsYXNzOiBgJHtwZnh9LWxvY2tgLFxuICAgICAgaG9yaXpvbnRhbENsYXNzOiBgJHtwZnh9LWhvcml6b250YWxgLFxuICAgICAgdmVydGljYWxDbGFzczogYCR7cGZ4fS12ZXJ0aWNhbGBcbiAgICB9XG4gIH0pO1xuICBzd2lwZXIucGFnaW5hdGlvbiA9IHtcbiAgICBlbDogbnVsbCxcbiAgICAkZWw6IG51bGwsXG4gICAgYnVsbGV0czogW11cbiAgfTtcbiAgbGV0IGJ1bGxldFNpemU7XG4gIGxldCBkeW5hbWljQnVsbGV0SW5kZXggPSAwO1xuXG4gIGZ1bmN0aW9uIGlzUGFnaW5hdGlvbkRpc2FibGVkKCkge1xuICAgIHJldHVybiAhc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmVsIHx8ICFzd2lwZXIucGFnaW5hdGlvbi5lbCB8fCAhc3dpcGVyLnBhZ2luYXRpb24uJGVsIHx8IHN3aXBlci5wYWdpbmF0aW9uLiRlbC5sZW5ndGggPT09IDA7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTaWRlQnVsbGV0cygkYnVsbGV0RWwsIHBvc2l0aW9uKSB7XG4gICAgY29uc3Qge1xuICAgICAgYnVsbGV0QWN0aXZlQ2xhc3NcbiAgICB9ID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICRidWxsZXRFbFtwb3NpdGlvbl0oKS5hZGRDbGFzcyhgJHtidWxsZXRBY3RpdmVDbGFzc30tJHtwb3NpdGlvbn1gKVtwb3NpdGlvbl0oKS5hZGRDbGFzcyhgJHtidWxsZXRBY3RpdmVDbGFzc30tJHtwb3NpdGlvbn0tJHtwb3NpdGlvbn1gKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAvLyBSZW5kZXIgfHwgVXBkYXRlIFBhZ2luYXRpb24gYnVsbGV0cy9pdGVtc1xuICAgIGNvbnN0IHJ0bCA9IHN3aXBlci5ydGw7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgIGlmIChpc1BhZ2luYXRpb25EaXNhYmxlZCgpKSByZXR1cm47XG4gICAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gICAgY29uc3QgJGVsID0gc3dpcGVyLnBhZ2luYXRpb24uJGVsOyAvLyBDdXJyZW50L1RvdGFsXG5cbiAgICBsZXQgY3VycmVudDtcbiAgICBjb25zdCB0b3RhbCA9IHN3aXBlci5wYXJhbXMubG9vcCA/IE1hdGguY2VpbCgoc2xpZGVzTGVuZ3RoIC0gc3dpcGVyLmxvb3BlZFNsaWRlcyAqIDIpIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiBzd2lwZXIuc25hcEdyaWQubGVuZ3RoO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgY3VycmVudCA9IE1hdGguY2VpbCgoc3dpcGVyLmFjdGl2ZUluZGV4IC0gc3dpcGVyLmxvb3BlZFNsaWRlcykgLyBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwKTtcblxuICAgICAgaWYgKGN1cnJlbnQgPiBzbGlkZXNMZW5ndGggLSAxIC0gc3dpcGVyLmxvb3BlZFNsaWRlcyAqIDIpIHtcbiAgICAgICAgY3VycmVudCAtPSBzbGlkZXNMZW5ndGggLSBzd2lwZXIubG9vcGVkU2xpZGVzICogMjtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQgPiB0b3RhbCAtIDEpIGN1cnJlbnQgLT0gdG90YWw7XG4gICAgICBpZiAoY3VycmVudCA8IDAgJiYgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uVHlwZSAhPT0gJ2J1bGxldHMnKSBjdXJyZW50ID0gdG90YWwgKyBjdXJyZW50O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHN3aXBlci5zbmFwSW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjdXJyZW50ID0gc3dpcGVyLnNuYXBJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudCA9IHN3aXBlci5hY3RpdmVJbmRleCB8fCAwO1xuICAgIH0gLy8gVHlwZXNcblxuXG4gICAgaWYgKHBhcmFtcy50eXBlID09PSAnYnVsbGV0cycgJiYgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cyAmJiBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGJ1bGxldHMgPSBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzO1xuICAgICAgbGV0IGZpcnN0SW5kZXg7XG4gICAgICBsZXQgbGFzdEluZGV4O1xuICAgICAgbGV0IG1pZEluZGV4O1xuXG4gICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgIGJ1bGxldFNpemUgPSBidWxsZXRzLmVxKDApW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdvdXRlcldpZHRoJyA6ICdvdXRlckhlaWdodCddKHRydWUpO1xuICAgICAgICAkZWwuY3NzKHN3aXBlci5pc0hvcml6b250YWwoKSA/ICd3aWR0aCcgOiAnaGVpZ2h0JywgYCR7YnVsbGV0U2l6ZSAqIChwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzICsgNCl9cHhgKTtcblxuICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyA+IDEgJiYgc3dpcGVyLnByZXZpb3VzSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGR5bmFtaWNCdWxsZXRJbmRleCArPSBjdXJyZW50IC0gKHN3aXBlci5wcmV2aW91c0luZGV4IC0gc3dpcGVyLmxvb3BlZFNsaWRlcyB8fCAwKTtcblxuICAgICAgICAgIGlmIChkeW5hbWljQnVsbGV0SW5kZXggPiBwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzIC0gMSkge1xuICAgICAgICAgICAgZHluYW1pY0J1bGxldEluZGV4ID0gcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyAtIDE7XG4gICAgICAgICAgfSBlbHNlIGlmIChkeW5hbWljQnVsbGV0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICBkeW5hbWljQnVsbGV0SW5kZXggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZpcnN0SW5kZXggPSBNYXRoLm1heChjdXJyZW50IC0gZHluYW1pY0J1bGxldEluZGV4LCAwKTtcbiAgICAgICAgbGFzdEluZGV4ID0gZmlyc3RJbmRleCArIChNYXRoLm1pbihidWxsZXRzLmxlbmd0aCwgcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cykgLSAxKTtcbiAgICAgICAgbWlkSW5kZXggPSAobGFzdEluZGV4ICsgZmlyc3RJbmRleCkgLyAyO1xuICAgICAgfVxuXG4gICAgICBidWxsZXRzLnJlbW92ZUNsYXNzKFsnJywgJy1uZXh0JywgJy1uZXh0LW5leHQnLCAnLXByZXYnLCAnLXByZXYtcHJldicsICctbWFpbiddLm1hcChzdWZmaXggPT4gYCR7cGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzfSR7c3VmZml4fWApLmpvaW4oJyAnKSk7XG5cbiAgICAgIGlmICgkZWwubGVuZ3RoID4gMSkge1xuICAgICAgICBidWxsZXRzLmVhY2goYnVsbGV0ID0+IHtcbiAgICAgICAgICBjb25zdCAkYnVsbGV0ID0gJChidWxsZXQpO1xuICAgICAgICAgIGNvbnN0IGJ1bGxldEluZGV4ID0gJGJ1bGxldC5pbmRleCgpO1xuXG4gICAgICAgICAgaWYgKGJ1bGxldEluZGV4ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICAkYnVsbGV0LmFkZENsYXNzKHBhcmFtcy5idWxsZXRBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgICAgaWYgKGJ1bGxldEluZGV4ID49IGZpcnN0SW5kZXggJiYgYnVsbGV0SW5kZXggPD0gbGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICRidWxsZXQuYWRkQ2xhc3MoYCR7cGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzfS1tYWluYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChidWxsZXRJbmRleCA9PT0gZmlyc3RJbmRleCkge1xuICAgICAgICAgICAgICBzZXRTaWRlQnVsbGV0cygkYnVsbGV0LCAncHJldicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYnVsbGV0SW5kZXggPT09IGxhc3RJbmRleCkge1xuICAgICAgICAgICAgICBzZXRTaWRlQnVsbGV0cygkYnVsbGV0LCAnbmV4dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCAkYnVsbGV0ID0gYnVsbGV0cy5lcShjdXJyZW50KTtcbiAgICAgICAgY29uc3QgYnVsbGV0SW5kZXggPSAkYnVsbGV0LmluZGV4KCk7XG4gICAgICAgICRidWxsZXQuYWRkQ2xhc3MocGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzKTtcblxuICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgY29uc3QgJGZpcnN0RGlzcGxheWVkQnVsbGV0ID0gYnVsbGV0cy5lcShmaXJzdEluZGV4KTtcbiAgICAgICAgICBjb25zdCAkbGFzdERpc3BsYXllZEJ1bGxldCA9IGJ1bGxldHMuZXEobGFzdEluZGV4KTtcblxuICAgICAgICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDw9IGxhc3RJbmRleDsgaSArPSAxKSB7XG4gICAgICAgICAgICBidWxsZXRzLmVxKGkpLmFkZENsYXNzKGAke3BhcmFtcy5idWxsZXRBY3RpdmVDbGFzc30tbWFpbmApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgICAgIGlmIChidWxsZXRJbmRleCA+PSBidWxsZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0czsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgICAgICBidWxsZXRzLmVxKGJ1bGxldHMubGVuZ3RoIC0gaSkuYWRkQ2xhc3MoYCR7cGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzfS1tYWluYCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBidWxsZXRzLmVxKGJ1bGxldHMubGVuZ3RoIC0gcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyAtIDEpLmFkZENsYXNzKGAke3BhcmFtcy5idWxsZXRBY3RpdmVDbGFzc30tcHJldmApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoJGZpcnN0RGlzcGxheWVkQnVsbGV0LCAncHJldicpO1xuICAgICAgICAgICAgICBzZXRTaWRlQnVsbGV0cygkbGFzdERpc3BsYXllZEJ1bGxldCwgJ25leHQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoJGZpcnN0RGlzcGxheWVkQnVsbGV0LCAncHJldicpO1xuICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoJGxhc3REaXNwbGF5ZWRCdWxsZXQsICduZXh0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJhbXMuZHluYW1pY0J1bGxldHMpIHtcbiAgICAgICAgY29uc3QgZHluYW1pY0J1bGxldHNMZW5ndGggPSBNYXRoLm1pbihidWxsZXRzLmxlbmd0aCwgcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyArIDQpO1xuICAgICAgICBjb25zdCBidWxsZXRzT2Zmc2V0ID0gKGJ1bGxldFNpemUgKiBkeW5hbWljQnVsbGV0c0xlbmd0aCAtIGJ1bGxldFNpemUpIC8gMiAtIG1pZEluZGV4ICogYnVsbGV0U2l6ZTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0UHJvcCA9IHJ0bCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgIGJ1bGxldHMuY3NzKHN3aXBlci5pc0hvcml6b250YWwoKSA/IG9mZnNldFByb3AgOiAndG9wJywgYCR7YnVsbGV0c09mZnNldH1weGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2ZyYWN0aW9uJykge1xuICAgICAgJGVsLmZpbmQoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLmN1cnJlbnRDbGFzcykpLnRleHQocGFyYW1zLmZvcm1hdEZyYWN0aW9uQ3VycmVudChjdXJyZW50ICsgMSkpO1xuICAgICAgJGVsLmZpbmQoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLnRvdGFsQ2xhc3MpKS50ZXh0KHBhcmFtcy5mb3JtYXRGcmFjdGlvblRvdGFsKHRvdGFsKSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy50eXBlID09PSAncHJvZ3Jlc3NiYXInKSB7XG4gICAgICBsZXQgcHJvZ3Jlc3NiYXJEaXJlY3Rpb247XG5cbiAgICAgIGlmIChwYXJhbXMucHJvZ3Jlc3NiYXJPcHBvc2l0ZSkge1xuICAgICAgICBwcm9ncmVzc2JhckRpcmVjdGlvbiA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9ncmVzc2JhckRpcmVjdGlvbiA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCc7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNjYWxlID0gKGN1cnJlbnQgKyAxKSAvIHRvdGFsO1xuICAgICAgbGV0IHNjYWxlWCA9IDE7XG4gICAgICBsZXQgc2NhbGVZID0gMTtcblxuICAgICAgaWYgKHByb2dyZXNzYmFyRGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgc2NhbGVYID0gc2NhbGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2FsZVkgPSBzY2FsZTtcbiAgICAgIH1cblxuICAgICAgJGVsLmZpbmQoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLnByb2dyZXNzYmFyRmlsbENsYXNzKSkudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGVYKCR7c2NhbGVYfSkgc2NhbGVZKCR7c2NhbGVZfSlgKS50cmFuc2l0aW9uKHN3aXBlci5wYXJhbXMuc3BlZWQpO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2N1c3RvbScgJiYgcGFyYW1zLnJlbmRlckN1c3RvbSkge1xuICAgICAgJGVsLmh0bWwocGFyYW1zLnJlbmRlckN1c3RvbShzd2lwZXIsIGN1cnJlbnQgKyAxLCB0b3RhbCkpO1xuICAgICAgZW1pdCgncGFnaW5hdGlvblJlbmRlcicsICRlbFswXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXQoJ3BhZ2luYXRpb25VcGRhdGUnLCAkZWxbMF0pO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICRlbFtzd2lwZXIuaXNMb2NrZWQgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10ocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIC8vIFJlbmRlciBDb250YWluZXJcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb247XG4gICAgaWYgKGlzUGFnaW5hdGlvbkRpc2FibGVkKCkpIHJldHVybjtcbiAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICBjb25zdCAkZWwgPSBzd2lwZXIucGFnaW5hdGlvbi4kZWw7XG4gICAgbGV0IHBhZ2luYXRpb25IVE1MID0gJyc7XG5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdidWxsZXRzJykge1xuICAgICAgbGV0IG51bWJlck9mQnVsbGV0cyA9IHN3aXBlci5wYXJhbXMubG9vcCA/IE1hdGguY2VpbCgoc2xpZGVzTGVuZ3RoIC0gc3dpcGVyLmxvb3BlZFNsaWRlcyAqIDIpIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiBzd2lwZXIuc25hcEdyaWQubGVuZ3RoO1xuXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSAmJiBzd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiBudW1iZXJPZkJ1bGxldHMgPiBzbGlkZXNMZW5ndGgpIHtcbiAgICAgICAgbnVtYmVyT2ZCdWxsZXRzID0gc2xpZGVzTGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQnVsbGV0czsgaSArPSAxKSB7XG4gICAgICAgIGlmIChwYXJhbXMucmVuZGVyQnVsbGV0KSB7XG4gICAgICAgICAgcGFnaW5hdGlvbkhUTUwgKz0gcGFyYW1zLnJlbmRlckJ1bGxldC5jYWxsKHN3aXBlciwgaSwgcGFyYW1zLmJ1bGxldENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWdpbmF0aW9uSFRNTCArPSBgPCR7cGFyYW1zLmJ1bGxldEVsZW1lbnR9IGNsYXNzPVwiJHtwYXJhbXMuYnVsbGV0Q2xhc3N9XCI+PC8ke3BhcmFtcy5idWxsZXRFbGVtZW50fT5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRlbC5odG1sKHBhZ2luYXRpb25IVE1MKTtcbiAgICAgIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMgPSAkZWwuZmluZChjbGFzc2VzVG9TZWxlY3RvcihwYXJhbXMuYnVsbGV0Q2xhc3MpKTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdmcmFjdGlvbicpIHtcbiAgICAgIGlmIChwYXJhbXMucmVuZGVyRnJhY3Rpb24pIHtcbiAgICAgICAgcGFnaW5hdGlvbkhUTUwgPSBwYXJhbXMucmVuZGVyRnJhY3Rpb24uY2FsbChzd2lwZXIsIHBhcmFtcy5jdXJyZW50Q2xhc3MsIHBhcmFtcy50b3RhbENsYXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhZ2luYXRpb25IVE1MID0gYDxzcGFuIGNsYXNzPVwiJHtwYXJhbXMuY3VycmVudENsYXNzfVwiPjwvc3Bhbj5gICsgJyAvICcgKyBgPHNwYW4gY2xhc3M9XCIke3BhcmFtcy50b3RhbENsYXNzfVwiPjwvc3Bhbj5gO1xuICAgICAgfVxuXG4gICAgICAkZWwuaHRtbChwYWdpbmF0aW9uSFRNTCk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy50eXBlID09PSAncHJvZ3Jlc3NiYXInKSB7XG4gICAgICBpZiAocGFyYW1zLnJlbmRlclByb2dyZXNzYmFyKSB7XG4gICAgICAgIHBhZ2luYXRpb25IVE1MID0gcGFyYW1zLnJlbmRlclByb2dyZXNzYmFyLmNhbGwoc3dpcGVyLCBwYXJhbXMucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFnaW5hdGlvbkhUTUwgPSBgPHNwYW4gY2xhc3M9XCIke3BhcmFtcy5wcm9ncmVzc2JhckZpbGxDbGFzc31cIj48L3NwYW4+YDtcbiAgICAgIH1cblxuICAgICAgJGVsLmh0bWwocGFnaW5hdGlvbkhUTUwpO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMudHlwZSAhPT0gJ2N1c3RvbScpIHtcbiAgICAgIGVtaXQoJ3BhZ2luYXRpb25SZW5kZXInLCBzd2lwZXIucGFnaW5hdGlvbi4kZWxbMF0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uID0gY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZChzd2lwZXIsIHN3aXBlci5vcmlnaW5hbFBhcmFtcy5wYWdpbmF0aW9uLCBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24sIHtcbiAgICAgIGVsOiAnc3dpcGVyLXBhZ2luYXRpb24nXG4gICAgfSk7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgIGlmICghcGFyYW1zLmVsKSByZXR1cm47XG4gICAgbGV0ICRlbCA9ICQocGFyYW1zLmVsKTtcbiAgICBpZiAoJGVsLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMgJiYgdHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycgJiYgJGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICRlbCA9IHN3aXBlci4kZWwuZmluZChwYXJhbXMuZWwpOyAvLyBjaGVjayBpZiBpdCBiZWxvbmdzIHRvIGFub3RoZXIgbmVzdGVkIFN3aXBlclxuXG4gICAgICBpZiAoJGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgJGVsID0gJGVsLmZpbHRlcihlbCA9PiB7XG4gICAgICAgICAgaWYgKCQoZWwpLnBhcmVudHMoJy5zd2lwZXInKVswXSAhPT0gc3dpcGVyLmVsKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnICYmIHBhcmFtcy5jbGlja2FibGUpIHtcbiAgICAgICRlbC5hZGRDbGFzcyhwYXJhbXMuY2xpY2thYmxlQ2xhc3MpO1xuICAgIH1cblxuICAgICRlbC5hZGRDbGFzcyhwYXJhbXMubW9kaWZpZXJDbGFzcyArIHBhcmFtcy50eXBlKTtcbiAgICAkZWwuYWRkQ2xhc3Moc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcblxuICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnICYmIHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgJGVsLmFkZENsYXNzKGAke3BhcmFtcy5tb2RpZmllckNsYXNzfSR7cGFyYW1zLnR5cGV9LWR5bmFtaWNgKTtcbiAgICAgIGR5bmFtaWNCdWxsZXRJbmRleCA9IDA7XG5cbiAgICAgIGlmIChwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzIDwgMSkge1xuICAgICAgICBwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdwcm9ncmVzc2JhcicgJiYgcGFyYW1zLnByb2dyZXNzYmFyT3Bwb3NpdGUpIHtcbiAgICAgICRlbC5hZGRDbGFzcyhwYXJhbXMucHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzKTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLmNsaWNrYWJsZSkge1xuICAgICAgJGVsLm9uKCdjbGljaycsIGNsYXNzZXNUb1NlbGVjdG9yKHBhcmFtcy5idWxsZXRDbGFzcyksIGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuaW5kZXgoKSAqIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIGluZGV4ICs9IHN3aXBlci5sb29wZWRTbGlkZXM7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnBhZ2luYXRpb24sIHtcbiAgICAgICRlbCxcbiAgICAgIGVsOiAkZWxbMF1cbiAgICB9KTtcblxuICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICRlbC5hZGRDbGFzcyhwYXJhbXMubG9ja0NsYXNzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICBpZiAoaXNQYWdpbmF0aW9uRGlzYWJsZWQoKSkgcmV0dXJuO1xuICAgIGNvbnN0ICRlbCA9IHN3aXBlci5wYWdpbmF0aW9uLiRlbDtcbiAgICAkZWwucmVtb3ZlQ2xhc3MocGFyYW1zLmhpZGRlbkNsYXNzKTtcbiAgICAkZWwucmVtb3ZlQ2xhc3MocGFyYW1zLm1vZGlmaWVyQ2xhc3MgKyBwYXJhbXMudHlwZSk7XG4gICAgJGVsLnJlbW92ZUNsYXNzKHN3aXBlci5pc0hvcml6b250YWwoKSA/IHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MgOiBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgaWYgKHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMgJiYgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5yZW1vdmVDbGFzcykgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5yZW1vdmVDbGFzcyhwYXJhbXMuYnVsbGV0QWN0aXZlQ2xhc3MpO1xuXG4gICAgaWYgKHBhcmFtcy5jbGlja2FibGUpIHtcbiAgICAgICRlbC5vZmYoJ2NsaWNrJywgY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLmJ1bGxldENsYXNzKSk7XG4gICAgfVxuICB9XG5cbiAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgaW5pdCgpO1xuICAgIHJlbmRlcigpO1xuICAgIHVwZGF0ZSgpO1xuICB9KTtcbiAgb24oJ2FjdGl2ZUluZGV4Q2hhbmdlJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHN3aXBlci5zbmFwSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH0pO1xuICBvbignc25hcEluZGV4Q2hhbmdlJywgKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH0pO1xuICBvbignc2xpZGVzTGVuZ3RoQ2hhbmdlJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIHJlbmRlcigpO1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ3NuYXBHcmlkTGVuZ3RoQ2hhbmdlJywgKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICByZW5kZXIoKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfSk7XG4gIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgIGRlc3Ryb3koKTtcbiAgfSk7XG4gIG9uKCdlbmFibGUgZGlzYWJsZScsICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAkZWxcbiAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG5cbiAgICBpZiAoJGVsKSB7XG4gICAgICAkZWxbc3dpcGVyLmVuYWJsZWQgPyAncmVtb3ZlQ2xhc3MnIDogJ2FkZENsYXNzJ10oc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9KTtcbiAgb24oJ2xvY2sgdW5sb2NrJywgKCkgPT4ge1xuICAgIHVwZGF0ZSgpO1xuICB9KTtcbiAgb24oJ2NsaWNrJywgKF9zLCBlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0RWwgPSBlLnRhcmdldDtcbiAgICBjb25zdCB7XG4gICAgICAkZWxcbiAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmVsICYmIHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5oaWRlT25DbGljayAmJiAkZWwubGVuZ3RoID4gMCAmJiAhJCh0YXJnZXRFbCkuaGFzQ2xhc3Moc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSkge1xuICAgICAgaWYgKHN3aXBlci5uYXZpZ2F0aW9uICYmIChzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwgJiYgdGFyZ2V0RWwgPT09IHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCB8fCBzd2lwZXIubmF2aWdhdGlvbi5wcmV2RWwgJiYgdGFyZ2V0RWwgPT09IHN3aXBlci5uYXZpZ2F0aW9uLnByZXZFbCkpIHJldHVybjtcbiAgICAgIGNvbnN0IGlzSGlkZGVuID0gJGVsLmhhc0NsYXNzKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5oaWRkZW5DbGFzcyk7XG5cbiAgICAgIGlmIChpc0hpZGRlbiA9PT0gdHJ1ZSkge1xuICAgICAgICBlbWl0KCdwYWdpbmF0aW9uU2hvdycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1pdCgncGFnaW5hdGlvbkhpZGUnKTtcbiAgICAgIH1cblxuICAgICAgJGVsLnRvZ2dsZUNsYXNzKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIucGFnaW5hdGlvbiwge1xuICAgIHJlbmRlcixcbiAgICB1cGRhdGUsXG4gICAgaW5pdCxcbiAgICBkZXN0cm95XG4gIH0pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjbGFzc2VzVG9TZWxlY3RvcihjbGFzc2VzKSB7XG4gIGlmIChjbGFzc2VzID09PSB2b2lkIDApIHtcbiAgICBjbGFzc2VzID0gJyc7XG4gIH1cblxuICByZXR1cm4gYC4ke2NsYXNzZXMudHJpbSgpLnJlcGxhY2UoLyhbXFwuOiFcXC9dKS9nLCAnXFxcXCQxJykgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAucmVwbGFjZSgvIC9nLCAnLicpfWA7XG59IiwgImltcG9ydCB7IGdldERvY3VtZW50IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5pbXBvcnQgJCBmcm9tICcuLi8uLi9zaGFyZWQvZG9tLmpzJztcbmltcG9ydCB7IG5leHRUaWNrIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmltcG9ydCBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkIGZyb20gJy4uLy4uL3NoYXJlZC9jcmVhdGUtZWxlbWVudC1pZi1ub3QtZGVmaW5lZC5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTY3JvbGxiYXIoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb24sXG4gICAgZW1pdFxuICB9ID0gX3JlZjtcbiAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICBsZXQgaXNUb3VjaGVkID0gZmFsc2U7XG4gIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgbGV0IGRyYWdUaW1lb3V0ID0gbnVsbDtcbiAgbGV0IGRyYWdTdGFydFBvcztcbiAgbGV0IGRyYWdTaXplO1xuICBsZXQgdHJhY2tTaXplO1xuICBsZXQgZGl2aWRlcjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBzY3JvbGxiYXI6IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgZHJhZ1NpemU6ICdhdXRvJyxcbiAgICAgIGhpZGU6IGZhbHNlLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgIHNuYXBPblJlbGVhc2U6IHRydWUsXG4gICAgICBsb2NrQ2xhc3M6ICdzd2lwZXItc2Nyb2xsYmFyLWxvY2snLFxuICAgICAgZHJhZ0NsYXNzOiAnc3dpcGVyLXNjcm9sbGJhci1kcmFnJ1xuICAgIH1cbiAgfSk7XG4gIHN3aXBlci5zY3JvbGxiYXIgPSB7XG4gICAgZWw6IG51bGwsXG4gICAgZHJhZ0VsOiBudWxsLFxuICAgICRlbDogbnVsbCxcbiAgICAkZHJhZ0VsOiBudWxsXG4gIH07XG5cbiAgZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICBjb25zdCB7XG4gICAgICBzY3JvbGxiYXIsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHByb2dyZXNzXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB7XG4gICAgICAkZHJhZ0VsLFxuICAgICAgJGVsXG4gICAgfSA9IHNjcm9sbGJhcjtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICBsZXQgbmV3U2l6ZSA9IGRyYWdTaXplO1xuICAgIGxldCBuZXdQb3MgPSAodHJhY2tTaXplIC0gZHJhZ1NpemUpICogcHJvZ3Jlc3M7XG5cbiAgICBpZiAocnRsKSB7XG4gICAgICBuZXdQb3MgPSAtbmV3UG9zO1xuXG4gICAgICBpZiAobmV3UG9zID4gMCkge1xuICAgICAgICBuZXdTaXplID0gZHJhZ1NpemUgLSBuZXdQb3M7XG4gICAgICAgIG5ld1BvcyA9IDA7XG4gICAgICB9IGVsc2UgaWYgKC1uZXdQb3MgKyBkcmFnU2l6ZSA+IHRyYWNrU2l6ZSkge1xuICAgICAgICBuZXdTaXplID0gdHJhY2tTaXplICsgbmV3UG9zO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV3UG9zIDwgMCkge1xuICAgICAgbmV3U2l6ZSA9IGRyYWdTaXplICsgbmV3UG9zO1xuICAgICAgbmV3UG9zID0gMDtcbiAgICB9IGVsc2UgaWYgKG5ld1BvcyArIGRyYWdTaXplID4gdHJhY2tTaXplKSB7XG4gICAgICBuZXdTaXplID0gdHJhY2tTaXplIC0gbmV3UG9zO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICRkcmFnRWwudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgke25ld1Bvc31weCwgMCwgMClgKTtcbiAgICAgICRkcmFnRWxbMF0uc3R5bGUud2lkdGggPSBgJHtuZXdTaXplfXB4YDtcbiAgICB9IGVsc2Uge1xuICAgICAgJGRyYWdFbC50cmFuc2Zvcm0oYHRyYW5zbGF0ZTNkKDBweCwgJHtuZXdQb3N9cHgsIDApYCk7XG4gICAgICAkZHJhZ0VsWzBdLnN0eWxlLmhlaWdodCA9IGAke25ld1NpemV9cHhgO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMuaGlkZSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgJGVsWzBdLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAkZWxbMF0uc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICRlbC50cmFuc2l0aW9uKDQwMCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uKSB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgIHN3aXBlci5zY3JvbGxiYXIuJGRyYWdFbC50cmFuc2l0aW9uKGR1cmF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNpemUoKSB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgIGNvbnN0IHtcbiAgICAgIHNjcm9sbGJhclxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qge1xuICAgICAgJGRyYWdFbCxcbiAgICAgICRlbFxuICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgJGRyYWdFbFswXS5zdHlsZS53aWR0aCA9ICcnO1xuICAgICRkcmFnRWxbMF0uc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgdHJhY2tTaXplID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJGVsWzBdLm9mZnNldFdpZHRoIDogJGVsWzBdLm9mZnNldEhlaWdodDtcbiAgICBkaXZpZGVyID0gc3dpcGVyLnNpemUgLyAoc3dpcGVyLnZpcnR1YWxTaXplICsgc3dpcGVyLnBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmUgLSAoc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHN3aXBlci5zbmFwR3JpZFswXSA6IDApKTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5kcmFnU2l6ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICBkcmFnU2l6ZSA9IHRyYWNrU2l6ZSAqIGRpdmlkZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWdTaXplID0gcGFyc2VJbnQoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZHJhZ1NpemUsIDEwKTtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAkZHJhZ0VsWzBdLnN0eWxlLndpZHRoID0gYCR7ZHJhZ1NpemV9cHhgO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZHJhZ0VsWzBdLnN0eWxlLmhlaWdodCA9IGAke2RyYWdTaXplfXB4YDtcbiAgICB9XG5cbiAgICBpZiAoZGl2aWRlciA+PSAxKSB7XG4gICAgICAkZWxbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsWzBdLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuaGlkZSkge1xuICAgICAgJGVsWzBdLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgIHNjcm9sbGJhci4kZWxbc3dpcGVyLmlzTG9ja2VkID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9pbnRlclBvc2l0aW9uKGUpIHtcbiAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICByZXR1cm4gZS50eXBlID09PSAndG91Y2hzdGFydCcgfHwgZS50eXBlID09PSAndG91Y2htb3ZlJyA/IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYO1xuICAgIH1cblxuICAgIHJldHVybiBlLnR5cGUgPT09ICd0b3VjaHN0YXJ0JyB8fCBlLnR5cGUgPT09ICd0b3VjaG1vdmUnID8gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkgOiBlLmNsaWVudFk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXREcmFnUG9zaXRpb24oZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNjcm9sbGJhcixcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB7XG4gICAgICAkZWxcbiAgICB9ID0gc2Nyb2xsYmFyO1xuICAgIGxldCBwb3NpdGlvblJhdGlvO1xuICAgIHBvc2l0aW9uUmF0aW8gPSAoZ2V0UG9pbnRlclBvc2l0aW9uKGUpIC0gJGVsLm9mZnNldCgpW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnXSAtIChkcmFnU3RhcnRQb3MgIT09IG51bGwgPyBkcmFnU3RhcnRQb3MgOiBkcmFnU2l6ZSAvIDIpKSAvICh0cmFja1NpemUgLSBkcmFnU2l6ZSk7XG4gICAgcG9zaXRpb25SYXRpbyA9IE1hdGgubWF4KE1hdGgubWluKHBvc2l0aW9uUmF0aW8sIDEpLCAwKTtcblxuICAgIGlmIChydGwpIHtcbiAgICAgIHBvc2l0aW9uUmF0aW8gPSAxIC0gcG9zaXRpb25SYXRpbztcbiAgICB9XG5cbiAgICBjb25zdCBwb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKSArIChzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpICogcG9zaXRpb25SYXRpbztcbiAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MocG9zaXRpb24pO1xuICAgIHN3aXBlci5zZXRUcmFuc2xhdGUocG9zaXRpb24pO1xuICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdTdGFydChlKSB7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXI7XG4gICAgY29uc3Qge1xuICAgICAgc2Nyb2xsYmFyLFxuICAgICAgJHdyYXBwZXJFbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qge1xuICAgICAgJGVsLFxuICAgICAgJGRyYWdFbFxuICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgaXNUb3VjaGVkID0gdHJ1ZTtcbiAgICBkcmFnU3RhcnRQb3MgPSBlLnRhcmdldCA9PT0gJGRyYWdFbFswXSB8fCBlLnRhcmdldCA9PT0gJGRyYWdFbCA/IGdldFBvaW50ZXJQb3NpdGlvbihlKSAtIGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnXSA6IG51bGw7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgJHdyYXBwZXJFbC50cmFuc2l0aW9uKDEwMCk7XG4gICAgJGRyYWdFbC50cmFuc2l0aW9uKDEwMCk7XG4gICAgc2V0RHJhZ1Bvc2l0aW9uKGUpO1xuICAgIGNsZWFyVGltZW91dChkcmFnVGltZW91dCk7XG4gICAgJGVsLnRyYW5zaXRpb24oMCk7XG5cbiAgICBpZiAocGFyYW1zLmhpZGUpIHtcbiAgICAgICRlbC5jc3MoJ29wYWNpdHknLCAxKTtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC5jc3MoJ3Njcm9sbC1zbmFwLXR5cGUnLCAnbm9uZScpO1xuICAgIH1cblxuICAgIGVtaXQoJ3Njcm9sbGJhckRyYWdTdGFydCcsIGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnTW92ZShlKSB7XG4gICAgY29uc3Qge1xuICAgICAgc2Nyb2xsYmFyLFxuICAgICAgJHdyYXBwZXJFbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qge1xuICAgICAgJGVsLFxuICAgICAgJGRyYWdFbFxuICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgaWYgKCFpc1RvdWNoZWQpIHJldHVybjtcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIHNldERyYWdQb3NpdGlvbihlKTtcbiAgICAkd3JhcHBlckVsLnRyYW5zaXRpb24oMCk7XG4gICAgJGVsLnRyYW5zaXRpb24oMCk7XG4gICAgJGRyYWdFbC50cmFuc2l0aW9uKDApO1xuICAgIGVtaXQoJ3Njcm9sbGJhckRyYWdNb3ZlJywgZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdFbmQoZSkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgIGNvbnN0IHtcbiAgICAgIHNjcm9sbGJhcixcbiAgICAgICR3cmFwcGVyRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IHtcbiAgICAgICRlbFxuICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgaWYgKCFpc1RvdWNoZWQpIHJldHVybjtcbiAgICBpc1RvdWNoZWQgPSBmYWxzZTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLmNzcygnc2Nyb2xsLXNuYXAtdHlwZScsICcnKTtcbiAgICAgICR3cmFwcGVyRWwudHJhbnNpdGlvbignJyk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5oaWRlKSB7XG4gICAgICBjbGVhclRpbWVvdXQoZHJhZ1RpbWVvdXQpO1xuICAgICAgZHJhZ1RpbWVvdXQgPSBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICRlbC5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgJGVsLnRyYW5zaXRpb24oNDAwKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cblxuICAgIGVtaXQoJ3Njcm9sbGJhckRyYWdFbmQnLCBlKTtcblxuICAgIGlmIChwYXJhbXMuc25hcE9uUmVsZWFzZSkge1xuICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnRzKG1ldGhvZCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNjcm9sbGJhcixcbiAgICAgIHRvdWNoRXZlbnRzVG91Y2gsXG4gICAgICB0b3VjaEV2ZW50c0Rlc2t0b3AsXG4gICAgICBwYXJhbXMsXG4gICAgICBzdXBwb3J0XG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCAkZWwgPSBzY3JvbGxiYXIuJGVsO1xuICAgIGNvbnN0IHRhcmdldCA9ICRlbFswXTtcbiAgICBjb25zdCBhY3RpdmVMaXN0ZW5lciA9IHN1cHBvcnQucGFzc2l2ZUxpc3RlbmVyICYmIHBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzID8ge1xuICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICBjYXB0dXJlOiBmYWxzZVxuICAgIH0gOiBmYWxzZTtcbiAgICBjb25zdCBwYXNzaXZlTGlzdGVuZXIgPSBzdXBwb3J0LnBhc3NpdmVMaXN0ZW5lciAmJiBwYXJhbXMucGFzc2l2ZUxpc3RlbmVycyA/IHtcbiAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICBjYXB0dXJlOiBmYWxzZVxuICAgIH0gOiBmYWxzZTtcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgIGNvbnN0IGV2ZW50TWV0aG9kID0gbWV0aG9kID09PSAnb24nID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuXG4gICAgaWYgKCFzdXBwb3J0LnRvdWNoKSB7XG4gICAgICB0YXJnZXRbZXZlbnRNZXRob2RdKHRvdWNoRXZlbnRzRGVza3RvcC5zdGFydCwgb25EcmFnU3RhcnQsIGFjdGl2ZUxpc3RlbmVyKTtcbiAgICAgIGRvY3VtZW50W2V2ZW50TWV0aG9kXSh0b3VjaEV2ZW50c0Rlc2t0b3AubW92ZSwgb25EcmFnTW92ZSwgYWN0aXZlTGlzdGVuZXIpO1xuICAgICAgZG9jdW1lbnRbZXZlbnRNZXRob2RdKHRvdWNoRXZlbnRzRGVza3RvcC5lbmQsIG9uRHJhZ0VuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0W2V2ZW50TWV0aG9kXSh0b3VjaEV2ZW50c1RvdWNoLnN0YXJ0LCBvbkRyYWdTdGFydCwgYWN0aXZlTGlzdGVuZXIpO1xuICAgICAgdGFyZ2V0W2V2ZW50TWV0aG9kXSh0b3VjaEV2ZW50c1RvdWNoLm1vdmUsIG9uRHJhZ01vdmUsIGFjdGl2ZUxpc3RlbmVyKTtcbiAgICAgIHRhcmdldFtldmVudE1ldGhvZF0odG91Y2hFdmVudHNUb3VjaC5lbmQsIG9uRHJhZ0VuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbmFibGVEcmFnZ2FibGUoKSB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgIGV2ZW50cygnb24nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVEcmFnZ2FibGUoKSB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgIGV2ZW50cygnb2ZmJyk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNjcm9sbGJhcixcbiAgICAgICRlbDogJHN3aXBlckVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBzd2lwZXIucGFyYW1zLnNjcm9sbGJhciA9IGNyZWF0ZUVsZW1lbnRJZk5vdERlZmluZWQoc3dpcGVyLCBzd2lwZXIub3JpZ2luYWxQYXJhbXMuc2Nyb2xsYmFyLCBzd2lwZXIucGFyYW1zLnNjcm9sbGJhciwge1xuICAgICAgZWw6ICdzd2lwZXItc2Nyb2xsYmFyJ1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgIGlmICghcGFyYW1zLmVsKSByZXR1cm47XG4gICAgbGV0ICRlbCA9ICQocGFyYW1zLmVsKTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIHR5cGVvZiBwYXJhbXMuZWwgPT09ICdzdHJpbmcnICYmICRlbC5sZW5ndGggPiAxICYmICRzd2lwZXJFbC5maW5kKHBhcmFtcy5lbCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAkZWwgPSAkc3dpcGVyRWwuZmluZChwYXJhbXMuZWwpO1xuICAgIH1cblxuICAgIGxldCAkZHJhZ0VsID0gJGVsLmZpbmQoYC4ke3N3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzc31gKTtcblxuICAgIGlmICgkZHJhZ0VsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgJGRyYWdFbCA9ICQoYDxkaXYgY2xhc3M9XCIke3N3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzc31cIj48L2Rpdj5gKTtcbiAgICAgICRlbC5hcHBlbmQoJGRyYWdFbCk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihzY3JvbGxiYXIsIHtcbiAgICAgICRlbCxcbiAgICAgIGVsOiAkZWxbMF0sXG4gICAgICAkZHJhZ0VsLFxuICAgICAgZHJhZ0VsOiAkZHJhZ0VsWzBdXG4gICAgfSk7XG5cbiAgICBpZiAocGFyYW1zLmRyYWdnYWJsZSkge1xuICAgICAgZW5hYmxlRHJhZ2dhYmxlKCk7XG4gICAgfVxuXG4gICAgaWYgKCRlbCkge1xuICAgICAgJGVsW3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBkaXNhYmxlRHJhZ2dhYmxlKCk7XG4gIH1cblxuICBvbignaW5pdCcsICgpID0+IHtcbiAgICBpbml0KCk7XG4gICAgdXBkYXRlU2l6ZSgpO1xuICAgIHNldFRyYW5zbGF0ZSgpO1xuICB9KTtcbiAgb24oJ3VwZGF0ZSByZXNpemUgb2JzZXJ2ZXJVcGRhdGUgbG9jayB1bmxvY2snLCAoKSA9PiB7XG4gICAgdXBkYXRlU2l6ZSgpO1xuICB9KTtcbiAgb24oJ3NldFRyYW5zbGF0ZScsICgpID0+IHtcbiAgICBzZXRUcmFuc2xhdGUoKTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbikgPT4ge1xuICAgIHNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICB9KTtcbiAgb24oJ2VuYWJsZSBkaXNhYmxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICRlbFxuICAgIH0gPSBzd2lwZXIuc2Nyb2xsYmFyO1xuXG4gICAgaWYgKCRlbCkge1xuICAgICAgJGVsW3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyk7XG4gICAgfVxuICB9KTtcbiAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgZGVzdHJveSgpO1xuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIuc2Nyb2xsYmFyLCB7XG4gICAgdXBkYXRlU2l6ZSxcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgaW5pdCxcbiAgICBkZXN0cm95XG4gIH0pO1xufSIsICJpbXBvcnQgJCBmcm9tICcuLi8uLi9zaGFyZWQvZG9tLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhcmFsbGF4KF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uXG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIHBhcmFsbGF4OiB7XG4gICAgICBlbmFibGVkOiBmYWxzZVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc2V0VHJhbnNmb3JtID0gKGVsLCBwcm9ncmVzcykgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHJ0bFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgJGVsID0gJChlbCk7XG4gICAgY29uc3QgcnRsRmFjdG9yID0gcnRsID8gLTEgOiAxO1xuICAgIGNvbnN0IHAgPSAkZWwuYXR0cignZGF0YS1zd2lwZXItcGFyYWxsYXgnKSB8fCAnMCc7XG4gICAgbGV0IHggPSAkZWwuYXR0cignZGF0YS1zd2lwZXItcGFyYWxsYXgteCcpO1xuICAgIGxldCB5ID0gJGVsLmF0dHIoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LXknKTtcbiAgICBjb25zdCBzY2FsZSA9ICRlbC5hdHRyKCdkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZScpO1xuICAgIGNvbnN0IG9wYWNpdHkgPSAkZWwuYXR0cignZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eScpO1xuXG4gICAgaWYgKHggfHwgeSkge1xuICAgICAgeCA9IHggfHwgJzAnO1xuICAgICAgeSA9IHkgfHwgJzAnO1xuICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICB4ID0gcDtcbiAgICAgIHkgPSAnMCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHkgPSBwO1xuICAgICAgeCA9ICcwJztcbiAgICB9XG5cbiAgICBpZiAoeC5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgeCA9IGAke3BhcnNlSW50KHgsIDEwKSAqIHByb2dyZXNzICogcnRsRmFjdG9yfSVgO1xuICAgIH0gZWxzZSB7XG4gICAgICB4ID0gYCR7eCAqIHByb2dyZXNzICogcnRsRmFjdG9yfXB4YDtcbiAgICB9XG5cbiAgICBpZiAoeS5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgeSA9IGAke3BhcnNlSW50KHksIDEwKSAqIHByb2dyZXNzfSVgO1xuICAgIH0gZWxzZSB7XG4gICAgICB5ID0gYCR7eSAqIHByb2dyZXNzfXB4YDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wYWNpdHkgIT09ICd1bmRlZmluZWQnICYmIG9wYWNpdHkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRPcGFjaXR5ID0gb3BhY2l0eSAtIChvcGFjaXR5IC0gMSkgKiAoMSAtIE1hdGguYWJzKHByb2dyZXNzKSk7XG4gICAgICAkZWxbMF0uc3R5bGUub3BhY2l0eSA9IGN1cnJlbnRPcGFjaXR5O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2NhbGUgPT09ICd1bmRlZmluZWQnIHx8IHNjYWxlID09PSBudWxsKSB7XG4gICAgICAkZWwudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgke3h9LCAke3l9LCAwcHgpYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTY2FsZSA9IHNjYWxlIC0gKHNjYWxlIC0gMSkgKiAoMSAtIE1hdGguYWJzKHByb2dyZXNzKSk7XG4gICAgICAkZWwudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgke3h9LCAke3l9LCAwcHgpIHNjYWxlKCR7Y3VycmVudFNjYWxlfSlgKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICRlbCxcbiAgICAgIHNsaWRlcyxcbiAgICAgIHByb2dyZXNzLFxuICAgICAgc25hcEdyaWRcbiAgICB9ID0gc3dpcGVyO1xuICAgICRlbC5jaGlsZHJlbignW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXNjYWxlXScpLmVhY2goZWwgPT4ge1xuICAgICAgc2V0VHJhbnNmb3JtKGVsLCBwcm9ncmVzcyk7XG4gICAgfSk7XG4gICAgc2xpZGVzLmVhY2goKHNsaWRlRWwsIHNsaWRlSW5kZXgpID0+IHtcbiAgICAgIGxldCBzbGlkZVByb2dyZXNzID0gc2xpZGVFbC5wcm9ncmVzcztcblxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPiAxICYmIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIHNsaWRlUHJvZ3Jlc3MgKz0gTWF0aC5jZWlsKHNsaWRlSW5kZXggLyAyKSAtIHByb2dyZXNzICogKHNuYXBHcmlkLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuXG4gICAgICBzbGlkZVByb2dyZXNzID0gTWF0aC5taW4oTWF0aC5tYXgoc2xpZGVQcm9ncmVzcywgLTEpLCAxKTtcbiAgICAgICQoc2xpZGVFbCkuZmluZCgnW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXNjYWxlXScpLmVhY2goZWwgPT4ge1xuICAgICAgICBzZXRUcmFuc2Zvcm0oZWwsIHNsaWRlUHJvZ3Jlc3MpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChkdXJhdGlvbikge1xuICAgIGlmIChkdXJhdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICBkdXJhdGlvbiA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgJGVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICAkZWwuZmluZCgnW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXNjYWxlXScpLmVhY2gocGFyYWxsYXhFbCA9PiB7XG4gICAgICBjb25zdCAkcGFyYWxsYXhFbCA9ICQocGFyYWxsYXhFbCk7XG4gICAgICBsZXQgcGFyYWxsYXhEdXJhdGlvbiA9IHBhcnNlSW50KCRwYXJhbGxheEVsLmF0dHIoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LWR1cmF0aW9uJyksIDEwKSB8fCBkdXJhdGlvbjtcbiAgICAgIGlmIChkdXJhdGlvbiA9PT0gMCkgcGFyYWxsYXhEdXJhdGlvbiA9IDA7XG4gICAgICAkcGFyYWxsYXhFbC50cmFuc2l0aW9uKHBhcmFsbGF4RHVyYXRpb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5wYXJhbGxheC5lbmFibGVkKSByZXR1cm47XG4gICAgc3dpcGVyLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gdHJ1ZTtcbiAgICBzd2lwZXIub3JpZ2luYWxQYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gIH0pO1xuICBvbignaW5pdCcsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgIHNldFRyYW5zbGF0ZSgpO1xuICB9KTtcbiAgb24oJ3NldFRyYW5zbGF0ZScsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgIHNldFRyYW5zbGF0ZSgpO1xuICB9KTtcbiAgb24oJ3NldFRyYW5zaXRpb24nLCAoX3N3aXBlciwgZHVyYXRpb24pID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgIHNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICB9KTtcbn0iLCAiaW1wb3J0IHsgZ2V0V2luZG93IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5pbXBvcnQgJCBmcm9tICcuLi8uLi9zaGFyZWQvZG9tLmpzJztcbmltcG9ydCB7IGdldFRyYW5zbGF0ZSB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlscy5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBab29tKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uLFxuICAgIGVtaXRcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIHpvb206IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgbWF4UmF0aW86IDMsXG4gICAgICBtaW5SYXRpbzogMSxcbiAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgIGNvbnRhaW5lckNsYXNzOiAnc3dpcGVyLXpvb20tY29udGFpbmVyJyxcbiAgICAgIHpvb21lZFNsaWRlQ2xhc3M6ICdzd2lwZXItc2xpZGUtem9vbWVkJ1xuICAgIH1cbiAgfSk7XG4gIHN3aXBlci56b29tID0ge1xuICAgIGVuYWJsZWQ6IGZhbHNlXG4gIH07XG4gIGxldCBjdXJyZW50U2NhbGUgPSAxO1xuICBsZXQgaXNTY2FsaW5nID0gZmFsc2U7XG4gIGxldCBnZXN0dXJlc0VuYWJsZWQ7XG4gIGxldCBmYWtlR2VzdHVyZVRvdWNoZWQ7XG4gIGxldCBmYWtlR2VzdHVyZU1vdmVkO1xuICBjb25zdCBnZXN0dXJlID0ge1xuICAgICRzbGlkZUVsOiB1bmRlZmluZWQsXG4gICAgc2xpZGVXaWR0aDogdW5kZWZpbmVkLFxuICAgIHNsaWRlSGVpZ2h0OiB1bmRlZmluZWQsXG4gICAgJGltYWdlRWw6IHVuZGVmaW5lZCxcbiAgICAkaW1hZ2VXcmFwRWw6IHVuZGVmaW5lZCxcbiAgICBtYXhSYXRpbzogM1xuICB9O1xuICBjb25zdCBpbWFnZSA9IHtcbiAgICBpc1RvdWNoZWQ6IHVuZGVmaW5lZCxcbiAgICBpc01vdmVkOiB1bmRlZmluZWQsXG4gICAgY3VycmVudFg6IHVuZGVmaW5lZCxcbiAgICBjdXJyZW50WTogdW5kZWZpbmVkLFxuICAgIG1pblg6IHVuZGVmaW5lZCxcbiAgICBtaW5ZOiB1bmRlZmluZWQsXG4gICAgbWF4WDogdW5kZWZpbmVkLFxuICAgIG1heFk6IHVuZGVmaW5lZCxcbiAgICB3aWR0aDogdW5kZWZpbmVkLFxuICAgIGhlaWdodDogdW5kZWZpbmVkLFxuICAgIHN0YXJ0WDogdW5kZWZpbmVkLFxuICAgIHN0YXJ0WTogdW5kZWZpbmVkLFxuICAgIHRvdWNoZXNTdGFydDoge30sXG4gICAgdG91Y2hlc0N1cnJlbnQ6IHt9XG4gIH07XG4gIGNvbnN0IHZlbG9jaXR5ID0ge1xuICAgIHg6IHVuZGVmaW5lZCxcbiAgICB5OiB1bmRlZmluZWQsXG4gICAgcHJldlBvc2l0aW9uWDogdW5kZWZpbmVkLFxuICAgIHByZXZQb3NpdGlvblk6IHVuZGVmaW5lZCxcbiAgICBwcmV2VGltZTogdW5kZWZpbmVkXG4gIH07XG4gIGxldCBzY2FsZSA9IDE7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzd2lwZXIuem9vbSwgJ3NjYWxlJywge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9LFxuXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICBpZiAoc2NhbGUgIT09IHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlRWwgPSBnZXN0dXJlLiRpbWFnZUVsID8gZ2VzdHVyZS4kaW1hZ2VFbFswXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IGdlc3R1cmUuJHNsaWRlRWwgPyBnZXN0dXJlLiRzbGlkZUVsWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICBlbWl0KCd6b29tQ2hhbmdlJywgdmFsdWUsIGltYWdlRWwsIHNsaWRlRWwpO1xuICAgICAgfVxuXG4gICAgICBzY2FsZSA9IHZhbHVlO1xuICAgIH1cblxuICB9KTtcblxuICBmdW5jdGlvbiBnZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKGUpIHtcbiAgICBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA8IDIpIHJldHVybiAxO1xuICAgIGNvbnN0IHgxID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgIGNvbnN0IHkxID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZO1xuICAgIGNvbnN0IHgyID0gZS50YXJnZXRUb3VjaGVzWzFdLnBhZ2VYO1xuICAgIGNvbnN0IHkyID0gZS50YXJnZXRUb3VjaGVzWzFdLnBhZ2VZO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KCh4MiAtIHgxKSAqKiAyICsgKHkyIC0geTEpICoqIDIpO1xuICAgIHJldHVybiBkaXN0YW5jZTtcbiAgfSAvLyBFdmVudHNcblxuXG4gIGZ1bmN0aW9uIG9uR2VzdHVyZVN0YXJ0KGUpIHtcbiAgICBjb25zdCBzdXBwb3J0ID0gc3dpcGVyLnN1cHBvcnQ7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgIGZha2VHZXN0dXJlVG91Y2hlZCA9IGZhbHNlO1xuICAgIGZha2VHZXN0dXJlTW92ZWQgPSBmYWxzZTtcblxuICAgIGlmICghc3VwcG9ydC5nZXN0dXJlcykge1xuICAgICAgaWYgKGUudHlwZSAhPT0gJ3RvdWNoc3RhcnQnIHx8IGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZmFrZUdlc3R1cmVUb3VjaGVkID0gdHJ1ZTtcbiAgICAgIGdlc3R1cmUuc2NhbGVTdGFydCA9IGdldERpc3RhbmNlQmV0d2VlblRvdWNoZXMoZSk7XG4gICAgfVxuXG4gICAgaWYgKCFnZXN0dXJlLiRzbGlkZUVsIHx8ICFnZXN0dXJlLiRzbGlkZUVsLmxlbmd0aCkge1xuICAgICAgZ2VzdHVyZS4kc2xpZGVFbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gKTtcbiAgICAgIGlmIChnZXN0dXJlLiRzbGlkZUVsLmxlbmd0aCA9PT0gMCkgZ2VzdHVyZS4kc2xpZGVFbCA9IHN3aXBlci5zbGlkZXMuZXEoc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgIGdlc3R1cmUuJGltYWdlRWwgPSBnZXN0dXJlLiRzbGlkZUVsLmZpbmQoYC4ke3BhcmFtcy5jb250YWluZXJDbGFzc31gKS5lcSgwKS5maW5kKCdwaWN0dXJlLCBpbWcsIHN2ZywgY2FudmFzLCAuc3dpcGVyLXpvb20tdGFyZ2V0JykuZXEoMCk7XG4gICAgICBnZXN0dXJlLiRpbWFnZVdyYXBFbCA9IGdlc3R1cmUuJGltYWdlRWwucGFyZW50KGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YCk7XG4gICAgICBnZXN0dXJlLm1heFJhdGlvID0gZ2VzdHVyZS4kaW1hZ2VXcmFwRWwuYXR0cignZGF0YS1zd2lwZXItem9vbScpIHx8IHBhcmFtcy5tYXhSYXRpbztcblxuICAgICAgaWYgKGdlc3R1cmUuJGltYWdlV3JhcEVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBnZXN0dXJlLiRpbWFnZUVsID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdlc3R1cmUuJGltYWdlRWwpIHtcbiAgICAgIGdlc3R1cmUuJGltYWdlRWwudHJhbnNpdGlvbigwKTtcbiAgICB9XG5cbiAgICBpc1NjYWxpbmcgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gb25HZXN0dXJlQ2hhbmdlKGUpIHtcbiAgICBjb25zdCBzdXBwb3J0ID0gc3dpcGVyLnN1cHBvcnQ7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcblxuICAgIGlmICghc3VwcG9ydC5nZXN0dXJlcykge1xuICAgICAgaWYgKGUudHlwZSAhPT0gJ3RvdWNobW92ZScgfHwgZS50eXBlID09PSAndG91Y2htb3ZlJyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZha2VHZXN0dXJlTW92ZWQgPSB0cnVlO1xuICAgICAgZ2VzdHVyZS5zY2FsZU1vdmUgPSBnZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKGUpO1xuICAgIH1cblxuICAgIGlmICghZ2VzdHVyZS4kaW1hZ2VFbCB8fCBnZXN0dXJlLiRpbWFnZUVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKGUudHlwZSA9PT0gJ2dlc3R1cmVjaGFuZ2UnKSBvbkdlc3R1cmVTdGFydChlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5nZXN0dXJlcykge1xuICAgICAgem9vbS5zY2FsZSA9IGUuc2NhbGUgKiBjdXJyZW50U2NhbGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHpvb20uc2NhbGUgPSBnZXN0dXJlLnNjYWxlTW92ZSAvIGdlc3R1cmUuc2NhbGVTdGFydCAqIGN1cnJlbnRTY2FsZTtcbiAgICB9XG5cbiAgICBpZiAoem9vbS5zY2FsZSA+IGdlc3R1cmUubWF4UmF0aW8pIHtcbiAgICAgIHpvb20uc2NhbGUgPSBnZXN0dXJlLm1heFJhdGlvIC0gMSArICh6b29tLnNjYWxlIC0gZ2VzdHVyZS5tYXhSYXRpbyArIDEpICoqIDAuNTtcbiAgICB9XG5cbiAgICBpZiAoem9vbS5zY2FsZSA8IHBhcmFtcy5taW5SYXRpbykge1xuICAgICAgem9vbS5zY2FsZSA9IHBhcmFtcy5taW5SYXRpbyArIDEgLSAocGFyYW1zLm1pblJhdGlvIC0gem9vbS5zY2FsZSArIDEpICoqIDAuNTtcbiAgICB9XG5cbiAgICBnZXN0dXJlLiRpbWFnZUVsLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKCR7em9vbS5zY2FsZX0pYCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkdlc3R1cmVFbmQoZSkge1xuICAgIGNvbnN0IGRldmljZSA9IHN3aXBlci5kZXZpY2U7XG4gICAgY29uc3Qgc3VwcG9ydCA9IHN3aXBlci5zdXBwb3J0O1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuem9vbTtcbiAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG5cbiAgICBpZiAoIXN1cHBvcnQuZ2VzdHVyZXMpIHtcbiAgICAgIGlmICghZmFrZUdlc3R1cmVUb3VjaGVkIHx8ICFmYWtlR2VzdHVyZU1vdmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGUudHlwZSAhPT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGVuZCcgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggPCAyICYmICFkZXZpY2UuYW5kcm9pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZha2VHZXN0dXJlVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgZmFrZUdlc3R1cmVNb3ZlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghZ2VzdHVyZS4kaW1hZ2VFbCB8fCBnZXN0dXJlLiRpbWFnZUVsLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIHpvb20uc2NhbGUgPSBNYXRoLm1heChNYXRoLm1pbih6b29tLnNjYWxlLCBnZXN0dXJlLm1heFJhdGlvKSwgcGFyYW1zLm1pblJhdGlvKTtcbiAgICBnZXN0dXJlLiRpbWFnZUVsLnRyYW5zaXRpb24oc3dpcGVyLnBhcmFtcy5zcGVlZCkudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoJHt6b29tLnNjYWxlfSlgKTtcbiAgICBjdXJyZW50U2NhbGUgPSB6b29tLnNjYWxlO1xuICAgIGlzU2NhbGluZyA9IGZhbHNlO1xuICAgIGlmICh6b29tLnNjYWxlID09PSAxKSBnZXN0dXJlLiRzbGlkZUVsID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICBjb25zdCBkZXZpY2UgPSBzd2lwZXIuZGV2aWNlO1xuICAgIGlmICghZ2VzdHVyZS4kaW1hZ2VFbCB8fCBnZXN0dXJlLiRpbWFnZUVsLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGlmIChpbWFnZS5pc1RvdWNoZWQpIHJldHVybjtcbiAgICBpZiAoZGV2aWNlLmFuZHJvaWQgJiYgZS5jYW5jZWxhYmxlKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW1hZ2UuaXNUb3VjaGVkID0gdHJ1ZTtcbiAgICBpbWFnZS50b3VjaGVzU3RhcnQueCA9IGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnID8gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWDtcbiAgICBpbWFnZS50b3VjaGVzU3RhcnQueSA9IGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnID8gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIDogZS5wYWdlWTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgaWYgKCFnZXN0dXJlLiRpbWFnZUVsIHx8IGdlc3R1cmUuJGltYWdlRWwubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgc3dpcGVyLmFsbG93Q2xpY2sgPSBmYWxzZTtcbiAgICBpZiAoIWltYWdlLmlzVG91Y2hlZCB8fCAhZ2VzdHVyZS4kc2xpZGVFbCkgcmV0dXJuO1xuXG4gICAgaWYgKCFpbWFnZS5pc01vdmVkKSB7XG4gICAgICBpbWFnZS53aWR0aCA9IGdlc3R1cmUuJGltYWdlRWxbMF0ub2Zmc2V0V2lkdGg7XG4gICAgICBpbWFnZS5oZWlnaHQgPSBnZXN0dXJlLiRpbWFnZUVsWzBdLm9mZnNldEhlaWdodDtcbiAgICAgIGltYWdlLnN0YXJ0WCA9IGdldFRyYW5zbGF0ZShnZXN0dXJlLiRpbWFnZVdyYXBFbFswXSwgJ3gnKSB8fCAwO1xuICAgICAgaW1hZ2Uuc3RhcnRZID0gZ2V0VHJhbnNsYXRlKGdlc3R1cmUuJGltYWdlV3JhcEVsWzBdLCAneScpIHx8IDA7XG4gICAgICBnZXN0dXJlLnNsaWRlV2lkdGggPSBnZXN0dXJlLiRzbGlkZUVsWzBdLm9mZnNldFdpZHRoO1xuICAgICAgZ2VzdHVyZS5zbGlkZUhlaWdodCA9IGdlc3R1cmUuJHNsaWRlRWxbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgZ2VzdHVyZS4kaW1hZ2VXcmFwRWwudHJhbnNpdGlvbigwKTtcbiAgICB9IC8vIERlZmluZSBpZiB3ZSBuZWVkIGltYWdlIGRyYWdcblxuXG4gICAgY29uc3Qgc2NhbGVkV2lkdGggPSBpbWFnZS53aWR0aCAqIHpvb20uc2NhbGU7XG4gICAgY29uc3Qgc2NhbGVkSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0ICogem9vbS5zY2FsZTtcbiAgICBpZiAoc2NhbGVkV2lkdGggPCBnZXN0dXJlLnNsaWRlV2lkdGggJiYgc2NhbGVkSGVpZ2h0IDwgZ2VzdHVyZS5zbGlkZUhlaWdodCkgcmV0dXJuO1xuICAgIGltYWdlLm1pblggPSBNYXRoLm1pbihnZXN0dXJlLnNsaWRlV2lkdGggLyAyIC0gc2NhbGVkV2lkdGggLyAyLCAwKTtcbiAgICBpbWFnZS5tYXhYID0gLWltYWdlLm1pblg7XG4gICAgaW1hZ2UubWluWSA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVIZWlnaHQgLyAyIC0gc2NhbGVkSGVpZ2h0IC8gMiwgMCk7XG4gICAgaW1hZ2UubWF4WSA9IC1pbWFnZS5taW5ZO1xuICAgIGltYWdlLnRvdWNoZXNDdXJyZW50LnggPSBlLnR5cGUgPT09ICd0b3VjaG1vdmUnID8gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWDtcbiAgICBpbWFnZS50b3VjaGVzQ3VycmVudC55ID0gZS50eXBlID09PSAndG91Y2htb3ZlJyA/IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSA6IGUucGFnZVk7XG5cbiAgICBpZiAoIWltYWdlLmlzTW92ZWQgJiYgIWlzU2NhbGluZykge1xuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiAoTWF0aC5mbG9vcihpbWFnZS5taW5YKSA9PT0gTWF0aC5mbG9vcihpbWFnZS5zdGFydFgpICYmIGltYWdlLnRvdWNoZXNDdXJyZW50LnggPCBpbWFnZS50b3VjaGVzU3RhcnQueCB8fCBNYXRoLmZsb29yKGltYWdlLm1heFgpID09PSBNYXRoLmZsb29yKGltYWdlLnN0YXJ0WCkgJiYgaW1hZ2UudG91Y2hlc0N1cnJlbnQueCA+IGltYWdlLnRvdWNoZXNTdGFydC54KSkge1xuICAgICAgICBpbWFnZS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSAmJiAoTWF0aC5mbG9vcihpbWFnZS5taW5ZKSA9PT0gTWF0aC5mbG9vcihpbWFnZS5zdGFydFkpICYmIGltYWdlLnRvdWNoZXNDdXJyZW50LnkgPCBpbWFnZS50b3VjaGVzU3RhcnQueSB8fCBNYXRoLmZsb29yKGltYWdlLm1heFkpID09PSBNYXRoLmZsb29yKGltYWdlLnN0YXJ0WSkgJiYgaW1hZ2UudG91Y2hlc0N1cnJlbnQueSA+IGltYWdlLnRvdWNoZXNTdGFydC55KSkge1xuICAgICAgICBpbWFnZS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGltYWdlLmlzTW92ZWQgPSB0cnVlO1xuICAgIGltYWdlLmN1cnJlbnRYID0gaW1hZ2UudG91Y2hlc0N1cnJlbnQueCAtIGltYWdlLnRvdWNoZXNTdGFydC54ICsgaW1hZ2Uuc3RhcnRYO1xuICAgIGltYWdlLmN1cnJlbnRZID0gaW1hZ2UudG91Y2hlc0N1cnJlbnQueSAtIGltYWdlLnRvdWNoZXNTdGFydC55ICsgaW1hZ2Uuc3RhcnRZO1xuXG4gICAgaWYgKGltYWdlLmN1cnJlbnRYIDwgaW1hZ2UubWluWCkge1xuICAgICAgaW1hZ2UuY3VycmVudFggPSBpbWFnZS5taW5YICsgMSAtIChpbWFnZS5taW5YIC0gaW1hZ2UuY3VycmVudFggKyAxKSAqKiAwLjg7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlLmN1cnJlbnRYID4gaW1hZ2UubWF4WCkge1xuICAgICAgaW1hZ2UuY3VycmVudFggPSBpbWFnZS5tYXhYIC0gMSArIChpbWFnZS5jdXJyZW50WCAtIGltYWdlLm1heFggKyAxKSAqKiAwLjg7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlLmN1cnJlbnRZIDwgaW1hZ2UubWluWSkge1xuICAgICAgaW1hZ2UuY3VycmVudFkgPSBpbWFnZS5taW5ZICsgMSAtIChpbWFnZS5taW5ZIC0gaW1hZ2UuY3VycmVudFkgKyAxKSAqKiAwLjg7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlLmN1cnJlbnRZID4gaW1hZ2UubWF4WSkge1xuICAgICAgaW1hZ2UuY3VycmVudFkgPSBpbWFnZS5tYXhZIC0gMSArIChpbWFnZS5jdXJyZW50WSAtIGltYWdlLm1heFkgKyAxKSAqKiAwLjg7XG4gICAgfSAvLyBWZWxvY2l0eVxuXG5cbiAgICBpZiAoIXZlbG9jaXR5LnByZXZQb3NpdGlvblgpIHZlbG9jaXR5LnByZXZQb3NpdGlvblggPSBpbWFnZS50b3VjaGVzQ3VycmVudC54O1xuICAgIGlmICghdmVsb2NpdHkucHJldlBvc2l0aW9uWSkgdmVsb2NpdHkucHJldlBvc2l0aW9uWSA9IGltYWdlLnRvdWNoZXNDdXJyZW50Lnk7XG4gICAgaWYgKCF2ZWxvY2l0eS5wcmV2VGltZSkgdmVsb2NpdHkucHJldlRpbWUgPSBEYXRlLm5vdygpO1xuICAgIHZlbG9jaXR5LnggPSAoaW1hZ2UudG91Y2hlc0N1cnJlbnQueCAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblgpIC8gKERhdGUubm93KCkgLSB2ZWxvY2l0eS5wcmV2VGltZSkgLyAyO1xuICAgIHZlbG9jaXR5LnkgPSAoaW1hZ2UudG91Y2hlc0N1cnJlbnQueSAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblkpIC8gKERhdGUubm93KCkgLSB2ZWxvY2l0eS5wcmV2VGltZSkgLyAyO1xuICAgIGlmIChNYXRoLmFicyhpbWFnZS50b3VjaGVzQ3VycmVudC54IC0gdmVsb2NpdHkucHJldlBvc2l0aW9uWCkgPCAyKSB2ZWxvY2l0eS54ID0gMDtcbiAgICBpZiAoTWF0aC5hYnMoaW1hZ2UudG91Y2hlc0N1cnJlbnQueSAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblkpIDwgMikgdmVsb2NpdHkueSA9IDA7XG4gICAgdmVsb2NpdHkucHJldlBvc2l0aW9uWCA9IGltYWdlLnRvdWNoZXNDdXJyZW50Lng7XG4gICAgdmVsb2NpdHkucHJldlBvc2l0aW9uWSA9IGltYWdlLnRvdWNoZXNDdXJyZW50Lnk7XG4gICAgdmVsb2NpdHkucHJldlRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGdlc3R1cmUuJGltYWdlV3JhcEVsLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoJHtpbWFnZS5jdXJyZW50WH1weCwgJHtpbWFnZS5jdXJyZW50WX1weCwwKWApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHtcbiAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgaWYgKCFnZXN0dXJlLiRpbWFnZUVsIHx8IGdlc3R1cmUuJGltYWdlRWwubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBpZiAoIWltYWdlLmlzVG91Y2hlZCB8fCAhaW1hZ2UuaXNNb3ZlZCkge1xuICAgICAgaW1hZ2UuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICBpbWFnZS5pc01vdmVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW1hZ2UuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgaW1hZ2UuaXNNb3ZlZCA9IGZhbHNlO1xuICAgIGxldCBtb21lbnR1bUR1cmF0aW9uWCA9IDMwMDtcbiAgICBsZXQgbW9tZW50dW1EdXJhdGlvblkgPSAzMDA7XG4gICAgY29uc3QgbW9tZW50dW1EaXN0YW5jZVggPSB2ZWxvY2l0eS54ICogbW9tZW50dW1EdXJhdGlvblg7XG4gICAgY29uc3QgbmV3UG9zaXRpb25YID0gaW1hZ2UuY3VycmVudFggKyBtb21lbnR1bURpc3RhbmNlWDtcbiAgICBjb25zdCBtb21lbnR1bURpc3RhbmNlWSA9IHZlbG9jaXR5LnkgKiBtb21lbnR1bUR1cmF0aW9uWTtcbiAgICBjb25zdCBuZXdQb3NpdGlvblkgPSBpbWFnZS5jdXJyZW50WSArIG1vbWVudHVtRGlzdGFuY2VZOyAvLyBGaXggZHVyYXRpb25cblxuICAgIGlmICh2ZWxvY2l0eS54ICE9PSAwKSBtb21lbnR1bUR1cmF0aW9uWCA9IE1hdGguYWJzKChuZXdQb3NpdGlvblggLSBpbWFnZS5jdXJyZW50WCkgLyB2ZWxvY2l0eS54KTtcbiAgICBpZiAodmVsb2NpdHkueSAhPT0gMCkgbW9tZW50dW1EdXJhdGlvblkgPSBNYXRoLmFicygobmV3UG9zaXRpb25ZIC0gaW1hZ2UuY3VycmVudFkpIC8gdmVsb2NpdHkueSk7XG4gICAgY29uc3QgbW9tZW50dW1EdXJhdGlvbiA9IE1hdGgubWF4KG1vbWVudHVtRHVyYXRpb25YLCBtb21lbnR1bUR1cmF0aW9uWSk7XG4gICAgaW1hZ2UuY3VycmVudFggPSBuZXdQb3NpdGlvblg7XG4gICAgaW1hZ2UuY3VycmVudFkgPSBuZXdQb3NpdGlvblk7IC8vIERlZmluZSBpZiB3ZSBuZWVkIGltYWdlIGRyYWdcblxuICAgIGNvbnN0IHNjYWxlZFdpZHRoID0gaW1hZ2Uud2lkdGggKiB6b29tLnNjYWxlO1xuICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IGltYWdlLmhlaWdodCAqIHpvb20uc2NhbGU7XG4gICAgaW1hZ2UubWluWCA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVXaWR0aCAvIDIgLSBzY2FsZWRXaWR0aCAvIDIsIDApO1xuICAgIGltYWdlLm1heFggPSAtaW1hZ2UubWluWDtcbiAgICBpbWFnZS5taW5ZID0gTWF0aC5taW4oZ2VzdHVyZS5zbGlkZUhlaWdodCAvIDIgLSBzY2FsZWRIZWlnaHQgLyAyLCAwKTtcbiAgICBpbWFnZS5tYXhZID0gLWltYWdlLm1pblk7XG4gICAgaW1hZ2UuY3VycmVudFggPSBNYXRoLm1heChNYXRoLm1pbihpbWFnZS5jdXJyZW50WCwgaW1hZ2UubWF4WCksIGltYWdlLm1pblgpO1xuICAgIGltYWdlLmN1cnJlbnRZID0gTWF0aC5tYXgoTWF0aC5taW4oaW1hZ2UuY3VycmVudFksIGltYWdlLm1heFkpLCBpbWFnZS5taW5ZKTtcbiAgICBnZXN0dXJlLiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKG1vbWVudHVtRHVyYXRpb24pLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoJHtpbWFnZS5jdXJyZW50WH1weCwgJHtpbWFnZS5jdXJyZW50WX1weCwwKWApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25UcmFuc2l0aW9uRW5kKCkge1xuICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcblxuICAgIGlmIChnZXN0dXJlLiRzbGlkZUVsICYmIHN3aXBlci5wcmV2aW91c0luZGV4ICE9PSBzd2lwZXIuYWN0aXZlSW5kZXgpIHtcbiAgICAgIGlmIChnZXN0dXJlLiRpbWFnZUVsKSB7XG4gICAgICAgIGdlc3R1cmUuJGltYWdlRWwudHJhbnNmb3JtKCd0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoMSknKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdlc3R1cmUuJGltYWdlV3JhcEVsKSB7XG4gICAgICAgIGdlc3R1cmUuJGltYWdlV3JhcEVsLnRyYW5zZm9ybSgndHJhbnNsYXRlM2QoMCwwLDApJyk7XG4gICAgICB9XG5cbiAgICAgIHpvb20uc2NhbGUgPSAxO1xuICAgICAgY3VycmVudFNjYWxlID0gMTtcbiAgICAgIGdlc3R1cmUuJHNsaWRlRWwgPSB1bmRlZmluZWQ7XG4gICAgICBnZXN0dXJlLiRpbWFnZUVsID0gdW5kZWZpbmVkO1xuICAgICAgZ2VzdHVyZS4kaW1hZ2VXcmFwRWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gem9vbUluKGUpIHtcbiAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuXG4gICAgaWYgKCFnZXN0dXJlLiRzbGlkZUVsKSB7XG4gICAgICBpZiAoZSAmJiBlLnRhcmdldCkge1xuICAgICAgICBnZXN0dXJlLiRzbGlkZUVsID0gJChlLnRhcmdldCkuY2xvc2VzdChgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdlc3R1cmUuJHNsaWRlRWwpIHtcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiBzd2lwZXIudmlydHVhbCkge1xuICAgICAgICAgIGdlc3R1cmUuJHNsaWRlRWwgPSBzd2lwZXIuJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdlc3R1cmUuJHNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzLmVxKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2VzdHVyZS4kaW1hZ2VFbCA9IGdlc3R1cmUuJHNsaWRlRWwuZmluZChgLiR7cGFyYW1zLmNvbnRhaW5lckNsYXNzfWApLmVxKDApLmZpbmQoJ3BpY3R1cmUsIGltZywgc3ZnLCBjYW52YXMsIC5zd2lwZXItem9vbS10YXJnZXQnKS5lcSgwKTtcbiAgICAgIGdlc3R1cmUuJGltYWdlV3JhcEVsID0gZ2VzdHVyZS4kaW1hZ2VFbC5wYXJlbnQoYC4ke3BhcmFtcy5jb250YWluZXJDbGFzc31gKTtcbiAgICB9XG5cbiAgICBpZiAoIWdlc3R1cmUuJGltYWdlRWwgfHwgZ2VzdHVyZS4kaW1hZ2VFbC5sZW5ndGggPT09IDAgfHwgIWdlc3R1cmUuJGltYWdlV3JhcEVsIHx8IGdlc3R1cmUuJGltYWdlV3JhcEVsLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS50b3VjaEFjdGlvbiA9ICdub25lJztcbiAgICB9XG5cbiAgICBnZXN0dXJlLiRzbGlkZUVsLmFkZENsYXNzKGAke3BhcmFtcy56b29tZWRTbGlkZUNsYXNzfWApO1xuICAgIGxldCB0b3VjaFg7XG4gICAgbGV0IHRvdWNoWTtcbiAgICBsZXQgb2Zmc2V0WDtcbiAgICBsZXQgb2Zmc2V0WTtcbiAgICBsZXQgZGlmZlg7XG4gICAgbGV0IGRpZmZZO1xuICAgIGxldCB0cmFuc2xhdGVYO1xuICAgIGxldCB0cmFuc2xhdGVZO1xuICAgIGxldCBpbWFnZVdpZHRoO1xuICAgIGxldCBpbWFnZUhlaWdodDtcbiAgICBsZXQgc2NhbGVkV2lkdGg7XG4gICAgbGV0IHNjYWxlZEhlaWdodDtcbiAgICBsZXQgdHJhbnNsYXRlTWluWDtcbiAgICBsZXQgdHJhbnNsYXRlTWluWTtcbiAgICBsZXQgdHJhbnNsYXRlTWF4WDtcbiAgICBsZXQgdHJhbnNsYXRlTWF4WTtcbiAgICBsZXQgc2xpZGVXaWR0aDtcbiAgICBsZXQgc2xpZGVIZWlnaHQ7XG5cbiAgICBpZiAodHlwZW9mIGltYWdlLnRvdWNoZXNTdGFydC54ID09PSAndW5kZWZpbmVkJyAmJiBlKSB7XG4gICAgICB0b3VjaFggPSBlLnR5cGUgPT09ICd0b3VjaGVuZCcgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIDogZS5wYWdlWDtcbiAgICAgIHRvdWNoWSA9IGUudHlwZSA9PT0gJ3RvdWNoZW5kJyA/IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkgOiBlLnBhZ2VZO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3VjaFggPSBpbWFnZS50b3VjaGVzU3RhcnQueDtcbiAgICAgIHRvdWNoWSA9IGltYWdlLnRvdWNoZXNTdGFydC55O1xuICAgIH1cblxuICAgIHpvb20uc2NhbGUgPSBnZXN0dXJlLiRpbWFnZVdyYXBFbC5hdHRyKCdkYXRhLXN3aXBlci16b29tJykgfHwgcGFyYW1zLm1heFJhdGlvO1xuICAgIGN1cnJlbnRTY2FsZSA9IGdlc3R1cmUuJGltYWdlV3JhcEVsLmF0dHIoJ2RhdGEtc3dpcGVyLXpvb20nKSB8fCBwYXJhbXMubWF4UmF0aW87XG5cbiAgICBpZiAoZSkge1xuICAgICAgc2xpZGVXaWR0aCA9IGdlc3R1cmUuJHNsaWRlRWxbMF0ub2Zmc2V0V2lkdGg7XG4gICAgICBzbGlkZUhlaWdodCA9IGdlc3R1cmUuJHNsaWRlRWxbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgb2Zmc2V0WCA9IGdlc3R1cmUuJHNsaWRlRWwub2Zmc2V0KCkubGVmdCArIHdpbmRvdy5zY3JvbGxYO1xuICAgICAgb2Zmc2V0WSA9IGdlc3R1cmUuJHNsaWRlRWwub2Zmc2V0KCkudG9wICsgd2luZG93LnNjcm9sbFk7XG4gICAgICBkaWZmWCA9IG9mZnNldFggKyBzbGlkZVdpZHRoIC8gMiAtIHRvdWNoWDtcbiAgICAgIGRpZmZZID0gb2Zmc2V0WSArIHNsaWRlSGVpZ2h0IC8gMiAtIHRvdWNoWTtcbiAgICAgIGltYWdlV2lkdGggPSBnZXN0dXJlLiRpbWFnZUVsWzBdLm9mZnNldFdpZHRoO1xuICAgICAgaW1hZ2VIZWlnaHQgPSBnZXN0dXJlLiRpbWFnZUVsWzBdLm9mZnNldEhlaWdodDtcbiAgICAgIHNjYWxlZFdpZHRoID0gaW1hZ2VXaWR0aCAqIHpvb20uc2NhbGU7XG4gICAgICBzY2FsZWRIZWlnaHQgPSBpbWFnZUhlaWdodCAqIHpvb20uc2NhbGU7XG4gICAgICB0cmFuc2xhdGVNaW5YID0gTWF0aC5taW4oc2xpZGVXaWR0aCAvIDIgLSBzY2FsZWRXaWR0aCAvIDIsIDApO1xuICAgICAgdHJhbnNsYXRlTWluWSA9IE1hdGgubWluKHNsaWRlSGVpZ2h0IC8gMiAtIHNjYWxlZEhlaWdodCAvIDIsIDApO1xuICAgICAgdHJhbnNsYXRlTWF4WCA9IC10cmFuc2xhdGVNaW5YO1xuICAgICAgdHJhbnNsYXRlTWF4WSA9IC10cmFuc2xhdGVNaW5ZO1xuICAgICAgdHJhbnNsYXRlWCA9IGRpZmZYICogem9vbS5zY2FsZTtcbiAgICAgIHRyYW5zbGF0ZVkgPSBkaWZmWSAqIHpvb20uc2NhbGU7XG5cbiAgICAgIGlmICh0cmFuc2xhdGVYIDwgdHJhbnNsYXRlTWluWCkge1xuICAgICAgICB0cmFuc2xhdGVYID0gdHJhbnNsYXRlTWluWDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zbGF0ZVggPiB0cmFuc2xhdGVNYXhYKSB7XG4gICAgICAgIHRyYW5zbGF0ZVggPSB0cmFuc2xhdGVNYXhYO1xuICAgICAgfVxuXG4gICAgICBpZiAodHJhbnNsYXRlWSA8IHRyYW5zbGF0ZU1pblkpIHtcbiAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZU1pblk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmFuc2xhdGVZID4gdHJhbnNsYXRlTWF4WSkge1xuICAgICAgICB0cmFuc2xhdGVZID0gdHJhbnNsYXRlTWF4WTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNsYXRlWCA9IDA7XG4gICAgICB0cmFuc2xhdGVZID0gMDtcbiAgICB9XG5cbiAgICBnZXN0dXJlLiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKDMwMCkudHJhbnNmb3JtKGB0cmFuc2xhdGUzZCgke3RyYW5zbGF0ZVh9cHgsICR7dHJhbnNsYXRlWX1weCwwKWApO1xuICAgIGdlc3R1cmUuJGltYWdlRWwudHJhbnNpdGlvbigzMDApLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKCR7em9vbS5zY2FsZX0pYCk7XG4gIH1cblxuICBmdW5jdGlvbiB6b29tT3V0KCkge1xuICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG5cbiAgICBpZiAoIWdlc3R1cmUuJHNsaWRlRWwpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgc3dpcGVyLnZpcnR1YWwpIHtcbiAgICAgICAgZ2VzdHVyZS4kc2xpZGVFbCA9IHN3aXBlci4kd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3N9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXN0dXJlLiRzbGlkZUVsID0gc3dpcGVyLnNsaWRlcy5lcShzd2lwZXIuYWN0aXZlSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICBnZXN0dXJlLiRpbWFnZUVsID0gZ2VzdHVyZS4kc2xpZGVFbC5maW5kKGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YCkuZXEoMCkuZmluZCgncGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldCcpLmVxKDApO1xuICAgICAgZ2VzdHVyZS4kaW1hZ2VXcmFwRWwgPSBnZXN0dXJlLiRpbWFnZUVsLnBhcmVudChgLiR7cGFyYW1zLmNvbnRhaW5lckNsYXNzfWApO1xuICAgIH1cblxuICAgIGlmICghZ2VzdHVyZS4kaW1hZ2VFbCB8fCBnZXN0dXJlLiRpbWFnZUVsLmxlbmd0aCA9PT0gMCB8fCAhZ2VzdHVyZS4kaW1hZ2VXcmFwRWwgfHwgZ2VzdHVyZS4kaW1hZ2VXcmFwRWwubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnRvdWNoQWN0aW9uID0gJyc7XG4gICAgfVxuXG4gICAgem9vbS5zY2FsZSA9IDE7XG4gICAgY3VycmVudFNjYWxlID0gMTtcbiAgICBnZXN0dXJlLiRpbWFnZVdyYXBFbC50cmFuc2l0aW9uKDMwMCkudHJhbnNmb3JtKCd0cmFuc2xhdGUzZCgwLDAsMCknKTtcbiAgICBnZXN0dXJlLiRpbWFnZUVsLnRyYW5zaXRpb24oMzAwKS50cmFuc2Zvcm0oJ3RyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKScpO1xuICAgIGdlc3R1cmUuJHNsaWRlRWwucmVtb3ZlQ2xhc3MoYCR7cGFyYW1zLnpvb21lZFNsaWRlQ2xhc3N9YCk7XG4gICAgZ2VzdHVyZS4kc2xpZGVFbCA9IHVuZGVmaW5lZDtcbiAgfSAvLyBUb2dnbGUgWm9vbVxuXG5cbiAgZnVuY3Rpb24gem9vbVRvZ2dsZShlKSB7XG4gICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuXG4gICAgaWYgKHpvb20uc2NhbGUgJiYgem9vbS5zY2FsZSAhPT0gMSkge1xuICAgICAgLy8gWm9vbSBPdXRcbiAgICAgIHpvb21PdXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gWm9vbSBJblxuICAgICAgem9vbUluKGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpc3RlbmVycygpIHtcbiAgICBjb25zdCBzdXBwb3J0ID0gc3dpcGVyLnN1cHBvcnQ7XG4gICAgY29uc3QgcGFzc2l2ZUxpc3RlbmVyID0gc3dpcGVyLnRvdWNoRXZlbnRzLnN0YXJ0ID09PSAndG91Y2hzdGFydCcgJiYgc3VwcG9ydC5wYXNzaXZlTGlzdGVuZXIgJiYgc3dpcGVyLnBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzID8ge1xuICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgfSA6IGZhbHNlO1xuICAgIGNvbnN0IGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUgPSBzdXBwb3J0LnBhc3NpdmVMaXN0ZW5lciA/IHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0gOiB0cnVlO1xuICAgIHJldHVybiB7XG4gICAgICBwYXNzaXZlTGlzdGVuZXIsXG4gICAgICBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNsaWRlU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuIGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9YDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUdlc3R1cmVzKG1ldGhvZCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBhc3NpdmVMaXN0ZW5lclxuICAgIH0gPSBnZXRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBzbGlkZVNlbGVjdG9yID0gZ2V0U2xpZGVTZWxlY3RvcigpO1xuICAgIHN3aXBlci4kd3JhcHBlckVsW21ldGhvZF0oJ2dlc3R1cmVzdGFydCcsIHNsaWRlU2VsZWN0b3IsIG9uR2VzdHVyZVN0YXJ0LCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgIHN3aXBlci4kd3JhcHBlckVsW21ldGhvZF0oJ2dlc3R1cmVjaGFuZ2UnLCBzbGlkZVNlbGVjdG9yLCBvbkdlc3R1cmVDaGFuZ2UsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgc3dpcGVyLiR3cmFwcGVyRWxbbWV0aG9kXSgnZ2VzdHVyZWVuZCcsIHNsaWRlU2VsZWN0b3IsIG9uR2VzdHVyZUVuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuYWJsZUdlc3R1cmVzKCkge1xuICAgIGlmIChnZXN0dXJlc0VuYWJsZWQpIHJldHVybjtcbiAgICBnZXN0dXJlc0VuYWJsZWQgPSB0cnVlO1xuICAgIHRvZ2dsZUdlc3R1cmVzKCdvbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZUdlc3R1cmVzKCkge1xuICAgIGlmICghZ2VzdHVyZXNFbmFibGVkKSByZXR1cm47XG4gICAgZ2VzdHVyZXNFbmFibGVkID0gZmFsc2U7XG4gICAgdG9nZ2xlR2VzdHVyZXMoJ29mZicpO1xuICB9IC8vIEF0dGFjaC9EZXRhY2ggRXZlbnRzXG5cblxuICBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuICAgIGlmICh6b29tLmVuYWJsZWQpIHJldHVybjtcbiAgICB6b29tLmVuYWJsZWQgPSB0cnVlO1xuICAgIGNvbnN0IHN1cHBvcnQgPSBzd2lwZXIuc3VwcG9ydDtcbiAgICBjb25zdCB7XG4gICAgICBwYXNzaXZlTGlzdGVuZXIsXG4gICAgICBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlXG4gICAgfSA9IGdldExpc3RlbmVycygpO1xuICAgIGNvbnN0IHNsaWRlU2VsZWN0b3IgPSBnZXRTbGlkZVNlbGVjdG9yKCk7IC8vIFNjYWxlIGltYWdlXG5cbiAgICBpZiAoc3VwcG9ydC5nZXN0dXJlcykge1xuICAgICAgc3dpcGVyLiR3cmFwcGVyRWwub24oc3dpcGVyLnRvdWNoRXZlbnRzLnN0YXJ0LCBlbmFibGVHZXN0dXJlcywgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9uKHN3aXBlci50b3VjaEV2ZW50cy5lbmQsIGRpc2FibGVHZXN0dXJlcywgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9IGVsc2UgaWYgKHN3aXBlci50b3VjaEV2ZW50cy5zdGFydCA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC5vbihzd2lwZXIudG91Y2hFdmVudHMuc3RhcnQsIHNsaWRlU2VsZWN0b3IsIG9uR2VzdHVyZVN0YXJ0LCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgICAgc3dpcGVyLiR3cmFwcGVyRWwub24oc3dpcGVyLnRvdWNoRXZlbnRzLm1vdmUsIHNsaWRlU2VsZWN0b3IsIG9uR2VzdHVyZUNoYW5nZSwgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZSk7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC5vbihzd2lwZXIudG91Y2hFdmVudHMuZW5kLCBzbGlkZVNlbGVjdG9yLCBvbkdlc3R1cmVFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG5cbiAgICAgIGlmIChzd2lwZXIudG91Y2hFdmVudHMuY2FuY2VsKSB7XG4gICAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9uKHN3aXBlci50b3VjaEV2ZW50cy5jYW5jZWwsIHNsaWRlU2VsZWN0b3IsIG9uR2VzdHVyZUVuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IC8vIE1vdmUgaW1hZ2VcblxuXG4gICAgc3dpcGVyLiR3cmFwcGVyRWwub24oc3dpcGVyLnRvdWNoRXZlbnRzLm1vdmUsIGAuJHtzd2lwZXIucGFyYW1zLnpvb20uY29udGFpbmVyQ2xhc3N9YCwgb25Ub3VjaE1vdmUsIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgaWYgKCF6b29tLmVuYWJsZWQpIHJldHVybjtcbiAgICBjb25zdCBzdXBwb3J0ID0gc3dpcGVyLnN1cHBvcnQ7XG4gICAgem9vbS5lbmFibGVkID0gZmFsc2U7XG4gICAgY29uc3Qge1xuICAgICAgcGFzc2l2ZUxpc3RlbmVyLFxuICAgICAgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZVxuICAgIH0gPSBnZXRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBzbGlkZVNlbGVjdG9yID0gZ2V0U2xpZGVTZWxlY3RvcigpOyAvLyBTY2FsZSBpbWFnZVxuXG4gICAgaWYgKHN1cHBvcnQuZ2VzdHVyZXMpIHtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9mZihzd2lwZXIudG91Y2hFdmVudHMuc3RhcnQsIGVuYWJsZUdlc3R1cmVzLCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgICAgc3dpcGVyLiR3cmFwcGVyRWwub2ZmKHN3aXBlci50b3VjaEV2ZW50cy5lbmQsIGRpc2FibGVHZXN0dXJlcywgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9IGVsc2UgaWYgKHN3aXBlci50b3VjaEV2ZW50cy5zdGFydCA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICBzd2lwZXIuJHdyYXBwZXJFbC5vZmYoc3dpcGVyLnRvdWNoRXZlbnRzLnN0YXJ0LCBzbGlkZVNlbGVjdG9yLCBvbkdlc3R1cmVTdGFydCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9mZihzd2lwZXIudG91Y2hFdmVudHMubW92ZSwgc2xpZGVTZWxlY3Rvciwgb25HZXN0dXJlQ2hhbmdlLCBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlKTtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9mZihzd2lwZXIudG91Y2hFdmVudHMuZW5kLCBzbGlkZVNlbGVjdG9yLCBvbkdlc3R1cmVFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG5cbiAgICAgIGlmIChzd2lwZXIudG91Y2hFdmVudHMuY2FuY2VsKSB7XG4gICAgICAgIHN3aXBlci4kd3JhcHBlckVsLm9mZihzd2lwZXIudG91Y2hFdmVudHMuY2FuY2VsLCBzbGlkZVNlbGVjdG9yLCBvbkdlc3R1cmVFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfSAvLyBNb3ZlIGltYWdlXG5cblxuICAgIHN3aXBlci4kd3JhcHBlckVsLm9mZihzd2lwZXIudG91Y2hFdmVudHMubW92ZSwgYC4ke3N3aXBlci5wYXJhbXMuem9vbS5jb250YWluZXJDbGFzc31gLCBvblRvdWNoTW92ZSwgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZSk7XG4gIH1cblxuICBvbignaW5pdCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQpIHtcbiAgICAgIGVuYWJsZSgpO1xuICAgIH1cbiAgfSk7XG4gIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgIGRpc2FibGUoKTtcbiAgfSk7XG4gIG9uKCd0b3VjaFN0YXJ0JywgKF9zLCBlKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIuem9vbS5lbmFibGVkKSByZXR1cm47XG4gICAgb25Ub3VjaFN0YXJ0KGUpO1xuICB9KTtcbiAgb24oJ3RvdWNoRW5kJywgKF9zLCBlKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIuem9vbS5lbmFibGVkKSByZXR1cm47XG4gICAgb25Ub3VjaEVuZChlKTtcbiAgfSk7XG4gIG9uKCdkb3VibGVUYXAnLCAoX3MsIGUpID0+IHtcbiAgICBpZiAoIXN3aXBlci5hbmltYXRpbmcgJiYgc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnpvb20uZW5hYmxlZCAmJiBzd2lwZXIucGFyYW1zLnpvb20udG9nZ2xlKSB7XG4gICAgICB6b29tVG9nZ2xlKGUpO1xuICAgIH1cbiAgfSk7XG4gIG9uKCd0cmFuc2l0aW9uRW5kJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIuem9vbS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuem9vbS5lbmFibGVkKSB7XG4gICAgICBvblRyYW5zaXRpb25FbmQoKTtcbiAgICB9XG4gIH0pO1xuICBvbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBvblRyYW5zaXRpb25FbmQoKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuYXNzaWduKHN3aXBlci56b29tLCB7XG4gICAgZW5hYmxlLFxuICAgIGRpc2FibGUsXG4gICAgaW46IHpvb21JbixcbiAgICBvdXQ6IHpvb21PdXQsXG4gICAgdG9nZ2xlOiB6b29tVG9nZ2xlXG4gIH0pO1xufSIsICJpbXBvcnQgeyBnZXRXaW5kb3cgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTGF6eShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvbixcbiAgICBlbWl0XG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIGxhenk6IHtcbiAgICAgIGNoZWNrSW5WaWV3OiBmYWxzZSxcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgbG9hZFByZXZOZXh0OiBmYWxzZSxcbiAgICAgIGxvYWRQcmV2TmV4dEFtb3VudDogMSxcbiAgICAgIGxvYWRPblRyYW5zaXRpb25TdGFydDogZmFsc2UsXG4gICAgICBzY3JvbGxpbmdFbGVtZW50OiAnJyxcbiAgICAgIGVsZW1lbnRDbGFzczogJ3N3aXBlci1sYXp5JyxcbiAgICAgIGxvYWRpbmdDbGFzczogJ3N3aXBlci1sYXp5LWxvYWRpbmcnLFxuICAgICAgbG9hZGVkQ2xhc3M6ICdzd2lwZXItbGF6eS1sb2FkZWQnLFxuICAgICAgcHJlbG9hZGVyQ2xhc3M6ICdzd2lwZXItbGF6eS1wcmVsb2FkZXInXG4gICAgfVxuICB9KTtcbiAgc3dpcGVyLmxhenkgPSB7fTtcbiAgbGV0IHNjcm9sbEhhbmRsZXJBdHRhY2hlZCA9IGZhbHNlO1xuICBsZXQgaW5pdGlhbEltYWdlTG9hZGVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gbG9hZEluU2xpZGUoaW5kZXgsIGxvYWRJbkR1cGxpY2F0ZSkge1xuICAgIGlmIChsb2FkSW5EdXBsaWNhdGUgPT09IHZvaWQgMCkge1xuICAgICAgbG9hZEluRHVwbGljYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmxhenk7XG4gICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBpZiAoc3dpcGVyLnNsaWRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICBjb25zdCAkc2xpZGVFbCA9IGlzVmlydHVhbCA/IHN3aXBlci4kd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtpbmRleH1cIl1gKSA6IHN3aXBlci5zbGlkZXMuZXEoaW5kZXgpO1xuICAgIGNvbnN0ICRpbWFnZXMgPSAkc2xpZGVFbC5maW5kKGAuJHtwYXJhbXMuZWxlbWVudENsYXNzfTpub3QoLiR7cGFyYW1zLmxvYWRlZENsYXNzfSk6bm90KC4ke3BhcmFtcy5sb2FkaW5nQ2xhc3N9KWApO1xuXG4gICAgaWYgKCRzbGlkZUVsLmhhc0NsYXNzKHBhcmFtcy5lbGVtZW50Q2xhc3MpICYmICEkc2xpZGVFbC5oYXNDbGFzcyhwYXJhbXMubG9hZGVkQ2xhc3MpICYmICEkc2xpZGVFbC5oYXNDbGFzcyhwYXJhbXMubG9hZGluZ0NsYXNzKSkge1xuICAgICAgJGltYWdlcy5wdXNoKCRzbGlkZUVsWzBdKTtcbiAgICB9XG5cbiAgICBpZiAoJGltYWdlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAkaW1hZ2VzLmVhY2goaW1hZ2VFbCA9PiB7XG4gICAgICBjb25zdCAkaW1hZ2VFbCA9ICQoaW1hZ2VFbCk7XG4gICAgICAkaW1hZ2VFbC5hZGRDbGFzcyhwYXJhbXMubG9hZGluZ0NsYXNzKTtcbiAgICAgIGNvbnN0IGJhY2tncm91bmQgPSAkaW1hZ2VFbC5hdHRyKCdkYXRhLWJhY2tncm91bmQnKTtcbiAgICAgIGNvbnN0IHNyYyA9ICRpbWFnZUVsLmF0dHIoJ2RhdGEtc3JjJyk7XG4gICAgICBjb25zdCBzcmNzZXQgPSAkaW1hZ2VFbC5hdHRyKCdkYXRhLXNyY3NldCcpO1xuICAgICAgY29uc3Qgc2l6ZXMgPSAkaW1hZ2VFbC5hdHRyKCdkYXRhLXNpemVzJyk7XG4gICAgICBjb25zdCAkcGljdHVyZUVsID0gJGltYWdlRWwucGFyZW50KCdwaWN0dXJlJyk7XG4gICAgICBzd2lwZXIubG9hZEltYWdlKCRpbWFnZUVsWzBdLCBzcmMgfHwgYmFja2dyb3VuZCwgc3Jjc2V0LCBzaXplcywgZmFsc2UsICgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzd2lwZXIgPT09ICd1bmRlZmluZWQnIHx8IHN3aXBlciA9PT0gbnVsbCB8fCAhc3dpcGVyIHx8IHN3aXBlciAmJiAhc3dpcGVyLnBhcmFtcyB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGJhY2tncm91bmQpIHtcbiAgICAgICAgICAkaW1hZ2VFbC5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKFwiJHtiYWNrZ3JvdW5kfVwiKWApO1xuICAgICAgICAgICRpbWFnZUVsLnJlbW92ZUF0dHIoJ2RhdGEtYmFja2dyb3VuZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzcmNzZXQpIHtcbiAgICAgICAgICAgICRpbWFnZUVsLmF0dHIoJ3NyY3NldCcsIHNyY3NldCk7XG4gICAgICAgICAgICAkaW1hZ2VFbC5yZW1vdmVBdHRyKCdkYXRhLXNyY3NldCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzaXplcykge1xuICAgICAgICAgICAgJGltYWdlRWwuYXR0cignc2l6ZXMnLCBzaXplcyk7XG4gICAgICAgICAgICAkaW1hZ2VFbC5yZW1vdmVBdHRyKCdkYXRhLXNpemVzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCRwaWN0dXJlRWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAkcGljdHVyZUVsLmNoaWxkcmVuKCdzb3VyY2UnKS5lYWNoKHNvdXJjZUVsID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgJHNvdXJjZSA9ICQoc291cmNlRWwpO1xuXG4gICAgICAgICAgICAgIGlmICgkc291cmNlLmF0dHIoJ2RhdGEtc3Jjc2V0JykpIHtcbiAgICAgICAgICAgICAgICAkc291cmNlLmF0dHIoJ3NyY3NldCcsICRzb3VyY2UuYXR0cignZGF0YS1zcmNzZXQnKSk7XG4gICAgICAgICAgICAgICAgJHNvdXJjZS5yZW1vdmVBdHRyKCdkYXRhLXNyY3NldCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICAkaW1hZ2VFbC5hdHRyKCdzcmMnLCBzcmMpO1xuICAgICAgICAgICAgJGltYWdlRWwucmVtb3ZlQXR0cignZGF0YS1zcmMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkaW1hZ2VFbC5hZGRDbGFzcyhwYXJhbXMubG9hZGVkQ2xhc3MpLnJlbW92ZUNsYXNzKHBhcmFtcy5sb2FkaW5nQ2xhc3MpO1xuICAgICAgICAkc2xpZGVFbC5maW5kKGAuJHtwYXJhbXMucHJlbG9hZGVyQ2xhc3N9YCkucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCAmJiBsb2FkSW5EdXBsaWNhdGUpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZU9yaWdpbmFsSW5kZXggPSAkc2xpZGVFbC5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpO1xuXG4gICAgICAgICAgaWYgKCRzbGlkZUVsLmhhc0NsYXNzKHN3aXBlci5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU2xpZGUgPSBzd2lwZXIuJHdyYXBwZXJFbC5jaGlsZHJlbihgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzbGlkZU9yaWdpbmFsSW5kZXh9XCJdOm5vdCguJHtzd2lwZXIucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9KWApO1xuICAgICAgICAgICAgbG9hZEluU2xpZGUob3JpZ2luYWxTbGlkZS5pbmRleCgpLCBmYWxzZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZWRTbGlkZSA9IHN3aXBlci4kd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzbGlkZU9yaWdpbmFsSW5kZXh9XCJdYCk7XG4gICAgICAgICAgICBsb2FkSW5TbGlkZShkdXBsaWNhdGVkU2xpZGUuaW5kZXgoKSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXQoJ2xhenlJbWFnZVJlYWR5JywgJHNsaWRlRWxbMF0sICRpbWFnZUVsWzBdKTtcblxuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgICAgICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbWl0KCdsYXp5SW1hZ2VMb2FkJywgJHNsaWRlRWxbMF0sICRpbWFnZUVsWzBdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgJHdyYXBwZXJFbCxcbiAgICAgIHBhcmFtczogc3dpcGVyUGFyYW1zLFxuICAgICAgc2xpZGVzLFxuICAgICAgYWN0aXZlSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlclBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyUGFyYW1zLmxhenk7XG4gICAgbGV0IHNsaWRlc1BlclZpZXcgPSBzd2lwZXJQYXJhbXMuc2xpZGVzUGVyVmlldztcblxuICAgIGlmIChzbGlkZXNQZXJWaWV3ID09PSAnYXV0bycpIHtcbiAgICAgIHNsaWRlc1BlclZpZXcgPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNsaWRlRXhpc3QoaW5kZXgpIHtcbiAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgaWYgKCR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3N3aXBlclBhcmFtcy5zbGlkZUNsYXNzfVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7aW5kZXh9XCJdYCkubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVzW2luZGV4XSkgcmV0dXJuIHRydWU7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzbGlkZUluZGV4KHNsaWRlRWwpIHtcbiAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgcmV0dXJuICQoc2xpZGVFbCkuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICQoc2xpZGVFbCkuaW5kZXgoKTtcbiAgICB9XG5cbiAgICBpZiAoIWluaXRpYWxJbWFnZUxvYWRlZCkgaW5pdGlhbEltYWdlTG9hZGVkID0gdHJ1ZTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MpIHtcbiAgICAgICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3N3aXBlclBhcmFtcy5zbGlkZVZpc2libGVDbGFzc31gKS5lYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGlzVmlydHVhbCA/ICQoc2xpZGVFbCkuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSA6ICQoc2xpZGVFbCkuaW5kZXgoKTtcbiAgICAgICAgbG9hZEluU2xpZGUoaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChzbGlkZXNQZXJWaWV3ID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUluZGV4OyBpIDwgYWN0aXZlSW5kZXggKyBzbGlkZXNQZXJWaWV3OyBpICs9IDEpIHtcbiAgICAgICAgaWYgKHNsaWRlRXhpc3QoaSkpIGxvYWRJblNsaWRlKGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkSW5TbGlkZShhY3RpdmVJbmRleCk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5sb2FkUHJldk5leHQpIHtcbiAgICAgIGlmIChzbGlkZXNQZXJWaWV3ID4gMSB8fCBwYXJhbXMubG9hZFByZXZOZXh0QW1vdW50ICYmIHBhcmFtcy5sb2FkUHJldk5leHRBbW91bnQgPiAxKSB7XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcmFtcy5sb2FkUHJldk5leHRBbW91bnQ7XG4gICAgICAgIGNvbnN0IHNwdiA9IHNsaWRlc1BlclZpZXc7XG4gICAgICAgIGNvbnN0IG1heEluZGV4ID0gTWF0aC5taW4oYWN0aXZlSW5kZXggKyBzcHYgKyBNYXRoLm1heChhbW91bnQsIHNwdiksIHNsaWRlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBtaW5JbmRleCA9IE1hdGgubWF4KGFjdGl2ZUluZGV4IC0gTWF0aC5tYXgoc3B2LCBhbW91bnQpLCAwKTsgLy8gTmV4dCBTbGlkZXNcblxuICAgICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggKyBzbGlkZXNQZXJWaWV3OyBpIDwgbWF4SW5kZXg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZUV4aXN0KGkpKSBsb2FkSW5TbGlkZShpKTtcbiAgICAgICAgfSAvLyBQcmV2IFNsaWRlc1xuXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IG1pbkluZGV4OyBpIDwgYWN0aXZlSW5kZXg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZUV4aXN0KGkpKSBsb2FkSW5TbGlkZShpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV4dFNsaWRlID0gJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7c3dpcGVyUGFyYW1zLnNsaWRlTmV4dENsYXNzfWApO1xuICAgICAgICBpZiAobmV4dFNsaWRlLmxlbmd0aCA+IDApIGxvYWRJblNsaWRlKHNsaWRlSW5kZXgobmV4dFNsaWRlKSk7XG4gICAgICAgIGNvbnN0IHByZXZTbGlkZSA9ICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3N3aXBlclBhcmFtcy5zbGlkZVByZXZDbGFzc31gKTtcbiAgICAgICAgaWYgKHByZXZTbGlkZS5sZW5ndGggPiAwKSBsb2FkSW5TbGlkZShzbGlkZUluZGV4KHByZXZTbGlkZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrSW5WaWV3T25Mb2FkKCkge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICBjb25zdCAkc2Nyb2xsRWxlbWVudCA9IHN3aXBlci5wYXJhbXMubGF6eS5zY3JvbGxpbmdFbGVtZW50ID8gJChzd2lwZXIucGFyYW1zLmxhenkuc2Nyb2xsaW5nRWxlbWVudCkgOiAkKHdpbmRvdyk7XG4gICAgY29uc3QgaXNXaW5kb3cgPSAkc2Nyb2xsRWxlbWVudFswXSA9PT0gd2luZG93O1xuICAgIGNvbnN0IHNjcm9sbEVsZW1lbnRXaWR0aCA9IGlzV2luZG93ID8gd2luZG93LmlubmVyV2lkdGggOiAkc2Nyb2xsRWxlbWVudFswXS5vZmZzZXRXaWR0aDtcbiAgICBjb25zdCBzY3JvbGxFbGVtZW50SGVpZ2h0ID0gaXNXaW5kb3cgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAkc2Nyb2xsRWxlbWVudFswXS5vZmZzZXRIZWlnaHQ7XG4gICAgY29uc3Qgc3dpcGVyT2Zmc2V0ID0gc3dpcGVyLiRlbC5vZmZzZXQoKTtcbiAgICBjb25zdCB7XG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IGluVmlldyA9IGZhbHNlO1xuICAgIGlmIChydGwpIHN3aXBlck9mZnNldC5sZWZ0IC09IHN3aXBlci4kZWxbMF0uc2Nyb2xsTGVmdDtcbiAgICBjb25zdCBzd2lwZXJDb29yZCA9IFtbc3dpcGVyT2Zmc2V0LmxlZnQsIHN3aXBlck9mZnNldC50b3BdLCBbc3dpcGVyT2Zmc2V0LmxlZnQgKyBzd2lwZXIud2lkdGgsIHN3aXBlck9mZnNldC50b3BdLCBbc3dpcGVyT2Zmc2V0LmxlZnQsIHN3aXBlck9mZnNldC50b3AgKyBzd2lwZXIuaGVpZ2h0XSwgW3N3aXBlck9mZnNldC5sZWZ0ICsgc3dpcGVyLndpZHRoLCBzd2lwZXJPZmZzZXQudG9wICsgc3dpcGVyLmhlaWdodF1dO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXJDb29yZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgcG9pbnQgPSBzd2lwZXJDb29yZFtpXTtcblxuICAgICAgaWYgKHBvaW50WzBdID49IDAgJiYgcG9pbnRbMF0gPD0gc2Nyb2xsRWxlbWVudFdpZHRoICYmIHBvaW50WzFdID49IDAgJiYgcG9pbnRbMV0gPD0gc2Nyb2xsRWxlbWVudEhlaWdodCkge1xuICAgICAgICBpZiAocG9pbnRbMF0gPT09IDAgJiYgcG9pbnRbMV0gPT09IDApIGNvbnRpbnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICAgICAgaW5WaWV3ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXNzaXZlTGlzdGVuZXIgPSBzd2lwZXIudG91Y2hFdmVudHMuc3RhcnQgPT09ICd0b3VjaHN0YXJ0JyAmJiBzd2lwZXIuc3VwcG9ydC5wYXNzaXZlTGlzdGVuZXIgJiYgc3dpcGVyLnBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzID8ge1xuICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgfSA6IGZhbHNlO1xuXG4gICAgaWYgKGluVmlldykge1xuICAgICAgbG9hZCgpO1xuICAgICAgJHNjcm9sbEVsZW1lbnQub2ZmKCdzY3JvbGwnLCBjaGVja0luVmlld09uTG9hZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9IGVsc2UgaWYgKCFzY3JvbGxIYW5kbGVyQXR0YWNoZWQpIHtcbiAgICAgIHNjcm9sbEhhbmRsZXJBdHRhY2hlZCA9IHRydWU7XG4gICAgICAkc2Nyb2xsRWxlbWVudC5vbignc2Nyb2xsJywgY2hlY2tJblZpZXdPbkxvYWQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMubGF6eS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMucHJlbG9hZEltYWdlcykge1xuICAgICAgc3dpcGVyLnBhcmFtcy5wcmVsb2FkSW1hZ2VzID0gZmFsc2U7XG4gICAgfVxuICB9KTtcbiAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMubGF6eS5lbmFibGVkKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sYXp5LmNoZWNrSW5WaWV3KSB7XG4gICAgICAgIGNoZWNrSW5WaWV3T25Mb2FkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgb24oJ3Njcm9sbCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSAmJiBzd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgIXN3aXBlci5wYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICBsb2FkKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ3Njcm9sbGJhckRyYWdNb3ZlIHJlc2l6ZSBfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5sYXp5LmVuYWJsZWQpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxhenkuY2hlY2tJblZpZXcpIHtcbiAgICAgICAgY2hlY2tJblZpZXdPbkxvYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBvbigndHJhbnNpdGlvblN0YXJ0JywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmxhenkuZW5hYmxlZCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnQgfHwgIXN3aXBlci5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnQgJiYgIWluaXRpYWxJbWFnZUxvYWRlZCkge1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sYXp5LmNoZWNrSW5WaWV3KSB7XG4gICAgICAgICAgY2hlY2tJblZpZXdPbkxvYWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBvbigndHJhbnNpdGlvbkVuZCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5sYXp5LmVuYWJsZWQgJiYgIXN3aXBlci5wYXJhbXMubGF6eS5sb2FkT25UcmFuc2l0aW9uU3RhcnQpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxhenkuY2hlY2tJblZpZXcpIHtcbiAgICAgICAgY2hlY2tJblZpZXdPbkxvYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBvbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgbGF6eSxcbiAgICAgIGNzc01vZGUsXG4gICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzLFxuICAgICAgdG91Y2hSZWxlYXNlT25FZGdlcyxcbiAgICAgIHJlc2lzdGFuY2VSYXRpb1xuICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuXG4gICAgaWYgKGxhenkuZW5hYmxlZCAmJiAoY3NzTW9kZSB8fCB3YXRjaFNsaWRlc1Byb2dyZXNzICYmICh0b3VjaFJlbGVhc2VPbkVkZ2VzIHx8IHJlc2lzdGFuY2VSYXRpbyA9PT0gMCkpKSB7XG4gICAgICBsb2FkKCk7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIubGF6eSwge1xuICAgIGxvYWQsXG4gICAgbG9hZEluU2xpZGVcbiAgfSk7XG59IiwgIi8qIGVzbGludCBuby1iaXR3aXNlOiBbXCJlcnJvclwiLCB7IFwiYWxsb3dcIjogW1wiPj5cIl0gfV0gKi9cbmltcG9ydCB7IG5leHRUaWNrIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbnRyb2xsZXIoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb25cbiAgfSA9IF9yZWY7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgY29udHJvbGxlcjoge1xuICAgICAgY29udHJvbDogdW5kZWZpbmVkLFxuICAgICAgaW52ZXJzZTogZmFsc2UsXG4gICAgICBieTogJ3NsaWRlJyAvLyBvciAnY29udGFpbmVyJ1xuXG4gICAgfVxuICB9KTtcbiAgc3dpcGVyLmNvbnRyb2xsZXIgPSB7XG4gICAgY29udHJvbDogdW5kZWZpbmVkXG4gIH07XG5cbiAgZnVuY3Rpb24gTGluZWFyU3BsaW5lKHgsIHkpIHtcbiAgICBjb25zdCBiaW5hcnlTZWFyY2ggPSBmdW5jdGlvbiBzZWFyY2goKSB7XG4gICAgICBsZXQgbWF4SW5kZXg7XG4gICAgICBsZXQgbWluSW5kZXg7XG4gICAgICBsZXQgZ3Vlc3M7XG4gICAgICByZXR1cm4gKGFycmF5LCB2YWwpID0+IHtcbiAgICAgICAgbWluSW5kZXggPSAtMTtcbiAgICAgICAgbWF4SW5kZXggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKG1heEluZGV4IC0gbWluSW5kZXggPiAxKSB7XG4gICAgICAgICAgZ3Vlc3MgPSBtYXhJbmRleCArIG1pbkluZGV4ID4+IDE7XG5cbiAgICAgICAgICBpZiAoYXJyYXlbZ3Vlc3NdIDw9IHZhbCkge1xuICAgICAgICAgICAgbWluSW5kZXggPSBndWVzcztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF4SW5kZXggPSBndWVzcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF4SW5kZXg7XG4gICAgICB9O1xuICAgIH0oKTtcblxuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLmxhc3RJbmRleCA9IHgubGVuZ3RoIC0gMTsgLy8gR2l2ZW4gYW4geCB2YWx1ZSAoeDIpLCByZXR1cm4gdGhlIGV4cGVjdGVkIHkyIHZhbHVlOlxuICAgIC8vICh4MSx5MSkgaXMgdGhlIGtub3duIHBvaW50IGJlZm9yZSBnaXZlbiB2YWx1ZSxcbiAgICAvLyAoeDMseTMpIGlzIHRoZSBrbm93biBwb2ludCBhZnRlciBnaXZlbiB2YWx1ZS5cblxuICAgIGxldCBpMTtcbiAgICBsZXQgaTM7XG5cbiAgICB0aGlzLmludGVycG9sYXRlID0gZnVuY3Rpb24gaW50ZXJwb2xhdGUoeDIpIHtcbiAgICAgIGlmICgheDIpIHJldHVybiAwOyAvLyBHZXQgdGhlIGluZGV4ZXMgb2YgeDEgYW5kIHgzICh0aGUgYXJyYXkgaW5kZXhlcyBiZWZvcmUgYW5kIGFmdGVyIGdpdmVuIHgyKTpcblxuICAgICAgaTMgPSBiaW5hcnlTZWFyY2godGhpcy54LCB4Mik7XG4gICAgICBpMSA9IGkzIC0gMTsgLy8gV2UgaGF2ZSBvdXIgaW5kZXhlcyBpMSAmIGkzLCBzbyB3ZSBjYW4gY2FsY3VsYXRlIGFscmVhZHk6XG4gICAgICAvLyB5MiA6PSAoKHgyXHUyMjEyeDEpIFx1MDBENyAoeTNcdTIyMTJ5MSkpIFx1MDBGNyAoeDNcdTIyMTJ4MSkgKyB5MVxuXG4gICAgICByZXR1cm4gKHgyIC0gdGhpcy54W2kxXSkgKiAodGhpcy55W2kzXSAtIHRoaXMueVtpMV0pIC8gKHRoaXMueFtpM10gLSB0aGlzLnhbaTFdKSArIHRoaXMueVtpMV07XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9IC8vIHh4eDogZm9yIG5vdyBpIHdpbGwganVzdCBzYXZlIG9uZSBzcGxpbmUgZnVuY3Rpb24gdG8gdG9cblxuXG4gIGZ1bmN0aW9uIGdldEludGVycG9sYXRlRnVuY3Rpb24oYykge1xuICAgIGlmICghc3dpcGVyLmNvbnRyb2xsZXIuc3BsaW5lKSB7XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5zcGxpbmUgPSBzd2lwZXIucGFyYW1zLmxvb3AgPyBuZXcgTGluZWFyU3BsaW5lKHN3aXBlci5zbGlkZXNHcmlkLCBjLnNsaWRlc0dyaWQpIDogbmV3IExpbmVhclNwbGluZShzd2lwZXIuc25hcEdyaWQsIGMuc25hcEdyaWQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZShfdCwgYnlDb250cm9sbGVyKSB7XG4gICAgY29uc3QgY29udHJvbGxlZCA9IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgbGV0IG11bHRpcGxpZXI7XG4gICAgbGV0IGNvbnRyb2xsZWRUcmFuc2xhdGU7XG4gICAgY29uc3QgU3dpcGVyID0gc3dpcGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlZFRyYW5zbGF0ZShjKSB7XG4gICAgICAvLyB0aGlzIHdpbGwgY3JlYXRlIGFuIEludGVycG9sYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBzbmFwR3JpZHNcbiAgICAgIC8vIHggaXMgdGhlIEdyaWQgb2YgdGhlIHNjcm9sbGVkIHNjcm9sbGVyIGFuZCB5IHdpbGwgYmUgdGhlIGNvbnRyb2xsZWQgc2Nyb2xsZXJcbiAgICAgIC8vIGl0IG1ha2VzIHNlbnNlIHRvIGNyZWF0ZSB0aGlzIG9ubHkgb25jZSBhbmQgcmVjYWxsIGl0IGZvciB0aGUgaW50ZXJwb2xhdGlvblxuICAgICAgLy8gdGhlIGZ1bmN0aW9uIGRvZXMgYSBsb3Qgb2YgdmFsdWUgY2FjaGluZyBmb3IgcGVyZm9ybWFuY2VcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtc3dpcGVyLnRyYW5zbGF0ZSA6IHN3aXBlci50cmFuc2xhdGU7XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuYnkgPT09ICdzbGlkZScpIHtcbiAgICAgICAgZ2V0SW50ZXJwb2xhdGVGdW5jdGlvbihjKTsgLy8gaSBhbSBub3Qgc3VyZSB3aHkgdGhlIHZhbHVlcyBoYXZlIHRvIGJlIG11bHRpcGxpY2F0ZWQgdGhpcyB3YXksIHRyaWVkIHRvIGludmVydCB0aGUgc25hcEdyaWRcbiAgICAgICAgLy8gYnV0IGl0IGRpZCBub3Qgd29yayBvdXRcblxuICAgICAgICBjb250cm9sbGVkVHJhbnNsYXRlID0gLXN3aXBlci5jb250cm9sbGVyLnNwbGluZS5pbnRlcnBvbGF0ZSgtdHJhbnNsYXRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjb250cm9sbGVkVHJhbnNsYXRlIHx8IHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5ieSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgbXVsdGlwbGllciA9IChjLm1heFRyYW5zbGF0ZSgpIC0gYy5taW5UcmFuc2xhdGUoKSkgLyAoc3dpcGVyLm1heFRyYW5zbGF0ZSgpIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKTtcbiAgICAgICAgY29udHJvbGxlZFRyYW5zbGF0ZSA9ICh0cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpICogbXVsdGlwbGllciArIGMubWluVHJhbnNsYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuaW52ZXJzZSkge1xuICAgICAgICBjb250cm9sbGVkVHJhbnNsYXRlID0gYy5tYXhUcmFuc2xhdGUoKSAtIGNvbnRyb2xsZWRUcmFuc2xhdGU7XG4gICAgICB9XG5cbiAgICAgIGMudXBkYXRlUHJvZ3Jlc3MoY29udHJvbGxlZFRyYW5zbGF0ZSk7XG4gICAgICBjLnNldFRyYW5zbGF0ZShjb250cm9sbGVkVHJhbnNsYXRlLCBzd2lwZXIpO1xuICAgICAgYy51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgYy51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29udHJvbGxlZCkpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udHJvbGxlZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoY29udHJvbGxlZFtpXSAhPT0gYnlDb250cm9sbGVyICYmIGNvbnRyb2xsZWRbaV0gaW5zdGFuY2VvZiBTd2lwZXIpIHtcbiAgICAgICAgICBzZXRDb250cm9sbGVkVHJhbnNsYXRlKGNvbnRyb2xsZWRbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb250cm9sbGVkIGluc3RhbmNlb2YgU3dpcGVyICYmIGJ5Q29udHJvbGxlciAhPT0gY29udHJvbGxlZCkge1xuICAgICAgc2V0Q29udHJvbGxlZFRyYW5zbGF0ZShjb250cm9sbGVkKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpIHtcbiAgICBjb25zdCBTd2lwZXIgPSBzd2lwZXIuY29uc3RydWN0b3I7XG4gICAgY29uc3QgY29udHJvbGxlZCA9IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgbGV0IGk7XG5cbiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVkVHJhbnNpdGlvbihjKSB7XG4gICAgICBjLnNldFRyYW5zaXRpb24oZHVyYXRpb24sIHN3aXBlcik7XG5cbiAgICAgIGlmIChkdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICBjLnRyYW5zaXRpb25TdGFydCgpO1xuXG4gICAgICAgIGlmIChjLnBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgYy51cGRhdGVBdXRvSGVpZ2h0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjLiR3cmFwcGVyRWwudHJhbnNpdGlvbkVuZCgoKSA9PiB7XG4gICAgICAgICAgaWYgKCFjb250cm9sbGVkKSByZXR1cm47XG5cbiAgICAgICAgICBpZiAoYy5wYXJhbXMubG9vcCAmJiBzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuYnkgPT09ICdzbGlkZScpIHtcbiAgICAgICAgICAgIGMubG9vcEZpeCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGMudHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb250cm9sbGVkKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRyb2xsZWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGNvbnRyb2xsZWRbaV0gIT09IGJ5Q29udHJvbGxlciAmJiBjb250cm9sbGVkW2ldIGluc3RhbmNlb2YgU3dpcGVyKSB7XG4gICAgICAgICAgc2V0Q29udHJvbGxlZFRyYW5zaXRpb24oY29udHJvbGxlZFtpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRyb2xsZWQgaW5zdGFuY2VvZiBTd2lwZXIgJiYgYnlDb250cm9sbGVyICE9PSBjb250cm9sbGVkKSB7XG4gICAgICBzZXRDb250cm9sbGVkVHJhbnNpdGlvbihjb250cm9sbGVkKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVTcGxpbmUoKSB7XG4gICAgaWYgKCFzd2lwZXIuY29udHJvbGxlci5jb250cm9sKSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyLmNvbnRyb2xsZXIuc3BsaW5lKSB7XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5zcGxpbmUgPSB1bmRlZmluZWQ7XG4gICAgICBkZWxldGUgc3dpcGVyLmNvbnRyb2xsZXIuc3BsaW5lO1xuICAgIH1cbiAgfVxuXG4gIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbDtcbiAgfSk7XG4gIG9uKCd1cGRhdGUnLCAoKSA9PiB7XG4gICAgcmVtb3ZlU3BsaW5lKCk7XG4gIH0pO1xuICBvbigncmVzaXplJywgKCkgPT4ge1xuICAgIHJlbW92ZVNwbGluZSgpO1xuICB9KTtcbiAgb24oJ29ic2VydmVyVXBkYXRlJywgKCkgPT4ge1xuICAgIHJlbW92ZVNwbGluZSgpO1xuICB9KTtcbiAgb24oJ3NldFRyYW5zbGF0ZScsIChfcywgdHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpID0+IHtcbiAgICBpZiAoIXN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wpIHJldHVybjtcbiAgICBzd2lwZXIuY29udHJvbGxlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpO1xuICB9KTtcbiAgb24oJ3NldFRyYW5zaXRpb24nLCAoX3MsIGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpID0+IHtcbiAgICBpZiAoIXN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wpIHJldHVybjtcbiAgICBzd2lwZXIuY29udHJvbGxlci5zZXRUcmFuc2l0aW9uKGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpO1xuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIuY29udHJvbGxlciwge1xuICAgIHNldFRyYW5zbGF0ZSxcbiAgICBzZXRUcmFuc2l0aW9uXG4gIH0pO1xufSIsICJpbXBvcnQgY2xhc3Nlc1RvU2VsZWN0b3IgZnJvbSAnLi4vLi4vc2hhcmVkL2NsYXNzZXMtdG8tc2VsZWN0b3IuanMnO1xuaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBMTF5KF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uXG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIGExMXk6IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBub3RpZmljYXRpb25DbGFzczogJ3N3aXBlci1ub3RpZmljYXRpb24nLFxuICAgICAgcHJldlNsaWRlTWVzc2FnZTogJ1ByZXZpb3VzIHNsaWRlJyxcbiAgICAgIG5leHRTbGlkZU1lc3NhZ2U6ICdOZXh0IHNsaWRlJyxcbiAgICAgIGZpcnN0U2xpZGVNZXNzYWdlOiAnVGhpcyBpcyB0aGUgZmlyc3Qgc2xpZGUnLFxuICAgICAgbGFzdFNsaWRlTWVzc2FnZTogJ1RoaXMgaXMgdGhlIGxhc3Qgc2xpZGUnLFxuICAgICAgcGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2U6ICdHbyB0byBzbGlkZSB7e2luZGV4fX0nLFxuICAgICAgc2xpZGVMYWJlbE1lc3NhZ2U6ICd7e2luZGV4fX0gLyB7e3NsaWRlc0xlbmd0aH19JyxcbiAgICAgIGNvbnRhaW5lck1lc3NhZ2U6IG51bGwsXG4gICAgICBjb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlOiBudWxsLFxuICAgICAgaXRlbVJvbGVEZXNjcmlwdGlvbk1lc3NhZ2U6IG51bGwsXG4gICAgICBzbGlkZVJvbGU6ICdncm91cCdcbiAgICB9XG4gIH0pO1xuICBsZXQgbGl2ZVJlZ2lvbiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gbm90aWZ5KG1lc3NhZ2UpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBsaXZlUmVnaW9uO1xuICAgIGlmIChub3RpZmljYXRpb24ubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgbm90aWZpY2F0aW9uLmh0bWwoJycpO1xuICAgIG5vdGlmaWNhdGlvbi5odG1sKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmFuZG9tTnVtYmVyKHNpemUpIHtcbiAgICBpZiAoc2l6ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBzaXplID0gMTY7XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZG9tQ2hhciA9ICgpID0+IE1hdGgucm91bmQoMTYgKiBNYXRoLnJhbmRvbSgpKS50b1N0cmluZygxNik7XG5cbiAgICByZXR1cm4gJ3gnLnJlcGVhdChzaXplKS5yZXBsYWNlKC94L2csIHJhbmRvbUNoYXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZUVsRm9jdXNhYmxlKCRlbCkge1xuICAgICRlbC5hdHRyKCd0YWJJbmRleCcsICcwJyk7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlRWxOb3RGb2N1c2FibGUoJGVsKSB7XG4gICAgJGVsLmF0dHIoJ3RhYkluZGV4JywgJy0xJyk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRFbFJvbGUoJGVsLCByb2xlKSB7XG4gICAgJGVsLmF0dHIoJ3JvbGUnLCByb2xlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEVsUm9sZURlc2NyaXB0aW9uKCRlbCwgZGVzY3JpcHRpb24pIHtcbiAgICAkZWwuYXR0cignYXJpYS1yb2xlZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRFbENvbnRyb2xzKCRlbCwgY29udHJvbHMpIHtcbiAgICAkZWwuYXR0cignYXJpYS1jb250cm9scycsIGNvbnRyb2xzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEVsTGFiZWwoJGVsLCBsYWJlbCkge1xuICAgICRlbC5hdHRyKCdhcmlhLWxhYmVsJywgbGFiZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkRWxJZCgkZWwsIGlkKSB7XG4gICAgJGVsLmF0dHIoJ2lkJywgaWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkRWxMaXZlKCRlbCwgbGl2ZSkge1xuICAgICRlbC5hdHRyKCdhcmlhLWxpdmUnLCBsaXZlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVFbCgkZWwpIHtcbiAgICAkZWwuYXR0cignYXJpYS1kaXNhYmxlZCcsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5hYmxlRWwoJGVsKSB7XG4gICAgJGVsLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkVudGVyT3JTcGFjZUtleShlKSB7XG4gICAgaWYgKGUua2V5Q29kZSAhPT0gMTMgJiYgZS5rZXlDb2RlICE9PSAzMikgcmV0dXJuO1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuYTExeTtcbiAgICBjb25zdCAkdGFyZ2V0RWwgPSAkKGUudGFyZ2V0KTtcblxuICAgIGlmIChzd2lwZXIubmF2aWdhdGlvbiAmJiBzd2lwZXIubmF2aWdhdGlvbi4kbmV4dEVsICYmICR0YXJnZXRFbC5pcyhzd2lwZXIubmF2aWdhdGlvbi4kbmV4dEVsKSkge1xuICAgICAgaWYgKCEoc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLmxvb3ApKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN3aXBlci5pc0VuZCkge1xuICAgICAgICBub3RpZnkocGFyYW1zLmxhc3RTbGlkZU1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm90aWZ5KHBhcmFtcy5uZXh0U2xpZGVNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLm5hdmlnYXRpb24gJiYgc3dpcGVyLm5hdmlnYXRpb24uJHByZXZFbCAmJiAkdGFyZ2V0RWwuaXMoc3dpcGVyLm5hdmlnYXRpb24uJHByZXZFbCkpIHtcbiAgICAgIGlmICghKHN3aXBlci5pc0JlZ2lubmluZyAmJiAhc3dpcGVyLnBhcmFtcy5sb29wKSkge1xuICAgICAgICBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcpIHtcbiAgICAgICAgbm90aWZ5KHBhcmFtcy5maXJzdFNsaWRlTWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RpZnkocGFyYW1zLnByZXZTbGlkZU1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbiAmJiAkdGFyZ2V0RWwuaXMoY2xhc3Nlc1RvU2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSkpIHtcbiAgICAgICR0YXJnZXRFbFswXS5jbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb24oKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCB8fCBzd2lwZXIucGFyYW1zLnJld2luZCB8fCAhc3dpcGVyLm5hdmlnYXRpb24pIHJldHVybjtcbiAgICBjb25zdCB7XG4gICAgICAkbmV4dEVsLFxuICAgICAgJHByZXZFbFxuICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbjtcblxuICAgIGlmICgkcHJldkVsICYmICRwcmV2RWwubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHN3aXBlci5pc0JlZ2lubmluZykge1xuICAgICAgICBkaXNhYmxlRWwoJHByZXZFbCk7XG4gICAgICAgIG1ha2VFbE5vdEZvY3VzYWJsZSgkcHJldkVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuYWJsZUVsKCRwcmV2RWwpO1xuICAgICAgICBtYWtlRWxGb2N1c2FibGUoJHByZXZFbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCRuZXh0RWwgJiYgJG5leHRFbC5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgIGRpc2FibGVFbCgkbmV4dEVsKTtcbiAgICAgICAgbWFrZUVsTm90Rm9jdXNhYmxlKCRuZXh0RWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5hYmxlRWwoJG5leHRFbCk7XG4gICAgICAgIG1ha2VFbEZvY3VzYWJsZSgkbmV4dEVsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYXNQYWdpbmF0aW9uKCkge1xuICAgIHJldHVybiBzd2lwZXIucGFnaW5hdGlvbiAmJiBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzICYmIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzQ2xpY2thYmxlUGFnaW5hdGlvbigpIHtcbiAgICByZXR1cm4gaGFzUGFnaW5hdGlvbigpICYmIHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGU7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVQYWdpbmF0aW9uKCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuYTExeTtcbiAgICBpZiAoIWhhc1BhZ2luYXRpb24oKSkgcmV0dXJuO1xuICAgIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMuZWFjaChidWxsZXRFbCA9PiB7XG4gICAgICBjb25zdCAkYnVsbGV0RWwgPSAkKGJ1bGxldEVsKTtcblxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUpIHtcbiAgICAgICAgbWFrZUVsRm9jdXNhYmxlKCRidWxsZXRFbCk7XG5cbiAgICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24ucmVuZGVyQnVsbGV0KSB7XG4gICAgICAgICAgYWRkRWxSb2xlKCRidWxsZXRFbCwgJ2J1dHRvbicpO1xuICAgICAgICAgIGFkZEVsTGFiZWwoJGJ1bGxldEVsLCBwYXJhbXMucGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2UucmVwbGFjZSgvXFx7XFx7aW5kZXhcXH1cXH0vLCAkYnVsbGV0RWwuaW5kZXgoKSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoJGJ1bGxldEVsLmlzKGAuJHtzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0QWN0aXZlQ2xhc3N9YCkpIHtcbiAgICAgICAgJGJ1bGxldEVsLmF0dHIoJ2FyaWEtY3VycmVudCcsICd0cnVlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkYnVsbGV0RWwucmVtb3ZlQXR0cignYXJpYS1jdXJyZW50Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBpbml0TmF2RWwgPSAoJGVsLCB3cmFwcGVySWQsIG1lc3NhZ2UpID0+IHtcbiAgICBtYWtlRWxGb2N1c2FibGUoJGVsKTtcblxuICAgIGlmICgkZWxbMF0udGFnTmFtZSAhPT0gJ0JVVFRPTicpIHtcbiAgICAgIGFkZEVsUm9sZSgkZWwsICdidXR0b24nKTtcbiAgICAgICRlbC5vbigna2V5ZG93bicsIG9uRW50ZXJPclNwYWNlS2V5KTtcbiAgICB9XG5cbiAgICBhZGRFbExhYmVsKCRlbCwgbWVzc2FnZSk7XG4gICAgYWRkRWxDb250cm9scygkZWwsIHdyYXBwZXJJZCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRm9jdXMgPSBlID0+IHtcbiAgICBjb25zdCBzbGlkZUVsID0gZS50YXJnZXQuY2xvc2VzdChgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfWApO1xuICAgIGlmICghc2xpZGVFbCB8fCAhc3dpcGVyLnNsaWRlcy5pbmNsdWRlcyhzbGlkZUVsKSkgcmV0dXJuO1xuICAgIGNvbnN0IGlzQWN0aXZlID0gc3dpcGVyLnNsaWRlcy5pbmRleE9mKHNsaWRlRWwpID09PSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgY29uc3QgaXNWaXNpYmxlID0gc3dpcGVyLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzICYmIHN3aXBlci52aXNpYmxlU2xpZGVzICYmIHN3aXBlci52aXNpYmxlU2xpZGVzLmluY2x1ZGVzKHNsaWRlRWwpO1xuICAgIGlmIChpc0FjdGl2ZSB8fCBpc1Zpc2libGUpIHJldHVybjtcbiAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuc2xpZGVzLmluZGV4T2Yoc2xpZGVFbCksIDApO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5hMTF5O1xuICAgIHN3aXBlci4kZWwuYXBwZW5kKGxpdmVSZWdpb24pOyAvLyBDb250YWluZXJcblxuICAgIGNvbnN0ICRjb250YWluZXJFbCA9IHN3aXBlci4kZWw7XG5cbiAgICBpZiAocGFyYW1zLmNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UpIHtcbiAgICAgIGFkZEVsUm9sZURlc2NyaXB0aW9uKCRjb250YWluZXJFbCwgcGFyYW1zLmNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMuY29udGFpbmVyTWVzc2FnZSkge1xuICAgICAgYWRkRWxMYWJlbCgkY29udGFpbmVyRWwsIHBhcmFtcy5jb250YWluZXJNZXNzYWdlKTtcbiAgICB9IC8vIFdyYXBwZXJcblxuXG4gICAgY29uc3QgJHdyYXBwZXJFbCA9IHN3aXBlci4kd3JhcHBlckVsO1xuICAgIGNvbnN0IHdyYXBwZXJJZCA9ICR3cmFwcGVyRWwuYXR0cignaWQnKSB8fCBgc3dpcGVyLXdyYXBwZXItJHtnZXRSYW5kb21OdW1iZXIoMTYpfWA7XG4gICAgY29uc3QgbGl2ZSA9IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkgJiYgc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5lbmFibGVkID8gJ29mZicgOiAncG9saXRlJztcbiAgICBhZGRFbElkKCR3cmFwcGVyRWwsIHdyYXBwZXJJZCk7XG4gICAgYWRkRWxMaXZlKCR3cmFwcGVyRWwsIGxpdmUpOyAvLyBTbGlkZVxuXG4gICAgaWYgKHBhcmFtcy5pdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZSkge1xuICAgICAgYWRkRWxSb2xlRGVzY3JpcHRpb24oJChzd2lwZXIuc2xpZGVzKSwgcGFyYW1zLml0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlKTtcbiAgICB9XG5cbiAgICBhZGRFbFJvbGUoJChzd2lwZXIuc2xpZGVzKSwgcGFyYW1zLnNsaWRlUm9sZSk7XG4gICAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gc3dpcGVyLnBhcmFtcy5sb29wID8gc3dpcGVyLnNsaWRlcy5maWx0ZXIoZWwgPT4gIWVsLmNsYXNzTGlzdC5jb250YWlucyhzd2lwZXIucGFyYW1zLnNsaWRlRHVwbGljYXRlQ2xhc3MpKS5sZW5ndGggOiBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICBzd2lwZXIuc2xpZGVzLmVhY2goKHNsaWRlRWwsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCAkc2xpZGVFbCA9ICQoc2xpZGVFbCk7XG4gICAgICBjb25zdCBzbGlkZUluZGV4ID0gc3dpcGVyLnBhcmFtcy5sb29wID8gcGFyc2VJbnQoJHNsaWRlRWwuYXR0cignZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApIDogaW5kZXg7XG4gICAgICBjb25zdCBhcmlhTGFiZWxNZXNzYWdlID0gcGFyYW1zLnNsaWRlTGFiZWxNZXNzYWdlLnJlcGxhY2UoL1xce1xce2luZGV4XFx9XFx9Lywgc2xpZGVJbmRleCArIDEpLnJlcGxhY2UoL1xce1xce3NsaWRlc0xlbmd0aFxcfVxcfS8sIHNsaWRlc0xlbmd0aCk7XG4gICAgICBhZGRFbExhYmVsKCRzbGlkZUVsLCBhcmlhTGFiZWxNZXNzYWdlKTtcbiAgICB9KTsgLy8gTmF2aWdhdGlvblxuXG4gICAgbGV0ICRuZXh0RWw7XG4gICAgbGV0ICRwcmV2RWw7XG5cbiAgICBpZiAoc3dpcGVyLm5hdmlnYXRpb24gJiYgc3dpcGVyLm5hdmlnYXRpb24uJG5leHRFbCkge1xuICAgICAgJG5leHRFbCA9IHN3aXBlci5uYXZpZ2F0aW9uLiRuZXh0RWw7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5uYXZpZ2F0aW9uICYmIHN3aXBlci5uYXZpZ2F0aW9uLiRwcmV2RWwpIHtcbiAgICAgICRwcmV2RWwgPSBzd2lwZXIubmF2aWdhdGlvbi4kcHJldkVsO1xuICAgIH1cblxuICAgIGlmICgkbmV4dEVsICYmICRuZXh0RWwubGVuZ3RoKSB7XG4gICAgICBpbml0TmF2RWwoJG5leHRFbCwgd3JhcHBlcklkLCBwYXJhbXMubmV4dFNsaWRlTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgaWYgKCRwcmV2RWwgJiYgJHByZXZFbC5sZW5ndGgpIHtcbiAgICAgIGluaXROYXZFbCgkcHJldkVsLCB3cmFwcGVySWQsIHBhcmFtcy5wcmV2U2xpZGVNZXNzYWdlKTtcbiAgICB9IC8vIFBhZ2luYXRpb25cblxuXG4gICAgaWYgKGhhc0NsaWNrYWJsZVBhZ2luYXRpb24oKSkge1xuICAgICAgc3dpcGVyLnBhZ2luYXRpb24uJGVsLm9uKCdrZXlkb3duJywgY2xhc3Nlc1RvU2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSwgb25FbnRlck9yU3BhY2VLZXkpO1xuICAgIH0gLy8gVGFiIGZvY3VzXG5cblxuICAgIHN3aXBlci4kZWwub24oJ2ZvY3VzJywgaGFuZGxlRm9jdXMsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAobGl2ZVJlZ2lvbiAmJiBsaXZlUmVnaW9uLmxlbmd0aCA+IDApIGxpdmVSZWdpb24ucmVtb3ZlKCk7XG4gICAgbGV0ICRuZXh0RWw7XG4gICAgbGV0ICRwcmV2RWw7XG5cbiAgICBpZiAoc3dpcGVyLm5hdmlnYXRpb24gJiYgc3dpcGVyLm5hdmlnYXRpb24uJG5leHRFbCkge1xuICAgICAgJG5leHRFbCA9IHN3aXBlci5uYXZpZ2F0aW9uLiRuZXh0RWw7XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5uYXZpZ2F0aW9uICYmIHN3aXBlci5uYXZpZ2F0aW9uLiRwcmV2RWwpIHtcbiAgICAgICRwcmV2RWwgPSBzd2lwZXIubmF2aWdhdGlvbi4kcHJldkVsO1xuICAgIH1cblxuICAgIGlmICgkbmV4dEVsKSB7XG4gICAgICAkbmV4dEVsLm9mZigna2V5ZG93bicsIG9uRW50ZXJPclNwYWNlS2V5KTtcbiAgICB9XG5cbiAgICBpZiAoJHByZXZFbCkge1xuICAgICAgJHByZXZFbC5vZmYoJ2tleWRvd24nLCBvbkVudGVyT3JTcGFjZUtleSk7XG4gICAgfSAvLyBQYWdpbmF0aW9uXG5cblxuICAgIGlmIChoYXNDbGlja2FibGVQYWdpbmF0aW9uKCkpIHtcbiAgICAgIHN3aXBlci5wYWdpbmF0aW9uLiRlbC5vZmYoJ2tleWRvd24nLCBjbGFzc2VzVG9TZWxlY3Rvcihzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpLCBvbkVudGVyT3JTcGFjZUtleSk7XG4gICAgfSAvLyBUYWIgZm9jdXNcblxuXG4gICAgc3dpcGVyLiRlbC5vZmYoJ2ZvY3VzJywgaGFuZGxlRm9jdXMsIHRydWUpO1xuICB9XG5cbiAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgbGl2ZVJlZ2lvbiA9ICQoYDxzcGFuIGNsYXNzPVwiJHtzd2lwZXIucGFyYW1zLmExMXkubm90aWZpY2F0aW9uQ2xhc3N9XCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCI+PC9zcGFuPmApO1xuICB9KTtcbiAgb24oJ2FmdGVySW5pdCcsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgaW5pdCgpO1xuICB9KTtcbiAgb24oJ2Zyb21FZGdlIHRvRWRnZSBhZnRlckluaXQgbG9jayB1bmxvY2snLCAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmExMXkuZW5hYmxlZCkgcmV0dXJuO1xuICAgIHVwZGF0ZU5hdmlnYXRpb24oKTtcbiAgfSk7XG4gIG9uKCdwYWdpbmF0aW9uVXBkYXRlJywgKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICB1cGRhdGVQYWdpbmF0aW9uKCk7XG4gIH0pO1xuICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgZGVzdHJveSgpO1xuICB9KTtcbn0iLCAiaW1wb3J0IHsgZ2V0V2luZG93IH0gZnJvbSAnc3NyLXdpbmRvdyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIaXN0b3J5KF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uXG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIGhpc3Rvcnk6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgcm9vdDogJycsXG4gICAgICByZXBsYWNlU3RhdGU6IGZhbHNlLFxuICAgICAga2V5OiAnc2xpZGVzJ1xuICAgIH1cbiAgfSk7XG4gIGxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuICBsZXQgcGF0aHMgPSB7fTtcblxuICBjb25zdCBzbHVnaWZ5ID0gdGV4dCA9PiB7XG4gICAgcmV0dXJuIHRleHQudG9TdHJpbmcoKS5yZXBsYWNlKC9cXHMrL2csICctJykucmVwbGFjZSgvW15cXHctXSsvZywgJycpLnJlcGxhY2UoLy0tKy9nLCAnLScpLnJlcGxhY2UoL14tKy8sICcnKS5yZXBsYWNlKC8tKyQvLCAnJyk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UGF0aFZhbHVlcyA9IHVybE92ZXJyaWRlID0+IHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBsZXQgbG9jYXRpb247XG5cbiAgICBpZiAodXJsT3ZlcnJpZGUpIHtcbiAgICAgIGxvY2F0aW9uID0gbmV3IFVSTCh1cmxPdmVycmlkZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IHBhdGhBcnJheSA9IGxvY2F0aW9uLnBhdGhuYW1lLnNsaWNlKDEpLnNwbGl0KCcvJykuZmlsdGVyKHBhcnQgPT4gcGFydCAhPT0gJycpO1xuICAgIGNvbnN0IHRvdGFsID0gcGF0aEFycmF5Lmxlbmd0aDtcbiAgICBjb25zdCBrZXkgPSBwYXRoQXJyYXlbdG90YWwgLSAyXTtcbiAgICBjb25zdCB2YWx1ZSA9IHBhdGhBcnJheVt0b3RhbCAtIDFdO1xuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH07XG5cbiAgY29uc3Qgc2V0SGlzdG9yeSA9IChrZXksIGluZGV4KSA9PiB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgaWYgKCFpbml0aWFsaXplZCB8fCAhc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICBsZXQgbG9jYXRpb247XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy51cmwpIHtcbiAgICAgIGxvY2F0aW9uID0gbmV3IFVSTChzd2lwZXIucGFyYW1zLnVybCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnNsaWRlcy5lcShpbmRleCk7XG4gICAgbGV0IHZhbHVlID0gc2x1Z2lmeShzbGlkZS5hdHRyKCdkYXRhLWhpc3RvcnknKSk7XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJvb3QubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IHJvb3QgPSBzd2lwZXIucGFyYW1zLmhpc3Rvcnkucm9vdDtcbiAgICAgIGlmIChyb290W3Jvb3QubGVuZ3RoIC0gMV0gPT09ICcvJykgcm9vdCA9IHJvb3Quc2xpY2UoMCwgcm9vdC5sZW5ndGggLSAxKTtcbiAgICAgIHZhbHVlID0gYCR7cm9vdH0vJHtrZXl9LyR7dmFsdWV9YDtcbiAgICB9IGVsc2UgaWYgKCFsb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICB2YWx1ZSA9IGAke2tleX0vJHt2YWx1ZX1gO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHdpbmRvdy5oaXN0b3J5LnN0YXRlO1xuXG4gICAgaWYgKGN1cnJlbnRTdGF0ZSAmJiBjdXJyZW50U3RhdGUudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN3aXBlci5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICAgIHZhbHVlXG4gICAgICB9LCBudWxsLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgIHZhbHVlXG4gICAgICB9LCBudWxsLCB2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNjcm9sbFRvU2xpZGUgPSAoc3BlZWQsIHZhbHVlLCBydW5DYWxsYmFja3MpID0+IHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnNsaWRlcy5lcShpKTtcbiAgICAgICAgY29uc3Qgc2xpZGVIaXN0b3J5ID0gc2x1Z2lmeShzbGlkZS5hdHRyKCdkYXRhLWhpc3RvcnknKSk7XG5cbiAgICAgICAgaWYgKHNsaWRlSGlzdG9yeSA9PT0gdmFsdWUgJiYgIXNsaWRlLmhhc0NsYXNzKHN3aXBlci5wYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzcykpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHNsaWRlLmluZGV4KCk7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oaW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKDAsIHNwZWVkLCBydW5DYWxsYmFja3MpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRIaXN0b3J5UG9wU3RhdGUgPSAoKSA9PiB7XG4gICAgcGF0aHMgPSBnZXRQYXRoVmFsdWVzKHN3aXBlci5wYXJhbXMudXJsKTtcbiAgICBzY3JvbGxUb1NsaWRlKHN3aXBlci5wYXJhbXMuc3BlZWQsIHN3aXBlci5wYXRocy52YWx1ZSwgZmFsc2UpO1xuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkpIHJldHVybjtcblxuICAgIGlmICghd2luZG93Lmhpc3RvcnkgfHwgIXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSkge1xuICAgICAgc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHBhdGhzID0gZ2V0UGF0aFZhbHVlcyhzd2lwZXIucGFyYW1zLnVybCk7XG4gICAgaWYgKCFwYXRocy5rZXkgJiYgIXBhdGhzLnZhbHVlKSByZXR1cm47XG4gICAgc2Nyb2xsVG9TbGlkZSgwLCBwYXRocy52YWx1ZSwgc3dpcGVyLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQpO1xuXG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBzZXRIaXN0b3J5UG9wU3RhdGUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuXG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBzZXRIaXN0b3J5UG9wU3RhdGUpO1xuICAgIH1cbiAgfTtcblxuICBvbignaW5pdCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHtcbiAgICAgIGluaXQoKTtcbiAgICB9XG4gIH0pO1xuICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9XG4gIH0pO1xuICBvbigndHJhbnNpdGlvbkVuZCBfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScsICgpID0+IHtcbiAgICBpZiAoaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHNldEhpc3Rvcnkoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmtleSwgc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICB9XG4gIH0pO1xuICBvbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgaWYgKGluaXRpYWxpemVkICYmIHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc2V0SGlzdG9yeShzd2lwZXIucGFyYW1zLmhpc3Rvcnkua2V5LCBzd2lwZXIuYWN0aXZlSW5kZXgpO1xuICAgIH1cbiAgfSk7XG59IiwgImltcG9ydCB7IGdldFdpbmRvdywgZ2V0RG9jdW1lbnQgfSBmcm9tICdzc3Itd2luZG93JztcbmltcG9ydCAkIGZyb20gJy4uLy4uL3NoYXJlZC9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGFzaE5hdmlnYXRpb24oX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgZW1pdCxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgbGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgaGFzaE5hdmlnYXRpb246IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgcmVwbGFjZVN0YXRlOiBmYWxzZSxcbiAgICAgIHdhdGNoU3RhdGU6IGZhbHNlXG4gICAgfVxuICB9KTtcblxuICBjb25zdCBvbkhhc2hDaGFuZ2UgPSAoKSA9PiB7XG4gICAgZW1pdCgnaGFzaENoYW5nZScpO1xuICAgIGNvbnN0IG5ld0hhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgY29uc3QgYWN0aXZlU2xpZGVIYXNoID0gc3dpcGVyLnNsaWRlcy5lcShzd2lwZXIuYWN0aXZlSW5kZXgpLmF0dHIoJ2RhdGEtaGFzaCcpO1xuXG4gICAgaWYgKG5ld0hhc2ggIT09IGFjdGl2ZVNsaWRlSGFzaCkge1xuICAgICAgY29uc3QgbmV3SW5kZXggPSBzd2lwZXIuJHdyYXBwZXJFbC5jaGlsZHJlbihgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfVtkYXRhLWhhc2g9XCIke25ld0hhc2h9XCJdYCkuaW5kZXgoKTtcbiAgICAgIGlmICh0eXBlb2YgbmV3SW5kZXggPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgICBzd2lwZXIuc2xpZGVUbyhuZXdJbmRleCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldEhhc2ggPSAoKSA9PiB7XG4gICAgaWYgKCFpbml0aWFsaXplZCB8fCAhc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkKSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5yZXBsYWNlU3RhdGUgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgYCMke3N3aXBlci5zbGlkZXMuZXEoc3dpcGVyLmFjdGl2ZUluZGV4KS5hdHRyKCdkYXRhLWhhc2gnKX1gIHx8ICcnKTtcbiAgICAgIGVtaXQoJ2hhc2hTZXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2xpZGUgPSBzd2lwZXIuc2xpZGVzLmVxKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICBjb25zdCBoYXNoID0gc2xpZGUuYXR0cignZGF0YS1oYXNoJykgfHwgc2xpZGUuYXR0cignZGF0YS1oaXN0b3J5Jyk7XG4gICAgICBkb2N1bWVudC5sb2NhdGlvbi5oYXNoID0gaGFzaCB8fCAnJztcbiAgICAgIGVtaXQoJ2hhc2hTZXQnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCB8fCBzd2lwZXIucGFyYW1zLmhpc3RvcnkgJiYgc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICBpbml0aWFsaXplZCA9IHRydWU7XG4gICAgY29uc3QgaGFzaCA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnIycsICcnKTtcblxuICAgIGlmIChoYXNoKSB7XG4gICAgICBjb25zdCBzcGVlZCA9IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnNsaWRlcy5lcShpKTtcbiAgICAgICAgY29uc3Qgc2xpZGVIYXNoID0gc2xpZGUuYXR0cignZGF0YS1oYXNoJykgfHwgc2xpZGUuYXR0cignZGF0YS1oaXN0b3J5Jyk7XG5cbiAgICAgICAgaWYgKHNsaWRlSGFzaCA9PT0gaGFzaCAmJiAhc2xpZGUuaGFzQ2xhc3Moc3dpcGVyLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gc2xpZGUuaW5kZXgoKTtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhpbmRleCwgc3BlZWQsIHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLndhdGNoU3RhdGUpIHtcbiAgICAgICQod2luZG93KS5vbignaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24ud2F0Y2hTdGF0ZSkge1xuICAgICAgJCh3aW5kb3cpLm9mZignaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgfVxuICB9O1xuXG4gIG9uKCdpbml0JywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQpIHtcbiAgICAgIGluaXQoKTtcbiAgICB9XG4gIH0pO1xuICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkKSB7XG4gICAgICBkZXN0cm95KCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ3RyYW5zaXRpb25FbmQgX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2UnLCAoKSA9PiB7XG4gICAgaWYgKGluaXRpYWxpemVkKSB7XG4gICAgICBzZXRIYXNoKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ3NsaWRlQ2hhbmdlJywgKCkgPT4ge1xuICAgIGlmIChpbml0aWFsaXplZCAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHNldEhhc2goKTtcbiAgICB9XG4gIH0pO1xufSIsICIvKiBlc2xpbnQgbm8tdW5kZXJzY29yZS1kYW5nbGU6IFwib2ZmXCIgKi9cblxuLyogZXNsaW50IG5vLXVzZS1iZWZvcmUtZGVmaW5lOiBcIm9mZlwiICovXG5pbXBvcnQgeyBnZXREb2N1bWVudCB9IGZyb20gJ3Nzci13aW5kb3cnO1xuaW1wb3J0IHsgbmV4dFRpY2sgfSBmcm9tICcuLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXV0b3BsYXkoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb24sXG4gICAgZW1pdFxuICB9ID0gX3JlZjtcbiAgbGV0IHRpbWVvdXQ7XG4gIHN3aXBlci5hdXRvcGxheSA9IHtcbiAgICBydW5uaW5nOiBmYWxzZSxcbiAgICBwYXVzZWQ6IGZhbHNlXG4gIH07XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgYXV0b3BsYXk6IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgZGVsYXk6IDMwMDAsXG4gICAgICB3YWl0Rm9yVHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiB0cnVlLFxuICAgICAgc3RvcE9uTGFzdFNsaWRlOiBmYWxzZSxcbiAgICAgIHJldmVyc2VEaXJlY3Rpb246IGZhbHNlLFxuICAgICAgcGF1c2VPbk1vdXNlRW50ZXI6IGZhbHNlXG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBydW4oKSB7XG4gICAgY29uc3QgJGFjdGl2ZVNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzLmVxKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgbGV0IGRlbGF5ID0gc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcblxuICAgIGlmICgkYWN0aXZlU2xpZGVFbC5hdHRyKCdkYXRhLXN3aXBlci1hdXRvcGxheScpKSB7XG4gICAgICBkZWxheSA9ICRhY3RpdmVTbGlkZUVsLmF0dHIoJ2RhdGEtc3dpcGVyLWF1dG9wbGF5JykgfHwgc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IG5leHRUaWNrKCgpID0+IHtcbiAgICAgIGxldCBhdXRvcGxheVJlc3VsdDtcblxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkucmV2ZXJzZURpcmVjdGlvbikge1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgICAgc3dpcGVyLmxvb3BGaXgoKTtcbiAgICAgICAgICBhdXRvcGxheVJlc3VsdCA9IHN3aXBlci5zbGlkZVByZXYoc3dpcGVyLnBhcmFtcy5zcGVlZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgICAgfSBlbHNlIGlmICghc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgICAgICAgYXV0b3BsYXlSZXN1bHQgPSBzd2lwZXIuc2xpZGVQcmV2KHN3aXBlci5wYXJhbXMuc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXN3aXBlci5wYXJhbXMuYXV0b3BsYXkuc3RvcE9uTGFzdFNsaWRlKSB7XG4gICAgICAgICAgYXV0b3BsYXlSZXN1bHQgPSBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDEsIHN3aXBlci5wYXJhbXMuc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICBhdXRvcGxheVJlc3VsdCA9IHN3aXBlci5zbGlkZU5leHQoc3dpcGVyLnBhcmFtcy5zcGVlZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICB9IGVsc2UgaWYgKCFzd2lwZXIuaXNFbmQpIHtcbiAgICAgICAgYXV0b3BsYXlSZXN1bHQgPSBzd2lwZXIuc2xpZGVOZXh0KHN3aXBlci5wYXJhbXMuc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICBlbWl0KCdhdXRvcGxheScpO1xuICAgICAgfSBlbHNlIGlmICghc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGUpIHtcbiAgICAgICAgYXV0b3BsYXlSZXN1bHQgPSBzd2lwZXIuc2xpZGVUbygwLCBzd2lwZXIucGFyYW1zLnNwZWVkLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSAmJiBzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcnVuKCk7ZWxzZSBpZiAoYXV0b3BsYXlSZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJ1bigpO1xuICAgICAgfVxuICAgIH0sIGRlbGF5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIGlmICh0eXBlb2YgdGltZW91dCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybiBmYWxzZTtcbiAgICBzd2lwZXIuYXV0b3BsYXkucnVubmluZyA9IHRydWU7XG4gICAgZW1pdCgnYXV0b3BsYXlTdGFydCcpO1xuICAgIHJ1bigpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBpZiAoIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiB0aW1lb3V0ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcgPSBmYWxzZTtcbiAgICBlbWl0KCdhdXRvcGxheVN0b3AnKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKHNwZWVkKSB7XG4gICAgaWYgKCFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgIGlmIChzd2lwZXIuYXV0b3BsYXkucGF1c2VkKSByZXR1cm47XG4gICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBzd2lwZXIuYXV0b3BsYXkucGF1c2VkID0gdHJ1ZTtcblxuICAgIGlmIChzcGVlZCA9PT0gMCB8fCAhc3dpcGVyLnBhcmFtcy5hdXRvcGxheS53YWl0Rm9yVHJhbnNpdGlvbikge1xuICAgICAgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCA9IGZhbHNlO1xuICAgICAgcnVuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFsndHJhbnNpdGlvbmVuZCcsICd3ZWJraXRUcmFuc2l0aW9uRW5kJ10uZm9yRWFjaChldmVudCA9PiB7XG4gICAgICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblZpc2liaWxpdHlDaGFuZ2UoKSB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuXG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicgJiYgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHtcbiAgICAgIHBhdXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnICYmIHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHtcbiAgICAgIHJ1bigpO1xuICAgICAgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVHJhbnNpdGlvbkVuZChlKSB7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLiR3cmFwcGVyRWwpIHJldHVybjtcbiAgICBpZiAoZS50YXJnZXQgIT09IHN3aXBlci4kd3JhcHBlckVsWzBdKSByZXR1cm47XG4gICAgWyd0cmFuc2l0aW9uZW5kJywgJ3dlYmtpdFRyYW5zaXRpb25FbmQnXS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgIHN3aXBlci4kd3JhcHBlckVsWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgfSk7XG4gICAgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCA9IGZhbHNlO1xuXG4gICAgaWYgKCFzd2lwZXIuYXV0b3BsYXkucnVubmluZykge1xuICAgICAgc3RvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBydW4oKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgIHN0b3AoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdCgnYXV0b3BsYXlQYXVzZScpO1xuICAgICAgcGF1c2UoKTtcbiAgICB9XG5cbiAgICBbJ3RyYW5zaXRpb25lbmQnLCAnd2Via2l0VHJhbnNpdGlvbkVuZCddLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgc3dpcGVyLiR3cmFwcGVyRWxbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25UcmFuc2l0aW9uRW5kKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VMZWF2ZSgpIHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kaXNhYmxlT25JbnRlcmFjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXBlci5hdXRvcGxheS5wYXVzZWQgPSBmYWxzZTtcbiAgICBlbWl0KCdhdXRvcGxheVJlc3VtZScpO1xuICAgIHJ1bigpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXR0YWNoTW91c2VFdmVudHMoKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkucGF1c2VPbk1vdXNlRW50ZXIpIHtcbiAgICAgIHN3aXBlci4kZWwub24oJ21vdXNlZW50ZXInLCBvbk1vdXNlRW50ZXIpO1xuICAgICAgc3dpcGVyLiRlbC5vbignbW91c2VsZWF2ZScsIG9uTW91c2VMZWF2ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGV0YWNoTW91c2VFdmVudHMoKSB7XG4gICAgc3dpcGVyLiRlbC5vZmYoJ21vdXNlZW50ZXInLCBvbk1vdXNlRW50ZXIpO1xuICAgIHN3aXBlci4kZWwub2ZmKCdtb3VzZWxlYXZlJywgb25Nb3VzZUxlYXZlKTtcbiAgfVxuXG4gIG9uKCdpbml0JywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmVuYWJsZWQpIHtcbiAgICAgIHN0YXJ0KCk7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIGF0dGFjaE1vdXNlRXZlbnRzKCk7XG4gICAgfVxuICB9KTtcbiAgb24oJ2JlZm9yZVRyYW5zaXRpb25TdGFydCcsIChfcywgc3BlZWQsIGludGVybmFsKSA9PiB7XG4gICAgaWYgKHN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSB7XG4gICAgICBpZiAoaW50ZXJuYWwgfHwgIXN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgc3dpcGVyLmF1dG9wbGF5LnBhdXNlKHNwZWVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBvbignc2xpZGVyRmlyc3RNb3ZlJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIuYXV0b3BsYXkucnVubmluZykge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBvbigndG91Y2hFbmQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSAmJiBzd2lwZXIuYXV0b3BsYXkucGF1c2VkICYmICFzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uKSB7XG4gICAgICBydW4oKTtcbiAgICB9XG4gIH0pO1xuICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICBkZXRhY2hNb3VzZUV2ZW50cygpO1xuXG4gICAgaWYgKHN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSB7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICB9KTtcbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIuYXV0b3BsYXksIHtcbiAgICBwYXVzZSxcbiAgICBydW4sXG4gICAgc3RhcnQsXG4gICAgc3RvcFxuICB9KTtcbn0iLCAiaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi8uLi9zaGFyZWQvdXRpbHMuanMnO1xuaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUaHVtYihfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICB0aHVtYnM6IHtcbiAgICAgIHN3aXBlcjogbnVsbCxcbiAgICAgIG11bHRpcGxlQWN0aXZlVGh1bWJzOiB0cnVlLFxuICAgICAgYXV0b1Njcm9sbE9mZnNldDogMCxcbiAgICAgIHNsaWRlVGh1bWJBY3RpdmVDbGFzczogJ3N3aXBlci1zbGlkZS10aHVtYi1hY3RpdmUnLFxuICAgICAgdGh1bWJzQ29udGFpbmVyQ2xhc3M6ICdzd2lwZXItdGh1bWJzJ1xuICAgIH1cbiAgfSk7XG4gIGxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuICBsZXQgc3dpcGVyQ3JlYXRlZCA9IGZhbHNlO1xuICBzd2lwZXIudGh1bWJzID0ge1xuICAgIHN3aXBlcjogbnVsbFxuICB9O1xuXG4gIGZ1bmN0aW9uIG9uVGh1bWJDbGljaygpIHtcbiAgICBjb25zdCB0aHVtYnNTd2lwZXIgPSBzd2lwZXIudGh1bWJzLnN3aXBlcjtcbiAgICBpZiAoIXRodW1ic1N3aXBlcikgcmV0dXJuO1xuICAgIGNvbnN0IGNsaWNrZWRJbmRleCA9IHRodW1ic1N3aXBlci5jbGlja2VkSW5kZXg7XG4gICAgY29uc3QgY2xpY2tlZFNsaWRlID0gdGh1bWJzU3dpcGVyLmNsaWNrZWRTbGlkZTtcbiAgICBpZiAoY2xpY2tlZFNsaWRlICYmICQoY2xpY2tlZFNsaWRlKS5oYXNDbGFzcyhzd2lwZXIucGFyYW1zLnRodW1icy5zbGlkZVRodW1iQWN0aXZlQ2xhc3MpKSByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBjbGlja2VkSW5kZXggPT09ICd1bmRlZmluZWQnIHx8IGNsaWNrZWRJbmRleCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIGxldCBzbGlkZVRvSW5kZXg7XG5cbiAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICBzbGlkZVRvSW5kZXggPSBwYXJzZUludCgkKHRodW1ic1N3aXBlci5jbGlja2VkU2xpZGUpLmF0dHIoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JyksIDEwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVUb0luZGV4ID0gY2xpY2tlZEluZGV4O1xuICAgIH1cblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIGxldCBjdXJyZW50SW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG5cbiAgICAgIGlmIChzd2lwZXIuc2xpZGVzLmVxKGN1cnJlbnRJbmRleCkuaGFzQ2xhc3Moc3dpcGVyLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSkge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCgpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuICAgICAgICBzd2lwZXIuX2NsaWVudExlZnQgPSBzd2lwZXIuJHdyYXBwZXJFbFswXS5jbGllbnRMZWZ0O1xuICAgICAgICBjdXJyZW50SW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZXZJbmRleCA9IHN3aXBlci5zbGlkZXMuZXEoY3VycmVudEluZGV4KS5wcmV2QWxsKGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3NsaWRlVG9JbmRleH1cIl1gKS5lcSgwKS5pbmRleCgpO1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gc3dpcGVyLnNsaWRlcy5lcShjdXJyZW50SW5kZXgpLm5leHRBbGwoYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7c2xpZGVUb0luZGV4fVwiXWApLmVxKDApLmluZGV4KCk7XG4gICAgICBpZiAodHlwZW9mIHByZXZJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHNsaWRlVG9JbmRleCA9IG5leHRJbmRleDtlbHNlIGlmICh0eXBlb2YgbmV4dEluZGV4ID09PSAndW5kZWZpbmVkJykgc2xpZGVUb0luZGV4ID0gcHJldkluZGV4O2Vsc2UgaWYgKG5leHRJbmRleCAtIGN1cnJlbnRJbmRleCA8IGN1cnJlbnRJbmRleCAtIHByZXZJbmRleCkgc2xpZGVUb0luZGV4ID0gbmV4dEluZGV4O2Vsc2Ugc2xpZGVUb0luZGV4ID0gcHJldkluZGV4O1xuICAgIH1cblxuICAgIHN3aXBlci5zbGlkZVRvKHNsaWRlVG9JbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRodW1iczogdGh1bWJzUGFyYW1zXG4gICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgaWYgKGluaXRpYWxpemVkKSByZXR1cm4gZmFsc2U7XG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIGNvbnN0IFN3aXBlckNsYXNzID0gc3dpcGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKHRodW1ic1BhcmFtcy5zd2lwZXIgaW5zdGFuY2VvZiBTd2lwZXJDbGFzcykge1xuICAgICAgc3dpcGVyLnRodW1icy5zd2lwZXIgPSB0aHVtYnNQYXJhbXMuc3dpcGVyO1xuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudGh1bWJzLnN3aXBlci5vcmlnaW5hbFBhcmFtcywge1xuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlci50aHVtYnMuc3dpcGVyLnBhcmFtcywge1xuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh0aHVtYnNQYXJhbXMuc3dpcGVyKSkge1xuICAgICAgY29uc3QgdGh1bWJzU3dpcGVyUGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgdGh1bWJzUGFyYW1zLnN3aXBlcik7XG4gICAgICBPYmplY3QuYXNzaWduKHRodW1ic1N3aXBlclBhcmFtcywge1xuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBzd2lwZXIudGh1bWJzLnN3aXBlciA9IG5ldyBTd2lwZXJDbGFzcyh0aHVtYnNTd2lwZXJQYXJhbXMpO1xuICAgICAgc3dpcGVyQ3JlYXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgc3dpcGVyLnRodW1icy5zd2lwZXIuJGVsLmFkZENsYXNzKHN3aXBlci5wYXJhbXMudGh1bWJzLnRodW1ic0NvbnRhaW5lckNsYXNzKTtcbiAgICBzd2lwZXIudGh1bWJzLnN3aXBlci5vbigndGFwJywgb25UaHVtYkNsaWNrKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShpbml0aWFsKSB7XG4gICAgY29uc3QgdGh1bWJzU3dpcGVyID0gc3dpcGVyLnRodW1icy5zd2lwZXI7XG4gICAgaWYgKCF0aHVtYnNTd2lwZXIpIHJldHVybjtcbiAgICBjb25zdCBzbGlkZXNQZXJWaWV3ID0gdGh1bWJzU3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyB0aHVtYnNTd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IHRodW1ic1N3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICBjb25zdCBhdXRvU2Nyb2xsT2Zmc2V0ID0gc3dpcGVyLnBhcmFtcy50aHVtYnMuYXV0b1Njcm9sbE9mZnNldDtcbiAgICBjb25zdCB1c2VPZmZzZXQgPSBhdXRvU2Nyb2xsT2Zmc2V0ICYmICF0aHVtYnNTd2lwZXIucGFyYW1zLmxvb3A7XG5cbiAgICBpZiAoc3dpcGVyLnJlYWxJbmRleCAhPT0gdGh1bWJzU3dpcGVyLnJlYWxJbmRleCB8fCB1c2VPZmZzZXQpIHtcbiAgICAgIGxldCBjdXJyZW50VGh1bWJzSW5kZXggPSB0aHVtYnNTd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICBsZXQgbmV3VGh1bWJzSW5kZXg7XG4gICAgICBsZXQgZGlyZWN0aW9uO1xuXG4gICAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIGlmICh0aHVtYnNTd2lwZXIuc2xpZGVzLmVxKGN1cnJlbnRUaHVtYnNJbmRleCkuaGFzQ2xhc3ModGh1bWJzU3dpcGVyLnBhcmFtcy5zbGlkZUR1cGxpY2F0ZUNsYXNzKSkge1xuICAgICAgICAgIHRodW1ic1N3aXBlci5sb29wRml4KCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG4gICAgICAgICAgdGh1bWJzU3dpcGVyLl9jbGllbnRMZWZ0ID0gdGh1bWJzU3dpcGVyLiR3cmFwcGVyRWxbMF0uY2xpZW50TGVmdDtcbiAgICAgICAgICBjdXJyZW50VGh1bWJzSW5kZXggPSB0aHVtYnNTd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICAgIH0gLy8gRmluZCBhY3R1YWwgdGh1bWJzIGluZGV4IHRvIHNsaWRlIHRvXG5cblxuICAgICAgICBjb25zdCBwcmV2VGh1bWJzSW5kZXggPSB0aHVtYnNTd2lwZXIuc2xpZGVzLmVxKGN1cnJlbnRUaHVtYnNJbmRleCkucHJldkFsbChgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzd2lwZXIucmVhbEluZGV4fVwiXWApLmVxKDApLmluZGV4KCk7XG4gICAgICAgIGNvbnN0IG5leHRUaHVtYnNJbmRleCA9IHRodW1ic1N3aXBlci5zbGlkZXMuZXEoY3VycmVudFRodW1ic0luZGV4KS5uZXh0QWxsKGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3N3aXBlci5yZWFsSW5kZXh9XCJdYCkuZXEoMCkuaW5kZXgoKTtcblxuICAgICAgICBpZiAodHlwZW9mIHByZXZUaHVtYnNJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IG5leHRUaHVtYnNJbmRleDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbmV4dFRodW1ic0luZGV4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG5ld1RodW1ic0luZGV4ID0gcHJldlRodW1ic0luZGV4O1xuICAgICAgICB9IGVsc2UgaWYgKG5leHRUaHVtYnNJbmRleCAtIGN1cnJlbnRUaHVtYnNJbmRleCA9PT0gY3VycmVudFRodW1ic0luZGV4IC0gcHJldlRodW1ic0luZGV4KSB7XG4gICAgICAgICAgbmV3VGh1bWJzSW5kZXggPSB0aHVtYnNTd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSA/IG5leHRUaHVtYnNJbmRleCA6IGN1cnJlbnRUaHVtYnNJbmRleDtcbiAgICAgICAgfSBlbHNlIGlmIChuZXh0VGh1bWJzSW5kZXggLSBjdXJyZW50VGh1bWJzSW5kZXggPCBjdXJyZW50VGh1bWJzSW5kZXggLSBwcmV2VGh1bWJzSW5kZXgpIHtcbiAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IG5leHRUaHVtYnNJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IHByZXZUaHVtYnNJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcmVjdGlvbiA9IHN3aXBlci5hY3RpdmVJbmRleCA+IHN3aXBlci5wcmV2aW91c0luZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3VGh1bWJzSW5kZXggPSBzd2lwZXIucmVhbEluZGV4O1xuICAgICAgICBkaXJlY3Rpb24gPSBuZXdUaHVtYnNJbmRleCA+IHN3aXBlci5wcmV2aW91c0luZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xuICAgICAgfVxuXG4gICAgICBpZiAodXNlT2Zmc2V0KSB7XG4gICAgICAgIG5ld1RodW1ic0luZGV4ICs9IGRpcmVjdGlvbiA9PT0gJ25leHQnID8gYXV0b1Njcm9sbE9mZnNldCA6IC0xICogYXV0b1Njcm9sbE9mZnNldDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRodW1ic1N3aXBlci52aXNpYmxlU2xpZGVzSW5kZXhlcyAmJiB0aHVtYnNTd2lwZXIudmlzaWJsZVNsaWRlc0luZGV4ZXMuaW5kZXhPZihuZXdUaHVtYnNJbmRleCkgPCAwKSB7XG4gICAgICAgIGlmICh0aHVtYnNTd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgICAgaWYgKG5ld1RodW1ic0luZGV4ID4gY3VycmVudFRodW1ic0luZGV4KSB7XG4gICAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IG5ld1RodW1ic0luZGV4IC0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IG5ld1RodW1ic0luZGV4ICsgTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChuZXdUaHVtYnNJbmRleCA+IGN1cnJlbnRUaHVtYnNJbmRleCAmJiB0aHVtYnNTd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAxKSB7Ly8gbmV3VGh1bWJzSW5kZXggPSBuZXdUaHVtYnNJbmRleCAtIHNsaWRlc1BlclZpZXcgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGh1bWJzU3dpcGVyLnNsaWRlVG8obmV3VGh1bWJzSW5kZXgsIGluaXRpYWwgPyAwIDogdW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICB9IC8vIEFjdGl2YXRlIHRodW1ic1xuXG5cbiAgICBsZXQgdGh1bWJzVG9BY3RpdmF0ZSA9IDE7XG4gICAgY29uc3QgdGh1bWJBY3RpdmVDbGFzcyA9IHN3aXBlci5wYXJhbXMudGh1bWJzLnNsaWRlVGh1bWJBY3RpdmVDbGFzcztcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxICYmICFzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICB0aHVtYnNUb0FjdGl2YXRlID0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgIH1cblxuICAgIGlmICghc3dpcGVyLnBhcmFtcy50aHVtYnMubXVsdGlwbGVBY3RpdmVUaHVtYnMpIHtcbiAgICAgIHRodW1ic1RvQWN0aXZhdGUgPSAxO1xuICAgIH1cblxuICAgIHRodW1ic1RvQWN0aXZhdGUgPSBNYXRoLmZsb29yKHRodW1ic1RvQWN0aXZhdGUpO1xuICAgIHRodW1ic1N3aXBlci5zbGlkZXMucmVtb3ZlQ2xhc3ModGh1bWJBY3RpdmVDbGFzcyk7XG5cbiAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wIHx8IHRodW1ic1N3aXBlci5wYXJhbXMudmlydHVhbCAmJiB0aHVtYnNTd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aHVtYnNUb0FjdGl2YXRlOyBpICs9IDEpIHtcbiAgICAgICAgdGh1bWJzU3dpcGVyLiR3cmFwcGVyRWwuY2hpbGRyZW4oYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7c3dpcGVyLnJlYWxJbmRleCArIGl9XCJdYCkuYWRkQ2xhc3ModGh1bWJBY3RpdmVDbGFzcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGh1bWJzVG9BY3RpdmF0ZTsgaSArPSAxKSB7XG4gICAgICAgIHRodW1ic1N3aXBlci5zbGlkZXMuZXEoc3dpcGVyLnJlYWxJbmRleCArIGkpLmFkZENsYXNzKHRodW1iQWN0aXZlQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRodW1ic1xuICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgIGlmICghdGh1bWJzIHx8ICF0aHVtYnMuc3dpcGVyKSByZXR1cm47XG4gICAgaW5pdCgpO1xuICAgIHVwZGF0ZSh0cnVlKTtcbiAgfSk7XG4gIG9uKCdzbGlkZUNoYW5nZSB1cGRhdGUgcmVzaXplIG9ic2VydmVyVXBkYXRlJywgKCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnRodW1icy5zd2lwZXIpIHJldHVybjtcbiAgICB1cGRhdGUoKTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IHRodW1ic1N3aXBlciA9IHN3aXBlci50aHVtYnMuc3dpcGVyO1xuICAgIGlmICghdGh1bWJzU3dpcGVyKSByZXR1cm47XG4gICAgdGh1bWJzU3dpcGVyLnNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICB9KTtcbiAgb24oJ2JlZm9yZURlc3Ryb3knLCAoKSA9PiB7XG4gICAgY29uc3QgdGh1bWJzU3dpcGVyID0gc3dpcGVyLnRodW1icy5zd2lwZXI7XG4gICAgaWYgKCF0aHVtYnNTd2lwZXIpIHJldHVybjtcblxuICAgIGlmIChzd2lwZXJDcmVhdGVkICYmIHRodW1ic1N3aXBlcikge1xuICAgICAgdGh1bWJzU3dpcGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuYXNzaWduKHN3aXBlci50aHVtYnMsIHtcbiAgICBpbml0LFxuICAgIHVwZGF0ZVxuICB9KTtcbn0iLCAiaW1wb3J0IHsgbm93IH0gZnJvbSAnLi4vLi4vc2hhcmVkL3V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZyZWVNb2RlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIGVtaXQsXG4gICAgb25jZVxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBmcmVlTW9kZToge1xuICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICBtb21lbnR1bTogdHJ1ZSxcbiAgICAgIG1vbWVudHVtUmF0aW86IDEsXG4gICAgICBtb21lbnR1bUJvdW5jZTogdHJ1ZSxcbiAgICAgIG1vbWVudHVtQm91bmNlUmF0aW86IDEsXG4gICAgICBtb21lbnR1bVZlbG9jaXR5UmF0aW86IDEsXG4gICAgICBzdGlja3k6IGZhbHNlLFxuICAgICAgbWluaW11bVZlbG9jaXR5OiAwLjAyXG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoKSB7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gc3dpcGVyLmdldFRyYW5zbGF0ZSgpO1xuICAgIHN3aXBlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlKTtcbiAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcbiAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnZlbG9jaXRpZXMubGVuZ3RoID0gMDtcbiAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaEVuZCh7XG4gICAgICBjdXJyZW50UG9zOiBzd2lwZXIucnRsID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoTW92ZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICB0b3VjaEV2ZW50c0RhdGE6IGRhdGEsXG4gICAgICB0b3VjaGVzXG4gICAgfSA9IHN3aXBlcjsgLy8gVmVsb2NpdHlcblxuICAgIGlmIChkYXRhLnZlbG9jaXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBkYXRhLnZlbG9jaXRpZXMucHVzaCh7XG4gICAgICAgIHBvc2l0aW9uOiB0b3VjaGVzW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdzdGFydFgnIDogJ3N0YXJ0WSddLFxuICAgICAgICB0aW1lOiBkYXRhLnRvdWNoU3RhcnRUaW1lXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkYXRhLnZlbG9jaXRpZXMucHVzaCh7XG4gICAgICBwb3NpdGlvbjogdG91Y2hlc1tzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnY3VycmVudFgnIDogJ2N1cnJlbnRZJ10sXG4gICAgICB0aW1lOiBub3coKVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaEVuZChfcmVmMikge1xuICAgIGxldCB7XG4gICAgICBjdXJyZW50UG9zXG4gICAgfSA9IF9yZWYyO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgICR3cmFwcGVyRWwsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHNuYXBHcmlkLFxuICAgICAgdG91Y2hFdmVudHNEYXRhOiBkYXRhXG4gICAgfSA9IHN3aXBlcjsgLy8gVGltZSBkaWZmXG5cbiAgICBjb25zdCB0b3VjaEVuZFRpbWUgPSBub3coKTtcbiAgICBjb25zdCB0aW1lRGlmZiA9IHRvdWNoRW5kVGltZSAtIGRhdGEudG91Y2hTdGFydFRpbWU7XG5cbiAgICBpZiAoY3VycmVudFBvcyA8IC1zd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRQb3MgPiAtc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICBpZiAoc3dpcGVyLnNsaWRlcy5sZW5ndGggPCBzbmFwR3JpZC5sZW5ndGgpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc25hcEdyaWQubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bSkge1xuICAgICAgaWYgKGRhdGEudmVsb2NpdGllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGxhc3RNb3ZlRXZlbnQgPSBkYXRhLnZlbG9jaXRpZXMucG9wKCk7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5RXZlbnQgPSBkYXRhLnZlbG9jaXRpZXMucG9wKCk7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbGFzdE1vdmVFdmVudC5wb3NpdGlvbiAtIHZlbG9jaXR5RXZlbnQucG9zaXRpb247XG4gICAgICAgIGNvbnN0IHRpbWUgPSBsYXN0TW92ZUV2ZW50LnRpbWUgLSB2ZWxvY2l0eUV2ZW50LnRpbWU7XG4gICAgICAgIHN3aXBlci52ZWxvY2l0eSA9IGRpc3RhbmNlIC8gdGltZTtcbiAgICAgICAgc3dpcGVyLnZlbG9jaXR5IC89IDI7XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKHN3aXBlci52ZWxvY2l0eSkgPCBwYXJhbXMuZnJlZU1vZGUubWluaW11bVZlbG9jaXR5KSB7XG4gICAgICAgICAgc3dpcGVyLnZlbG9jaXR5ID0gMDtcbiAgICAgICAgfSAvLyB0aGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBzdG9wcGVkIG1vdmluZyBhIGZpbmdlciB0aGVuIHJlbGVhc2VkLlxuICAgICAgICAvLyBUaGVyZSB3b3VsZCBiZSBubyBldmVudHMgd2l0aCBkaXN0YW5jZSB6ZXJvLCBzbyB0aGUgbGFzdCBldmVudCBpcyBzdGFsZS5cblxuXG4gICAgICAgIGlmICh0aW1lID4gMTUwIHx8IG5vdygpIC0gbGFzdE1vdmVFdmVudC50aW1lID4gMzAwKSB7XG4gICAgICAgICAgc3dpcGVyLnZlbG9jaXR5ID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnZlbG9jaXR5ID0gMDtcbiAgICAgIH1cblxuICAgICAgc3dpcGVyLnZlbG9jaXR5ICo9IHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bVZlbG9jaXR5UmF0aW87XG4gICAgICBkYXRhLnZlbG9jaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgIGxldCBtb21lbnR1bUR1cmF0aW9uID0gMTAwMCAqIHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bVJhdGlvO1xuICAgICAgY29uc3QgbW9tZW50dW1EaXN0YW5jZSA9IHN3aXBlci52ZWxvY2l0eSAqIG1vbWVudHVtRHVyYXRpb247XG4gICAgICBsZXQgbmV3UG9zaXRpb24gPSBzd2lwZXIudHJhbnNsYXRlICsgbW9tZW50dW1EaXN0YW5jZTtcbiAgICAgIGlmIChydGwpIG5ld1Bvc2l0aW9uID0gLW5ld1Bvc2l0aW9uO1xuICAgICAgbGV0IGRvQm91bmNlID0gZmFsc2U7XG4gICAgICBsZXQgYWZ0ZXJCb3VuY2VQb3NpdGlvbjtcbiAgICAgIGNvbnN0IGJvdW5jZUFtb3VudCA9IE1hdGguYWJzKHN3aXBlci52ZWxvY2l0eSkgKiAyMCAqIHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZVJhdGlvO1xuICAgICAgbGV0IG5lZWRzTG9vcEZpeDtcblxuICAgICAgaWYgKG5ld1Bvc2l0aW9uIDwgc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UpIHtcbiAgICAgICAgICBpZiAobmV3UG9zaXRpb24gKyBzd2lwZXIubWF4VHJhbnNsYXRlKCkgPCAtYm91bmNlQW1vdW50KSB7XG4gICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIGJvdW5jZUFtb3VudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhZnRlckJvdW5jZVBvc2l0aW9uID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuICAgICAgICAgIGRvQm91bmNlID0gdHJ1ZTtcbiAgICAgICAgICBkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1Bvc2l0aW9uID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcmFtcy5sb29wICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlcykgbmVlZHNMb29wRml4ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAobmV3UG9zaXRpb24gPiBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgICAgaWYgKHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZSkge1xuICAgICAgICAgIGlmIChuZXdQb3NpdGlvbiAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSA+IGJvdW5jZUFtb3VudCkge1xuICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzd2lwZXIubWluVHJhbnNsYXRlKCkgKyBib3VuY2VBbW91bnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWZ0ZXJCb3VuY2VQb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgICAgICBkb0JvdW5jZSA9IHRydWU7XG4gICAgICAgICAgZGF0YS5hbGxvd01vbWVudHVtQm91bmNlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJhbXMubG9vcCAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXMpIG5lZWRzTG9vcEZpeCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHBhcmFtcy5mcmVlTW9kZS5zdGlja3kpIHtcbiAgICAgICAgbGV0IG5leHRTbGlkZTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNuYXBHcmlkLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgaWYgKHNuYXBHcmlkW2pdID4gLW5ld1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICBuZXh0U2xpZGUgPSBqO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKHNuYXBHcmlkW25leHRTbGlkZV0gLSBuZXdQb3NpdGlvbikgPCBNYXRoLmFicyhzbmFwR3JpZFtuZXh0U2xpZGUgLSAxXSAtIG5ld1Bvc2l0aW9uKSB8fCBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICAgIG5ld1Bvc2l0aW9uID0gc25hcEdyaWRbbmV4dFNsaWRlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQb3NpdGlvbiA9IHNuYXBHcmlkW25leHRTbGlkZSAtIDFdO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3UG9zaXRpb24gPSAtbmV3UG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkc0xvb3BGaXgpIHtcbiAgICAgICAgb25jZSgndHJhbnNpdGlvbkVuZCcsICgpID0+IHtcbiAgICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gLy8gRml4IGR1cmF0aW9uXG5cblxuICAgICAgaWYgKHN3aXBlci52ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IE1hdGguYWJzKCgtbmV3UG9zaXRpb24gLSBzd2lwZXIudHJhbnNsYXRlKSAvIHN3aXBlci52ZWxvY2l0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IE1hdGguYWJzKChuZXdQb3NpdGlvbiAtIHN3aXBlci50cmFuc2xhdGUpIC8gc3dpcGVyLnZlbG9jaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgLy8gSWYgZnJlZU1vZGUuc3RpY2t5IGlzIGFjdGl2ZSBhbmQgdGhlIHVzZXIgZW5kcyBhIHN3aXBlIHdpdGggYSBzbG93LXZlbG9jaXR5XG4gICAgICAgICAgLy8gZXZlbnQsIHRoZW4gZHVyYXRpb25zIGNhbiBiZSAyMCsgc2Vjb25kcyB0byBzbGlkZSBvbmUgKG9yIHplcm8hKSBzbGlkZXMuXG4gICAgICAgICAgLy8gSXQncyBlYXN5IHRvIHNlZSB0aGlzIHdoZW4gc2ltdWxhdGluZyB0b3VjaCB3aXRoIG1vdXNlIGV2ZW50cy4gVG8gZml4IHRoaXMsXG4gICAgICAgICAgLy8gbGltaXQgc2luZ2xlLXNsaWRlIHN3aXBlcyB0byB0aGUgZGVmYXVsdCBzbGlkZSBkdXJhdGlvbi4gVGhpcyBhbHNvIGhhcyB0aGVcbiAgICAgICAgICAvLyBuaWNlIHNpZGUgZWZmZWN0IG9mIG1hdGNoaW5nIHNsaWRlIHNwZWVkIGlmIHRoZSB1c2VyIHN0b3BwZWQgbW92aW5nIGJlZm9yZVxuICAgICAgICAgIC8vIGxpZnRpbmcgZmluZ2VyIG9yIG1vdXNlIHZzLiBtb3Zpbmcgc2xvd2x5IGJlZm9yZSBsaWZ0aW5nIHRoZSBmaW5nZXIvbW91c2UuXG4gICAgICAgICAgLy8gRm9yIGZhc3RlciBzd2lwZXMsIGFsc28gYXBwbHkgbGltaXRzIChhbGJlaXQgaGlnaGVyIG9uZXMpLlxuICAgICAgICAgIGNvbnN0IG1vdmVEaXN0YW5jZSA9IE1hdGguYWJzKChydGwgPyAtbmV3UG9zaXRpb24gOiBuZXdQb3NpdGlvbikgLSBzd2lwZXIudHJhbnNsYXRlKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGVTaXplID0gc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtzd2lwZXIuYWN0aXZlSW5kZXhdO1xuXG4gICAgICAgICAgaWYgKG1vdmVEaXN0YW5jZSA8IGN1cnJlbnRTbGlkZVNpemUpIHtcbiAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBwYXJhbXMuc3BlZWQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChtb3ZlRGlzdGFuY2UgPCAyICogY3VycmVudFNsaWRlU2l6ZSkge1xuICAgICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IHBhcmFtcy5zcGVlZCAqIDEuNTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IHBhcmFtcy5zcGVlZCAqIDIuNTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3QoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlICYmIGRvQm91bmNlKSB7XG4gICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhhZnRlckJvdW5jZVBvc2l0aW9uKTtcbiAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24obW9tZW50dW1EdXJhdGlvbik7XG4gICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUobmV3UG9zaXRpb24pO1xuICAgICAgICBzd2lwZXIudHJhbnNpdGlvblN0YXJ0KHRydWUsIHN3aXBlci5zd2lwZURpcmVjdGlvbik7XG4gICAgICAgIHN3aXBlci5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAkd3JhcHBlckVsLnRyYW5zaXRpb25FbmQoKCkgPT4ge1xuICAgICAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQgfHwgIWRhdGEuYWxsb3dNb21lbnR1bUJvdW5jZSkgcmV0dXJuO1xuICAgICAgICAgIGVtaXQoJ21vbWVudHVtQm91bmNlJyk7XG4gICAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24ocGFyYW1zLnNwZWVkKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUoYWZ0ZXJCb3VuY2VQb3NpdGlvbik7XG4gICAgICAgICAgICAkd3JhcHBlckVsLnRyYW5zaXRpb25FbmQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgICAgIHN3aXBlci50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlci52ZWxvY2l0eSkge1xuICAgICAgICBlbWl0KCdfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScpO1xuICAgICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MobmV3UG9zaXRpb24pO1xuICAgICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihtb21lbnR1bUR1cmF0aW9uKTtcbiAgICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShuZXdQb3NpdGlvbik7XG4gICAgICAgIHN3aXBlci50cmFuc2l0aW9uU3RhcnQodHJ1ZSwgc3dpcGVyLnN3aXBlRGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoIXN3aXBlci5hbmltYXRpbmcpIHtcbiAgICAgICAgICBzd2lwZXIuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAkd3JhcHBlckVsLnRyYW5zaXRpb25FbmQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKG5ld1Bvc2l0aW9uKTtcbiAgICAgIH1cblxuICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChwYXJhbXMuZnJlZU1vZGUpIHtcbiAgICAgIGVtaXQoJ19mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMuZnJlZU1vZGUubW9tZW50dW0gfHwgdGltZURpZmYgPj0gcGFyYW1zLmxvbmdTd2lwZXNNcykge1xuICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICBmcmVlTW9kZToge1xuICAgICAgb25Ub3VjaFN0YXJ0LFxuICAgICAgb25Ub3VjaE1vdmUsXG4gICAgICBvblRvdWNoRW5kXG4gICAgfVxuICB9KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gR3JpZChfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtc1xuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBncmlkOiB7XG4gICAgICByb3dzOiAxLFxuICAgICAgZmlsbDogJ2NvbHVtbidcbiAgICB9XG4gIH0pO1xuICBsZXQgc2xpZGVzTnVtYmVyRXZlblRvUm93cztcbiAgbGV0IHNsaWRlc1BlclJvdztcbiAgbGV0IG51bUZ1bGxDb2x1bW5zO1xuXG4gIGNvbnN0IGluaXRTbGlkZXMgPSBzbGlkZXNMZW5ndGggPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlc1BlclZpZXdcbiAgICB9ID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB7XG4gICAgICByb3dzLFxuICAgICAgZmlsbFxuICAgIH0gPSBzd2lwZXIucGFyYW1zLmdyaWQ7XG4gICAgc2xpZGVzUGVyUm93ID0gc2xpZGVzTnVtYmVyRXZlblRvUm93cyAvIHJvd3M7XG4gICAgbnVtRnVsbENvbHVtbnMgPSBNYXRoLmZsb29yKHNsaWRlc0xlbmd0aCAvIHJvd3MpO1xuXG4gICAgaWYgKE1hdGguZmxvb3Ioc2xpZGVzTGVuZ3RoIC8gcm93cykgPT09IHNsaWRlc0xlbmd0aCAvIHJvd3MpIHtcbiAgICAgIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgPSBzbGlkZXNMZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgPSBNYXRoLmNlaWwoc2xpZGVzTGVuZ3RoIC8gcm93cykgKiByb3dzO1xuICAgIH1cblxuICAgIGlmIChzbGlkZXNQZXJWaWV3ICE9PSAnYXV0bycgJiYgZmlsbCA9PT0gJ3JvdycpIHtcbiAgICAgIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgPSBNYXRoLm1heChzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzLCBzbGlkZXNQZXJWaWV3ICogcm93cyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVNsaWRlID0gKGksIHNsaWRlLCBzbGlkZXNMZW5ndGgsIGdldERpcmVjdGlvbkxhYmVsKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzUGVyR3JvdXAsXG4gICAgICBzcGFjZUJldHdlZW5cbiAgICB9ID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB7XG4gICAgICByb3dzLFxuICAgICAgZmlsbFxuICAgIH0gPSBzd2lwZXIucGFyYW1zLmdyaWQ7IC8vIFNldCBzbGlkZXMgb3JkZXJcblxuICAgIGxldCBuZXdTbGlkZU9yZGVySW5kZXg7XG4gICAgbGV0IGNvbHVtbjtcbiAgICBsZXQgcm93O1xuXG4gICAgaWYgKGZpbGwgPT09ICdyb3cnICYmIHNsaWRlc1Blckdyb3VwID4gMSkge1xuICAgICAgY29uc3QgZ3JvdXBJbmRleCA9IE1hdGguZmxvb3IoaSAvIChzbGlkZXNQZXJHcm91cCAqIHJvd3MpKTtcbiAgICAgIGNvbnN0IHNsaWRlSW5kZXhJbkdyb3VwID0gaSAtIHJvd3MgKiBzbGlkZXNQZXJHcm91cCAqIGdyb3VwSW5kZXg7XG4gICAgICBjb25zdCBjb2x1bW5zSW5Hcm91cCA9IGdyb3VwSW5kZXggPT09IDAgPyBzbGlkZXNQZXJHcm91cCA6IE1hdGgubWluKE1hdGguY2VpbCgoc2xpZGVzTGVuZ3RoIC0gZ3JvdXBJbmRleCAqIHJvd3MgKiBzbGlkZXNQZXJHcm91cCkgLyByb3dzKSwgc2xpZGVzUGVyR3JvdXApO1xuICAgICAgcm93ID0gTWF0aC5mbG9vcihzbGlkZUluZGV4SW5Hcm91cCAvIGNvbHVtbnNJbkdyb3VwKTtcbiAgICAgIGNvbHVtbiA9IHNsaWRlSW5kZXhJbkdyb3VwIC0gcm93ICogY29sdW1uc0luR3JvdXAgKyBncm91cEluZGV4ICogc2xpZGVzUGVyR3JvdXA7XG4gICAgICBuZXdTbGlkZU9yZGVySW5kZXggPSBjb2x1bW4gKyByb3cgKiBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzIC8gcm93cztcbiAgICAgIHNsaWRlLmNzcyh7XG4gICAgICAgICctd2Via2l0LW9yZGVyJzogbmV3U2xpZGVPcmRlckluZGV4LFxuICAgICAgICBvcmRlcjogbmV3U2xpZGVPcmRlckluZGV4XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGZpbGwgPT09ICdjb2x1bW4nKSB7XG4gICAgICBjb2x1bW4gPSBNYXRoLmZsb29yKGkgLyByb3dzKTtcbiAgICAgIHJvdyA9IGkgLSBjb2x1bW4gKiByb3dzO1xuXG4gICAgICBpZiAoY29sdW1uID4gbnVtRnVsbENvbHVtbnMgfHwgY29sdW1uID09PSBudW1GdWxsQ29sdW1ucyAmJiByb3cgPT09IHJvd3MgLSAxKSB7XG4gICAgICAgIHJvdyArPSAxO1xuXG4gICAgICAgIGlmIChyb3cgPj0gcm93cykge1xuICAgICAgICAgIHJvdyA9IDA7XG4gICAgICAgICAgY29sdW1uICs9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcm93ID0gTWF0aC5mbG9vcihpIC8gc2xpZGVzUGVyUm93KTtcbiAgICAgIGNvbHVtbiA9IGkgLSByb3cgKiBzbGlkZXNQZXJSb3c7XG4gICAgfVxuXG4gICAgc2xpZGUuY3NzKGdldERpcmVjdGlvbkxhYmVsKCdtYXJnaW4tdG9wJyksIHJvdyAhPT0gMCA/IHNwYWNlQmV0d2VlbiAmJiBgJHtzcGFjZUJldHdlZW59cHhgIDogJycpO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVdyYXBwZXJTaXplID0gKHNsaWRlU2l6ZSwgc25hcEdyaWQsIGdldERpcmVjdGlvbkxhYmVsKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc3BhY2VCZXR3ZWVuLFxuICAgICAgY2VudGVyZWRTbGlkZXMsXG4gICAgICByb3VuZExlbmd0aHNcbiAgICB9ID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB7XG4gICAgICByb3dzXG4gICAgfSA9IHN3aXBlci5wYXJhbXMuZ3JpZDtcbiAgICBzd2lwZXIudmlydHVhbFNpemUgPSAoc2xpZGVTaXplICsgc3BhY2VCZXR3ZWVuKSAqIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3M7XG4gICAgc3dpcGVyLnZpcnR1YWxTaXplID0gTWF0aC5jZWlsKHN3aXBlci52aXJ0dWFsU2l6ZSAvIHJvd3MpIC0gc3BhY2VCZXR3ZWVuO1xuICAgIHN3aXBlci4kd3JhcHBlckVsLmNzcyh7XG4gICAgICBbZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldOiBgJHtzd2lwZXIudmlydHVhbFNpemUgKyBzcGFjZUJldHdlZW59cHhgXG4gICAgfSk7XG5cbiAgICBpZiAoY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgIHNuYXBHcmlkLnNwbGljZSgwLCBzbmFwR3JpZC5sZW5ndGgpO1xuICAgICAgY29uc3QgbmV3U2xpZGVzR3JpZCA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNuYXBHcmlkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGxldCBzbGlkZXNHcmlkSXRlbSA9IHNuYXBHcmlkW2ldO1xuICAgICAgICBpZiAocm91bmRMZW5ndGhzKSBzbGlkZXNHcmlkSXRlbSA9IE1hdGguZmxvb3Ioc2xpZGVzR3JpZEl0ZW0pO1xuICAgICAgICBpZiAoc25hcEdyaWRbaV0gPCBzd2lwZXIudmlydHVhbFNpemUgKyBzbmFwR3JpZFswXSkgbmV3U2xpZGVzR3JpZC5wdXNoKHNsaWRlc0dyaWRJdGVtKTtcbiAgICAgIH1cblxuICAgICAgc25hcEdyaWQucHVzaCguLi5uZXdTbGlkZXNHcmlkKTtcbiAgICB9XG4gIH07XG5cbiAgc3dpcGVyLmdyaWQgPSB7XG4gICAgaW5pdFNsaWRlcyxcbiAgICB1cGRhdGVTbGlkZSxcbiAgICB1cGRhdGVXcmFwcGVyU2l6ZVxuICB9O1xufSIsICJpbXBvcnQgYXBwZW5kU2xpZGUgZnJvbSAnLi9tZXRob2RzL2FwcGVuZFNsaWRlLmpzJztcbmltcG9ydCBwcmVwZW5kU2xpZGUgZnJvbSAnLi9tZXRob2RzL3ByZXBlbmRTbGlkZS5qcyc7XG5pbXBvcnQgYWRkU2xpZGUgZnJvbSAnLi9tZXRob2RzL2FkZFNsaWRlLmpzJztcbmltcG9ydCByZW1vdmVTbGlkZSBmcm9tICcuL21ldGhvZHMvcmVtb3ZlU2xpZGUuanMnO1xuaW1wb3J0IHJlbW92ZUFsbFNsaWRlcyBmcm9tICcuL21ldGhvZHMvcmVtb3ZlQWxsU2xpZGVzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1hbmlwdWxhdGlvbihfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyXG4gIH0gPSBfcmVmO1xuICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgIGFwcGVuZFNsaWRlOiBhcHBlbmRTbGlkZS5iaW5kKHN3aXBlciksXG4gICAgcHJlcGVuZFNsaWRlOiBwcmVwZW5kU2xpZGUuYmluZChzd2lwZXIpLFxuICAgIGFkZFNsaWRlOiBhZGRTbGlkZS5iaW5kKHN3aXBlciksXG4gICAgcmVtb3ZlU2xpZGU6IHJlbW92ZVNsaWRlLmJpbmQoc3dpcGVyKSxcbiAgICByZW1vdmVBbGxTbGlkZXM6IHJlbW92ZUFsbFNsaWRlcy5iaW5kKHN3aXBlcilcbiAgfSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFwcGVuZFNsaWRlKHNsaWRlcykge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCB7XG4gICAgJHdyYXBwZXJFbCxcbiAgICBwYXJhbXNcbiAgfSA9IHN3aXBlcjtcblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBzd2lwZXIubG9vcERlc3Ryb3koKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygc2xpZGVzID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBzbGlkZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKHNsaWRlc1tpXSkgJHdyYXBwZXJFbC5hcHBlbmQoc2xpZGVzW2ldKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgJHdyYXBwZXJFbC5hcHBlbmQoc2xpZGVzKTtcbiAgfVxuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gIH1cblxuICBpZiAoIXBhcmFtcy5vYnNlcnZlcikge1xuICAgIHN3aXBlci51cGRhdGUoKTtcbiAgfVxufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcmVwZW5kU2xpZGUoc2xpZGVzKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXMsXG4gICAgJHdyYXBwZXJFbCxcbiAgICBhY3RpdmVJbmRleFxuICB9ID0gc3dpcGVyO1xuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICB9XG5cbiAgbGV0IG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXggKyAxO1xuXG4gIGlmICh0eXBlb2Ygc2xpZGVzID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBzbGlkZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKHNsaWRlc1tpXSkgJHdyYXBwZXJFbC5wcmVwZW5kKHNsaWRlc1tpXSk7XG4gICAgfVxuXG4gICAgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleCArIHNsaWRlcy5sZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgJHdyYXBwZXJFbC5wcmVwZW5kKHNsaWRlcyk7XG4gIH1cblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICB9XG5cbiAgaWYgKCFwYXJhbXMub2JzZXJ2ZXIpIHtcbiAgICBzd2lwZXIudXBkYXRlKCk7XG4gIH1cblxuICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCwgMCwgZmFsc2UpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhZGRTbGlkZShpbmRleCwgc2xpZGVzKSB7XG4gIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gIGNvbnN0IHtcbiAgICAkd3JhcHBlckVsLFxuICAgIHBhcmFtcyxcbiAgICBhY3RpdmVJbmRleFxuICB9ID0gc3dpcGVyO1xuICBsZXQgYWN0aXZlSW5kZXhCdWZmZXIgPSBhY3RpdmVJbmRleDtcblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBhY3RpdmVJbmRleEJ1ZmZlciAtPSBzd2lwZXIubG9vcGVkU2xpZGVzO1xuICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgIHN3aXBlci5zbGlkZXMgPSAkd3JhcHBlckVsLmNoaWxkcmVuKGAuJHtwYXJhbXMuc2xpZGVDbGFzc31gKTtcbiAgfVxuXG4gIGNvbnN0IGJhc2VMZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcblxuICBpZiAoaW5kZXggPD0gMCkge1xuICAgIHN3aXBlci5wcmVwZW5kU2xpZGUoc2xpZGVzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5kZXggPj0gYmFzZUxlbmd0aCkge1xuICAgIHN3aXBlci5hcHBlbmRTbGlkZShzbGlkZXMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBuZXdBY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4QnVmZmVyID4gaW5kZXggPyBhY3RpdmVJbmRleEJ1ZmZlciArIDEgOiBhY3RpdmVJbmRleEJ1ZmZlcjtcbiAgY29uc3Qgc2xpZGVzQnVmZmVyID0gW107XG5cbiAgZm9yIChsZXQgaSA9IGJhc2VMZW5ndGggLSAxOyBpID49IGluZGV4OyBpIC09IDEpIHtcbiAgICBjb25zdCBjdXJyZW50U2xpZGUgPSBzd2lwZXIuc2xpZGVzLmVxKGkpO1xuICAgIGN1cnJlbnRTbGlkZS5yZW1vdmUoKTtcbiAgICBzbGlkZXNCdWZmZXIudW5zaGlmdChjdXJyZW50U2xpZGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBzbGlkZXMgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIHNsaWRlcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAoc2xpZGVzW2ldKSAkd3JhcHBlckVsLmFwcGVuZChzbGlkZXNbaV0pO1xuICAgIH1cblxuICAgIG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXhCdWZmZXIgPiBpbmRleCA/IGFjdGl2ZUluZGV4QnVmZmVyICsgc2xpZGVzLmxlbmd0aCA6IGFjdGl2ZUluZGV4QnVmZmVyO1xuICB9IGVsc2Uge1xuICAgICR3cmFwcGVyRWwuYXBwZW5kKHNsaWRlcyk7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0J1ZmZlci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICR3cmFwcGVyRWwuYXBwZW5kKHNsaWRlc0J1ZmZlcltpXSk7XG4gIH1cblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICB9XG5cbiAgaWYgKCFwYXJhbXMub2JzZXJ2ZXIpIHtcbiAgICBzd2lwZXIudXBkYXRlKCk7XG4gIH1cblxuICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCArIHN3aXBlci5sb29wZWRTbGlkZXMsIDAsIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCwgMCwgZmFsc2UpO1xuICB9XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbW92ZVNsaWRlKHNsaWRlc0luZGV4ZXMpIHtcbiAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgY29uc3Qge1xuICAgIHBhcmFtcyxcbiAgICAkd3JhcHBlckVsLFxuICAgIGFjdGl2ZUluZGV4XG4gIH0gPSBzd2lwZXI7XG4gIGxldCBhY3RpdmVJbmRleEJ1ZmZlciA9IGFjdGl2ZUluZGV4O1xuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIGFjdGl2ZUluZGV4QnVmZmVyIC09IHN3aXBlci5sb29wZWRTbGlkZXM7XG4gICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgc3dpcGVyLnNsaWRlcyA9ICR3cmFwcGVyRWwuY2hpbGRyZW4oYC4ke3BhcmFtcy5zbGlkZUNsYXNzfWApO1xuICB9XG5cbiAgbGV0IG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXhCdWZmZXI7XG4gIGxldCBpbmRleFRvUmVtb3ZlO1xuXG4gIGlmICh0eXBlb2Ygc2xpZGVzSW5kZXhlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzSW5kZXhlcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzSW5kZXhlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaW5kZXhUb1JlbW92ZSA9IHNsaWRlc0luZGV4ZXNbaV07XG4gICAgICBpZiAoc3dpcGVyLnNsaWRlc1tpbmRleFRvUmVtb3ZlXSkgc3dpcGVyLnNsaWRlcy5lcShpbmRleFRvUmVtb3ZlKS5yZW1vdmUoKTtcbiAgICAgIGlmIChpbmRleFRvUmVtb3ZlIDwgbmV3QWN0aXZlSW5kZXgpIG5ld0FjdGl2ZUluZGV4IC09IDE7XG4gICAgfVxuXG4gICAgbmV3QWN0aXZlSW5kZXggPSBNYXRoLm1heChuZXdBY3RpdmVJbmRleCwgMCk7XG4gIH0gZWxzZSB7XG4gICAgaW5kZXhUb1JlbW92ZSA9IHNsaWRlc0luZGV4ZXM7XG4gICAgaWYgKHN3aXBlci5zbGlkZXNbaW5kZXhUb1JlbW92ZV0pIHN3aXBlci5zbGlkZXMuZXEoaW5kZXhUb1JlbW92ZSkucmVtb3ZlKCk7XG4gICAgaWYgKGluZGV4VG9SZW1vdmUgPCBuZXdBY3RpdmVJbmRleCkgbmV3QWN0aXZlSW5kZXggLT0gMTtcbiAgICBuZXdBY3RpdmVJbmRleCA9IE1hdGgubWF4KG5ld0FjdGl2ZUluZGV4LCAwKTtcbiAgfVxuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gIH1cblxuICBpZiAoIXBhcmFtcy5vYnNlcnZlcikge1xuICAgIHN3aXBlci51cGRhdGUoKTtcbiAgfVxuXG4gIGlmIChwYXJhbXMubG9vcCkge1xuICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4ICsgc3dpcGVyLmxvb3BlZFNsaWRlcywgMCwgZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4LCAwLCBmYWxzZSk7XG4gIH1cbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVtb3ZlQWxsU2xpZGVzKCkge1xuICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICBjb25zdCBzbGlkZXNJbmRleGVzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgc2xpZGVzSW5kZXhlcy5wdXNoKGkpO1xuICB9XG5cbiAgc3dpcGVyLnJlbW92ZVNsaWRlKHNsaWRlc0luZGV4ZXMpO1xufSIsICJpbXBvcnQgZWZmZWN0SW5pdCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LWluaXQuanMnO1xuaW1wb3J0IGVmZmVjdFRhcmdldCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LXRhcmdldC5qcyc7XG5pbXBvcnQgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQgZnJvbSAnLi4vLi4vc2hhcmVkL2VmZmVjdC12aXJ0dWFsLXRyYW5zaXRpb24tZW5kLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVmZmVjdEZhZGUoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb25cbiAgfSA9IF9yZWY7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgZmFkZUVmZmVjdDoge1xuICAgICAgY3Jvc3NGYWRlOiBmYWxzZSxcbiAgICAgIHRyYW5zZm9ybUVsOiBudWxsXG4gICAgfVxuICB9KTtcblxuICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmZhZGVFZmZlY3Q7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgJHNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzLmVxKGkpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gJHNsaWRlRWxbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICBsZXQgdHggPSAtb2Zmc2V0O1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUpIHR4IC09IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICBsZXQgdHkgPSAwO1xuXG4gICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICB0eSA9IHR4O1xuICAgICAgICB0eCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNsaWRlT3BhY2l0eSA9IHN3aXBlci5wYXJhbXMuZmFkZUVmZmVjdC5jcm9zc0ZhZGUgPyBNYXRoLm1heCgxIC0gTWF0aC5hYnMoJHNsaWRlRWxbMF0ucHJvZ3Jlc3MpLCAwKSA6IDEgKyBNYXRoLm1pbihNYXRoLm1heCgkc2xpZGVFbFswXS5wcm9ncmVzcywgLTEpLCAwKTtcbiAgICAgIGNvbnN0ICR0YXJnZXRFbCA9IGVmZmVjdFRhcmdldChwYXJhbXMsICRzbGlkZUVsKTtcbiAgICAgICR0YXJnZXRFbC5jc3Moe1xuICAgICAgICBvcGFjaXR5OiBzbGlkZU9wYWNpdHlcbiAgICAgIH0pLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoJHt0eH1weCwgJHt0eX1weCwgMHB4KWApO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRyYW5zZm9ybUVsXG4gICAgfSA9IHN3aXBlci5wYXJhbXMuZmFkZUVmZmVjdDtcbiAgICBjb25zdCAkdHJhbnNpdGlvbkVsZW1lbnRzID0gdHJhbnNmb3JtRWwgPyBzd2lwZXIuc2xpZGVzLmZpbmQodHJhbnNmb3JtRWwpIDogc3dpcGVyLnNsaWRlcztcbiAgICAkdHJhbnNpdGlvbkVsZW1lbnRzLnRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgdHJhbnNmb3JtRWwsXG4gICAgICBhbGxTbGlkZXM6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICBlZmZlY3RJbml0KHtcbiAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICB9KVxuICB9KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWZmZWN0SW5pdChwYXJhbXMpIHtcbiAgY29uc3Qge1xuICAgIGVmZmVjdCxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgb3ZlcndyaXRlUGFyYW1zLFxuICAgIHBlcnNwZWN0aXZlXG4gIH0gPSBwYXJhbXM7XG4gIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgc3dpcGVyLmNsYXNzTmFtZXMucHVzaChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9JHtlZmZlY3R9YCk7XG5cbiAgICBpZiAocGVyc3BlY3RpdmUgJiYgcGVyc3BlY3RpdmUoKSkge1xuICAgICAgc3dpcGVyLmNsYXNzTmFtZXMucHVzaChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9M2RgKTtcbiAgICB9XG5cbiAgICBjb25zdCBvdmVyd3JpdGVQYXJhbXNSZXN1bHQgPSBvdmVyd3JpdGVQYXJhbXMgPyBvdmVyd3JpdGVQYXJhbXMoKSA6IHt9O1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnBhcmFtcywgb3ZlcndyaXRlUGFyYW1zUmVzdWx0KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5vcmlnaW5hbFBhcmFtcywgb3ZlcndyaXRlUGFyYW1zUmVzdWx0KTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2xhdGUnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZWZmZWN0ICE9PSBlZmZlY3QpIHJldHVybjtcbiAgICBzZXRUcmFuc2xhdGUoKTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbikgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgc2V0VHJhbnNpdGlvbihkdXJhdGlvbik7XG4gIH0pO1xuICBsZXQgcmVxdWlyZVVwZGF0ZU9uVmlydHVhbDtcbiAgb24oJ3ZpcnR1YWxVcGRhdGUnLCAoKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIuc2xpZGVzLmxlbmd0aCkge1xuICAgICAgcmVxdWlyZVVwZGF0ZU9uVmlydHVhbCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmIChyZXF1aXJlVXBkYXRlT25WaXJ0dWFsICYmIHN3aXBlci5zbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgICAgICByZXF1aXJlVXBkYXRlT25WaXJ0dWFsID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlZmZlY3RUYXJnZXQoZWZmZWN0UGFyYW1zLCAkc2xpZGVFbCkge1xuICBpZiAoZWZmZWN0UGFyYW1zLnRyYW5zZm9ybUVsKSB7XG4gICAgcmV0dXJuICRzbGlkZUVsLmZpbmQoZWZmZWN0UGFyYW1zLnRyYW5zZm9ybUVsKS5jc3Moe1xuICAgICAgJ2JhY2tmYWNlLXZpc2liaWxpdHknOiAnaGlkZGVuJyxcbiAgICAgICctd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHknOiAnaGlkZGVuJ1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuICRzbGlkZUVsO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZChfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGR1cmF0aW9uLFxuICAgIHRyYW5zZm9ybUVsLFxuICAgIGFsbFNsaWRlc1xuICB9ID0gX3JlZjtcbiAgY29uc3Qge1xuICAgIHNsaWRlcyxcbiAgICBhY3RpdmVJbmRleCxcbiAgICAkd3JhcHBlckVsXG4gIH0gPSBzd2lwZXI7XG5cbiAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSAmJiBkdXJhdGlvbiAhPT0gMCkge1xuICAgIGxldCBldmVudFRyaWdnZXJlZCA9IGZhbHNlO1xuICAgIGxldCAkdHJhbnNpdGlvbkVuZFRhcmdldDtcblxuICAgIGlmIChhbGxTbGlkZXMpIHtcbiAgICAgICR0cmFuc2l0aW9uRW5kVGFyZ2V0ID0gdHJhbnNmb3JtRWwgPyBzbGlkZXMuZmluZCh0cmFuc2Zvcm1FbCkgOiBzbGlkZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0cmFuc2l0aW9uRW5kVGFyZ2V0ID0gdHJhbnNmb3JtRWwgPyBzbGlkZXMuZXEoYWN0aXZlSW5kZXgpLmZpbmQodHJhbnNmb3JtRWwpIDogc2xpZGVzLmVxKGFjdGl2ZUluZGV4KTtcbiAgICB9XG5cbiAgICAkdHJhbnNpdGlvbkVuZFRhcmdldC50cmFuc2l0aW9uRW5kKCgpID0+IHtcbiAgICAgIGlmIChldmVudFRyaWdnZXJlZCkgcmV0dXJuO1xuICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgZXZlbnRUcmlnZ2VyZWQgPSB0cnVlO1xuICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgY29uc3QgdHJpZ2dlckV2ZW50cyA9IFsnd2Via2l0VHJhbnNpdGlvbkVuZCcsICd0cmFuc2l0aW9uZW5kJ107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpZ2dlckV2ZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAkd3JhcHBlckVsLnRyaWdnZXIodHJpZ2dlckV2ZW50c1tpXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCAiaW1wb3J0ICQgZnJvbSAnLi4vLi4vc2hhcmVkL2RvbS5qcyc7XG5pbXBvcnQgZWZmZWN0SW5pdCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LWluaXQuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWZmZWN0Q3ViZShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBjdWJlRWZmZWN0OiB7XG4gICAgICBzbGlkZVNoYWRvd3M6IHRydWUsXG4gICAgICBzaGFkb3c6IHRydWUsXG4gICAgICBzaGFkb3dPZmZzZXQ6IDIwLFxuICAgICAgc2hhZG93U2NhbGU6IDAuOTRcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAkZWwsXG4gICAgICAkd3JhcHBlckVsLFxuICAgICAgc2xpZGVzLFxuICAgICAgd2lkdGg6IHN3aXBlcldpZHRoLFxuICAgICAgaGVpZ2h0OiBzd2lwZXJIZWlnaHQsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHNpemU6IHN3aXBlclNpemUsXG4gICAgICBicm93c2VyXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmN1YmVFZmZlY3Q7XG4gICAgY29uc3QgaXNIb3Jpem9udGFsID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGxldCB3cmFwcGVyUm90YXRlID0gMDtcbiAgICBsZXQgJGN1YmVTaGFkb3dFbDtcblxuICAgIGlmIChwYXJhbXMuc2hhZG93KSB7XG4gICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICRjdWJlU2hhZG93RWwgPSAkd3JhcHBlckVsLmZpbmQoJy5zd2lwZXItY3ViZS1zaGFkb3cnKTtcblxuICAgICAgICBpZiAoJGN1YmVTaGFkb3dFbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAkY3ViZVNoYWRvd0VsID0gJCgnPGRpdiBjbGFzcz1cInN3aXBlci1jdWJlLXNoYWRvd1wiPjwvZGl2PicpO1xuICAgICAgICAgICR3cmFwcGVyRWwuYXBwZW5kKCRjdWJlU2hhZG93RWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgJGN1YmVTaGFkb3dFbC5jc3Moe1xuICAgICAgICAgIGhlaWdodDogYCR7c3dpcGVyV2lkdGh9cHhgXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGN1YmVTaGFkb3dFbCA9ICRlbC5maW5kKCcuc3dpcGVyLWN1YmUtc2hhZG93Jyk7XG5cbiAgICAgICAgaWYgKCRjdWJlU2hhZG93RWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgJGN1YmVTaGFkb3dFbCA9ICQoJzxkaXYgY2xhc3M9XCJzd2lwZXItY3ViZS1zaGFkb3dcIj48L2Rpdj4nKTtcbiAgICAgICAgICAkZWwuYXBwZW5kKCRjdWJlU2hhZG93RWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0ICRzbGlkZUVsID0gc2xpZGVzLmVxKGkpO1xuICAgICAgbGV0IHNsaWRlSW5kZXggPSBpO1xuXG4gICAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICAgIHNsaWRlSW5kZXggPSBwYXJzZUludCgkc2xpZGVFbC5hdHRyKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBzbGlkZUFuZ2xlID0gc2xpZGVJbmRleCAqIDkwO1xuICAgICAgbGV0IHJvdW5kID0gTWF0aC5mbG9vcihzbGlkZUFuZ2xlIC8gMzYwKTtcblxuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICBzbGlkZUFuZ2xlID0gLXNsaWRlQW5nbGU7XG4gICAgICAgIHJvdW5kID0gTWF0aC5mbG9vcigtc2xpZGVBbmdsZSAvIDM2MCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oJHNsaWRlRWxbMF0ucHJvZ3Jlc3MsIDEpLCAtMSk7XG4gICAgICBsZXQgdHggPSAwO1xuICAgICAgbGV0IHR5ID0gMDtcbiAgICAgIGxldCB0eiA9IDA7XG5cbiAgICAgIGlmIChzbGlkZUluZGV4ICUgNCA9PT0gMCkge1xuICAgICAgICB0eCA9IC1yb3VuZCAqIDQgKiBzd2lwZXJTaXplO1xuICAgICAgICB0eiA9IDA7XG4gICAgICB9IGVsc2UgaWYgKChzbGlkZUluZGV4IC0gMSkgJSA0ID09PSAwKSB7XG4gICAgICAgIHR4ID0gMDtcbiAgICAgICAgdHogPSAtcm91bmQgKiA0ICogc3dpcGVyU2l6ZTtcbiAgICAgIH0gZWxzZSBpZiAoKHNsaWRlSW5kZXggLSAyKSAlIDQgPT09IDApIHtcbiAgICAgICAgdHggPSBzd2lwZXJTaXplICsgcm91bmQgKiA0ICogc3dpcGVyU2l6ZTtcbiAgICAgICAgdHogPSBzd2lwZXJTaXplO1xuICAgICAgfSBlbHNlIGlmICgoc2xpZGVJbmRleCAtIDMpICUgNCA9PT0gMCkge1xuICAgICAgICB0eCA9IC1zd2lwZXJTaXplO1xuICAgICAgICB0eiA9IDMgKiBzd2lwZXJTaXplICsgc3dpcGVyU2l6ZSAqIDQgKiByb3VuZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICB0eCA9IC10eDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0hvcml6b250YWwpIHtcbiAgICAgICAgdHkgPSB0eDtcbiAgICAgICAgdHggPSAwO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgcm90YXRlWCgke2lzSG9yaXpvbnRhbCA/IDAgOiAtc2xpZGVBbmdsZX1kZWcpIHJvdGF0ZVkoJHtpc0hvcml6b250YWwgPyBzbGlkZUFuZ2xlIDogMH1kZWcpIHRyYW5zbGF0ZTNkKCR7dHh9cHgsICR7dHl9cHgsICR7dHp9cHgpYDtcblxuICAgICAgaWYgKHByb2dyZXNzIDw9IDEgJiYgcHJvZ3Jlc3MgPiAtMSkge1xuICAgICAgICB3cmFwcGVyUm90YXRlID0gc2xpZGVJbmRleCAqIDkwICsgcHJvZ3Jlc3MgKiA5MDtcbiAgICAgICAgaWYgKHJ0bCkgd3JhcHBlclJvdGF0ZSA9IC1zbGlkZUluZGV4ICogOTAgLSBwcm9ncmVzcyAqIDkwO1xuICAgICAgfVxuXG4gICAgICAkc2xpZGVFbC50cmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgbGV0IHNoYWRvd0JlZm9yZSA9IGlzSG9yaXpvbnRhbCA/ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKSA6ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCcpO1xuICAgICAgICBsZXQgc2hhZG93QWZ0ZXIgPSBpc0hvcml6b250YWwgPyAkc2xpZGVFbC5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCcpIDogJHNsaWRlRWwuZmluZCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tJyk7XG5cbiAgICAgICAgaWYgKHNoYWRvd0JlZm9yZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGFkb3dCZWZvcmUgPSAkKGA8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlLXNoYWRvdy0ke2lzSG9yaXpvbnRhbCA/ICdsZWZ0JyA6ICd0b3AnfVwiPjwvZGl2PmApO1xuICAgICAgICAgICRzbGlkZUVsLmFwcGVuZChzaGFkb3dCZWZvcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd0FmdGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHNoYWRvd0FmdGVyID0gJChgPGRpdiBjbGFzcz1cInN3aXBlci1zbGlkZS1zaGFkb3ctJHtpc0hvcml6b250YWwgPyAncmlnaHQnIDogJ2JvdHRvbSd9XCI+PC9kaXY+YCk7XG4gICAgICAgICAgJHNsaWRlRWwuYXBwZW5kKHNoYWRvd0FmdGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaGFkb3dCZWZvcmUubGVuZ3RoKSBzaGFkb3dCZWZvcmVbMF0uc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KC1wcm9ncmVzcywgMCk7XG4gICAgICAgIGlmIChzaGFkb3dBZnRlci5sZW5ndGgpIHNoYWRvd0FmdGVyWzBdLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heChwcm9ncmVzcywgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHdyYXBwZXJFbC5jc3Moe1xuICAgICAgJy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbic6IGA1MCUgNTAlIC0ke3N3aXBlclNpemUgLyAyfXB4YCxcbiAgICAgICd0cmFuc2Zvcm0tb3JpZ2luJzogYDUwJSA1MCUgLSR7c3dpcGVyU2l6ZSAvIDJ9cHhgXG4gICAgfSk7XG5cbiAgICBpZiAocGFyYW1zLnNoYWRvdykge1xuICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAkY3ViZVNoYWRvd0VsLnRyYW5zZm9ybShgdHJhbnNsYXRlM2QoMHB4LCAke3N3aXBlcldpZHRoIC8gMiArIHBhcmFtcy5zaGFkb3dPZmZzZXR9cHgsICR7LXN3aXBlcldpZHRoIC8gMn1weCkgcm90YXRlWCg5MGRlZykgcm90YXRlWigwZGVnKSBzY2FsZSgke3BhcmFtcy5zaGFkb3dTY2FsZX0pYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzaGFkb3dBbmdsZSA9IE1hdGguYWJzKHdyYXBwZXJSb3RhdGUpIC0gTWF0aC5mbG9vcihNYXRoLmFicyh3cmFwcGVyUm90YXRlKSAvIDkwKSAqIDkwO1xuICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMS41IC0gKE1hdGguc2luKHNoYWRvd0FuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApIC8gMiArIE1hdGguY29zKHNoYWRvd0FuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApIC8gMik7XG4gICAgICAgIGNvbnN0IHNjYWxlMSA9IHBhcmFtcy5zaGFkb3dTY2FsZTtcbiAgICAgICAgY29uc3Qgc2NhbGUyID0gcGFyYW1zLnNoYWRvd1NjYWxlIC8gbXVsdGlwbGllcjtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFyYW1zLnNoYWRvd09mZnNldDtcbiAgICAgICAgJGN1YmVTaGFkb3dFbC50cmFuc2Zvcm0oYHNjYWxlM2QoJHtzY2FsZTF9LCAxLCAke3NjYWxlMn0pIHRyYW5zbGF0ZTNkKDBweCwgJHtzd2lwZXJIZWlnaHQgLyAyICsgb2Zmc2V0fXB4LCAkey1zd2lwZXJIZWlnaHQgLyAyIC8gc2NhbGUyfXB4KSByb3RhdGVYKC05MGRlZylgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB6RmFjdG9yID0gYnJvd3Nlci5pc1NhZmFyaSB8fCBicm93c2VyLmlzV2ViVmlldyA/IC1zd2lwZXJTaXplIC8gMiA6IDA7XG4gICAgJHdyYXBwZXJFbC50cmFuc2Zvcm0oYHRyYW5zbGF0ZTNkKDBweCwwLCR7ekZhY3Rvcn1weCkgcm90YXRlWCgke3N3aXBlci5pc0hvcml6b250YWwoKSA/IDAgOiB3cmFwcGVyUm90YXRlfWRlZykgcm90YXRlWSgke3N3aXBlci5pc0hvcml6b250YWwoKSA/IC13cmFwcGVyUm90YXRlIDogMH1kZWcpYCk7XG4gIH07XG5cbiAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGR1cmF0aW9uID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAkZWwsXG4gICAgICBzbGlkZXNcbiAgICB9ID0gc3dpcGVyO1xuICAgIHNsaWRlcy50cmFuc2l0aW9uKGR1cmF0aW9uKS5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKS50cmFuc2l0aW9uKGR1cmF0aW9uKTtcblxuICAgIGlmIChzd2lwZXIucGFyYW1zLmN1YmVFZmZlY3Quc2hhZG93ICYmICFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICRlbC5maW5kKCcuc3dpcGVyLWN1YmUtc2hhZG93JykudHJhbnNpdGlvbihkdXJhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIGVmZmVjdEluaXQoe1xuICAgIGVmZmVjdDogJ2N1YmUnLFxuICAgIHN3aXBlcixcbiAgICBvbixcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgc2V0VHJhbnNpdGlvbixcbiAgICBwZXJzcGVjdGl2ZTogKCkgPT4gdHJ1ZSxcbiAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgcmVzaXN0YW5jZVJhdGlvOiAwLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxuICAgICAgdmlydHVhbFRyYW5zbGF0ZTogdHJ1ZVxuICAgIH0pXG4gIH0pO1xufSIsICJpbXBvcnQgY3JlYXRlU2hhZG93IGZyb20gJy4uLy4uL3NoYXJlZC9jcmVhdGUtc2hhZG93LmpzJztcbmltcG9ydCBlZmZlY3RJbml0IGZyb20gJy4uLy4uL3NoYXJlZC9lZmZlY3QtaW5pdC5qcyc7XG5pbXBvcnQgZWZmZWN0VGFyZ2V0IGZyb20gJy4uLy4uL3NoYXJlZC9lZmZlY3QtdGFyZ2V0LmpzJztcbmltcG9ydCBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LXZpcnR1YWwtdHJhbnNpdGlvbi1lbmQuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWZmZWN0RmxpcChfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBmbGlwRWZmZWN0OiB7XG4gICAgICBzbGlkZVNoYWRvd3M6IHRydWUsXG4gICAgICBsaW1pdFJvdGF0aW9uOiB0cnVlLFxuICAgICAgdHJhbnNmb3JtRWw6IG51bGxcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXMsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5mbGlwRWZmZWN0O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0ICRzbGlkZUVsID0gc2xpZGVzLmVxKGkpO1xuICAgICAgbGV0IHByb2dyZXNzID0gJHNsaWRlRWxbMF0ucHJvZ3Jlc3M7XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmZsaXBFZmZlY3QubGltaXRSb3RhdGlvbikge1xuICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWF4KE1hdGgubWluKCRzbGlkZUVsWzBdLnByb2dyZXNzLCAxKSwgLTEpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvZmZzZXQgPSAkc2xpZGVFbFswXS5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgIGNvbnN0IHJvdGF0ZSA9IC0xODAgKiBwcm9ncmVzcztcbiAgICAgIGxldCByb3RhdGVZID0gcm90YXRlO1xuICAgICAgbGV0IHJvdGF0ZVggPSAwO1xuICAgICAgbGV0IHR4ID0gc3dpcGVyLnBhcmFtcy5jc3NNb2RlID8gLW9mZnNldCAtIHN3aXBlci50cmFuc2xhdGUgOiAtb2Zmc2V0O1xuICAgICAgbGV0IHR5ID0gMDtcblxuICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgdHkgPSB0eDtcbiAgICAgICAgdHggPSAwO1xuICAgICAgICByb3RhdGVYID0gLXJvdGF0ZVk7XG4gICAgICAgIHJvdGF0ZVkgPSAwO1xuICAgICAgfSBlbHNlIGlmIChydGwpIHtcbiAgICAgICAgcm90YXRlWSA9IC1yb3RhdGVZO1xuICAgICAgfVxuXG4gICAgICAkc2xpZGVFbFswXS5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChwcm9ncmVzcykpICsgc2xpZGVzLmxlbmd0aDtcblxuICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgbGV0IHNoYWRvd0JlZm9yZSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKSA6ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCcpO1xuICAgICAgICBsZXQgc2hhZG93QWZ0ZXIgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAkc2xpZGVFbC5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCcpIDogJHNsaWRlRWwuZmluZCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tJyk7XG5cbiAgICAgICAgaWYgKHNoYWRvd0JlZm9yZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGFkb3dCZWZvcmUgPSBjcmVhdGVTaGFkb3cocGFyYW1zLCAkc2xpZGVFbCwgc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ2xlZnQnIDogJ3RvcCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoYWRvd0FmdGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHNoYWRvd0FmdGVyID0gY3JlYXRlU2hhZG93KHBhcmFtcywgJHNsaWRlRWwsIHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdyaWdodCcgOiAnYm90dG9tJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hhZG93QmVmb3JlLmxlbmd0aCkgc2hhZG93QmVmb3JlWzBdLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heCgtcHJvZ3Jlc3MsIDApO1xuICAgICAgICBpZiAoc2hhZG93QWZ0ZXIubGVuZ3RoKSBzaGFkb3dBZnRlclswXS5zdHlsZS5vcGFjaXR5ID0gTWF0aC5tYXgocHJvZ3Jlc3MsIDApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwgJHt0eX1weCwgMHB4KSByb3RhdGVYKCR7cm90YXRlWH1kZWcpIHJvdGF0ZVkoJHtyb3RhdGVZfWRlZylgO1xuICAgICAgY29uc3QgJHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgJHNsaWRlRWwpO1xuICAgICAgJHRhcmdldEVsLnRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRyYW5zZm9ybUVsXG4gICAgfSA9IHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdDtcbiAgICBjb25zdCAkdHJhbnNpdGlvbkVsZW1lbnRzID0gdHJhbnNmb3JtRWwgPyBzd2lwZXIuc2xpZGVzLmZpbmQodHJhbnNmb3JtRWwpIDogc3dpcGVyLnNsaWRlcztcbiAgICAkdHJhbnNpdGlvbkVsZW1lbnRzLnRyYW5zaXRpb24oZHVyYXRpb24pLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpLnRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgdHJhbnNmb3JtRWxcbiAgICB9KTtcbiAgfTtcblxuICBlZmZlY3RJbml0KHtcbiAgICBlZmZlY3Q6ICdmbGlwJyxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgcGVyc3BlY3RpdmU6ICgpID0+IHRydWUsXG4gICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICB9KVxuICB9KTtcbn0iLCAiaW1wb3J0ICQgZnJvbSAnLi9kb20uanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU2hhZG93KHBhcmFtcywgJHNsaWRlRWwsIHNpZGUpIHtcbiAgY29uc3Qgc2hhZG93Q2xhc3MgPSBgc3dpcGVyLXNsaWRlLXNoYWRvdyR7c2lkZSA/IGAtJHtzaWRlfWAgOiAnJ31gO1xuICBjb25zdCAkc2hhZG93Q29udGFpbmVyID0gcGFyYW1zLnRyYW5zZm9ybUVsID8gJHNsaWRlRWwuZmluZChwYXJhbXMudHJhbnNmb3JtRWwpIDogJHNsaWRlRWw7XG4gIGxldCAkc2hhZG93RWwgPSAkc2hhZG93Q29udGFpbmVyLmNoaWxkcmVuKGAuJHtzaGFkb3dDbGFzc31gKTtcblxuICBpZiAoISRzaGFkb3dFbC5sZW5ndGgpIHtcbiAgICAkc2hhZG93RWwgPSAkKGA8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlLXNoYWRvdyR7c2lkZSA/IGAtJHtzaWRlfWAgOiAnJ31cIj48L2Rpdj5gKTtcbiAgICAkc2hhZG93Q29udGFpbmVyLmFwcGVuZCgkc2hhZG93RWwpO1xuICB9XG5cbiAgcmV0dXJuICRzaGFkb3dFbDtcbn0iLCAiaW1wb3J0IGNyZWF0ZVNoYWRvdyBmcm9tICcuLi8uLi9zaGFyZWQvY3JlYXRlLXNoYWRvdy5qcyc7XG5pbXBvcnQgZWZmZWN0SW5pdCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LWluaXQuanMnO1xuaW1wb3J0IGVmZmVjdFRhcmdldCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LXRhcmdldC5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFZmZlY3RDb3ZlcmZsb3coX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBleHRlbmRQYXJhbXMsXG4gICAgb25cbiAgfSA9IF9yZWY7XG4gIGV4dGVuZFBhcmFtcyh7XG4gICAgY292ZXJmbG93RWZmZWN0OiB7XG4gICAgICByb3RhdGU6IDUwLFxuICAgICAgc3RyZXRjaDogMCxcbiAgICAgIGRlcHRoOiAxMDAsXG4gICAgICBzY2FsZTogMSxcbiAgICAgIG1vZGlmaWVyOiAxLFxuICAgICAgc2xpZGVTaGFkb3dzOiB0cnVlLFxuICAgICAgdHJhbnNmb3JtRWw6IG51bGxcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aDogc3dpcGVyV2lkdGgsXG4gICAgICBoZWlnaHQ6IHN3aXBlckhlaWdodCxcbiAgICAgIHNsaWRlcyxcbiAgICAgIHNsaWRlc1NpemVzR3JpZFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5jb3ZlcmZsb3dFZmZlY3Q7XG4gICAgY29uc3QgaXNIb3Jpem9udGFsID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgIGNvbnN0IHRyYW5zZm9ybSA9IHN3aXBlci50cmFuc2xhdGU7XG4gICAgY29uc3QgY2VudGVyID0gaXNIb3Jpem9udGFsID8gLXRyYW5zZm9ybSArIHN3aXBlcldpZHRoIC8gMiA6IC10cmFuc2Zvcm0gKyBzd2lwZXJIZWlnaHQgLyAyO1xuICAgIGNvbnN0IHJvdGF0ZSA9IGlzSG9yaXpvbnRhbCA/IHBhcmFtcy5yb3RhdGUgOiAtcGFyYW1zLnJvdGF0ZTtcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBwYXJhbXMuZGVwdGg7IC8vIEVhY2ggc2xpZGUgb2Zmc2V0IGZyb20gY2VudGVyXG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCAkc2xpZGVFbCA9IHNsaWRlcy5lcShpKTtcbiAgICAgIGNvbnN0IHNsaWRlU2l6ZSA9IHNsaWRlc1NpemVzR3JpZFtpXTtcbiAgICAgIGNvbnN0IHNsaWRlT2Zmc2V0ID0gJHNsaWRlRWxbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICBjb25zdCBjZW50ZXJPZmZzZXQgPSAoY2VudGVyIC0gc2xpZGVPZmZzZXQgLSBzbGlkZVNpemUgLyAyKSAvIHNsaWRlU2l6ZTtcbiAgICAgIGNvbnN0IG9mZnNldE11bHRpcGxpZXIgPSB0eXBlb2YgcGFyYW1zLm1vZGlmaWVyID09PSAnZnVuY3Rpb24nID8gcGFyYW1zLm1vZGlmaWVyKGNlbnRlck9mZnNldCkgOiBjZW50ZXJPZmZzZXQgKiBwYXJhbXMubW9kaWZpZXI7XG4gICAgICBsZXQgcm90YXRlWSA9IGlzSG9yaXpvbnRhbCA/IHJvdGF0ZSAqIG9mZnNldE11bHRpcGxpZXIgOiAwO1xuICAgICAgbGV0IHJvdGF0ZVggPSBpc0hvcml6b250YWwgPyAwIDogcm90YXRlICogb2Zmc2V0TXVsdGlwbGllcjsgLy8gdmFyIHJvdGF0ZVogPSAwXG5cbiAgICAgIGxldCB0cmFuc2xhdGVaID0gLXRyYW5zbGF0ZSAqIE1hdGguYWJzKG9mZnNldE11bHRpcGxpZXIpO1xuICAgICAgbGV0IHN0cmV0Y2ggPSBwYXJhbXMuc3RyZXRjaDsgLy8gQWxsb3cgcGVyY2VudGFnZSB0byBtYWtlIGEgcmVsYXRpdmUgc3RyZXRjaCBmb3IgcmVzcG9uc2l2ZSBzbGlkZXJzXG5cbiAgICAgIGlmICh0eXBlb2Ygc3RyZXRjaCA9PT0gJ3N0cmluZycgJiYgc3RyZXRjaC5pbmRleE9mKCclJykgIT09IC0xKSB7XG4gICAgICAgIHN0cmV0Y2ggPSBwYXJzZUZsb2F0KHBhcmFtcy5zdHJldGNoKSAvIDEwMCAqIHNsaWRlU2l6ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRyYW5zbGF0ZVkgPSBpc0hvcml6b250YWwgPyAwIDogc3RyZXRjaCAqIG9mZnNldE11bHRpcGxpZXI7XG4gICAgICBsZXQgdHJhbnNsYXRlWCA9IGlzSG9yaXpvbnRhbCA/IHN0cmV0Y2ggKiBvZmZzZXRNdWx0aXBsaWVyIDogMDtcbiAgICAgIGxldCBzY2FsZSA9IDEgLSAoMSAtIHBhcmFtcy5zY2FsZSkgKiBNYXRoLmFicyhvZmZzZXRNdWx0aXBsaWVyKTsgLy8gRml4IGZvciB1bHRyYSBzbWFsbCB2YWx1ZXNcblxuICAgICAgaWYgKE1hdGguYWJzKHRyYW5zbGF0ZVgpIDwgMC4wMDEpIHRyYW5zbGF0ZVggPSAwO1xuICAgICAgaWYgKE1hdGguYWJzKHRyYW5zbGF0ZVkpIDwgMC4wMDEpIHRyYW5zbGF0ZVkgPSAwO1xuICAgICAgaWYgKE1hdGguYWJzKHRyYW5zbGF0ZVopIDwgMC4wMDEpIHRyYW5zbGF0ZVogPSAwO1xuICAgICAgaWYgKE1hdGguYWJzKHJvdGF0ZVkpIDwgMC4wMDEpIHJvdGF0ZVkgPSAwO1xuICAgICAgaWYgKE1hdGguYWJzKHJvdGF0ZVgpIDwgMC4wMDEpIHJvdGF0ZVggPSAwO1xuICAgICAgaWYgKE1hdGguYWJzKHNjYWxlKSA8IDAuMDAxKSBzY2FsZSA9IDA7XG4gICAgICBjb25zdCBzbGlkZVRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3RyYW5zbGF0ZVh9cHgsJHt0cmFuc2xhdGVZfXB4LCR7dHJhbnNsYXRlWn1weCkgIHJvdGF0ZVgoJHtyb3RhdGVYfWRlZykgcm90YXRlWSgke3JvdGF0ZVl9ZGVnKSBzY2FsZSgke3NjYWxlfSlgO1xuICAgICAgY29uc3QgJHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgJHNsaWRlRWwpO1xuICAgICAgJHRhcmdldEVsLnRyYW5zZm9ybShzbGlkZVRyYW5zZm9ybSk7XG4gICAgICAkc2xpZGVFbFswXS5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChvZmZzZXRNdWx0aXBsaWVyKSkgKyAxO1xuXG4gICAgICBpZiAocGFyYW1zLnNsaWRlU2hhZG93cykge1xuICAgICAgICAvLyBTZXQgc2hhZG93c1xuICAgICAgICBsZXQgJHNoYWRvd0JlZm9yZUVsID0gaXNIb3Jpem9udGFsID8gJHNsaWRlRWwuZmluZCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpIDogJHNsaWRlRWwuZmluZCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wJyk7XG4gICAgICAgIGxldCAkc2hhZG93QWZ0ZXJFbCA9IGlzSG9yaXpvbnRhbCA/ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0JykgOiAkc2xpZGVFbC5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20nKTtcblxuICAgICAgICBpZiAoJHNoYWRvd0JlZm9yZUVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICRzaGFkb3dCZWZvcmVFbCA9IGNyZWF0ZVNoYWRvdyhwYXJhbXMsICRzbGlkZUVsLCBpc0hvcml6b250YWwgPyAnbGVmdCcgOiAndG9wJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNoYWRvd0FmdGVyRWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgJHNoYWRvd0FmdGVyRWwgPSBjcmVhdGVTaGFkb3cocGFyYW1zLCAkc2xpZGVFbCwgaXNIb3Jpem9udGFsID8gJ3JpZ2h0JyA6ICdib3R0b20nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2hhZG93QmVmb3JlRWwubGVuZ3RoKSAkc2hhZG93QmVmb3JlRWxbMF0uc3R5bGUub3BhY2l0eSA9IG9mZnNldE11bHRpcGxpZXIgPiAwID8gb2Zmc2V0TXVsdGlwbGllciA6IDA7XG4gICAgICAgIGlmICgkc2hhZG93QWZ0ZXJFbC5sZW5ndGgpICRzaGFkb3dBZnRlckVsWzBdLnN0eWxlLm9wYWNpdHkgPSAtb2Zmc2V0TXVsdGlwbGllciA+IDAgPyAtb2Zmc2V0TXVsdGlwbGllciA6IDA7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgdHJhbnNmb3JtRWxcbiAgICB9ID0gc3dpcGVyLnBhcmFtcy5jb3ZlcmZsb3dFZmZlY3Q7XG4gICAgY29uc3QgJHRyYW5zaXRpb25FbGVtZW50cyA9IHRyYW5zZm9ybUVsID8gc3dpcGVyLnNsaWRlcy5maW5kKHRyYW5zZm9ybUVsKSA6IHN3aXBlci5zbGlkZXM7XG4gICAgJHRyYW5zaXRpb25FbGVtZW50cy50cmFuc2l0aW9uKGR1cmF0aW9uKS5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKS50cmFuc2l0aW9uKGR1cmF0aW9uKTtcbiAgfTtcblxuICBlZmZlY3RJbml0KHtcbiAgICBlZmZlY3Q6ICdjb3ZlcmZsb3cnLFxuICAgIHN3aXBlcixcbiAgICBvbixcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgc2V0VHJhbnNpdGlvbixcbiAgICBwZXJzcGVjdGl2ZTogKCkgPT4gdHJ1ZSxcbiAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlXG4gICAgfSlcbiAgfSk7XG59IiwgImltcG9ydCBjcmVhdGVTaGFkb3cgZnJvbSAnLi4vLi4vc2hhcmVkL2NyZWF0ZS1zaGFkb3cuanMnO1xuaW1wb3J0IGVmZmVjdEluaXQgZnJvbSAnLi4vLi4vc2hhcmVkL2VmZmVjdC1pbml0LmpzJztcbmltcG9ydCBlZmZlY3RUYXJnZXQgZnJvbSAnLi4vLi4vc2hhcmVkL2VmZmVjdC10YXJnZXQuanMnO1xuaW1wb3J0IGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kIGZyb20gJy4uLy4uL3NoYXJlZC9lZmZlY3QtdmlydHVhbC10cmFuc2l0aW9uLWVuZC5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFZmZlY3RDcmVhdGl2ZShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBjcmVhdGl2ZUVmZmVjdDoge1xuICAgICAgdHJhbnNmb3JtRWw6IG51bGwsXG4gICAgICBsaW1pdFByb2dyZXNzOiAxLFxuICAgICAgc2hhZG93UGVyUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgcHJvZ3Jlc3NNdWx0aXBsaWVyOiAxLFxuICAgICAgcGVyc3BlY3RpdmU6IHRydWUsXG4gICAgICBwcmV2OiB7XG4gICAgICAgIHRyYW5zbGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICByb3RhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDFcbiAgICAgIH0sXG4gICAgICBuZXh0OiB7XG4gICAgICAgIHRyYW5zbGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICByb3RhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDFcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGdldFRyYW5zbGF0ZVZhbHVlID0gdmFsdWUgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gdmFsdWU7XG4gICAgcmV0dXJuIGAke3ZhbHVlfXB4YDtcbiAgfTtcblxuICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzLFxuICAgICAgJHdyYXBwZXJFbCxcbiAgICAgIHNsaWRlc1NpemVzR3JpZFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5jcmVhdGl2ZUVmZmVjdDtcbiAgICBjb25zdCB7XG4gICAgICBwcm9ncmVzc011bHRpcGxpZXI6IG11bHRpcGxpZXJcbiAgICB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGlzQ2VudGVyZWRTbGlkZXMgPSBzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzO1xuXG4gICAgaWYgKGlzQ2VudGVyZWRTbGlkZXMpIHtcbiAgICAgIGNvbnN0IG1hcmdpbiA9IHNsaWRlc1NpemVzR3JpZFswXSAvIDIgLSBzd2lwZXIucGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZSB8fCAwO1xuICAgICAgJHdyYXBwZXJFbC50cmFuc2Zvcm0oYHRyYW5zbGF0ZVgoY2FsYyg1MCUgLSAke21hcmdpbn1weCkpYCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0ICRzbGlkZUVsID0gc2xpZGVzLmVxKGkpO1xuICAgICAgY29uc3Qgc2xpZGVQcm9ncmVzcyA9ICRzbGlkZUVsWzBdLnByb2dyZXNzO1xuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heCgkc2xpZGVFbFswXS5wcm9ncmVzcywgLXBhcmFtcy5saW1pdFByb2dyZXNzKSwgcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpO1xuICAgICAgbGV0IG9yaWdpbmFsUHJvZ3Jlc3MgPSBwcm9ncmVzcztcblxuICAgICAgaWYgKCFpc0NlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIG9yaWdpbmFsUHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heCgkc2xpZGVFbFswXS5vcmlnaW5hbFByb2dyZXNzLCAtcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpLCBwYXJhbXMubGltaXRQcm9ncmVzcyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9mZnNldCA9ICRzbGlkZUVsWzBdLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgY29uc3QgdCA9IFtzd2lwZXIucGFyYW1zLmNzc01vZGUgPyAtb2Zmc2V0IC0gc3dpcGVyLnRyYW5zbGF0ZSA6IC1vZmZzZXQsIDAsIDBdO1xuICAgICAgY29uc3QgciA9IFswLCAwLCAwXTtcbiAgICAgIGxldCBjdXN0b20gPSBmYWxzZTtcblxuICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgdFsxXSA9IHRbMF07XG4gICAgICAgIHRbMF0gPSAwO1xuICAgICAgfVxuXG4gICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgIHJvdGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgb3BhY2l0eTogMVxuICAgICAgfTtcblxuICAgICAgaWYgKHByb2dyZXNzIDwgMCkge1xuICAgICAgICBkYXRhID0gcGFyYW1zLm5leHQ7XG4gICAgICAgIGN1c3RvbSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHByb2dyZXNzID4gMCkge1xuICAgICAgICBkYXRhID0gcGFyYW1zLnByZXY7XG4gICAgICAgIGN1c3RvbSA9IHRydWU7XG4gICAgICB9IC8vIHNldCB0cmFuc2xhdGVcblxuXG4gICAgICB0LmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICB0W2luZGV4XSA9IGBjYWxjKCR7dmFsdWV9cHggKyAoJHtnZXRUcmFuc2xhdGVWYWx1ZShkYXRhLnRyYW5zbGF0ZVtpbmRleF0pfSAqICR7TWF0aC5hYnMocHJvZ3Jlc3MgKiBtdWx0aXBsaWVyKX0pKWA7XG4gICAgICB9KTsgLy8gc2V0IHJvdGF0ZXNcblxuICAgICAgci5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgcltpbmRleF0gPSBkYXRhLnJvdGF0ZVtpbmRleF0gKiBNYXRoLmFicyhwcm9ncmVzcyAqIG11bHRpcGxpZXIpO1xuICAgICAgfSk7XG4gICAgICAkc2xpZGVFbFswXS5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChzbGlkZVByb2dyZXNzKSkgKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgY29uc3QgdHJhbnNsYXRlU3RyaW5nID0gdC5qb2luKCcsICcpO1xuICAgICAgY29uc3Qgcm90YXRlU3RyaW5nID0gYHJvdGF0ZVgoJHtyWzBdfWRlZykgcm90YXRlWSgke3JbMV19ZGVnKSByb3RhdGVaKCR7clsyXX1kZWcpYDtcbiAgICAgIGNvbnN0IHNjYWxlU3RyaW5nID0gb3JpZ2luYWxQcm9ncmVzcyA8IDAgPyBgc2NhbGUoJHsxICsgKDEgLSBkYXRhLnNjYWxlKSAqIG9yaWdpbmFsUHJvZ3Jlc3MgKiBtdWx0aXBsaWVyfSlgIDogYHNjYWxlKCR7MSAtICgxIC0gZGF0YS5zY2FsZSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllcn0pYDtcbiAgICAgIGNvbnN0IG9wYWNpdHlTdHJpbmcgPSBvcmlnaW5hbFByb2dyZXNzIDwgMCA/IDEgKyAoMSAtIGRhdGEub3BhY2l0eSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllciA6IDEgLSAoMSAtIGRhdGEub3BhY2l0eSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllcjtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3RyYW5zbGF0ZVN0cmluZ30pICR7cm90YXRlU3RyaW5nfSAke3NjYWxlU3RyaW5nfWA7IC8vIFNldCBzaGFkb3dzXG5cbiAgICAgIGlmIChjdXN0b20gJiYgZGF0YS5zaGFkb3cgfHwgIWN1c3RvbSkge1xuICAgICAgICBsZXQgJHNoYWRvd0VsID0gJHNsaWRlRWwuY2hpbGRyZW4oJy5zd2lwZXItc2xpZGUtc2hhZG93Jyk7XG5cbiAgICAgICAgaWYgKCRzaGFkb3dFbC5sZW5ndGggPT09IDAgJiYgZGF0YS5zaGFkb3cpIHtcbiAgICAgICAgICAkc2hhZG93RWwgPSBjcmVhdGVTaGFkb3cocGFyYW1zLCAkc2xpZGVFbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNoYWRvd0VsLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHNoYWRvd09wYWNpdHkgPSBwYXJhbXMuc2hhZG93UGVyUHJvZ3Jlc3MgPyBwcm9ncmVzcyAqICgxIC8gcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpIDogcHJvZ3Jlc3M7XG4gICAgICAgICAgJHNoYWRvd0VsWzBdLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLmFicyhzaGFkb3dPcGFjaXR5KSwgMCksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0ICR0YXJnZXRFbCA9IGVmZmVjdFRhcmdldChwYXJhbXMsICRzbGlkZUVsKTtcbiAgICAgICR0YXJnZXRFbC50cmFuc2Zvcm0odHJhbnNmb3JtKS5jc3Moe1xuICAgICAgICBvcGFjaXR5OiBvcGFjaXR5U3RyaW5nXG4gICAgICB9KTtcblxuICAgICAgaWYgKGRhdGEub3JpZ2luKSB7XG4gICAgICAgICR0YXJnZXRFbC5jc3MoJ3RyYW5zZm9ybS1vcmlnaW4nLCBkYXRhLm9yaWdpbik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgdHJhbnNmb3JtRWxcbiAgICB9ID0gc3dpcGVyLnBhcmFtcy5jcmVhdGl2ZUVmZmVjdDtcbiAgICBjb25zdCAkdHJhbnNpdGlvbkVsZW1lbnRzID0gdHJhbnNmb3JtRWwgPyBzd2lwZXIuc2xpZGVzLmZpbmQodHJhbnNmb3JtRWwpIDogc3dpcGVyLnNsaWRlcztcbiAgICAkdHJhbnNpdGlvbkVsZW1lbnRzLnRyYW5zaXRpb24oZHVyYXRpb24pLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93JykudHJhbnNpdGlvbihkdXJhdGlvbik7XG4gICAgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoe1xuICAgICAgc3dpcGVyLFxuICAgICAgZHVyYXRpb24sXG4gICAgICB0cmFuc2Zvcm1FbCxcbiAgICAgIGFsbFNsaWRlczogdHJ1ZVxuICAgIH0pO1xuICB9O1xuXG4gIGVmZmVjdEluaXQoe1xuICAgIGVmZmVjdDogJ2NyZWF0aXZlJyxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgcGVyc3BlY3RpdmU6ICgpID0+IHN3aXBlci5wYXJhbXMuY3JlYXRpdmVFZmZlY3QucGVyc3BlY3RpdmUsXG4gICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICB9KVxuICB9KTtcbn0iLCAiaW1wb3J0IGNyZWF0ZVNoYWRvdyBmcm9tICcuLi8uLi9zaGFyZWQvY3JlYXRlLXNoYWRvdy5qcyc7XG5pbXBvcnQgZWZmZWN0SW5pdCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LWluaXQuanMnO1xuaW1wb3J0IGVmZmVjdFRhcmdldCBmcm9tICcuLi8uLi9zaGFyZWQvZWZmZWN0LXRhcmdldC5qcyc7XG5pbXBvcnQgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQgZnJvbSAnLi4vLi4vc2hhcmVkL2VmZmVjdC12aXJ0dWFsLXRyYW5zaXRpb24tZW5kLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVmZmVjdENhcmRzKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uXG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIGNhcmRzRWZmZWN0OiB7XG4gICAgICBzbGlkZVNoYWRvd3M6IHRydWUsXG4gICAgICB0cmFuc2Zvcm1FbDogbnVsbFxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlcyxcbiAgICAgIGFjdGl2ZUluZGV4XG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmNhcmRzRWZmZWN0O1xuICAgIGNvbnN0IHtcbiAgICAgIHN0YXJ0VHJhbnNsYXRlLFxuICAgICAgaXNUb3VjaGVkXG4gICAgfSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGE7XG4gICAgY29uc3QgY3VycmVudFRyYW5zbGF0ZSA9IHN3aXBlci50cmFuc2xhdGU7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgJHNsaWRlRWwgPSBzbGlkZXMuZXEoaSk7XG4gICAgICBjb25zdCBzbGlkZVByb2dyZXNzID0gJHNsaWRlRWxbMF0ucHJvZ3Jlc3M7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KHNsaWRlUHJvZ3Jlc3MsIC00KSwgNCk7XG4gICAgICBsZXQgb2Zmc2V0ID0gJHNsaWRlRWxbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7XG5cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzICYmICFzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLiR3cmFwcGVyRWwudHJhbnNmb3JtKGB0cmFuc2xhdGVYKCR7c3dpcGVyLm1pblRyYW5zbGF0ZSgpfXB4KWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgb2Zmc2V0IC09IHNsaWRlc1swXS5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgIH1cblxuICAgICAgbGV0IHRYID0gc3dpcGVyLnBhcmFtcy5jc3NNb2RlID8gLW9mZnNldCAtIHN3aXBlci50cmFuc2xhdGUgOiAtb2Zmc2V0O1xuICAgICAgbGV0IHRZID0gMDtcbiAgICAgIGNvbnN0IHRaID0gLTEwMCAqIE1hdGguYWJzKHByb2dyZXNzKTtcbiAgICAgIGxldCBzY2FsZSA9IDE7XG4gICAgICBsZXQgcm90YXRlID0gLTIgKiBwcm9ncmVzcztcbiAgICAgIGxldCB0WEFkZCA9IDggLSBNYXRoLmFicyhwcm9ncmVzcykgKiAwLjc1O1xuICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnZpcnR1YWwuZnJvbSArIGkgOiBpO1xuICAgICAgY29uc3QgaXNTd2lwZVRvTmV4dCA9IChzbGlkZUluZGV4ID09PSBhY3RpdmVJbmRleCB8fCBzbGlkZUluZGV4ID09PSBhY3RpdmVJbmRleCAtIDEpICYmIHByb2dyZXNzID4gMCAmJiBwcm9ncmVzcyA8IDEgJiYgKGlzVG91Y2hlZCB8fCBzd2lwZXIucGFyYW1zLmNzc01vZGUpICYmIGN1cnJlbnRUcmFuc2xhdGUgPCBzdGFydFRyYW5zbGF0ZTtcbiAgICAgIGNvbnN0IGlzU3dpcGVUb1ByZXYgPSAoc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggfHwgc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggKyAxKSAmJiBwcm9ncmVzcyA8IDAgJiYgcHJvZ3Jlc3MgPiAtMSAmJiAoaXNUb3VjaGVkIHx8IHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgJiYgY3VycmVudFRyYW5zbGF0ZSA+IHN0YXJ0VHJhbnNsYXRlO1xuXG4gICAgICBpZiAoaXNTd2lwZVRvTmV4dCB8fCBpc1N3aXBlVG9QcmV2KSB7XG4gICAgICAgIGNvbnN0IHN1YlByb2dyZXNzID0gKDEgLSBNYXRoLmFicygoTWF0aC5hYnMocHJvZ3Jlc3MpIC0gMC41KSAvIDAuNSkpICoqIDAuNTtcbiAgICAgICAgcm90YXRlICs9IC0yOCAqIHByb2dyZXNzICogc3ViUHJvZ3Jlc3M7XG4gICAgICAgIHNjYWxlICs9IC0wLjUgKiBzdWJQcm9ncmVzcztcbiAgICAgICAgdFhBZGQgKz0gOTYgKiBzdWJQcm9ncmVzcztcbiAgICAgICAgdFkgPSBgJHstMjUgKiBzdWJQcm9ncmVzcyAqIE1hdGguYWJzKHByb2dyZXNzKX0lYDtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb2dyZXNzIDwgMCkge1xuICAgICAgICAvLyBuZXh0XG4gICAgICAgIHRYID0gYGNhbGMoJHt0WH1weCArICgke3RYQWRkICogTWF0aC5hYnMocHJvZ3Jlc3MpfSUpKWA7XG4gICAgICB9IGVsc2UgaWYgKHByb2dyZXNzID4gMCkge1xuICAgICAgICAvLyBwcmV2XG4gICAgICAgIHRYID0gYGNhbGMoJHt0WH1weCArICgtJHt0WEFkZCAqIE1hdGguYWJzKHByb2dyZXNzKX0lKSlgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdFggPSBgJHt0WH1weGA7XG4gICAgICB9XG5cbiAgICAgIGlmICghc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIGNvbnN0IHByZXZZID0gdFk7XG4gICAgICAgIHRZID0gdFg7XG4gICAgICAgIHRYID0gcHJldlk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNjYWxlU3RyaW5nID0gcHJvZ3Jlc3MgPCAwID8gYCR7MSArICgxIC0gc2NhbGUpICogcHJvZ3Jlc3N9YCA6IGAkezEgLSAoMSAtIHNjYWxlKSAqIHByb2dyZXNzfWA7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgXG4gICAgICAgIHRyYW5zbGF0ZTNkKCR7dFh9LCAke3RZfSwgJHt0Wn1weClcbiAgICAgICAgcm90YXRlWigke3JvdGF0ZX1kZWcpXG4gICAgICAgIHNjYWxlKCR7c2NhbGVTdHJpbmd9KVxuICAgICAgYDtcblxuICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgbGV0ICRzaGFkb3dFbCA9ICRzbGlkZUVsLmZpbmQoJy5zd2lwZXItc2xpZGUtc2hhZG93Jyk7XG5cbiAgICAgICAgaWYgKCRzaGFkb3dFbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAkc2hhZG93RWwgPSBjcmVhdGVTaGFkb3cocGFyYW1zLCAkc2xpZGVFbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNoYWRvd0VsLmxlbmd0aCkgJHNoYWRvd0VsWzBdLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1pbihNYXRoLm1heCgoTWF0aC5hYnMocHJvZ3Jlc3MpIC0gMC41KSAvIDAuNSwgMCksIDEpO1xuICAgICAgfVxuXG4gICAgICAkc2xpZGVFbFswXS5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChzbGlkZVByb2dyZXNzKSkgKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgY29uc3QgJHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgJHNsaWRlRWwpO1xuICAgICAgJHRhcmdldEVsLnRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRyYW5zZm9ybUVsXG4gICAgfSA9IHN3aXBlci5wYXJhbXMuY2FyZHNFZmZlY3Q7XG4gICAgY29uc3QgJHRyYW5zaXRpb25FbGVtZW50cyA9IHRyYW5zZm9ybUVsID8gc3dpcGVyLnNsaWRlcy5maW5kKHRyYW5zZm9ybUVsKSA6IHN3aXBlci5zbGlkZXM7XG4gICAgJHRyYW5zaXRpb25FbGVtZW50cy50cmFuc2l0aW9uKGR1cmF0aW9uKS5maW5kKCcuc3dpcGVyLXNsaWRlLXNoYWRvdycpLnRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgdHJhbnNmb3JtRWxcbiAgICB9KTtcbiAgfTtcblxuICBlZmZlY3RJbml0KHtcbiAgICBlZmZlY3Q6ICdjYXJkcycsXG4gICAgc3dpcGVyLFxuICAgIG9uLFxuICAgIHNldFRyYW5zbGF0ZSxcbiAgICBzZXRUcmFuc2l0aW9uLFxuICAgIHBlcnNwZWN0aXZlOiAoKSA9PiB0cnVlLFxuICAgIG92ZXJ3cml0ZVBhcmFtczogKCkgPT4gKHtcbiAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhc3dpcGVyLnBhcmFtcy5jc3NNb2RlXG4gICAgfSlcbiAgfSk7XG59IiwgIi8qKlxuICogU3dpcGVyIFJlYWN0IDguMC43XG4gKiBNb3N0IG1vZGVybiBtb2JpbGUgdG91Y2ggc2xpZGVyIGFuZCBmcmFtZXdvcmsgd2l0aCBoYXJkd2FyZSBhY2NlbGVyYXRlZCB0cmFuc2l0aW9uc1xuICogaHR0cHM6Ly9zd2lwZXJqcy5jb21cbiAqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDIyIFZsYWRpbWlyIEtoYXJsYW1waWRpXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKlxuICogUmVsZWFzZWQgb246IE1hcmNoIDQsIDIwMjJcbiAqL1xuXG5pbXBvcnQgeyBTd2lwZXIgfSBmcm9tICcuL3N3aXBlci5qcyc7XG5pbXBvcnQgeyBTd2lwZXJTbGlkZSB9IGZyb20gJy4vc3dpcGVyLXNsaWRlLmpzJztcbmV4cG9ydCB7IHVzZVN3aXBlclNsaWRlLCB1c2VTd2lwZXIgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IHsgU3dpcGVyLCBTd2lwZXJTbGlkZSB9OyIsICJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFN3aXBlckNvcmUgZnJvbSAnc3dpcGVyJztcbmltcG9ydCB7IGdldFBhcmFtcyB9IGZyb20gJy4vZ2V0LXBhcmFtcy5qcyc7XG5pbXBvcnQgeyBtb3VudFN3aXBlciB9IGZyb20gJy4vbW91bnQtc3dpcGVyLmpzJztcbmltcG9ydCB7IG5lZWRzU2Nyb2xsYmFyLCBuZWVkc05hdmlnYXRpb24sIG5lZWRzUGFnaW5hdGlvbiwgdW5pcXVlQ2xhc3NlcywgZXh0ZW5kIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyByZW5kZXJMb29wLCBjYWxjTG9vcGVkU2xpZGVzIH0gZnJvbSAnLi9sb29wLmpzJztcbmltcG9ydCB7IGdldENoYW5nZWRQYXJhbXMgfSBmcm9tICcuL2dldC1jaGFuZ2VkLXBhcmFtcy5qcyc7XG5pbXBvcnQgeyBnZXRDaGlsZHJlbiB9IGZyb20gJy4vZ2V0LWNoaWxkcmVuLmpzJztcbmltcG9ydCB7IHVwZGF0ZVN3aXBlciB9IGZyb20gJy4vdXBkYXRlLXN3aXBlci5qcyc7XG5pbXBvcnQgeyByZW5kZXJWaXJ0dWFsLCB1cGRhdGVPblZpcnR1YWxEYXRhIH0gZnJvbSAnLi92aXJ0dWFsLmpzJztcbmltcG9ydCB7IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgfSBmcm9tICcuL3VzZS1pc29tb3JwaGljLWxheW91dC1lZmZlY3QuanMnO1xuaW1wb3J0IHsgU3dpcGVyQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5jb25zdCBTd2lwZXIgPSAvKiNfX1BVUkVfXyovZm9yd2FyZFJlZihmdW5jdGlvbiAoX3RlbXAsIGV4dGVybmFsRWxSZWYpIHtcbiAgbGV0IHtcbiAgICBjbGFzc05hbWUsXG4gICAgdGFnOiBUYWcgPSAnZGl2JyxcbiAgICB3cmFwcGVyVGFnOiBXcmFwcGVyVGFnID0gJ2RpdicsXG4gICAgY2hpbGRyZW4sXG4gICAgb25Td2lwZXIsXG4gICAgLi4ucmVzdFxuICB9ID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA7XG4gIGxldCBldmVudHNBc3NpZ25lZCA9IGZhbHNlO1xuICBjb25zdCBbY29udGFpbmVyQ2xhc3Nlcywgc2V0Q29udGFpbmVyQ2xhc3Nlc10gPSB1c2VTdGF0ZSgnc3dpcGVyJyk7XG4gIGNvbnN0IFt2aXJ0dWFsRGF0YSwgc2V0VmlydHVhbERhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFticmVha3BvaW50Q2hhbmdlZCwgc2V0QnJlYWtwb2ludENoYW5nZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpbml0aWFsaXplZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHN3aXBlckVsUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBzd2lwZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IG9sZFBhc3NlZFBhcmFtc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgb2xkU2xpZGVzID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBuZXh0RWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHByZXZFbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcGFnaW5hdGlvbkVsUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBzY3JvbGxiYXJFbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qge1xuICAgIHBhcmFtczogc3dpcGVyUGFyYW1zLFxuICAgIHBhc3NlZFBhcmFtcyxcbiAgICByZXN0OiByZXN0UHJvcHMsXG4gICAgZXZlbnRzXG4gIH0gPSBnZXRQYXJhbXMocmVzdCk7XG4gIGNvbnN0IHtcbiAgICBzbGlkZXMsXG4gICAgc2xvdHNcbiAgfSA9IGdldENoaWxkcmVuKGNoaWxkcmVuKTtcblxuICBjb25zdCBvbkJlZm9yZUJyZWFrcG9pbnQgPSAoKSA9PiB7XG4gICAgc2V0QnJlYWtwb2ludENoYW5nZWQoIWJyZWFrcG9pbnRDaGFuZ2VkKTtcbiAgfTtcblxuICBPYmplY3QuYXNzaWduKHN3aXBlclBhcmFtcy5vbiwge1xuICAgIF9jb250YWluZXJDbGFzc2VzKHN3aXBlciwgY2xhc3Nlcykge1xuICAgICAgc2V0Q29udGFpbmVyQ2xhc3NlcyhjbGFzc2VzKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgY29uc3QgaW5pdFN3aXBlciA9ICgpID0+IHtcbiAgICAvLyBpbml0IHN3aXBlclxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyUGFyYW1zLm9uLCBldmVudHMpO1xuICAgIGV2ZW50c0Fzc2lnbmVkID0gdHJ1ZTtcbiAgICBzd2lwZXJSZWYuY3VycmVudCA9IG5ldyBTd2lwZXJDb3JlKHN3aXBlclBhcmFtcyk7XG5cbiAgICBzd2lwZXJSZWYuY3VycmVudC5sb29wQ3JlYXRlID0gKCkgPT4ge307XG5cbiAgICBzd2lwZXJSZWYuY3VycmVudC5sb29wRGVzdHJveSA9ICgpID0+IHt9O1xuXG4gICAgaWYgKHN3aXBlclBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXJSZWYuY3VycmVudC5sb29wZWRTbGlkZXMgPSBjYWxjTG9vcGVkU2xpZGVzKHNsaWRlcywgc3dpcGVyUGFyYW1zKTtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyUmVmLmN1cnJlbnQudmlydHVhbCAmJiBzd2lwZXJSZWYuY3VycmVudC5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICBzd2lwZXJSZWYuY3VycmVudC52aXJ0dWFsLnNsaWRlcyA9IHNsaWRlcztcbiAgICAgIGNvbnN0IGV4dGVuZFdpdGggPSB7XG4gICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICByZW5kZXJFeHRlcm5hbDogc2V0VmlydHVhbERhdGEsXG4gICAgICAgIHJlbmRlckV4dGVybmFsVXBkYXRlOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIGV4dGVuZChzd2lwZXJSZWYuY3VycmVudC5wYXJhbXMudmlydHVhbCwgZXh0ZW5kV2l0aCk7XG4gICAgICBleHRlbmQoc3dpcGVyUmVmLmN1cnJlbnQub3JpZ2luYWxQYXJhbXMudmlydHVhbCwgZXh0ZW5kV2l0aCk7XG4gICAgfVxuICB9O1xuXG4gIGlmICghc3dpcGVyRWxSZWYuY3VycmVudCkge1xuICAgIGluaXRTd2lwZXIoKTtcbiAgfSAvLyBMaXN0ZW4gZm9yIGJyZWFrcG9pbnRzIGNoYW5nZVxuXG5cbiAgaWYgKHN3aXBlclJlZi5jdXJyZW50KSB7XG4gICAgc3dpcGVyUmVmLmN1cnJlbnQub24oJ19iZWZvcmVCcmVha3BvaW50Jywgb25CZWZvcmVCcmVha3BvaW50KTtcbiAgfVxuXG4gIGNvbnN0IGF0dGFjaEV2ZW50cyA9ICgpID0+IHtcbiAgICBpZiAoZXZlbnRzQXNzaWduZWQgfHwgIWV2ZW50cyB8fCAhc3dpcGVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBPYmplY3Qua2V5cyhldmVudHMpLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIHN3aXBlclJlZi5jdXJyZW50Lm9uKGV2ZW50TmFtZSwgZXZlbnRzW2V2ZW50TmFtZV0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGRldGFjaEV2ZW50cyA9ICgpID0+IHtcbiAgICBpZiAoIWV2ZW50cyB8fCAhc3dpcGVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBPYmplY3Qua2V5cyhldmVudHMpLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgIHN3aXBlclJlZi5jdXJyZW50Lm9mZihldmVudE5hbWUsIGV2ZW50c1tldmVudE5hbWVdKTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyUmVmLmN1cnJlbnQpIHN3aXBlclJlZi5jdXJyZW50Lm9mZignX2JlZm9yZUJyZWFrcG9pbnQnLCBvbkJlZm9yZUJyZWFrcG9pbnQpO1xuICAgIH07XG4gIH0pOyAvLyBzZXQgaW5pdGlhbGl6ZWQgZmxhZ1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpbml0aWFsaXplZFJlZi5jdXJyZW50ICYmIHN3aXBlclJlZi5jdXJyZW50KSB7XG4gICAgICBzd2lwZXJSZWYuY3VycmVudC5lbWl0U2xpZGVzQ2xhc3NlcygpO1xuICAgICAgaW5pdGlhbGl6ZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICB9KTsgLy8gbW91bnQgc3dpcGVyXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGV4dGVybmFsRWxSZWYpIHtcbiAgICAgIGV4dGVybmFsRWxSZWYuY3VycmVudCA9IHN3aXBlckVsUmVmLmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKCFzd2lwZXJFbFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAoc3dpcGVyUmVmLmN1cnJlbnQuZGVzdHJveWVkKSB7XG4gICAgICBpbml0U3dpcGVyKCk7XG4gICAgfVxuXG4gICAgbW91bnRTd2lwZXIoe1xuICAgICAgZWw6IHN3aXBlckVsUmVmLmN1cnJlbnQsXG4gICAgICBuZXh0RWw6IG5leHRFbFJlZi5jdXJyZW50LFxuICAgICAgcHJldkVsOiBwcmV2RWxSZWYuY3VycmVudCxcbiAgICAgIHBhZ2luYXRpb25FbDogcGFnaW5hdGlvbkVsUmVmLmN1cnJlbnQsXG4gICAgICBzY3JvbGxiYXJFbDogc2Nyb2xsYmFyRWxSZWYuY3VycmVudCxcbiAgICAgIHN3aXBlcjogc3dpcGVyUmVmLmN1cnJlbnRcbiAgICB9LCBzd2lwZXJQYXJhbXMpO1xuICAgIGlmIChvblN3aXBlcikgb25Td2lwZXIoc3dpcGVyUmVmLmN1cnJlbnQpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyUmVmLmN1cnJlbnQgJiYgIXN3aXBlclJlZi5jdXJyZW50LmRlc3Ryb3llZCkge1xuICAgICAgICBzd2lwZXJSZWYuY3VycmVudC5kZXN0cm95KHRydWUsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7IC8vIHdhdGNoIGZvciBwYXJhbXMgY2hhbmdlXG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgYXR0YWNoRXZlbnRzKCk7XG4gICAgY29uc3QgY2hhbmdlZFBhcmFtcyA9IGdldENoYW5nZWRQYXJhbXMocGFzc2VkUGFyYW1zLCBvbGRQYXNzZWRQYXJhbXNSZWYuY3VycmVudCwgc2xpZGVzLCBvbGRTbGlkZXMuY3VycmVudCk7XG4gICAgb2xkUGFzc2VkUGFyYW1zUmVmLmN1cnJlbnQgPSBwYXNzZWRQYXJhbXM7XG4gICAgb2xkU2xpZGVzLmN1cnJlbnQgPSBzbGlkZXM7XG5cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5sZW5ndGggJiYgc3dpcGVyUmVmLmN1cnJlbnQgJiYgIXN3aXBlclJlZi5jdXJyZW50LmRlc3Ryb3llZCkge1xuICAgICAgdXBkYXRlU3dpcGVyKHtcbiAgICAgICAgc3dpcGVyOiBzd2lwZXJSZWYuY3VycmVudCxcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICBwYXNzZWRQYXJhbXMsXG4gICAgICAgIGNoYW5nZWRQYXJhbXMsXG4gICAgICAgIG5leHRFbDogbmV4dEVsUmVmLmN1cnJlbnQsXG4gICAgICAgIHByZXZFbDogcHJldkVsUmVmLmN1cnJlbnQsXG4gICAgICAgIHNjcm9sbGJhckVsOiBzY3JvbGxiYXJFbFJlZi5jdXJyZW50LFxuICAgICAgICBwYWdpbmF0aW9uRWw6IHBhZ2luYXRpb25FbFJlZi5jdXJyZW50XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGV0YWNoRXZlbnRzKCk7XG4gICAgfTtcbiAgfSk7IC8vIHVwZGF0ZSBvbiB2aXJ0dWFsIHVwZGF0ZVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIHVwZGF0ZU9uVmlydHVhbERhdGEoc3dpcGVyUmVmLmN1cnJlbnQpO1xuICB9LCBbdmlydHVhbERhdGFdKTsgLy8gYnlwYXNzIHN3aXBlciBpbnN0YW5jZSB0byBzbGlkZXNcblxuICBmdW5jdGlvbiByZW5kZXJTbGlkZXMoKSB7XG4gICAgaWYgKHN3aXBlclBhcmFtcy52aXJ0dWFsKSB7XG4gICAgICByZXR1cm4gcmVuZGVyVmlydHVhbChzd2lwZXJSZWYuY3VycmVudCwgc2xpZGVzLCB2aXJ0dWFsRGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKCFzd2lwZXJQYXJhbXMubG9vcCB8fCBzd2lwZXJSZWYuY3VycmVudCAmJiBzd2lwZXJSZWYuY3VycmVudC5kZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybiBzbGlkZXMubWFwKGNoaWxkID0+IHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgICBzd2lwZXI6IHN3aXBlclJlZi5jdXJyZW50XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbmRlckxvb3Aoc3dpcGVyUmVmLmN1cnJlbnQsIHNsaWRlcywgc3dpcGVyUGFyYW1zKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWcsIF9leHRlbmRzKHtcbiAgICByZWY6IHN3aXBlckVsUmVmLFxuICAgIGNsYXNzTmFtZTogdW5pcXVlQ2xhc3NlcyhgJHtjb250YWluZXJDbGFzc2VzfSR7Y2xhc3NOYW1lID8gYCAke2NsYXNzTmFtZX1gIDogJyd9YClcbiAgfSwgcmVzdFByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3dpcGVyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBzd2lwZXJSZWYuY3VycmVudFxuICB9LCBzbG90c1snY29udGFpbmVyLXN0YXJ0J10sIG5lZWRzTmF2aWdhdGlvbihzd2lwZXJQYXJhbXMpICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBwcmV2RWxSZWYsXG4gICAgY2xhc3NOYW1lOiBcInN3aXBlci1idXR0b24tcHJldlwiXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBuZXh0RWxSZWYsXG4gICAgY2xhc3NOYW1lOiBcInN3aXBlci1idXR0b24tbmV4dFwiXG4gIH0pKSwgbmVlZHNTY3JvbGxiYXIoc3dpcGVyUGFyYW1zKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBzY3JvbGxiYXJFbFJlZixcbiAgICBjbGFzc05hbWU6IFwic3dpcGVyLXNjcm9sbGJhclwiXG4gIH0pLCBuZWVkc1BhZ2luYXRpb24oc3dpcGVyUGFyYW1zKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBwYWdpbmF0aW9uRWxSZWYsXG4gICAgY2xhc3NOYW1lOiBcInN3aXBlci1wYWdpbmF0aW9uXCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFdyYXBwZXJUYWcsIHtcbiAgICBjbGFzc05hbWU6IFwic3dpcGVyLXdyYXBwZXJcIlxuICB9LCBzbG90c1snd3JhcHBlci1zdGFydCddLCByZW5kZXJTbGlkZXMoKSwgc2xvdHNbJ3dyYXBwZXItZW5kJ10pLCBzbG90c1snY29udGFpbmVyLWVuZCddKSk7XG59KTtcblN3aXBlci5kaXNwbGF5TmFtZSA9ICdTd2lwZXInO1xuZXhwb3J0IHsgU3dpcGVyIH07IiwgImltcG9ydCBTd2lwZXIgZnJvbSAnc3dpcGVyJztcbmltcG9ydCB7IGlzT2JqZWN0LCBleHRlbmQgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IHBhcmFtc0xpc3QgfSBmcm9tICcuL3BhcmFtcy1saXN0LmpzJztcblxuZnVuY3Rpb24gZ2V0UGFyYW1zKG9iaikge1xuICBpZiAob2JqID09PSB2b2lkIDApIHtcbiAgICBvYmogPSB7fTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBvbjoge31cbiAgfTtcbiAgY29uc3QgZXZlbnRzID0ge307XG4gIGNvbnN0IHBhc3NlZFBhcmFtcyA9IHt9O1xuICBleHRlbmQocGFyYW1zLCBTd2lwZXIuZGVmYXVsdHMpO1xuICBleHRlbmQocGFyYW1zLCBTd2lwZXIuZXh0ZW5kZWREZWZhdWx0cyk7XG4gIHBhcmFtcy5fZW1pdENsYXNzZXMgPSB0cnVlO1xuICBwYXJhbXMuaW5pdCA9IGZhbHNlO1xuICBjb25zdCByZXN0ID0ge307XG4gIGNvbnN0IGFsbG93ZWRQYXJhbXMgPSBwYXJhbXNMaXN0Lm1hcChrZXkgPT4ga2V5LnJlcGxhY2UoL18vLCAnJykpO1xuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHtcbiAgICBpZiAoYWxsb3dlZFBhcmFtcy5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgaWYgKGlzT2JqZWN0KG9ialtrZXldKSkge1xuICAgICAgICBwYXJhbXNba2V5XSA9IHt9O1xuICAgICAgICBwYXNzZWRQYXJhbXNba2V5XSA9IHt9O1xuICAgICAgICBleHRlbmQocGFyYW1zW2tleV0sIG9ialtrZXldKTtcbiAgICAgICAgZXh0ZW5kKHBhc3NlZFBhcmFtc1trZXldLCBvYmpba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXNba2V5XSA9IG9ialtrZXldO1xuICAgICAgICBwYXNzZWRQYXJhbXNba2V5XSA9IG9ialtrZXldO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoa2V5LnNlYXJjaCgvb25bQS1aXS8pID09PSAwICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZXZlbnRzW2Ake2tleVsyXS50b0xvd2VyQ2FzZSgpfSR7a2V5LnN1YnN0cigzKX1gXSA9IG9ialtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN0W2tleV0gPSBvYmpba2V5XTtcbiAgICB9XG4gIH0pO1xuICBbJ25hdmlnYXRpb24nLCAncGFnaW5hdGlvbicsICdzY3JvbGxiYXInXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKHBhcmFtc1trZXldID09PSB0cnVlKSBwYXJhbXNba2V5XSA9IHt9O1xuICAgIGlmIChwYXJhbXNba2V5XSA9PT0gZmFsc2UpIGRlbGV0ZSBwYXJhbXNba2V5XTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgcGFyYW1zLFxuICAgIHBhc3NlZFBhcmFtcyxcbiAgICByZXN0LFxuICAgIGV2ZW50c1xuICB9O1xufVxuXG5leHBvcnQgeyBnZXRQYXJhbXMgfTsiLCAiZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmIG8gIT09IG51bGwgJiYgby5jb25zdHJ1Y3RvciAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpID09PSAnT2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc3JjKSB7XG4gIGNvbnN0IG5vRXh0ZW5kID0gWydfX3Byb3RvX18nLCAnY29uc3RydWN0b3InLCAncHJvdG90eXBlJ107XG4gIE9iamVjdC5rZXlzKHNyYykuZmlsdGVyKGtleSA9PiBub0V4dGVuZC5pbmRleE9mKGtleSkgPCAwKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKHR5cGVvZiB0YXJnZXRba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHRhcmdldFtrZXldID0gc3JjW2tleV07ZWxzZSBpZiAoaXNPYmplY3Qoc3JjW2tleV0pICYmIGlzT2JqZWN0KHRhcmdldFtrZXldKSAmJiBPYmplY3Qua2V5cyhzcmNba2V5XSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHNyY1trZXldLl9fc3dpcGVyX18pIHRhcmdldFtrZXldID0gc3JjW2tleV07ZWxzZSBleHRlbmQodGFyZ2V0W2tleV0sIHNyY1trZXldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBuZWVkc05hdmlnYXRpb24ocGFyYW1zKSB7XG4gIGlmIChwYXJhbXMgPT09IHZvaWQgMCkge1xuICAgIHBhcmFtcyA9IHt9O1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtcy5uYXZpZ2F0aW9uICYmIHR5cGVvZiBwYXJhbXMubmF2aWdhdGlvbi5uZXh0RWwgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwYXJhbXMubmF2aWdhdGlvbi5wcmV2RWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG5mdW5jdGlvbiBuZWVkc1BhZ2luYXRpb24ocGFyYW1zKSB7XG4gIGlmIChwYXJhbXMgPT09IHZvaWQgMCkge1xuICAgIHBhcmFtcyA9IHt9O1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtcy5wYWdpbmF0aW9uICYmIHR5cGVvZiBwYXJhbXMucGFnaW5hdGlvbi5lbCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbmZ1bmN0aW9uIG5lZWRzU2Nyb2xsYmFyKHBhcmFtcykge1xuICBpZiAocGFyYW1zID09PSB2b2lkIDApIHtcbiAgICBwYXJhbXMgPSB7fTtcbiAgfVxuXG4gIHJldHVybiBwYXJhbXMuc2Nyb2xsYmFyICYmIHR5cGVvZiBwYXJhbXMuc2Nyb2xsYmFyLmVsID09PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gdW5pcXVlQ2xhc3NlcyhjbGFzc05hbWVzKSB7XG4gIGlmIChjbGFzc05hbWVzID09PSB2b2lkIDApIHtcbiAgICBjbGFzc05hbWVzID0gJyc7XG4gIH1cblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcy5zcGxpdCgnICcpLm1hcChjID0+IGMudHJpbSgpKS5maWx0ZXIoYyA9PiAhIWMpO1xuICBjb25zdCB1bmlxdWUgPSBbXTtcbiAgY2xhc3Nlcy5mb3JFYWNoKGMgPT4ge1xuICAgIGlmICh1bmlxdWUuaW5kZXhPZihjKSA8IDApIHVuaXF1ZS5wdXNoKGMpO1xuICB9KTtcbiAgcmV0dXJuIHVuaXF1ZS5qb2luKCcgJyk7XG59XG5cbmV4cG9ydCB7IGlzT2JqZWN0LCBleHRlbmQsIG5lZWRzTmF2aWdhdGlvbiwgbmVlZHNQYWdpbmF0aW9uLCBuZWVkc1Njcm9sbGJhciwgdW5pcXVlQ2xhc3NlcyB9OyIsICIvKiB1bmRlcnNjb3JlIGluIG5hbWUgLT4gd2F0Y2ggZm9yIGNoYW5nZXMgKi9cbmNvbnN0IHBhcmFtc0xpc3QgPSBbJ21vZHVsZXMnLCAnaW5pdCcsICdfZGlyZWN0aW9uJywgJ3RvdWNoRXZlbnRzVGFyZ2V0JywgJ2luaXRpYWxTbGlkZScsICdfc3BlZWQnLCAnY3NzTW9kZScsICd1cGRhdGVPbldpbmRvd1Jlc2l6ZScsICdyZXNpemVPYnNlcnZlcicsICduZXN0ZWQnLCAnZm9jdXNhYmxlRWxlbWVudHMnLCAnX2VuYWJsZWQnLCAnX3dpZHRoJywgJ19oZWlnaHQnLCAncHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uJywgJ3VzZXJBZ2VudCcsICd1cmwnLCAnX2VkZ2VTd2lwZURldGVjdGlvbicsICdfZWRnZVN3aXBlVGhyZXNob2xkJywgJ19mcmVlTW9kZScsICdfYXV0b0hlaWdodCcsICdzZXRXcmFwcGVyU2l6ZScsICd2aXJ0dWFsVHJhbnNsYXRlJywgJ19lZmZlY3QnLCAnYnJlYWtwb2ludHMnLCAnX3NwYWNlQmV0d2VlbicsICdfc2xpZGVzUGVyVmlldycsICdtYXhCYWNrZmFjZUhpZGRlblNsaWRlcycsICdfZ3JpZCcsICdfc2xpZGVzUGVyR3JvdXAnLCAnX3NsaWRlc1Blckdyb3VwU2tpcCcsICdfc2xpZGVzUGVyR3JvdXBBdXRvJywgJ19jZW50ZXJlZFNsaWRlcycsICdfY2VudGVyZWRTbGlkZXNCb3VuZHMnLCAnX3NsaWRlc09mZnNldEJlZm9yZScsICdfc2xpZGVzT2Zmc2V0QWZ0ZXInLCAnbm9ybWFsaXplU2xpZGVJbmRleCcsICdfY2VudGVySW5zdWZmaWNpZW50U2xpZGVzJywgJ193YXRjaE92ZXJmbG93JywgJ3JvdW5kTGVuZ3RocycsICd0b3VjaFJhdGlvJywgJ3RvdWNoQW5nbGUnLCAnc2ltdWxhdGVUb3VjaCcsICdfc2hvcnRTd2lwZXMnLCAnX2xvbmdTd2lwZXMnLCAnbG9uZ1N3aXBlc1JhdGlvJywgJ2xvbmdTd2lwZXNNcycsICdfZm9sbG93RmluZ2VyJywgJ2FsbG93VG91Y2hNb3ZlJywgJ190aHJlc2hvbGQnLCAndG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uJywgJ3RvdWNoU3RhcnRQcmV2ZW50RGVmYXVsdCcsICd0b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdCcsICd0b3VjaFJlbGVhc2VPbkVkZ2VzJywgJ3VuaXF1ZU5hdkVsZW1lbnRzJywgJ19yZXNpc3RhbmNlJywgJ19yZXNpc3RhbmNlUmF0aW8nLCAnX3dhdGNoU2xpZGVzUHJvZ3Jlc3MnLCAnX2dyYWJDdXJzb3InLCAncHJldmVudENsaWNrcycsICdwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb24nLCAnX3NsaWRlVG9DbGlja2VkU2xpZGUnLCAnX3ByZWxvYWRJbWFnZXMnLCAndXBkYXRlT25JbWFnZXNSZWFkeScsICdfbG9vcCcsICdfbG9vcEFkZGl0aW9uYWxTbGlkZXMnLCAnX2xvb3BlZFNsaWRlcycsICdfbG9vcEZpbGxHcm91cFdpdGhCbGFuaycsICdsb29wUHJldmVudHNTbGlkZScsICdfcmV3aW5kJywgJ19hbGxvd1NsaWRlUHJldicsICdfYWxsb3dTbGlkZU5leHQnLCAnX3N3aXBlSGFuZGxlcicsICdfbm9Td2lwaW5nJywgJ25vU3dpcGluZ0NsYXNzJywgJ25vU3dpcGluZ1NlbGVjdG9yJywgJ3Bhc3NpdmVMaXN0ZW5lcnMnLCAnY29udGFpbmVyTW9kaWZpZXJDbGFzcycsICdzbGlkZUNsYXNzJywgJ3NsaWRlQmxhbmtDbGFzcycsICdzbGlkZUFjdGl2ZUNsYXNzJywgJ3NsaWRlRHVwbGljYXRlQWN0aXZlQ2xhc3MnLCAnc2xpZGVWaXNpYmxlQ2xhc3MnLCAnc2xpZGVEdXBsaWNhdGVDbGFzcycsICdzbGlkZU5leHRDbGFzcycsICdzbGlkZUR1cGxpY2F0ZU5leHRDbGFzcycsICdzbGlkZVByZXZDbGFzcycsICdzbGlkZUR1cGxpY2F0ZVByZXZDbGFzcycsICd3cmFwcGVyQ2xhc3MnLCAncnVuQ2FsbGJhY2tzT25Jbml0JywgJ29ic2VydmVyJywgJ29ic2VydmVQYXJlbnRzJywgJ29ic2VydmVTbGlkZUNoaWxkcmVuJywgLy8gbW9kdWxlc1xuJ2ExMXknLCAnX2F1dG9wbGF5JywgJ19jb250cm9sbGVyJywgJ2NvdmVyZmxvd0VmZmVjdCcsICdjdWJlRWZmZWN0JywgJ2ZhZGVFZmZlY3QnLCAnZmxpcEVmZmVjdCcsICdjcmVhdGl2ZUVmZmVjdCcsICdjYXJkc0VmZmVjdCcsICdoYXNoTmF2aWdhdGlvbicsICdoaXN0b3J5JywgJ2tleWJvYXJkJywgJ2xhenknLCAnbW91c2V3aGVlbCcsICdfbmF2aWdhdGlvbicsICdfcGFnaW5hdGlvbicsICdwYXJhbGxheCcsICdfc2Nyb2xsYmFyJywgJ190aHVtYnMnLCAndmlydHVhbCcsICd6b29tJ107XG5leHBvcnQgeyBwYXJhbXNMaXN0IH07IiwgImltcG9ydCB7IG5lZWRzTmF2aWdhdGlvbiwgbmVlZHNQYWdpbmF0aW9uLCBuZWVkc1Njcm9sbGJhciB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5mdW5jdGlvbiBtb3VudFN3aXBlcihfcmVmLCBzd2lwZXJQYXJhbXMpIHtcbiAgbGV0IHtcbiAgICBlbCxcbiAgICBuZXh0RWwsXG4gICAgcHJldkVsLFxuICAgIHBhZ2luYXRpb25FbCxcbiAgICBzY3JvbGxiYXJFbCxcbiAgICBzd2lwZXJcbiAgfSA9IF9yZWY7XG5cbiAgaWYgKG5lZWRzTmF2aWdhdGlvbihzd2lwZXJQYXJhbXMpICYmIG5leHRFbCAmJiBwcmV2RWwpIHtcbiAgICBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24ubmV4dEVsID0gbmV4dEVsO1xuICAgIHN3aXBlci5vcmlnaW5hbFBhcmFtcy5uYXZpZ2F0aW9uLm5leHRFbCA9IG5leHRFbDtcbiAgICBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24ucHJldkVsID0gcHJldkVsO1xuICAgIHN3aXBlci5vcmlnaW5hbFBhcmFtcy5uYXZpZ2F0aW9uLnByZXZFbCA9IHByZXZFbDtcbiAgfVxuXG4gIGlmIChuZWVkc1BhZ2luYXRpb24oc3dpcGVyUGFyYW1zKSAmJiBwYWdpbmF0aW9uRWwpIHtcbiAgICBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uZWwgPSBwYWdpbmF0aW9uRWw7XG4gICAgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLnBhZ2luYXRpb24uZWwgPSBwYWdpbmF0aW9uRWw7XG4gIH1cblxuICBpZiAobmVlZHNTY3JvbGxiYXIoc3dpcGVyUGFyYW1zKSAmJiBzY3JvbGxiYXJFbCkge1xuICAgIHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmVsID0gc2Nyb2xsYmFyRWw7XG4gICAgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLnNjcm9sbGJhci5lbCA9IHNjcm9sbGJhckVsO1xuICB9XG5cbiAgc3dpcGVyLmluaXQoZWwpO1xufVxuXG5leHBvcnQgeyBtb3VudFN3aXBlciB9OyIsICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFN3aXBlciBmcm9tICdzd2lwZXInO1xuXG5mdW5jdGlvbiBjYWxjTG9vcGVkU2xpZGVzKHNsaWRlcywgc3dpcGVyUGFyYW1zKSB7XG4gIGxldCBzbGlkZXNQZXJWaWV3UGFyYW1zID0gc3dpcGVyUGFyYW1zLnNsaWRlc1BlclZpZXc7XG5cbiAgaWYgKHN3aXBlclBhcmFtcy5icmVha3BvaW50cykge1xuICAgIGNvbnN0IGJyZWFrcG9pbnQgPSBTd2lwZXIucHJvdG90eXBlLmdldEJyZWFrcG9pbnQoc3dpcGVyUGFyYW1zLmJyZWFrcG9pbnRzKTtcbiAgICBjb25zdCBicmVha3BvaW50T25seVBhcmFtcyA9IGJyZWFrcG9pbnQgaW4gc3dpcGVyUGFyYW1zLmJyZWFrcG9pbnRzID8gc3dpcGVyUGFyYW1zLmJyZWFrcG9pbnRzW2JyZWFrcG9pbnRdIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGJyZWFrcG9pbnRPbmx5UGFyYW1zICYmIGJyZWFrcG9pbnRPbmx5UGFyYW1zLnNsaWRlc1BlclZpZXcpIHtcbiAgICAgIHNsaWRlc1BlclZpZXdQYXJhbXMgPSBicmVha3BvaW50T25seVBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgIH1cbiAgfVxuXG4gIGxldCBsb29wZWRTbGlkZXMgPSBNYXRoLmNlaWwocGFyc2VGbG9hdChzd2lwZXJQYXJhbXMubG9vcGVkU2xpZGVzIHx8IHNsaWRlc1BlclZpZXdQYXJhbXMsIDEwKSk7XG4gIGxvb3BlZFNsaWRlcyArPSBzd2lwZXJQYXJhbXMubG9vcEFkZGl0aW9uYWxTbGlkZXM7XG5cbiAgaWYgKGxvb3BlZFNsaWRlcyA+IHNsaWRlcy5sZW5ndGgpIHtcbiAgICBsb29wZWRTbGlkZXMgPSBzbGlkZXMubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIGxvb3BlZFNsaWRlcztcbn1cblxuZnVuY3Rpb24gcmVuZGVyTG9vcChzd2lwZXIsIHNsaWRlcywgc3dpcGVyUGFyYW1zKSB7XG4gIGNvbnN0IG1vZGlmaWVkU2xpZGVzID0gc2xpZGVzLm1hcCgoY2hpbGQsIGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgIHN3aXBlcixcbiAgICAgICdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCc6IGluZGV4XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGR1cGxpY2F0ZVNsaWRlKGNoaWxkLCBpbmRleCwgcG9zaXRpb24pIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAga2V5OiBgJHtjaGlsZC5rZXl9LWR1cGxpY2F0ZS0ke2luZGV4fS0ke3Bvc2l0aW9ufWAsXG4gICAgICBjbGFzc05hbWU6IGAke2NoaWxkLnByb3BzLmNsYXNzTmFtZSB8fCAnJ30gJHtzd2lwZXJQYXJhbXMuc2xpZGVEdXBsaWNhdGVDbGFzc31gXG4gICAgfSk7XG4gIH1cblxuICBpZiAoc3dpcGVyUGFyYW1zLmxvb3BGaWxsR3JvdXBXaXRoQmxhbmspIHtcbiAgICBjb25zdCBibGFua1NsaWRlc051bSA9IHN3aXBlclBhcmFtcy5zbGlkZXNQZXJHcm91cCAtIG1vZGlmaWVkU2xpZGVzLmxlbmd0aCAlIHN3aXBlclBhcmFtcy5zbGlkZXNQZXJHcm91cDtcblxuICAgIGlmIChibGFua1NsaWRlc051bSAhPT0gc3dpcGVyUGFyYW1zLnNsaWRlc1Blckdyb3VwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsYW5rU2xpZGVzTnVtOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgYmxhbmtTbGlkZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGAke3N3aXBlclBhcmFtcy5zbGlkZUNsYXNzfSAke3N3aXBlclBhcmFtcy5zbGlkZUJsYW5rQ2xhc3N9YFxuICAgICAgICB9KTtcbiAgICAgICAgbW9kaWZpZWRTbGlkZXMucHVzaChibGFua1NsaWRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3dpcGVyUGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyAmJiAhc3dpcGVyUGFyYW1zLmxvb3BlZFNsaWRlcykge1xuICAgIHN3aXBlclBhcmFtcy5sb29wZWRTbGlkZXMgPSBtb2RpZmllZFNsaWRlcy5sZW5ndGg7XG4gIH1cblxuICBjb25zdCBsb29wZWRTbGlkZXMgPSBjYWxjTG9vcGVkU2xpZGVzKG1vZGlmaWVkU2xpZGVzLCBzd2lwZXJQYXJhbXMpO1xuICBjb25zdCBwcmVwZW5kU2xpZGVzID0gW107XG4gIGNvbnN0IGFwcGVuZFNsaWRlcyA9IFtdO1xuICBtb2RpZmllZFNsaWRlcy5mb3JFYWNoKChjaGlsZCwgaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPCBsb29wZWRTbGlkZXMpIHtcbiAgICAgIGFwcGVuZFNsaWRlcy5wdXNoKGR1cGxpY2F0ZVNsaWRlKGNoaWxkLCBpbmRleCwgJ3ByZXBlbmQnKSk7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4IDwgbW9kaWZpZWRTbGlkZXMubGVuZ3RoICYmIGluZGV4ID49IG1vZGlmaWVkU2xpZGVzLmxlbmd0aCAtIGxvb3BlZFNsaWRlcykge1xuICAgICAgcHJlcGVuZFNsaWRlcy5wdXNoKGR1cGxpY2F0ZVNsaWRlKGNoaWxkLCBpbmRleCwgJ2FwcGVuZCcpKTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChzd2lwZXIpIHtcbiAgICBzd2lwZXIubG9vcGVkU2xpZGVzID0gbG9vcGVkU2xpZGVzO1xuICB9XG5cbiAgcmV0dXJuIFsuLi5wcmVwZW5kU2xpZGVzLCAuLi5tb2RpZmllZFNsaWRlcywgLi4uYXBwZW5kU2xpZGVzXTtcbn1cblxuZXhwb3J0IHsgY2FsY0xvb3BlZFNsaWRlcywgcmVuZGVyTG9vcCB9OyIsICJpbXBvcnQgeyBwYXJhbXNMaXN0IH0gZnJvbSAnLi9wYXJhbXMtbGlzdC5qcyc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5mdW5jdGlvbiBnZXRDaGFuZ2VkUGFyYW1zKHN3aXBlclBhcmFtcywgb2xkUGFyYW1zLCBjaGlsZHJlbiwgb2xkQ2hpbGRyZW4pIHtcbiAgY29uc3Qga2V5cyA9IFtdO1xuICBpZiAoIW9sZFBhcmFtcykgcmV0dXJuIGtleXM7XG5cbiAgY29uc3QgYWRkS2V5ID0ga2V5ID0+IHtcbiAgICBpZiAoa2V5cy5pbmRleE9mKGtleSkgPCAwKSBrZXlzLnB1c2goa2V5KTtcbiAgfTtcblxuICBjb25zdCBvbGRDaGlsZHJlbktleXMgPSBvbGRDaGlsZHJlbi5tYXAoY2hpbGQgPT4gY2hpbGQua2V5KTtcbiAgY29uc3QgY2hpbGRyZW5LZXlzID0gY2hpbGRyZW4ubWFwKGNoaWxkID0+IGNoaWxkLmtleSk7XG4gIGlmIChvbGRDaGlsZHJlbktleXMuam9pbignJykgIT09IGNoaWxkcmVuS2V5cy5qb2luKCcnKSkgYWRkS2V5KCdjaGlsZHJlbicpO1xuICBpZiAob2xkQ2hpbGRyZW4ubGVuZ3RoICE9PSBjaGlsZHJlbi5sZW5ndGgpIGFkZEtleSgnY2hpbGRyZW4nKTtcbiAgY29uc3Qgd2F0Y2hQYXJhbXMgPSBwYXJhbXNMaXN0LmZpbHRlcihrZXkgPT4ga2V5WzBdID09PSAnXycpLm1hcChrZXkgPT4ga2V5LnJlcGxhY2UoL18vLCAnJykpO1xuICB3YXRjaFBhcmFtcy5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKGtleSBpbiBzd2lwZXJQYXJhbXMgJiYga2V5IGluIG9sZFBhcmFtcykge1xuICAgICAgaWYgKGlzT2JqZWN0KHN3aXBlclBhcmFtc1trZXldKSAmJiBpc09iamVjdChvbGRQYXJhbXNba2V5XSkpIHtcbiAgICAgICAgY29uc3QgbmV3S2V5cyA9IE9iamVjdC5rZXlzKHN3aXBlclBhcmFtc1trZXldKTtcbiAgICAgICAgY29uc3Qgb2xkS2V5cyA9IE9iamVjdC5rZXlzKG9sZFBhcmFtc1trZXldKTtcblxuICAgICAgICBpZiAobmV3S2V5cy5sZW5ndGggIT09IG9sZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgYWRkS2V5KGtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3S2V5cy5mb3JFYWNoKG5ld0tleSA9PiB7XG4gICAgICAgICAgICBpZiAoc3dpcGVyUGFyYW1zW2tleV1bbmV3S2V5XSAhPT0gb2xkUGFyYW1zW2tleV1bbmV3S2V5XSkge1xuICAgICAgICAgICAgICBhZGRLZXkoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvbGRLZXlzLmZvckVhY2gob2xkS2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChzd2lwZXJQYXJhbXNba2V5XVtvbGRLZXldICE9PSBvbGRQYXJhbXNba2V5XVtvbGRLZXldKSBhZGRLZXkoa2V5KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzd2lwZXJQYXJhbXNba2V5XSAhPT0gb2xkUGFyYW1zW2tleV0pIHtcbiAgICAgICAgYWRkS2V5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGtleXM7XG59XG5cbmV4cG9ydCB7IGdldENoYW5nZWRQYXJhbXMgfTsiLCAiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZnVuY3Rpb24gcHJvY2Vzc0NoaWxkcmVuKGMpIHtcbiAgY29uc3Qgc2xpZGVzID0gW107XG4gIFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkoYykuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgaWYgKGNoaWxkLnR5cGUgJiYgY2hpbGQudHlwZS5kaXNwbGF5TmFtZSA9PT0gJ1N3aXBlclNsaWRlJykge1xuICAgICAgc2xpZGVzLnB1c2goY2hpbGQpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIHByb2Nlc3NDaGlsZHJlbihjaGlsZC5wcm9wcy5jaGlsZHJlbikuZm9yRWFjaChzbGlkZSA9PiBzbGlkZXMucHVzaChzbGlkZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzbGlkZXM7XG59XG5cbmZ1bmN0aW9uIGdldENoaWxkcmVuKGMpIHtcbiAgY29uc3Qgc2xpZGVzID0gW107XG4gIGNvbnN0IHNsb3RzID0ge1xuICAgICdjb250YWluZXItc3RhcnQnOiBbXSxcbiAgICAnY29udGFpbmVyLWVuZCc6IFtdLFxuICAgICd3cmFwcGVyLXN0YXJ0JzogW10sXG4gICAgJ3dyYXBwZXItZW5kJzogW11cbiAgfTtcbiAgUmVhY3QuQ2hpbGRyZW4udG9BcnJheShjKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICBpZiAoY2hpbGQudHlwZSAmJiBjaGlsZC50eXBlLmRpc3BsYXlOYW1lID09PSAnU3dpcGVyU2xpZGUnKSB7XG4gICAgICBzbGlkZXMucHVzaChjaGlsZCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC5wcm9wcyAmJiBjaGlsZC5wcm9wcy5zbG90ICYmIHNsb3RzW2NoaWxkLnByb3BzLnNsb3RdKSB7XG4gICAgICBzbG90c1tjaGlsZC5wcm9wcy5zbG90XS5wdXNoKGNoaWxkKTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnByb3BzICYmIGNoaWxkLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBmb3VuZFNsaWRlcyA9IHByb2Nlc3NDaGlsZHJlbihjaGlsZC5wcm9wcy5jaGlsZHJlbik7XG5cbiAgICAgIGlmIChmb3VuZFNsaWRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvdW5kU2xpZGVzLmZvckVhY2goc2xpZGUgPT4gc2xpZGVzLnB1c2goc2xpZGUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsb3RzWydjb250YWluZXItZW5kJ10ucHVzaChjaGlsZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsb3RzWydjb250YWluZXItZW5kJ10ucHVzaChjaGlsZCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBzbGlkZXMsXG4gICAgc2xvdHNcbiAgfTtcbn1cblxuZXhwb3J0IHsgZ2V0Q2hpbGRyZW4gfTsiLCAiaW1wb3J0IHsgaXNPYmplY3QsIGV4dGVuZCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5mdW5jdGlvbiB1cGRhdGVTd2lwZXIoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBzbGlkZXMsXG4gICAgcGFzc2VkUGFyYW1zLFxuICAgIGNoYW5nZWRQYXJhbXMsXG4gICAgbmV4dEVsLFxuICAgIHByZXZFbCxcbiAgICBzY3JvbGxiYXJFbCxcbiAgICBwYWdpbmF0aW9uRWxcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IGNoYW5nZWRQYXJhbXMuZmlsdGVyKGtleSA9PiBrZXkgIT09ICdjaGlsZHJlbicgJiYga2V5ICE9PSAnZGlyZWN0aW9uJyk7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXM6IGN1cnJlbnRQYXJhbXMsXG4gICAgcGFnaW5hdGlvbixcbiAgICBuYXZpZ2F0aW9uLFxuICAgIHNjcm9sbGJhcixcbiAgICB2aXJ0dWFsLFxuICAgIHRodW1ic1xuICB9ID0gc3dpcGVyO1xuICBsZXQgbmVlZFRodW1ic0luaXQ7XG4gIGxldCBuZWVkQ29udHJvbGxlckluaXQ7XG4gIGxldCBuZWVkUGFnaW5hdGlvbkluaXQ7XG4gIGxldCBuZWVkU2Nyb2xsYmFySW5pdDtcbiAgbGV0IG5lZWROYXZpZ2F0aW9uSW5pdDtcblxuICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygndGh1bWJzJykgJiYgcGFzc2VkUGFyYW1zLnRodW1icyAmJiBwYXNzZWRQYXJhbXMudGh1bWJzLnN3aXBlciAmJiBjdXJyZW50UGFyYW1zLnRodW1icyAmJiAhY3VycmVudFBhcmFtcy50aHVtYnMuc3dpcGVyKSB7XG4gICAgbmVlZFRodW1ic0luaXQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2NvbnRyb2xsZXInKSAmJiBwYXNzZWRQYXJhbXMuY29udHJvbGxlciAmJiBwYXNzZWRQYXJhbXMuY29udHJvbGxlci5jb250cm9sICYmIGN1cnJlbnRQYXJhbXMuY29udHJvbGxlciAmJiAhY3VycmVudFBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wpIHtcbiAgICBuZWVkQ29udHJvbGxlckluaXQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3BhZ2luYXRpb24nKSAmJiBwYXNzZWRQYXJhbXMucGFnaW5hdGlvbiAmJiAocGFzc2VkUGFyYW1zLnBhZ2luYXRpb24uZWwgfHwgcGFnaW5hdGlvbkVsKSAmJiAoY3VycmVudFBhcmFtcy5wYWdpbmF0aW9uIHx8IGN1cnJlbnRQYXJhbXMucGFnaW5hdGlvbiA9PT0gZmFsc2UpICYmIHBhZ2luYXRpb24gJiYgIXBhZ2luYXRpb24uZWwpIHtcbiAgICBuZWVkUGFnaW5hdGlvbkluaXQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3Njcm9sbGJhcicpICYmIHBhc3NlZFBhcmFtcy5zY3JvbGxiYXIgJiYgKHBhc3NlZFBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgc2Nyb2xsYmFyRWwpICYmIChjdXJyZW50UGFyYW1zLnNjcm9sbGJhciB8fCBjdXJyZW50UGFyYW1zLnNjcm9sbGJhciA9PT0gZmFsc2UpICYmIHNjcm9sbGJhciAmJiAhc2Nyb2xsYmFyLmVsKSB7XG4gICAgbmVlZFNjcm9sbGJhckluaXQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ25hdmlnYXRpb24nKSAmJiBwYXNzZWRQYXJhbXMubmF2aWdhdGlvbiAmJiAocGFzc2VkUGFyYW1zLm5hdmlnYXRpb24ucHJldkVsIHx8IHByZXZFbCkgJiYgKHBhc3NlZFBhcmFtcy5uYXZpZ2F0aW9uLm5leHRFbCB8fCBuZXh0RWwpICYmIChjdXJyZW50UGFyYW1zLm5hdmlnYXRpb24gfHwgY3VycmVudFBhcmFtcy5uYXZpZ2F0aW9uID09PSBmYWxzZSkgJiYgbmF2aWdhdGlvbiAmJiAhbmF2aWdhdGlvbi5wcmV2RWwgJiYgIW5hdmlnYXRpb24ubmV4dEVsKSB7XG4gICAgbmVlZE5hdmlnYXRpb25Jbml0ID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGRlc3Ryb3lNb2R1bGUgPSBtb2QgPT4ge1xuICAgIGlmICghc3dpcGVyW21vZF0pIHJldHVybjtcbiAgICBzd2lwZXJbbW9kXS5kZXN0cm95KCk7XG5cbiAgICBpZiAobW9kID09PSAnbmF2aWdhdGlvbicpIHtcbiAgICAgIGN1cnJlbnRQYXJhbXNbbW9kXS5wcmV2RWwgPSB1bmRlZmluZWQ7XG4gICAgICBjdXJyZW50UGFyYW1zW21vZF0ubmV4dEVsID0gdW5kZWZpbmVkO1xuICAgICAgc3dpcGVyW21vZF0ucHJldkVsID0gdW5kZWZpbmVkO1xuICAgICAgc3dpcGVyW21vZF0ubmV4dEVsID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UGFyYW1zW21vZF0uZWwgPSB1bmRlZmluZWQ7XG4gICAgICBzd2lwZXJbbW9kXS5lbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgdXBkYXRlUGFyYW1zLmZvckVhY2goa2V5ID0+IHtcbiAgICBpZiAoaXNPYmplY3QoY3VycmVudFBhcmFtc1trZXldKSAmJiBpc09iamVjdChwYXNzZWRQYXJhbXNba2V5XSkpIHtcbiAgICAgIGV4dGVuZChjdXJyZW50UGFyYW1zW2tleV0sIHBhc3NlZFBhcmFtc1trZXldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBwYXNzZWRQYXJhbXNba2V5XTtcblxuICAgICAgaWYgKChuZXdWYWx1ZSA9PT0gdHJ1ZSB8fCBuZXdWYWx1ZSA9PT0gZmFsc2UpICYmIChrZXkgPT09ICduYXZpZ2F0aW9uJyB8fCBrZXkgPT09ICdwYWdpbmF0aW9uJyB8fCBrZXkgPT09ICdzY3JvbGxiYXInKSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZGVzdHJveU1vZHVsZShrZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50UGFyYW1zW2tleV0gPSBwYXNzZWRQYXJhbXNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmICh1cGRhdGVQYXJhbXMuaW5jbHVkZXMoJ2NvbnRyb2xsZXInKSAmJiAhbmVlZENvbnRyb2xsZXJJbml0ICYmIHN3aXBlci5jb250cm9sbGVyICYmIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgJiYgY3VycmVudFBhcmFtcy5jb250cm9sbGVyICYmIGN1cnJlbnRQYXJhbXMuY29udHJvbGxlci5jb250cm9sKSB7XG4gICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGN1cnJlbnRQYXJhbXMuY29udHJvbGxlci5jb250cm9sO1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2NoaWxkcmVuJykgJiYgdmlydHVhbCAmJiBjdXJyZW50UGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgIHZpcnR1YWwuc2xpZGVzID0gc2xpZGVzO1xuICAgIHZpcnR1YWwudXBkYXRlKHRydWUpO1xuICB9IGVsc2UgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2NoaWxkcmVuJykgJiYgc3dpcGVyLmxhenkgJiYgc3dpcGVyLnBhcmFtcy5sYXp5LmVuYWJsZWQpIHtcbiAgICBzd2lwZXIubGF6eS5sb2FkKCk7XG4gIH1cblxuICBpZiAobmVlZFRodW1ic0luaXQpIHtcbiAgICBjb25zdCBpbml0aWFsaXplZCA9IHRodW1icy5pbml0KCk7XG4gICAgaWYgKGluaXRpYWxpemVkKSB0aHVtYnMudXBkYXRlKHRydWUpO1xuICB9XG5cbiAgaWYgKG5lZWRDb250cm9sbGVySW5pdCkge1xuICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbDtcbiAgfVxuXG4gIGlmIChuZWVkUGFnaW5hdGlvbkluaXQpIHtcbiAgICBpZiAocGFnaW5hdGlvbkVsKSBjdXJyZW50UGFyYW1zLnBhZ2luYXRpb24uZWwgPSBwYWdpbmF0aW9uRWw7XG4gICAgcGFnaW5hdGlvbi5pbml0KCk7XG4gICAgcGFnaW5hdGlvbi5yZW5kZXIoKTtcbiAgICBwYWdpbmF0aW9uLnVwZGF0ZSgpO1xuICB9XG5cbiAgaWYgKG5lZWRTY3JvbGxiYXJJbml0KSB7XG4gICAgaWYgKHNjcm9sbGJhckVsKSBjdXJyZW50UGFyYW1zLnNjcm9sbGJhci5lbCA9IHNjcm9sbGJhckVsO1xuICAgIHNjcm9sbGJhci5pbml0KCk7XG4gICAgc2Nyb2xsYmFyLnVwZGF0ZVNpemUoKTtcbiAgICBzY3JvbGxiYXIuc2V0VHJhbnNsYXRlKCk7XG4gIH1cblxuICBpZiAobmVlZE5hdmlnYXRpb25Jbml0KSB7XG4gICAgaWYgKG5leHRFbCkgY3VycmVudFBhcmFtcy5uYXZpZ2F0aW9uLm5leHRFbCA9IG5leHRFbDtcbiAgICBpZiAocHJldkVsKSBjdXJyZW50UGFyYW1zLm5hdmlnYXRpb24ucHJldkVsID0gcHJldkVsO1xuICAgIG5hdmlnYXRpb24uaW5pdCgpO1xuICAgIG5hdmlnYXRpb24udXBkYXRlKCk7XG4gIH1cblxuICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnYWxsb3dTbGlkZU5leHQnKSkge1xuICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IHBhc3NlZFBhcmFtcy5hbGxvd1NsaWRlTmV4dDtcbiAgfVxuXG4gIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdhbGxvd1NsaWRlUHJldicpKSB7XG4gICAgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gcGFzc2VkUGFyYW1zLmFsbG93U2xpZGVQcmV2O1xuICB9XG5cbiAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2RpcmVjdGlvbicpKSB7XG4gICAgc3dpcGVyLmNoYW5nZURpcmVjdGlvbihwYXNzZWRQYXJhbXMuZGlyZWN0aW9uLCBmYWxzZSk7XG4gIH1cblxuICBzd2lwZXIudXBkYXRlKCk7XG59XG5cbmV4cG9ydCB7IHVwZGF0ZVN3aXBlciB9OyIsICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiB1cGRhdGVPblZpcnR1YWxEYXRhKHN3aXBlcikge1xuICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIucGFyYW1zLnZpcnR1YWwgfHwgc3dpcGVyLnBhcmFtcy52aXJ0dWFsICYmICFzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gIHN3aXBlci51cGRhdGVQcm9ncmVzcygpO1xuICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuXG4gIGlmIChzd2lwZXIubGF6eSAmJiBzd2lwZXIucGFyYW1zLmxhenkuZW5hYmxlZCkge1xuICAgIHN3aXBlci5sYXp5LmxvYWQoKTtcbiAgfVxuXG4gIGlmIChzd2lwZXIucGFyYWxsYXggJiYgc3dpcGVyLnBhcmFtcy5wYXJhbGxheCAmJiBzd2lwZXIucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQpIHtcbiAgICBzd2lwZXIucGFyYWxsYXguc2V0VHJhbnNsYXRlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyVmlydHVhbChzd2lwZXIsIHNsaWRlcywgdmlydHVhbERhdGEpIHtcbiAgaWYgKCF2aXJ0dWFsRGF0YSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHN0eWxlID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8ge1xuICAgIFtzd2lwZXIucnRsVHJhbnNsYXRlID8gJ3JpZ2h0JyA6ICdsZWZ0J106IGAke3ZpcnR1YWxEYXRhLm9mZnNldH1weGBcbiAgfSA6IHtcbiAgICB0b3A6IGAke3ZpcnR1YWxEYXRhLm9mZnNldH1weGBcbiAgfTtcbiAgcmV0dXJuIHNsaWRlcy5maWx0ZXIoKGNoaWxkLCBpbmRleCkgPT4gaW5kZXggPj0gdmlydHVhbERhdGEuZnJvbSAmJiBpbmRleCA8PSB2aXJ0dWFsRGF0YS50bykubWFwKGNoaWxkID0+IHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgc3dpcGVyLFxuICAgICAgc3R5bGVcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHJlbmRlclZpcnR1YWwsIHVwZGF0ZU9uVmlydHVhbERhdGEgfTsiLCAiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmZ1bmN0aW9uIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoY2FsbGJhY2ssIGRlcHMpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVzZUVmZmVjdChjYWxsYmFjaywgZGVwcyk7XG4gIHJldHVybiB1c2VMYXlvdXRFZmZlY3QoY2FsbGJhY2ssIGRlcHMpO1xufVxuXG5leHBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH07IiwgImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgY29uc3QgU3dpcGVyU2xpZGVDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQobnVsbCk7XG5leHBvcnQgY29uc3QgdXNlU3dpcGVyU2xpZGUgPSAoKSA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KFN3aXBlclNsaWRlQ29udGV4dCk7XG59O1xuZXhwb3J0IGNvbnN0IFN3aXBlckNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmV4cG9ydCBjb25zdCB1c2VTd2lwZXIgPSAoKSA9PiB7XG4gIHJldHVybiB1c2VDb250ZXh0KFN3aXBlckNvbnRleHQpO1xufTsiLCAiZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cblxuaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlU3RhdGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1bmlxdWVDbGFzc2VzIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi91c2UtaXNvbW9ycGhpYy1sYXlvdXQtZWZmZWN0LmpzJztcbmltcG9ydCB7IFN3aXBlclNsaWRlQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5jb25zdCBTd2lwZXJTbGlkZSA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIChfdGVtcCwgZXh0ZXJuYWxSZWYpIHtcbiAgbGV0IHtcbiAgICB0YWc6IFRhZyA9ICdkaXYnLFxuICAgIGNoaWxkcmVuLFxuICAgIGNsYXNzTmFtZSA9ICcnLFxuICAgIHN3aXBlcixcbiAgICB6b29tLFxuICAgIHZpcnR1YWxJbmRleCxcbiAgICAuLi5yZXN0XG4gIH0gPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDtcbiAgY29uc3Qgc2xpZGVFbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW3NsaWRlQ2xhc3Nlcywgc2V0U2xpZGVDbGFzc2VzXSA9IHVzZVN0YXRlKCdzd2lwZXItc2xpZGUnKTtcblxuICBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKF9zLCBlbCwgY2xhc3NOYW1lcykge1xuICAgIGlmIChlbCA9PT0gc2xpZGVFbFJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTbGlkZUNsYXNzZXMoY2xhc3NOYW1lcyk7XG4gICAgfVxuICB9XG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGV4dGVybmFsUmVmKSB7XG4gICAgICBleHRlcm5hbFJlZi5jdXJyZW50ID0gc2xpZGVFbFJlZi5jdXJyZW50O1xuICAgIH1cblxuICAgIGlmICghc2xpZGVFbFJlZi5jdXJyZW50IHx8ICFzd2lwZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkge1xuICAgICAgaWYgKHNsaWRlQ2xhc3NlcyAhPT0gJ3N3aXBlci1zbGlkZScpIHtcbiAgICAgICAgc2V0U2xpZGVDbGFzc2VzKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXBlci5vbignX3NsaWRlQ2xhc3MnLCB1cGRhdGVDbGFzc2VzKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIpIHJldHVybjtcbiAgICAgIHN3aXBlci5vZmYoJ19zbGlkZUNsYXNzJywgdXBkYXRlQ2xhc3Nlcyk7XG4gICAgfTtcbiAgfSk7XG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzd2lwZXIgJiYgc2xpZGVFbFJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTbGlkZUNsYXNzZXMoc3dpcGVyLmdldFNsaWRlQ2xhc3NlcyhzbGlkZUVsUmVmLmN1cnJlbnQpKTtcbiAgICB9XG4gIH0sIFtzd2lwZXJdKTtcbiAgY29uc3Qgc2xpZGVEYXRhID0ge1xuICAgIGlzQWN0aXZlOiBzbGlkZUNsYXNzZXMuaW5kZXhPZignc3dpcGVyLXNsaWRlLWFjdGl2ZScpID49IDAgfHwgc2xpZGVDbGFzc2VzLmluZGV4T2YoJ3N3aXBlci1zbGlkZS1kdXBsaWNhdGUtYWN0aXZlJykgPj0gMCxcbiAgICBpc1Zpc2libGU6IHNsaWRlQ2xhc3Nlcy5pbmRleE9mKCdzd2lwZXItc2xpZGUtdmlzaWJsZScpID49IDAsXG4gICAgaXNEdXBsaWNhdGU6IHNsaWRlQ2xhc3Nlcy5pbmRleE9mKCdzd2lwZXItc2xpZGUtZHVwbGljYXRlJykgPj0gMCxcbiAgICBpc1ByZXY6IHNsaWRlQ2xhc3Nlcy5pbmRleE9mKCdzd2lwZXItc2xpZGUtcHJldicpID49IDAgfHwgc2xpZGVDbGFzc2VzLmluZGV4T2YoJ3N3aXBlci1zbGlkZS1kdXBsaWNhdGUtcHJldicpID49IDAsXG4gICAgaXNOZXh0OiBzbGlkZUNsYXNzZXMuaW5kZXhPZignc3dpcGVyLXNsaWRlLW5leHQnKSA+PSAwIHx8IHNsaWRlQ2xhc3Nlcy5pbmRleE9mKCdzd2lwZXItc2xpZGUtZHVwbGljYXRlLW5leHQnKSA+PSAwXG4gIH07XG5cbiAgY29uc3QgcmVuZGVyQ2hpbGRyZW4gPSAoKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHNsaWRlRGF0YSkgOiBjaGlsZHJlbjtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFnLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiBzbGlkZUVsUmVmLFxuICAgIGNsYXNzTmFtZTogdW5pcXVlQ2xhc3NlcyhgJHtzbGlkZUNsYXNzZXN9JHtjbGFzc05hbWUgPyBgICR7Y2xhc3NOYW1lfWAgOiAnJ31gKSxcbiAgICBcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCI6IHZpcnR1YWxJbmRleFxuICB9LCByZXN0KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3dpcGVyU2xpZGVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHNsaWRlRGF0YVxuICB9LCB6b29tID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzd2lwZXItem9vbS1jb250YWluZXJcIixcbiAgICBcImRhdGEtc3dpcGVyLXpvb21cIjogdHlwZW9mIHpvb20gPT09ICdudW1iZXInID8gem9vbSA6IHVuZGVmaW5lZFxuICB9LCByZW5kZXJDaGlsZHJlbigpKSA6IHJlbmRlckNoaWxkcmVuKCkpKTtcbn0pO1xuU3dpcGVyU2xpZGUuZGlzcGxheU5hbWUgPSAnU3dpcGVyU2xpZGUnO1xuZXhwb3J0IHsgU3dpcGVyU2xpZGUgfTsiLCAiaW1wb3J0IHsgRnJlZU1vZGUsIFRodW1icywgRWZmZWN0RmFkZSB9IGZyb20gXCJzd2lwZXJcIlxuaW1wb3J0IHsgU3dpcGVyLCBTd2lwZXJTbGlkZSB9IGZyb20gXCJzd2lwZXIvcmVhY3RcIlxuLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg2MTQyKTogTW9kdWxlICcuL19JbWFnZScgd2FzIHJlc29sdmVkIHRvICcvVXNlcnMvS2F6dWhvSXMuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuaW1wb3J0IEltYWdlIGZyb20gXCIuL19JbWFnZVwiXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRTKDYxNDIpOiBNb2R1bGUgJy4vX1ZpZGVvJyB3YXMgcmVzb2x2ZWQgdG8gJy9Vc2Vycy9LYXp1aG9Jcy4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG5pbXBvcnQgVmlkZW8gZnJvbSBcIi4vX1ZpZGVvXCJcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUHJldmlldyh7XG4gIGltYWdlcyxcbiAgdGh1bWJzLFxuICBvblN3aXBlcixcbiAgaXNNb2JpbGVcbn06IGFueSkge1xuICByZXR1cm4gaW1hZ2VzLmxlbmd0aCA+IDEgPyAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8U3dpcGVyXG4gICAgICBlZmZlY3Q9e1wiZmFkZVwifVxuICAgICAgZGlyZWN0aW9uPXtpc01vYmlsZSA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwifVxuICAgICAgdGh1bWJzPXt0aHVtYnN9XG4gICAgICBtb2R1bGVzPXtbRnJlZU1vZGUsIFRodW1icywgRWZmZWN0RmFkZV19XG4gICAgICBjbGFzc05hbWU9e1wibXlTd2lwZXIyIGl0ZW1zLXN0YXJ0IGl0ZW1zLWNlbnRlciB3LVs5MCVdIGgtWzQ5Ljg3NXZ3XSB3LWZ1bGwgIXN0aWNreSByZWxhdGl2ZSB0b3AtMTIgdG9wLWF1dG8gYmctd2hpdGUgaC1tYXhcIn1cbiAgICAgIG9uU3dpcGVyPXtvblN3aXBlcn1cbiAgICA+XG4gICAgICB7aW1hZ2VzLm1hcCgobWVkaWE6IGFueSwgaW5kZXg6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgPFN3aXBlclNsaWRlIGtleT17aW5kZXh9IGNsYXNzTmFtZT1cImJnLXdoaXRlICFwb2ludGVyLWV2ZW50cy1hdXRvIGZsZXgtY29sICFoLWZ1bGxcIj5cbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoMTcwMDQpOiBDYW5ub3QgdXNlIEpTWCB1bmxlc3MgdGhlICctLWpzeCcgZmxhZyBpcyBwcm92aWRlZC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICB7bWVkaWE/Lm1lZGlhX3R5cGUgPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5tZWRpYV90eXBlID09PSBcImltYWdlXCIgPyA8SW1hZ2UgbWVkaWE9e21lZGlhfSAvPiA6IDxWaWRlbyBtZWRpYT17bWVkaWF9IC8+fVxuICAgICAgICAgIDwvU3dpcGVyU2xpZGU+XG4gICAgICAgIClcbiAgICAgIH0pfVxuICAgIDwvU3dpcGVyPlxuICApIDogKFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8aW1nIHNyYz17aW1hZ2VzWzBdPy5wcmV2aWV3X2ltYWdlLnNyY30gYWx0PXtpbWFnZXNbMF0/LnByZXZpZXdfaW1hZ2UuYWx0fSBjbGFzc05hbWU9XCJvYmplY3QtY29udGFpbiBtYXgtdy1bOTAlXSBzdGlja3kgdG9wLTBcIiBsb2FkaW5nPVwibGF6eVwiIGRlY29kaW5nPVwiYXN5bmNcIiAvPlxuICApO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEltYWdlKHtcbiAgbWVkaWEsXG4gIGNsYXNzTmFtZSA9IFwib2JqZWN0LWNvbnRhaW4gdy1mdWxsIG1heC1oLVtjYWxjKDkwdmgtNS40cmVtLTQ5Ljg3NXZ3KV1cIlxufTogYW55KSB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUygxNzAwNCk6IENhbm5vdCB1c2UgSlNYIHVubGVzcyB0aGUgJy0tanN4JyBmbGFnIGlzIHByb3ZpZGVkLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICA8PlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyg3MDI2KTogSlNYIGVsZW1lbnQgaW1wbGljaXRseSBoYXMgdHlwZSAnYW55JyBiZWNhdXNlIG5vIGkuLi4gUmVtb3ZlIHRoaXMgY29tbWVudCB0byBzZWUgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZVxuICAgICAgPGltZyBzcmM9e21lZGlhLnByZXZpZXdfaW1hZ2Uuc3JjfSBhbHQ9e21lZGlhPy5hbHQgPz8gbWVkaWE/LnZhcmlhbnQ/LnRpdGxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gbG9hZGluZz1cImxhenlcIiBkZWNvZGluZz1cImFzeW5jXCIgLz5cbiAgICAgIHttZWRpYT8udmFyaWFudD8ub3B0aW9uMiAmJiAoXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCB3LWZ1bGwgZ2FwLXgtMlwiPlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2BibG9jayBsZWFkaW5nLW5vbmUgcC0yIHJvdW5kZWQtZnVsbCBiZy12LSR7bWVkaWEudmFyaWFudC5vcHRpb24yLnRvTG93ZXJDYXNlKCl9YH0+PC9zcGFuPlxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB5LTQgbGVhZGluZy1ub25lIFwiPnttZWRpYS52YXJpYW50Lm9wdGlvbjJ9PC9kaXY+XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMoNzAyNik6IEpTWCBlbGVtZW50IGltcGxpY2l0bHkgaGFzIHR5cGUgJ2FueScgYmVjYXVzZSBubyBpLi4uIFJlbW92ZSB0aGlzIGNvbW1lbnQgdG8gc2VlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmlkZW8oe1xuICBtZWRpYVxufTogYW55KSB7XG4gIGNvbnN0IGh0bWwgPSBtZWRpYS5tZWRpYV90eXBlID09PSBcImV4dGVybmFsX3ZpZGVvXCIgPyBtZWRpYS5leHRlcm5hbF92aWRlbyA6IG1lZGlhLm5vcm1hbF92aWRlb1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTKDcwMjYpOiBKU1ggZWxlbWVudCBpbXBsaWNpdGx5IGhhcyB0eXBlICdhbnknIGJlY2F1c2Ugbm8gaS4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgZmxleCBwbGFjZS1jb250ZW50LWNlbnRlciBwbGFjZS1pdGVtcy1jZW50ZXJcIiBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IGh0bWwgfX0+PC9kaXY+XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQU87Ozs7Ozs7Ozs7Ozs7OztBQ1NBLFdBQWdCLElBQUssSUFBQTtBQUFBLFdBRWxCLE1BQUs7QUFBTyxPQUFJLE1BQUssR0FBTTtBQUFBLFNBQ1A7QUFBQTtBQVN2QixXQUFvQixJQUFBO0FBQUEsTUFDdEIsS0FBYSxHQUFLO0FBQ2xCLFFBQVksR0FBVyxZQUFZLEVBQUE7QUFBQTtBRVZ4QyxXQUE4QixJQUFNLElBQU8sSUFBQTtBQUFBLE1BRXpDLElBQ0Es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
